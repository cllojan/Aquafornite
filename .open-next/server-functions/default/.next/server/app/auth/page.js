(()=>{var a={};a.id=365,a.ids=[365],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},2947:(a,b,c)=>{"use strict";c.d(b,{f:()=>f});var d=c(97990);let e=(0,d.CN)({is:a=>"TopNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"TopNode",expression:a,modifiers:b})});function f(a,b){var c;if(!(0,d.Et)(a)&&!(0,d.sI)(a))throw Error(`Invalid top expression: ${a}`);if(!(0,d.b0)(b)&&"percent"!==(c=b)&&"with ties"!==c&&"percent with ties"!==c)throw Error(`Invalid top modifiers: ${b}`);return e.create(a,b)}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3727:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{MutableRequestCookiesAdapter:function(){return l},ReadonlyRequestCookiesError:function(){return g},RequestCookiesAdapter:function(){return h},appendMutableCookies:function(){return k},areCookiesMutableInCurrentPhase:function(){return n},createCookiesWithMutableAccessCheck:function(){return m},getModifiedCookieValues:function(){return j},responseCookiesToRequestCookies:function(){return p}});let d=c(44500),e=c(63981),f=c(29294);class g extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new g}}class h{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return g.callable;default:return e.ReflectAdapter.get(a,b,c)}}})}}let i=Symbol.for("next.mutated.cookies");function j(a){let b=a[i];return b&&Array.isArray(b)&&0!==b.length?b:[]}function k(a,b){let c=j(b);if(0===c.length)return!1;let e=new d.ResponseCookies(a),f=e.getAll();for(let a of c)e.set(a);for(let a of f)e.set(a);return!0}class l{static wrap(a,b){let c=new d.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let g=[],h=new Set,j=()=>{let a=f.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=!0),g=c.getAll().filter(a=>h.has(a.name)),b){let a=[];for(let b of g){let c=new d.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case i:return g;case"delete":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return e.ReflectAdapter.get(a,b,c)}}});return k}}function m(a){let b=new Proxy(a.mutableCookies,{get(c,d,f){switch(d){case"delete":return function(...d){return o(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return o(a,"cookies().set"),c.set(...d),b};default:return e.ReflectAdapter.get(c,d,f)}}});return b}function n(a){return"action"===a.phase}function o(a,b){if(!n(a))throw new g}function p(a){let b=new d.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},5209:(a,b,c)=>{"use strict";c.d(b,{b:()=>h});var d=c(97990),e=c(78039),f=c(97413);let g=(0,d.CN)({is:a=>"OnNode"===a.kind,create:a=>(0,d.CN)({kind:"OnNode",on:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,on:"And"===b?e.s.create(a.on,c):f.K.create(a.on,c)})}),h=(0,d.CN)({is:a=>"JoinNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"JoinNode",joinType:a,table:b,on:void 0}),createWithOn:(a,b,c)=>(0,d.CN)({kind:"JoinNode",joinType:a,table:b,on:g.create(c)}),cloneWithOn:(a,b)=>(0,d.CN)({...a,on:a.on?g.cloneWithOperation(a.on,"And",b):g.create(b)})})},5595:(a,b,c)=>{"use strict";c.d(b,{B:()=>n});var d=c(67798),e=c(46975),f=c(5209),g=c(16256),h=c(36646),i=c(36036),j=c(79662);let k=(0,c(97990).CN)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),l={json_agg:!0,to_json:!0};class m extends h.V{#a;#b=new Set;#c=new Set;constructor(a){super(),this.#a=a}transformNodeImpl(a,b){if(!this.#d(a))return super.transformNodeImpl(a,b);let c=this.#e(a);for(let a of c)this.#c.add(a);let d=this.#f(a);for(let a of d)this.#b.add(a);let e=super.transformNodeImpl(a,b);for(let a of d)this.#b.delete(a);for(let a of c)this.#c.delete(a);return e}transformSchemableIdentifier(a,b){let c=super.transformSchemableIdentifier(a,b);return c.schema||!this.#b.has(a.identifier.name)?c:{...c,schema:e.O.create(this.#a)}}transformReferences(a,b){let c=super.transformReferences(a,b);return c.table.table.schema?c:{...c,table:j.H.createWithSchema(this.#a,c.table.table.identifier.name)}}transformAggregateFunction(a,b){return{...super.transformAggregateFunction({...a,aggregated:[]},b),aggregated:this.#g(a,b,"aggregated")}}transformFunction(a,b){return{...super.transformFunction({...a,arguments:[]},b),arguments:this.#g(a,b,"arguments")}}#g(a,b,c){return l[a.func]?a[c].map(a=>!j.H.is(a)||a.table.schema?this.transformNode(a,b):{...a,table:this.transformIdentifier(a.table.identifier,b)}):this.transformNodeList(a[c],b)}#d(a){return a.kind in k}#f(a){let b=new Set;if("name"in a&&a.name&&i.y.is(a.name)&&this.#h(a.name,b),"from"in a&&a.from)for(let c of a.from.froms)this.#i(c,b);if("into"in a&&a.into&&this.#i(a.into,b),"table"in a&&a.table&&this.#i(a.table,b),"joins"in a&&a.joins)for(let c of a.joins)this.#i(c.table,b);return"using"in a&&a.using&&(f.b.is(a.using)?this.#i(a.using.table,b):this.#i(a.using,b)),b}#e(a){let b=new Set;return"with"in a&&a.with&&this.#j(a.with,b),b}#i(a,b){if(j.H.is(a))this.#h(a.table,b);else if(d.N.is(a)&&j.H.is(a.node))this.#h(a.node.table,b);else if(g.v.is(a))for(let c of a.items)this.#i(c,b)}#h(a,b){let c=a.identifier.name;this.#b.has(c)||this.#c.has(c)||b.add(c)}#j(a,b){for(let c of a.expressions){let a=c.name.table.table.identifier.name;this.#c.has(a)||b.add(a)}}}class n{#k;constructor(a){this.#k=new m(a)}transformQuery(a){return this.#k.transformNode(a.node,a.queryId)}async transformResult(a){return a.result}}},6318:(a,b,c)=>{"use strict";c.d(b,{default:()=>k});var d=c(21124),e=c(42378),f=c(85708);let g=(0,f.createServerReference)("7fce3f53e1f05586de0417cdacb01d33519151b45e",f.callServer,void 0,f.findSourceMapURL,"signInSocial"),h=(0,f.createServerReference)("7f8802913bf15bda51a2953c5bb2ec122e0af7a7e1",f.callServer,void 0,f.findSourceMapURL,"signIn"),i=(0,f.createServerReference)("7f913036436356ffbc1146c83ef819704c9cb0397e",f.callServer,void 0,f.findSourceMapURL,"signUp");var j=c(38301);function k(){let[a,b]=(0,j.useState)(!0),[c,f]=(0,j.useState)(""),[k,l]=(0,j.useState)(""),[m,n]=(0,j.useState)(""),[o,p]=(0,j.useState)(!1),[q,r]=(0,j.useState)("");(0,e.useRouter)(),(0,e.useSearchParams)();let s=async a=>{p(!0),r("");try{await g(a)}catch(b){r(`Error authenticating with ${a}: ${b instanceof Error?b.message:"Unknown error"}`)}finally{p(!1)}},t=async b=>{b.preventDefault(),p(!0),r("");try{a?(await h(c,k)).user||r("Invalid email or password"):(await i(c,k,m)).user||r("Failed to create account")}catch(a){r(`Authentication error: ${a instanceof Error?a.message:"Unknown Error"}`)}finally{p(!1)}};return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,d.jsx)("div",{className:"flex items-center justify-center p-4 pt-20",children:(0,d.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:a?"Welcome Back":"Create Account"}),(0,d.jsx)("p",{className:"text-gray-600",children:a?"Sign in to your account to continue":"Sign up to get started with better-auth"})]}),q&&(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,d.jsx)("div",{className:"ml-3",children:(0,d.jsx)("p",{className:"text-sm text-red-800",children:q})})]})}),(0,d.jsx)("div",{className:"space-y-3",children:(0,d.jsxs)("button",{onClick:()=>s("discord"),disabled:o,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-gray-900 text-white hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})}),"Continue with discord"]})}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,d.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,d.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,d.jsx)("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"Or continue with"})})]}),(0,d.jsxs)("form",{onSubmit:t,className:"space-y-4",children:[!a&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,d.jsx)("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!a,value:m,onChange:a=>n(a.target.value),className:"w-full px-3 py-2 border text-black border-gray-300 rounded-lg text-black shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter your full name"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),(0,d.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c,onChange:a=>f(a.target.value),className:"w-full px-3 py-2 border text-black border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter your email"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,d.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:a?"current-password":"new-password",required:!0,value:k,onChange:a=>l(a.target.value),className:"w-full px-3 py-2 border text-black border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter your password"})]}),(0,d.jsx)("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",children:o?(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Signing in...":"Creating account..."]}):a?"Sign In":"Create Account"})]}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("button",{type:"button",onClick:()=>{b(!a),r(""),n("")},className:"text-indigo-600 hover:text-indigo-500 text-sm font-medium transition-colors",children:a?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})})}},7265:a=>{"use strict";var b=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,e=Object.prototype.hasOwnProperty,f={};function g(a){var b;let c=["path"in a&&a.path&&`Path=${a.path}`,"expires"in a&&(a.expires||0===a.expires)&&`Expires=${("number"==typeof a.expires?new Date(a.expires):a.expires).toUTCString()}`,"maxAge"in a&&"number"==typeof a.maxAge&&`Max-Age=${a.maxAge}`,"domain"in a&&a.domain&&`Domain=${a.domain}`,"secure"in a&&a.secure&&"Secure","httpOnly"in a&&a.httpOnly&&"HttpOnly","sameSite"in a&&a.sameSite&&`SameSite=${a.sameSite}`,"partitioned"in a&&a.partitioned&&"Partitioned","priority"in a&&a.priority&&`Priority=${a.priority}`].filter(Boolean),d=`${a.name}=${encodeURIComponent(null!=(b=a.value)?b:"")}`;return 0===c.length?d:`${d}; ${c.join("; ")}`}function h(a){let b=new Map;for(let c of a.split(/; */)){if(!c)continue;let a=c.indexOf("=");if(-1===a){b.set(c,"true");continue}let[d,e]=[c.slice(0,a),c.slice(a+1)];try{b.set(d,decodeURIComponent(null!=e?e:"true"))}catch{}}return b}function i(a){if(!a)return;let[[b,c],...d]=h(a),{domain:e,expires:f,httponly:g,maxage:i,path:l,samesite:m,secure:n,partitioned:o,priority:p}=Object.fromEntries(d.map(([a,b])=>[a.toLowerCase().replace(/-/g,""),b]));{var q,r,s={name:b,value:decodeURIComponent(c),domain:e,...f&&{expires:new Date(f)},...g&&{httpOnly:!0},..."string"==typeof i&&{maxAge:Number(i)},path:l,...m&&{sameSite:j.includes(q=(q=m).toLowerCase())?q:void 0},...n&&{secure:!0},...p&&{priority:k.includes(r=(r=p).toLowerCase())?r:void 0},...o&&{partitioned:!0}};let a={};for(let b in s)s[b]&&(a[b]=s[b]);return a}}((a,c)=>{for(var d in c)b(a,d,{get:c[d],enumerable:!0})})(f,{RequestCookies:()=>l,ResponseCookies:()=>m,parseCookie:()=>h,parseSetCookie:()=>i,stringifyCookie:()=>g}),a.exports=((a,f,g,h)=>{if(f&&"object"==typeof f||"function"==typeof f)for(let i of d(f))e.call(a,i)||i===g||b(a,i,{get:()=>f[i],enumerable:!(h=c(f,i))||h.enumerable});return a})(b({},"__esModule",{value:!0}),f);var j=["strict","lax","none"],k=["low","medium","high"],l=class{constructor(a){this._parsed=new Map,this._headers=a;let b=a.get("cookie");if(b)for(let[a,c]of h(b))this._parsed.set(a,{name:a,value:c})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed);if(!a.length)return c.map(([a,b])=>b);let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(([a])=>a===d).map(([a,b])=>b)}has(a){return this._parsed.has(a)}set(...a){let[b,c]=1===a.length?[a[0].name,a[0].value]:a,d=this._parsed;return d.set(b,{name:b,value:c}),this._headers.set("cookie",Array.from(d).map(([a,b])=>g(b)).join("; ")),this}delete(a){let b=this._parsed,c=Array.isArray(a)?a.map(a=>b.delete(a)):b.delete(a);return this._headers.set("cookie",Array.from(b).map(([a,b])=>g(b)).join("; ")),c}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a=>`${a.name}=${encodeURIComponent(a.value)}`).join("; ")}},m=class{constructor(a){var b,c,d;this._parsed=new Map,this._headers=a;let e=null!=(d=null!=(c=null==(b=a.getSetCookie)?void 0:b.call(a))?c:a.get("set-cookie"))?d:[];for(let a of Array.isArray(e)?e:function(a){if(!a)return[];var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}(e)){let b=i(a);b&&this._parsed.set(b.name,b)}}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed.values());if(!a.length)return c;let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(a=>a.name===d)}has(a){return this._parsed.has(a)}set(...a){let[b,c,d]=1===a.length?[a[0].name,a[0].value,a[0]]:a,e=this._parsed;return e.set(b,function(a={name:"",value:""}){return"number"==typeof a.expires&&(a.expires=new Date(a.expires)),a.maxAge&&(a.expires=new Date(Date.now()+1e3*a.maxAge)),(null===a.path||void 0===a.path)&&(a.path="/"),a}({name:b,value:c,...d})),function(a,b){for(let[,c]of(b.delete("set-cookie"),a)){let a=g(c);b.append("set-cookie",a)}}(e,this._headers),this}delete(...a){let[b,c]="string"==typeof a[0]?[a[0]]:[a[0].name,a[0]];return this.set({...c,name:b,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(g).join("; ")}}},8625:(a,b)=>{"use strict";function c(a){return"("===a[0]&&a.endsWith(")")}function d(a){return a.startsWith("@")&&"@children"!==a}function e(a,b){if(a.includes(f)){let a=JSON.stringify(b);return"{}"!==a?f+"?"+a:f}return a}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DEFAULT_SEGMENT_KEY:function(){return g},PAGE_SEGMENT_KEY:function(){return f},addSearchParamsIfPageSegment:function(){return e},isGroupSegment:function(){return c},isParallelRouteSegment:function(){return d}});let f="__PAGE__",g="__DEFAULT__"},8711:(a,b,c)=>{"use strict";c.d(b,{N:()=>e});var d=c(97990);function e(a){return(0,d.Gv)(a)&&(0,d.Tn)(a.toOperationNode)}},8974:(a,b,c)=>{"use strict";c.d(b,{L:()=>o});var d=c(52116),e=c(70946),f=c(13624),g=c(62298),h=c(83913),i=c(97990);let j=(0,i.CN)({is:a=>"ReturningNode"===a.kind,create:a=>(0,i.CN)({kind:"ReturningNode",selections:(0,i.CN)(a)}),cloneWithSelections:(a,b)=>(0,i.CN)({...a,selections:a.selections?(0,i.CN)([...a.selections,...b]):(0,i.CN)(b)})}),k=(0,i.CN)({is:a=>"ExplainNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ExplainNode",format:a,options:b})});var l=c(26883);let m=(0,i.CN)({is:a=>"OutputNode"===a.kind,create:a=>(0,i.CN)({kind:"OutputNode",selections:(0,i.CN)(a)}),cloneWithSelections:(a,b)=>(0,i.CN)({...a,selections:a.selections?(0,i.CN)([...a.selections,...b]):(0,i.CN)(b)})});var n=c(18662);let o=(0,i.CN)({is:a=>e.L.is(a)||d.o.is(a)||f.U.is(a)||g.e.is(a)||l.r.is(a),cloneWithEndModifier:(a,b)=>(0,i.CN)({...a,endModifiers:a.endModifiers?(0,i.CN)([...a.endModifiers,b]):(0,i.CN)([b])}),cloneWithWhere:(a,b)=>(0,i.CN)({...a,where:a.where?h.o.cloneWithOperation(a.where,"And",b):h.o.create(b)}),cloneWithJoin:(a,b)=>(0,i.CN)({...a,joins:a.joins?(0,i.CN)([...a.joins,b]):(0,i.CN)([b])}),cloneWithReturning:(a,b)=>(0,i.CN)({...a,returning:a.returning?j.cloneWithSelections(a.returning,b):j.create(b)}),cloneWithoutReturning:a=>(0,i.CN)({...a,returning:void 0}),cloneWithoutWhere:a=>(0,i.CN)({...a,where:void 0}),cloneWithExplain:(a,b,c)=>(0,i.CN)({...a,explain:k.create(b,c?.toOperationNode())}),cloneWithTop:(a,b)=>(0,i.CN)({...a,top:b}),cloneWithOutput:(a,b)=>(0,i.CN)({...a,output:a.output?m.cloneWithSelections(a.output,b):m.create(b)}),cloneWithOrderByItems:(a,b)=>(0,i.CN)({...a,orderBy:a.orderBy?n.O.cloneWithItems(a.orderBy,b):n.O.create(b)}),cloneWithoutOrderBy:a=>(0,i.CN)({...a,orderBy:void 0})})},8991:(a,b)=>{"use strict";function c(a){return a.startsWith("/")?a:"/"+a}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ensureLeadingSlash",{enumerable:!0,get:function(){return c}})},9907:(a,b,c)=>{"use strict";var d=c(28354),e=c(10407),f={stream:!0},g=new Map;function h(a){var b=globalThis.__next_require__(a);return"function"!=typeof b.then||"fulfilled"===b.status?null:(b.then(function(a){b.status="fulfilled",b.value=a},function(a){b.status="rejected",b.reason=a}),b)}function i(){}function j(a){for(var b=a[1],d=[],e=0;e<b.length;){var f=b[e++];b[e++];var j=g.get(f);if(void 0===j){j=c.e(f),d.push(j);var k=g.set.bind(g,f,null);j.then(k,i),g.set(f,j)}else null!==j&&d.push(j)}return 4===a.length?0===d.length?h(a[0]):Promise.all(d).then(function(){return h(a[0])}):0<d.length?Promise.all(d):null}function k(a){var b=globalThis.__next_require__(a[0]);if(4===a.length&&"function"==typeof b.then)if("fulfilled"===b.status)b=b.value;else throw b.reason;return"*"===a[2]?b:""===a[2]?b.__esModule?b.default:b:b[a[2]]}var l=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,m=Symbol.for("react.transitional.element"),n=Symbol.for("react.lazy"),o=Symbol.iterator,p=Symbol.asyncIterator,q=Array.isArray,r=Object.getPrototypeOf,s=Object.prototype,t=new WeakMap;function u(a,b,c,d,e){function f(a,c){c=new Blob([new Uint8Array(c.buffer,c.byteOffset,c.byteLength)]);var d=i++;return null===k&&(k=new FormData),k.append(b+d,c),"$"+a+d.toString(16)}function g(a,v){if(null===v)return null;if("object"==typeof v){switch(v.$$typeof){case m:if(void 0!==c&&-1===a.indexOf(":")){var w,x,y,z,A,B=l.get(this);if(void 0!==B)return c.set(B+":"+a,v),"$T"}throw Error("React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.");case n:B=v._payload;var C=v._init;null===k&&(k=new FormData),j++;try{var D=C(B),E=i++,F=h(D,E);return k.append(b+E,F),"$"+E.toString(16)}catch(a){if("object"==typeof a&&null!==a&&"function"==typeof a.then){j++;var G=i++;return B=function(){try{var a=h(v,G),c=k;c.append(b+G,a),j--,0===j&&d(c)}catch(a){e(a)}},a.then(B,B),"$"+G.toString(16)}return e(a),null}finally{j--}}if("function"==typeof v.then){null===k&&(k=new FormData),j++;var H=i++;return v.then(function(a){try{var c=h(a,H);(a=k).append(b+H,c),j--,0===j&&d(a)}catch(a){e(a)}},e),"$@"+H.toString(16)}if(void 0!==(B=l.get(v)))if(u!==v)return B;else u=null;else -1===a.indexOf(":")&&void 0!==(B=l.get(this))&&(a=B+":"+a,l.set(v,a),void 0!==c&&c.set(a,v));if(q(v))return v;if(v instanceof FormData){null===k&&(k=new FormData);var I=k,J=b+(a=i++)+"_";return v.forEach(function(a,b){I.append(J+b,a)}),"$K"+a.toString(16)}if(v instanceof Map)return a=i++,B=h(Array.from(v),a),null===k&&(k=new FormData),k.append(b+a,B),"$Q"+a.toString(16);if(v instanceof Set)return a=i++,B=h(Array.from(v),a),null===k&&(k=new FormData),k.append(b+a,B),"$W"+a.toString(16);if(v instanceof ArrayBuffer)return a=new Blob([v]),B=i++,null===k&&(k=new FormData),k.append(b+B,a),"$A"+B.toString(16);if(v instanceof Int8Array)return f("O",v);if(v instanceof Uint8Array)return f("o",v);if(v instanceof Uint8ClampedArray)return f("U",v);if(v instanceof Int16Array)return f("S",v);if(v instanceof Uint16Array)return f("s",v);if(v instanceof Int32Array)return f("L",v);if(v instanceof Uint32Array)return f("l",v);if(v instanceof Float32Array)return f("G",v);if(v instanceof Float64Array)return f("g",v);if(v instanceof BigInt64Array)return f("M",v);if(v instanceof BigUint64Array)return f("m",v);if(v instanceof DataView)return f("V",v);if("function"==typeof Blob&&v instanceof Blob)return null===k&&(k=new FormData),a=i++,k.append(b+a,v),"$B"+a.toString(16);if(a=null===(w=v)||"object"!=typeof w?null:"function"==typeof(w=o&&w[o]||w["@@iterator"])?w:null)return(B=a.call(v))===v?(a=i++,B=h(Array.from(B),a),null===k&&(k=new FormData),k.append(b+a,B),"$i"+a.toString(16)):Array.from(B);if("function"==typeof ReadableStream&&v instanceof ReadableStream)return function(a){try{var c,f,h,l,m,n,o,p=a.getReader({mode:"byob"})}catch(l){return c=a.getReader(),null===k&&(k=new FormData),f=k,j++,h=i++,c.read().then(function a(i){if(i.done)f.append(b+h,"C"),0==--j&&d(f);else try{var k=JSON.stringify(i.value,g);f.append(b+h,k),c.read().then(a,e)}catch(a){e(a)}},e),"$R"+h.toString(16)}return l=p,null===k&&(k=new FormData),m=k,j++,n=i++,o=[],l.read(new Uint8Array(1024)).then(function a(c){c.done?(c=i++,m.append(b+c,new Blob(o)),m.append(b+n,'"$o'+c.toString(16)+'"'),m.append(b+n,"C"),0==--j&&d(m)):(o.push(c.value),l.read(new Uint8Array(1024)).then(a,e))},e),"$r"+n.toString(16)}(v);if("function"==typeof(a=v[p]))return x=v,y=a.call(v),null===k&&(k=new FormData),z=k,j++,A=i++,x=x===y,y.next().then(function a(c){if(c.done){if(void 0===c.value)z.append(b+A,"C");else try{var f=JSON.stringify(c.value,g);z.append(b+A,"C"+f)}catch(a){e(a);return}0==--j&&d(z)}else try{var h=JSON.stringify(c.value,g);z.append(b+A,h),y.next().then(a,e)}catch(a){e(a)}},e),"$"+(x?"x":"X")+A.toString(16);if((a=r(v))!==s&&(null===a||null!==r(a))){if(void 0===c)throw Error("Only plain objects, and a few built-ins, can be passed to Server Functions. Classes or null prototypes are not supported.");return"$T"}return v}if("string"==typeof v)return"Z"===v[v.length-1]&&this[a]instanceof Date?"$D"+v:a="$"===v[0]?"$"+v:v;if("boolean"==typeof v)return v;if("number"==typeof v)return Number.isFinite(v)?0===v&&-1/0==1/v?"$-0":v:1/0===v?"$Infinity":-1/0===v?"$-Infinity":"$NaN";if(void 0===v)return"$undefined";if("function"==typeof v){if(void 0!==(B=t.get(v)))return a=JSON.stringify({id:B.id,bound:B.bound},g),null===k&&(k=new FormData),B=i++,k.set(b+B,a),"$F"+B.toString(16);if(void 0!==c&&-1===a.indexOf(":")&&void 0!==(B=l.get(this)))return c.set(B+":"+a,v),"$T";throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof v){if(void 0!==c&&-1===a.indexOf(":")&&void 0!==(B=l.get(this)))return c.set(B+":"+a,v),"$T";throw Error("Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.")}if("bigint"==typeof v)return"$n"+v.toString(10);throw Error("Type "+typeof v+" is not supported as an argument to a Server Function.")}function h(a,b){return"object"==typeof a&&null!==a&&(b="$"+b.toString(16),l.set(a,b),void 0!==c&&c.set(b,a)),u=a,JSON.stringify(a,g)}var i=1,j=0,k=null,l=new WeakMap,u=a,v=h(a,0);return null===k?d(v):(k.set(b+"0",v),0===j&&d(k)),function(){0<j&&(j=0,null===k?d(v):d(k))}}var v=new WeakMap;function w(a){var b=t.get(this);if(!b)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var c=null;if(null!==b.bound){if((c=v.get(b))||(d={id:b.id,bound:b.bound},g=new Promise(function(a,b){e=a,f=b}),u(d,"",void 0,function(a){if("string"==typeof a){var b=new FormData;b.append("0",a),a=b}g.status="fulfilled",g.value=a,e(a)},function(a){g.status="rejected",g.reason=a,f(a)}),c=g,v.set(b,c)),"rejected"===c.status)throw c.reason;if("fulfilled"!==c.status)throw c;b=c.value;var d,e,f,g,h=new FormData;b.forEach(function(b,c){h.append("$ACTION_"+a+":"+c,b)}),c=h,b="$ACTION_REF_"+a}else b="$ACTION_ID_"+b.id;return{name:b,method:"POST",encType:"multipart/form-data",data:c}}function x(a,b){var c=t.get(this);if(!c)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(c.id!==a)return!1;var d=c.bound;if(null===d)return 0===b;switch(d.status){case"fulfilled":return d.value.length===b;case"pending":throw d;case"rejected":throw d.reason;default:throw"string"!=typeof d.status&&(d.status="pending",d.then(function(a){d.status="fulfilled",d.value=a},function(a){d.status="rejected",d.reason=a})),d}}function y(a,b,c,d){t.has(a)||(t.set(a,{id:b,originalBind:a.bind,bound:c}),Object.defineProperties(a,{$$FORM_ACTION:{value:void 0===d?w:function(){var a=t.get(this);if(!a)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var b=a.bound;return null===b&&(b=Promise.resolve([])),d(a.id,b)}},$$IS_SIGNATURE_EQUAL:{value:x},bind:{value:B}}))}var z=Function.prototype.bind,A=Array.prototype.slice;function B(){var a=t.get(this);if(!a)return z.apply(this,arguments);var b=a.originalBind.apply(this,arguments),c=A.call(arguments,1),d=null;return d=null!==a.bound?Promise.resolve(a.bound).then(function(a){return a.concat(c)}):Promise.resolve(c),t.set(b,{id:a.id,originalBind:b.bind,bound:d}),Object.defineProperties(b,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:x},bind:{value:B}}),b}function C(a,b,c){this.status=a,this.value=b,this.reason=c}function D(a){switch(a.status){case"resolved_model":O(a);break;case"resolved_module":P(a)}switch(a.status){case"fulfilled":return a.value;case"pending":case"blocked":case"halted":throw a;default:throw a.reason}}function E(a,b){for(var c=0;c<a.length;c++){var d=a[c];"function"==typeof d?d(b):T(d,b)}}function F(a,b){for(var c=0;c<a.length;c++){var d=a[c];"function"==typeof d?d(b):U(d,b)}}function G(a,b){var c=b.handler.chunk;if(null===c)return null;if(c===a)return b.handler;if(null!==(b=c.value))for(c=0;c<b.length;c++){var d=b[c];if("function"!=typeof d&&null!==(d=G(a,d)))return d}return null}function H(a,b,c){switch(a.status){case"fulfilled":E(b,a.value);break;case"blocked":for(var d=0;d<b.length;d++){var e=b[d];if("function"!=typeof e){var f=G(a,e);null!==f&&(T(e,f.value),b.splice(d,1),d--,null!==c&&-1!==(e=c.indexOf(e))&&c.splice(e,1))}}case"pending":if(a.value)for(d=0;d<b.length;d++)a.value.push(b[d]);else a.value=b;if(a.reason){if(c)for(b=0;b<c.length;b++)a.reason.push(c[b])}else a.reason=c;break;case"rejected":c&&F(c,a.reason)}}function I(a,b,c){"pending"!==b.status&&"blocked"!==b.status?b.reason.error(c):(a=b.reason,b.status="rejected",b.reason=c,null!==a&&F(a,c))}function J(a,b,c){return new C("resolved_model",(c?'{"done":true,"value":':'{"done":false,"value":')+b+"}",a)}function K(a,b,c,d){L(a,b,(d?'{"done":true,"value":':'{"done":false,"value":')+c+"}")}function L(a,b,c){if("pending"!==b.status)b.reason.enqueueModel(c);else{var d=b.value,e=b.reason;b.status="resolved_model",b.value=c,b.reason=a,null!==d&&(O(b),H(b,d,e))}}function M(a,b,c){if("pending"===b.status||"blocked"===b.status){a=b.value;var d=b.reason;b.status="resolved_module",b.value=c,null!==a&&(P(b),H(b,a,d))}}C.prototype=Object.create(Promise.prototype),C.prototype.then=function(a,b){switch(this.status){case"resolved_model":O(this);break;case"resolved_module":P(this)}switch(this.status){case"fulfilled":"function"==typeof a&&a(this.value);break;case"pending":case"blocked":"function"==typeof a&&(null===this.value&&(this.value=[]),this.value.push(a)),"function"==typeof b&&(null===this.reason&&(this.reason=[]),this.reason.push(b));break;case"halted":break;default:"function"==typeof b&&b(this.reason)}};var N=null;function O(a){var b=N;N=null;var c=a.value,d=a.reason;a.status="blocked",a.value=null,a.reason=null;try{var e=JSON.parse(c,d._fromJSON),f=a.value;if(null!==f&&(a.value=null,a.reason=null,E(f,e)),null!==N){if(N.errored)throw N.reason;if(0<N.deps){N.value=e,N.chunk=a;return}}a.status="fulfilled",a.value=e}catch(b){a.status="rejected",a.reason=b}finally{N=b}}function P(a){try{var b=k(a.value);a.status="fulfilled",a.value=b}catch(b){a.status="rejected",a.reason=b}}function Q(a,b){a._closed=!0,a._closedReason=b,a._chunks.forEach(function(c){"pending"===c.status&&I(a,c,b)})}function R(a){return{$$typeof:n,_payload:a,_init:D}}function S(a,b){var c=a._chunks,d=c.get(b);return d||(d=a._closed?new C("rejected",null,a._closedReason):new C("pending",null,null),c.set(b,d)),d}function T(a,b){for(var c=a.response,d=a.handler,e=a.parentObject,f=a.key,g=a.map,h=a.path,i=1;i<h.length;i++){for(;b.$$typeof===n;)if((b=b._payload)===d.chunk)b=d.value;else{switch(b.status){case"resolved_model":O(b);break;case"resolved_module":P(b)}switch(b.status){case"fulfilled":b=b.value;continue;case"blocked":var j=G(b,a);if(null!==j){b=j.value;continue}case"pending":h.splice(0,i-1),null===b.value?b.value=[a]:b.value.push(a),null===b.reason?b.reason=[a]:b.reason.push(a);return;case"halted":return;default:U(a,b.reason);return}}b=b[h[i]]}a=g(c,b,e,f),e[f]=a,""===f&&null===d.value&&(d.value=a),e[0]===m&&"object"==typeof d.value&&null!==d.value&&d.value.$$typeof===m&&(e=d.value,"3"===f)&&(e.props=a),d.deps--,0===d.deps&&null!==(f=d.chunk)&&"blocked"===f.status&&(e=f.value,f.status="fulfilled",f.value=d.value,f.reason=d.reason,null!==e&&E(e,d.value))}function U(a,b){var c=a.handler;a=a.response,c.errored||(c.errored=!0,c.value=null,c.reason=b,null!==(c=c.chunk)&&"blocked"===c.status&&I(a,c,b))}function V(a,b,c,d,e,f){if(N){var g=N;g.deps++}else g=N={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1};return b={response:d,handler:g,parentObject:b,key:c,map:e,path:f},null===a.value?a.value=[b]:a.value.push(b),null===a.reason?a.reason=[b]:a.reason.push(b),null}function W(a,b,c,d){if(!a._serverReferenceConfig)return function(a,b,c){function d(){var a=Array.prototype.slice.call(arguments);return f?"fulfilled"===f.status?b(e,f.value.concat(a)):Promise.resolve(f).then(function(c){return b(e,c.concat(a))}):b(e,a)}var e=a.id,f=a.bound;return y(d,e,f,c),d}(b,a._callServer,a._encodeFormAction);var e=function(a,b){var c="",d=a[b];if(d)c=d.name;else{var e=b.lastIndexOf("#");if(-1!==e&&(c=b.slice(e+1),d=a[b.slice(0,e)]),!d)throw Error('Could not find the module "'+b+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return d.async?[d.id,d.chunks,c,1]:[d.id,d.chunks,c]}(a._serverReferenceConfig,b.id),f=j(e);if(f)b.bound&&(f=Promise.all([f,b.bound]));else{if(!b.bound)return y(f=k(e),b.id,b.bound,a._encodeFormAction),f;f=Promise.resolve(b.bound)}if(N){var g=N;g.deps++}else g=N={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1};return f.then(function(){var f=k(e);if(b.bound){var h=b.bound.value.slice(0);h.unshift(null),f=f.bind.apply(f,h)}y(f,b.id,b.bound,a._encodeFormAction),c[d]=f,""===d&&null===g.value&&(g.value=f),c[0]===m&&"object"==typeof g.value&&null!==g.value&&g.value.$$typeof===m&&(h=g.value,"3"===d)&&(h.props=f),g.deps--,0===g.deps&&null!==(f=g.chunk)&&"blocked"===f.status&&(h=f.value,f.status="fulfilled",f.value=g.value,null!==h&&E(h,g.value))},function(b){if(!g.errored){g.errored=!0,g.value=null,g.reason=b;var c=g.chunk;null!==c&&"blocked"===c.status&&I(a,c,b)}}),null}function X(a,b,c,d,e){var f=parseInt((b=b.split(":"))[0],16);switch((f=S(a,f)).status){case"resolved_model":O(f);break;case"resolved_module":P(f)}switch(f.status){case"fulfilled":var g=f.value;for(f=1;f<b.length;f++){for(;g.$$typeof===n;){switch((g=g._payload).status){case"resolved_model":O(g);break;case"resolved_module":P(g)}switch(g.status){case"fulfilled":g=g.value;break;case"blocked":case"pending":return V(g,c,d,a,e,b.slice(f-1));case"halted":return N?(a=N,a.deps++):N={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},null;default:return N?(N.errored=!0,N.value=null,N.reason=g.reason):N={parent:null,chunk:null,value:null,reason:g.reason,deps:0,errored:!0},null}}g=g[b[f]]}return e(a,g,c,d);case"pending":case"blocked":return V(f,c,d,a,e,b);case"halted":return N?(a=N,a.deps++):N={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},null;default:return N?(N.errored=!0,N.value=null,N.reason=f.reason):N={parent:null,chunk:null,value:null,reason:f.reason,deps:0,errored:!0},null}}function Y(a,b){return new Map(b)}function Z(a,b){return new Set(b)}function $(a,b){return new Blob(b.slice(1),{type:b[0]})}function _(a,b){a=new FormData;for(var c=0;c<b.length;c++)a.append(b[c][0],b[c][1]);return a}function aa(a,b){return b[Symbol.iterator]()}function ab(a,b){return b}function ac(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function ad(a,b,c,e,f,g,h){var i,j=new Map;this._bundlerConfig=a,this._serverReferenceConfig=b,this._moduleLoading=c,this._callServer=void 0!==e?e:ac,this._encodeFormAction=f,this._nonce=g,this._chunks=j,this._stringDecoder=new d.TextDecoder,this._fromJSON=null,this._closed=!1,this._closedReason=null,this._tempRefs=h,this._fromJSON=(i=this,function(a,b){if("string"==typeof b){var c=i,d=this,e=a,f=b;if("$"===f[0]){if("$"===f)return null!==N&&"0"===e&&(N={parent:N,chunk:null,value:null,reason:null,deps:0,errored:!1}),m;switch(f[1]){case"$":return f.slice(1);case"L":return R(c=S(c,d=parseInt(f.slice(2),16)));case"@":return S(c,d=parseInt(f.slice(2),16));case"S":return Symbol.for(f.slice(2));case"F":return X(c,f=f.slice(2),d,e,W);case"T":if(d="$"+f.slice(2),null==(c=c._tempRefs))throw Error("Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.");return c.get(d);case"Q":return X(c,f=f.slice(2),d,e,Y);case"W":return X(c,f=f.slice(2),d,e,Z);case"B":return X(c,f=f.slice(2),d,e,$);case"K":return X(c,f=f.slice(2),d,e,_);case"Z":return ak();case"i":return X(c,f=f.slice(2),d,e,aa);case"I":return 1/0;case"-":return"$-0"===f?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(f.slice(2)));case"n":return BigInt(f.slice(2));default:return X(c,f=f.slice(1),d,e,ab)}}return f}if("object"==typeof b&&null!==b){if(b[0]===m){if(a={$$typeof:m,type:b[1],key:b[2],ref:null,props:b[3]},null!==N){if(N=(b=N).parent,b.errored)a=R(a=new C("rejected",null,b.reason));else if(0<b.deps){var g=new C("blocked",null,null);b.value=a,b.chunk=g,a=R(g)}}}else a=b;return a}return b})}function ae(){return{_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]}}function af(a,b,c){var d=(a=a._chunks).get(b);d&&"pending"!==d.status?d.reason.enqueueValue(c):a.set(b,new C("fulfilled",c,null))}function ag(a,b,c,d){var e=a._chunks;(a=e.get(b))?"pending"===a.status&&(b=a.value,a.status="fulfilled",a.value=c,a.reason=d,null!==b&&E(b,a.value)):e.set(b,new C("fulfilled",c,d))}function ah(a,b,c){var d=null;c=new ReadableStream({type:c,start:function(a){d=a}});var e=null;ag(a,b,c,{enqueueValue:function(a){null===e?d.enqueue(a):e.then(function(){d.enqueue(a)})},enqueueModel:function(b){if(null===e){var c=new C("resolved_model",b,a);O(c),"fulfilled"===c.status?d.enqueue(c.value):(c.then(function(a){return d.enqueue(a)},function(a){return d.error(a)}),e=c)}else{c=e;var f=new C("pending",null,null);f.then(function(a){return d.enqueue(a)},function(a){return d.error(a)}),e=f,c.then(function(){e===f&&(e=null),L(a,f,b)})}},close:function(){if(null===e)d.close();else{var a=e;e=null,a.then(function(){return d.close()})}},error:function(a){if(null===e)d.error(a);else{var b=e;e=null,b.then(function(){return d.error(a)})}}})}function ai(){return this}function aj(a,b,c){var d=[],e=!1,f=0,g={};g[p]=function(){var a,b=0;return(a={next:a=function(a){if(void 0!==a)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(b===d.length){if(e)return new C("fulfilled",{done:!0,value:void 0},null);d[b]=new C("pending",null,null)}return d[b++]}})[p]=ai,a},ag(a,b,c?g[p]():g,{enqueueValue:function(a){if(f===d.length)d[f]=new C("fulfilled",{done:!1,value:a},null);else{var b=d[f],c=b.value,e=b.reason;b.status="fulfilled",b.value={done:!1,value:a},null!==c&&H(b,c,e)}f++},enqueueModel:function(b){f===d.length?d[f]=J(a,b,!1):K(a,d[f],b,!1),f++},close:function(b){for(e=!0,f===d.length?d[f]=J(a,b,!0):K(a,d[f],b,!0),f++;f<d.length;)K(a,d[f++],'"$undefined"',!0)},error:function(b){for(e=!0,f===d.length&&(d[f]=new C("pending",null,null));f<d.length;)I(a,d[f++],b)}})}function ak(){var a=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.");return a.stack="Error: "+a.message,a}function al(a,b){for(var c=a.length,d=b.length,e=0;e<c;e++)d+=a[e].byteLength;d=new Uint8Array(d);for(var f=e=0;f<c;f++){var g=a[f];d.set(g,e),e+=g.byteLength}return d.set(b,e),d}function am(a,b,c,d,e,f){af(a,b,e=new e((c=0===c.length&&0==d.byteOffset%f?d:al(c,d)).buffer,c.byteOffset,c.byteLength/f))}function an(a,b,c,d){switch(c){case 73:var e=a,f=b,g=d,h=e._chunks,i=h.get(f);g=JSON.parse(g,e._fromJSON);var k=function(a,b){if(a){var c=a[b[0]];if(a=c&&c[b[2]])c=a.name;else{if(!(a=c&&c["*"]))throw Error('Could not find the module "'+b[0]+'" in the React Server Consumer Manifest. This is probably a bug in the React Server Components bundler.');c=b[2]}return 4===b.length?[a.id,a.chunks,c,1]:[a.id,a.chunks,c]}return b}(e._bundlerConfig,g);if(!function(a,b,c){if(null!==a)for(var d=1;d<b.length;d+=2){var e=l.d,f=e.X,g=a.prefix+b[d],h=a.crossOrigin;h="string"==typeof h?"use-credentials"===h?h:"":void 0,f.call(e,g,{crossOrigin:h,nonce:c})}}(e._moduleLoading,g[1],e._nonce),g=j(k)){if(i){var m=i;m.status="blocked"}else m=new C("blocked",null,null),h.set(f,m);g.then(function(){return M(e,m,k)},function(a){return I(e,m,a)})}else i?M(e,i,k):h.set(f,new C("resolved_module",k,null));break;case 72:switch(b=d[0],a=JSON.parse(d=d.slice(1),a._fromJSON),d=l.d,b){case"D":d.D(a);break;case"C":"string"==typeof a?d.C(a):d.C(a[0],a[1]);break;case"L":b=a[0],c=a[1],3===a.length?d.L(b,c,a[2]):d.L(b,c);break;case"m":"string"==typeof a?d.m(a):d.m(a[0],a[1]);break;case"X":"string"==typeof a?d.X(a):d.X(a[0],a[1]);break;case"S":"string"==typeof a?d.S(a):d.S(a[0],0===a[1]?void 0:a[1],3===a.length?a[2]:void 0);break;case"M":"string"==typeof a?d.M(a):d.M(a[0],a[1])}break;case 69:var n=(c=a._chunks).get(b);d=JSON.parse(d);var o=ak();o.digest=d.digest,n?I(a,n,o):c.set(b,new C("rejected",null,o));break;case 84:(c=(a=a._chunks).get(b))&&"pending"!==c.status?c.reason.enqueueValue(d):a.set(b,new C("fulfilled",d,null));break;case 78:case 68:case 74:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");case 82:ah(a,b,void 0);break;case 114:ah(a,b,"bytes");break;case 88:aj(a,b,!1);break;case 120:aj(a,b,!0);break;case 67:(a=a._chunks.get(b))&&"fulfilled"===a.status&&a.reason.close(""===d?'"$undefined"':d);break;default:(n=(c=a._chunks).get(b))?L(a,n,d):c.set(b,new C("resolved_model",d,a))}}function ao(a,b,c){for(var d=0,e=b._rowState,g=b._rowID,h=b._rowTag,i=b._rowLength,j=b._buffer,k=c.length;d<k;){var l=-1;switch(e){case 0:58===(l=c[d++])?e=1:g=g<<4|(96<l?l-87:l-48);continue;case 1:84===(e=c[d])||65===e||79===e||111===e||85===e||83===e||115===e||76===e||108===e||71===e||103===e||77===e||109===e||86===e?(h=e,e=2,d++):64<e&&91>e||35===e||114===e||120===e?(h=e,e=3,d++):(h=0,e=3);continue;case 2:44===(l=c[d++])?e=4:i=i<<4|(96<l?l-87:l-48);continue;case 3:l=c.indexOf(10,d);break;case 4:(l=d+i)>c.length&&(l=-1)}var m=c.byteOffset+d;if(-1<l)(function(a,b,c,d,e){switch(c){case 65:af(a,b,al(d,e).buffer);return;case 79:am(a,b,d,e,Int8Array,1);return;case 111:af(a,b,0===d.length?e:al(d,e));return;case 85:am(a,b,d,e,Uint8ClampedArray,1);return;case 83:am(a,b,d,e,Int16Array,2);return;case 115:am(a,b,d,e,Uint16Array,2);return;case 76:am(a,b,d,e,Int32Array,4);return;case 108:am(a,b,d,e,Uint32Array,4);return;case 71:am(a,b,d,e,Float32Array,4);return;case 103:am(a,b,d,e,Float64Array,8);return;case 77:am(a,b,d,e,BigInt64Array,8);return;case 109:am(a,b,d,e,BigUint64Array,8);return;case 86:am(a,b,d,e,DataView,1);return}for(var g=a._stringDecoder,h="",i=0;i<d.length;i++)h+=g.decode(d[i],f);an(a,b,c,h+=g.decode(e))})(a,g,h,j,i=new Uint8Array(c.buffer,m,l-d)),d=l,3===e&&d++,i=g=h=e=0,j.length=0;else{a=new Uint8Array(c.buffer,m,c.byteLength-d),j.push(a),i-=a.byteLength;break}}b._rowState=e,b._rowID=g,b._rowTag=h,b._rowLength=i}function ap(a){Q(a,Error("Connection closed."))}function aq(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function ar(a){return new ad(a.serverConsumerManifest.moduleMap,a.serverConsumerManifest.serverModuleMap,a.serverConsumerManifest.moduleLoading,aq,a.encodeFormAction,"string"==typeof a.nonce?a.nonce:void 0,a&&a.temporaryReferences?a.temporaryReferences:void 0)}function as(a,b){function c(b){Q(a,b)}var d=ae(),e=b.getReader();e.read().then(function b(f){var g=f.value;if(!f.done)return ao(a,d,g),e.read().then(b).catch(c);ap(a)}).catch(c)}function at(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}b.createFromFetch=function(a,b){var c=ar(b);return a.then(function(a){as(c,a.body)},function(a){Q(c,a)}),S(c,0)},b.createFromNodeStream=function(a,b,c){var d=new ad(b.moduleMap,b.serverModuleMap,b.moduleLoading,at,c?c.encodeFormAction:void 0,c&&"string"==typeof c.nonce?c.nonce:void 0,void 0),e=ae();return a.on("data",function(a){if("string"==typeof a){for(var b=0,c=e._rowState,f=e._rowID,g=e._rowTag,h=e._rowLength,i=e._buffer,j=a.length;b<j;){var k=-1;switch(c){case 0:58===(k=a.charCodeAt(b++))?c=1:f=f<<4|(96<k?k-87:k-48);continue;case 1:84===(c=a.charCodeAt(b))||65===c||79===c||111===c||85===c||83===c||115===c||76===c||108===c||71===c||103===c||77===c||109===c||86===c?(g=c,c=2,b++):64<c&&91>c||114===c||120===c?(g=c,c=3,b++):(g=0,c=3);continue;case 2:44===(k=a.charCodeAt(b++))?c=4:h=h<<4|(96<k?k-87:k-48);continue;case 3:k=a.indexOf("\n",b);break;case 4:if(84!==g)throw Error("Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.");if(h<a.length||a.length>3*h)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.");k=a.length}if(-1<k){if(0<i.length)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.");an(d,f,g,b=a.slice(b,k)),b=k,3===c&&b++,h=f=g=c=0,i.length=0}else if(a.length!==b)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.")}e._rowState=c,e._rowID=f,e._rowTag=g,e._rowLength=h}else ao(d,e,a)}),a.on("error",function(a){Q(d,a)}),a.on("end",function(){return ap(d)}),S(d,0)},b.createFromReadableStream=function(a,b){return as(b=ar(b),a),S(b,0)},b.createServerReference=function(a){function b(){var b=Array.prototype.slice.call(arguments);return aq(a,b)}return y(b,a,null,void 0),b},b.createTemporaryReferenceSet=function(){return new Map},b.encodeReply=function(a,b){return new Promise(function(c,d){var e=u(a,"",b&&b.temporaryReferences?b.temporaryReferences:void 0,c,d);if(b&&b.signal){var f=b.signal;if(f.aborted)e(f.reason);else{var g=function(){e(f.reason),f.removeEventListener("abort",g)};f.addEventListener("abort",g)}}})},b.registerServerReference=function(a,b,c){return y(a,b,null,c),a}},10407:(a,b,c)=>{"use strict";a.exports=c(49754).vendored["react-rsc"].ReactDOM},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11570:(a,b,c)=>{"use strict";c.d(b,{U:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"SelectAllNode"===a.kind,create:()=>(0,d.CN)({kind:"SelectAllNode"})})},11802:(a,b,c)=>{"use strict";c.d(b,{bE:()=>o,xk:()=>p});var d=c(91307),e=c(60551),f=c(97990);let g=(0,f.CN)({is:a=>"OrderByItemNode"===a.kind,create:(a,b)=>(0,f.CN)({kind:"OrderByItemNode",orderBy:a,direction:b}),cloneWith:(a,b)=>(0,f.CN)({...a,...b})});var h=c(13072),i=c(46975);let j={create:a=>(0,f.CN)({kind:"CollateNode",collation:i.O.create(a)})};class k{#l;constructor(a){this.#l=(0,f.CN)(a)}desc(){return new k({node:g.cloneWith(this.#l.node,{direction:h.z.createWithSql("desc")})})}asc(){return new k({node:g.cloneWith(this.#l.node,{direction:h.z.createWithSql("asc")})})}nullsLast(){return new k({node:g.cloneWith(this.#l.node,{nulls:"last"})})}nullsFirst(){return new k({node:g.cloneWith(this.#l.node,{nulls:"first"})})}collate(a){return new k({node:g.cloneWith(this.#l.node,{collation:j.create(a)})})}toOperationNode(){return this.#l.node}}var l=c(91415),m=c(78614),n=c(45817);function o(a){return"asc"===a||"desc"===a}function p(a){if(2===a.length)return[q(a[0],a[1])];if(1===a.length){let[b]=a;return Array.isArray(b)?((0,l.u)("orderBy(array) is deprecated, use multiple orderBy calls instead."),b.map(a=>q(a))):[q(b)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${a.length}`)}function q(a,b){let c=function(a){if((0,m.SS)(a))return(0,m.YK)(a);if((0,d.C)(a))return a.toOperationNode();let[b,c]=a.split(" ");return c?((0,l.u)("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),r((0,n.q5)(b),c)):(0,n.q5)(a)}(a);if(g.is(c)){if(b)throw Error("Cannot specify direction twice!");return c}return r(c,b)}function r(a,b){if("string"==typeof b){if(!o(b))throw Error(`Invalid order by direction: ${b}`);return g.create(a,h.z.createWithSql(b))}if((0,e.B)(b))return(0,l.u)("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),g.create(a,b.toOperationNode());let c=g.create(a);return b?b(new k({node:c})).toOperationNode():c}},13072:(a,b,c)=>{"use strict";c.d(b,{z:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"RawNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"RawNode",sqlFragments:(0,d.CN)(a),parameters:(0,d.CN)(b)}),createWithSql:a=>e.create([a],[]),createWithChild:a=>e.create(["",""],[a]),createWithChildren:a=>e.create(Array(a.length+1).fill(""),a)})},13624:(a,b,c)=>{"use strict";c.d(b,{U:()=>g});var d=c(97990),e=c(72356),f=c(16256);let g=(0,d.CN)({is:a=>"UpdateQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"UpdateQueryNode",table:1===a.length?a[0]:f.v.create(a),...b&&{with:b}}),createWithoutTable:()=>(0,d.CN)({kind:"UpdateQueryNode"}),cloneWithFromItems:(a,b)=>(0,d.CN)({...a,from:a.from?e.N.cloneWithFroms(a.from,b):e.N.create(b)}),cloneWithUpdates:(a,b)=>(0,d.CN)({...a,updates:a.updates?(0,d.CN)([...a.updates,...b]):b}),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b})})},13856:(a,b,c)=>{"use strict";c.d(b,{Y:()=>f});var d=c(97990),e=c(36036);let f=(0,d.CN)({is:a=>"CreateViewNode"===a.kind,create:a=>(0,d.CN)({kind:"CreateViewNode",name:e.y.create(a)}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},15056:(a,b,c)=>{Promise.resolve().then(c.bind(c,29661))},15570:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{HTTPAccessErrorStatus:function(){return c},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return e},getAccessFallbackErrorTypeByStatus:function(){return h},getAccessFallbackHTTPStatus:function(){return g},isHTTPAccessFallbackError:function(){return f}});let c={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},d=new Set(Object.values(c)),e="NEXT_HTTP_ERROR_FALLBACK";function f(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===e&&d.has(Number(c))}function g(a){return Number(a.digest.split(";")[1])}function h(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},16256:(a,b,c)=>{"use strict";c.d(b,{v:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"ListNode"===a.kind,create:a=>(0,d.CN)({kind:"ListNode",items:(0,d.CN)(a)})})},17916:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{normalizeAppPath:function(){return f},normalizeRscURL:function(){return g}});let d=c(8991),e=c(8625);function f(a){return(0,d.ensureLeadingSlash)(a.split("/").reduce((a,b,c,d)=>!b||(0,e.isGroupSegment)(b)||"@"===b[0]||("page"===b||"route"===b)&&c===d.length-1?a:a+"/"+b,""))}function g(a){return a.replace(/\.rsc($|\?)/,"$1")}},18197:(a,b,c)=>{"use strict";c.d(b,{B:()=>f,o:()=>e});var d=c(97990);let e=["preserve rows","delete rows","drop"],f=(0,d.CN)({is:a=>"CreateTableNode"===a.kind,create:a=>(0,d.CN)({kind:"CreateTableNode",table:a,columns:(0,d.CN)([])}),cloneWithColumn:(a,b)=>(0,d.CN)({...a,columns:(0,d.CN)([...a.columns,b])}),cloneWithConstraint:(a,b)=>(0,d.CN)({...a,constraints:a.constraints?(0,d.CN)([...a.constraints,b]):(0,d.CN)([b])}),cloneWithFrontModifier:(a,b)=>(0,d.CN)({...a,frontModifiers:a.frontModifiers?(0,d.CN)([...a.frontModifiers,b]):(0,d.CN)([b])}),cloneWithEndModifier:(a,b)=>(0,d.CN)({...a,endModifiers:a.endModifiers?(0,d.CN)([...a.endModifiers,b]):(0,d.CN)([b])}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},18633:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{METADATA_BOUNDARY_NAME:function(){return c},OUTLET_BOUNDARY_NAME:function(){return e},ROOT_LAYOUT_BOUNDARY_NAME:function(){return f},VIEWPORT_BOUNDARY_NAME:function(){return d}});let c="__next_metadata_boundary__",d="__next_viewport_boundary__",e="__next_outlet_boundary__",f="__next_root_layout_boundary__"},18662:(a,b,c)=>{"use strict";c.d(b,{O:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"OrderByNode"===a.kind,create:a=>(0,d.CN)({kind:"OrderByNode",items:(0,d.CN)([...a])}),cloneWithItems:(a,b)=>(0,d.CN)({...a,items:(0,d.CN)([...a.items,...b])})})},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21352:(a,b,c)=>{"use strict";c.d(b,{c:()=>D});var d=c(67798),e=c(97990);let f=(0,e.CN)({is:a=>"SelectModifierNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"SelectModifierNode",modifier:a,of:b}),createWithExpression:a=>(0,e.CN)({kind:"SelectModifierNode",rawModifier:a})});var g=c(30592),h=c(98812),i=c(30922),j=c(45817),k=c(70946),l=c(8974),m=c(11802),n=c(45077);let o=(0,e.CN)({is:a=>"OffsetNode"===a.kind,create:a=>(0,e.CN)({kind:"OffsetNode",offset:a})}),p=(0,e.CN)({is:a=>"GroupByItemNode"===a.kind,create:a=>(0,e.CN)({kind:"GroupByItemNode",groupBy:a})});var q=c(92363),r=c(60231),s=c(46975),t=c(62894),u=c(78614);function v(a,b,c){return(0,e.Tn)(b)&&(b=b((0,q.O)())),(0,e.MH)(b)||(b=[b]),b.map(b=>t.i.create(a,(0,u.YK)(b),c))}var w=c(68949),x=c(57769),y=c(60581),z=c(43227);let A={create:(a,b)=>({kind:"FetchNode",rowCount:z.q.create(a),modifier:b})};var B=c(2947);class C{#l;constructor(a){this.#l=(0,e.CN)(a)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...a){return new C({...this.#l,queryNode:l.L.cloneWithWhere(this.#l.queryNode,(0,w.GB)(a))})}whereRef(a,b,c){return new C({...this.#l,queryNode:l.L.cloneWithWhere(this.#l.queryNode,(0,w.vC)(a,b,c))})}having(...a){return new C({...this.#l,queryNode:k.L.cloneWithHaving(this.#l.queryNode,(0,w.GB)(a))})}havingRef(a,b,c){return new C({...this.#l,queryNode:k.L.cloneWithHaving(this.#l.queryNode,(0,w.vC)(a,b,c))})}select(a){return new C({...this.#l,queryNode:k.L.cloneWithSelections(this.#l.queryNode,(0,i.G)(a))})}distinctOn(a){return new C({...this.#l,queryNode:k.L.cloneWithDistinctOn(this.#l.queryNode,(0,j.kU)(a))})}modifyFront(a){return new C({...this.#l,queryNode:k.L.cloneWithFrontModifier(this.#l.queryNode,f.createWithExpression(a.toOperationNode()))})}modifyEnd(a){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.createWithExpression(a.toOperationNode()))})}distinct(){return new C({...this.#l,queryNode:k.L.cloneWithFrontModifier(this.#l.queryNode,f.create("Distinct"))})}forUpdate(a){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.create("ForUpdate",a?(0,e._j)(a).map(h.M$):void 0))})}forShare(a){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.create("ForShare",a?(0,e._j)(a).map(h.M$):void 0))})}forKeyShare(a){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.create("ForKeyShare",a?(0,e._j)(a).map(h.M$):void 0))})}forNoKeyUpdate(a){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.create("ForNoKeyUpdate",a?(0,e._j)(a).map(h.M$):void 0))})}skipLocked(){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.create("SkipLocked"))})}noWait(){return new C({...this.#l,queryNode:l.L.cloneWithEndModifier(this.#l.queryNode,f.create("NoWait"))})}selectAll(a){return new C({...this.#l,queryNode:k.L.cloneWithSelections(this.#l.queryNode,(0,i.J)(a))})}innerJoin(...a){return this.#m("InnerJoin",a)}leftJoin(...a){return this.#m("LeftJoin",a)}rightJoin(...a){return this.#m("RightJoin",a)}fullJoin(...a){return this.#m("FullJoin",a)}crossJoin(...a){return this.#m("CrossJoin",a)}innerJoinLateral(...a){return this.#m("LateralInnerJoin",a)}leftJoinLateral(...a){return this.#m("LateralLeftJoin",a)}crossJoinLateral(...a){return this.#m("LateralCrossJoin",a)}crossApply(...a){return this.#m("CrossApply",a)}outerApply(...a){return this.#m("OuterApply",a)}#m(a,b){return new C({...this.#l,queryNode:l.L.cloneWithJoin(this.#l.queryNode,(0,g.a)(a,b))})}orderBy(...a){return new C({...this.#l,queryNode:l.L.cloneWithOrderByItems(this.#l.queryNode,(0,m.xk)(a))})}groupBy(a){var b;return new C({...this.#l,queryNode:k.L.cloneWithGroupByItems(this.#l.queryNode,(b=a,b=(0,e.Tn)(b)?b((0,q.A)()):b,(0,j.kU)(b).map(p.create)))})}limit(a){return new C({...this.#l,queryNode:k.L.cloneWithLimit(this.#l.queryNode,n.a.create((0,y.$s)(a)))})}offset(a){return new C({...this.#l,queryNode:k.L.cloneWithOffset(this.#l.queryNode,o.create((0,y.$s)(a)))})}fetch(a,b="only"){return new C({...this.#l,queryNode:k.L.cloneWithFetch(this.#l.queryNode,function(a,b){var c;if(!(0,e.Et)(a)&&!(0,e.sI)(a))throw Error(`Invalid fetch row count: ${a}`);if("only"!==(c=b)&&"with ties"!==c)throw Error(`Invalid fetch modifier: ${b}`);return A.create(a,b)}(a,b))})}top(a,b){return new C({...this.#l,queryNode:l.L.cloneWithTop(this.#l.queryNode,(0,B.f)(a,b))})}union(a){return new C({...this.#l,queryNode:k.L.cloneWithSetOperations(this.#l.queryNode,v("union",a,!1))})}unionAll(a){return new C({...this.#l,queryNode:k.L.cloneWithSetOperations(this.#l.queryNode,v("union",a,!0))})}intersect(a){return new C({...this.#l,queryNode:k.L.cloneWithSetOperations(this.#l.queryNode,v("intersect",a,!1))})}intersectAll(a){return new C({...this.#l,queryNode:k.L.cloneWithSetOperations(this.#l.queryNode,v("intersect",a,!0))})}except(a){return new C({...this.#l,queryNode:k.L.cloneWithSetOperations(this.#l.queryNode,v("except",a,!1))})}exceptAll(a){return new C({...this.#l,queryNode:k.L.cloneWithSetOperations(this.#l.queryNode,v("except",a,!0))})}as(a){return new E(this,a)}clearSelect(){return new C({...this.#l,queryNode:k.L.cloneWithoutSelections(this.#l.queryNode)})}clearWhere(){return new C({...this.#l,queryNode:l.L.cloneWithoutWhere(this.#l.queryNode)})}clearLimit(){return new C({...this.#l,queryNode:k.L.cloneWithoutLimit(this.#l.queryNode)})}clearOffset(){return new C({...this.#l,queryNode:k.L.cloneWithoutOffset(this.#l.queryNode)})}clearOrderBy(){return new C({...this.#l,queryNode:l.L.cloneWithoutOrderBy(this.#l.queryNode)})}clearGroupBy(){return new C({...this.#l,queryNode:k.L.cloneWithoutGroupBy(this.#l.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new C({...this.#l})}$castTo(){return new C(this.#l)}$narrowType(){return new C(this.#l)}$assertType(){return new C(this.#l)}$asTuple(){return new x.Is(this.toOperationNode())}$asScalar(){return new x.Is(this.toOperationNode())}withPlugin(a){return new C({...this.#l,executor:this.#l.executor.withPlugin(a)})}toOperationNode(){return this.#l.executor.transformQuery(this.#l.queryNode,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){let a=this.compile();return(await this.#l.executor.executeQuery(a)).rows}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=r.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,r.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#l.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new C({...this.#l,queryNode:l.L.cloneWithExplain(this.#l.queryNode,a,b)});return await c.execute()}}function D(a){return new C(a)}class E{#n;#o;constructor(a,b){this.#n=a,this.#o=b}get expression(){return this.#n}get alias(){return this.#o}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return d.N.create(this.#n.toOperationNode(),s.O.create(this.#o))}}},22058:(a,b,c)=>{"use strict";c.d(b,{c:()=>d});class d{#p;#q;#r;constructor(){this.#p=new Promise((a,b)=>{this.#r=b,this.#q=a})}get promise(){return this.#p}resolve=a=>{this.#q&&this.#q(a)};reject=a=>{this.#r&&this.#r(a)}}},22458:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ReadonlyURLSearchParams:function(){return k},RedirectType:function(){return e.RedirectType},forbidden:function(){return g.forbidden},notFound:function(){return f.notFound},permanentRedirect:function(){return d.permanentRedirect},redirect:function(){return d.redirect},unauthorized:function(){return h.unauthorized},unstable_isUnrecognizedActionError:function(){return l},unstable_rethrow:function(){return i.unstable_rethrow}});let d=c(79595),e=c(44338),f=c(52741),g=c(36098),h=c(87345),i=c(23129);class j extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class k extends URLSearchParams{append(){throw new j}delete(){throw new j}set(){throw new j}sort(){throw new j}}function l(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},23129:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=c(74144).unstable_rethrow;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},23613:(a,b,c)=>{"use strict";let d=c(63033),e=c(29294),f=c(90151),g=c(63724),h=c(35119),i=c(52577),j=c(58871);c(63981);new WeakMap;(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})})},23998:(a,b)=>{"use strict";function c(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isThenable",{enumerable:!0,get:function(){return c}})},24733:(a,b,c)=>{Promise.resolve().then(c.bind(c,73651))},25757:(a,b,c)=>{"use strict";c.d(b,{n:()=>p});var d=c(18197),e=c(52116),f=c(97990);class g{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#s=(0,f.CN)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=a=>{this.nodeStack.push(a),this.#s[a.kind](a),this.nodeStack.pop()}}var h=c(35580),i=c(26633),j=c(8974),k=c(13856),l=c(62894),m=c(26883),n=c(91415);let o=/'/g;class p extends g{#t="";#u=[];get numParameters(){return this.#u.length}compileQuery(a,b){return this.#t="",this.#u=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(a),(0,f.CN)({query:a,queryId:b,sql:this.getSql(),parameters:[...this.#u]})}getSql(){return this.#t}visitSelectQuery(a){let b=void 0!==this.parentNode&&!i.k.is(this.parentNode)&&!e.o.is(this.parentNode)&&!d.B.is(this.parentNode)&&!k.Y.is(this.parentNode)&&!l.i.is(this.parentNode);void 0===this.parentNode&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("select"),a.distinctOn&&(this.append(" "),this.compileDistinctOn(a.distinctOn)),a.frontModifiers?.length&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.top&&(this.append(" "),this.visitNode(a.top)),a.selections&&(this.append(" "),this.compileList(a.selections)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.groupBy&&(this.append(" "),this.visitNode(a.groupBy)),a.having&&(this.append(" "),this.visitNode(a.having)),a.setOperations&&(this.append(" "),this.compileList(a.setOperations," ")),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.offset&&(this.append(" "),this.visitNode(a.offset)),a.fetch&&(this.append(" "),this.visitNode(a.fetch)),a.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...a.endModifiers])," ")),b&&this.append(")")}visitFrom(a){this.append("from "),this.compileList(a.froms)}visitSelection(a){this.visitNode(a.selection)}visitColumn(a){this.visitNode(a.column)}compileDistinctOn(a){this.append("distinct on ("),this.compileList(a),this.append(")")}compileList(a,b=", "){let c=a.length-1;for(let d=0;d<=c;d++)this.visitNode(a[d]),d<c&&this.append(b)}visitWhere(a){this.append("where "),this.visitNode(a.where)}visitHaving(a){this.append("having "),this.visitNode(a.having)}visitInsertQuery(a){let b=this.nodeStack.find(j.L.is),c=b!==a;!c&&a.explain&&(this.visitNode(a.explain),this.append(" ")),c&&!m.r.is(b)&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append(a.replace?"replace":"insert"),a.ignore&&((0,n.u)("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),a.orAction&&(this.append(" "),this.visitNode(a.orAction)),a.top&&(this.append(" "),this.visitNode(a.top)),a.into&&(this.append(" into "),this.visitNode(a.into)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.output&&(this.append(" "),this.visitNode(a.output)),a.values&&(this.append(" "),this.visitNode(a.values)),a.defaultValues&&(this.append(" "),this.append("default values")),a.onConflict&&(this.append(" "),this.visitNode(a.onConflict)),a.onDuplicateKey&&(this.append(" "),this.visitNode(a.onDuplicateKey)),a.returning&&(this.append(" "),this.visitNode(a.returning)),c&&!m.r.is(b)&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitValues(a){this.append("values "),this.compileList(a.values)}visitDeleteQuery(a){let b=this.nodeStack.find(j.L.is)!==a;!b&&a.explain&&(this.visitNode(a.explain),this.append(" ")),b&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("delete "),a.top&&(this.visitNode(a.top),this.append(" ")),this.visitNode(a.from),a.output&&(this.append(" "),this.visitNode(a.output)),a.using&&(this.append(" "),this.visitNode(a.using)),a.joins&&(this.append(" "),this.compileList(a.joins," ")),a.where&&(this.append(" "),this.visitNode(a.where)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.returning&&(this.append(" "),this.visitNode(a.returning)),b&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitReturning(a){this.append("returning "),this.compileList(a.selections)}visitAlias(a){this.visitNode(a.node),this.append(" as "),this.visitNode(a.alias)}visitReference(a){a.table&&(this.visitNode(a.table),this.append(".")),this.visitNode(a.column)}visitSelectAll(a){this.append("*")}visitIdentifier(a){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(a),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(a){if(!(0,f.Kg)(a.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(a.name))}visitAnd(a){this.visitNode(a.left),this.append(" and "),this.visitNode(a.right)}visitOr(a){this.visitNode(a.left),this.append(" or "),this.visitNode(a.right)}visitValue(a){a.immediate?this.appendImmediateValue(a.value):this.appendValue(a.value)}visitValueList(a){this.append("("),this.compileList(a.values),this.append(")")}visitTuple(a){this.append("("),this.compileList(a.values),this.append(")")}visitPrimitiveValueList(a){this.append("(");let{values:b}=a;for(let a=0;a<b.length;++a)this.appendValue(b[a]),a!==b.length-1&&this.append(", ");this.append(")")}visitParens(a){this.append("("),this.visitNode(a.node),this.append(")")}visitJoin(a){this.append(s[a.joinType]),this.append(" "),this.visitNode(a.table),a.on&&(this.append(" "),this.visitNode(a.on))}visitOn(a){this.append("on "),this.visitNode(a.on)}visitRaw(a){let{sqlFragments:b,parameters:c}=a;for(let a=0;a<b.length;++a)this.append(b[a]),c.length>a&&this.visitNode(c[a])}visitOperator(a){this.append(a.operator)}visitTable(a){this.visitNode(a.table)}visitSchemableIdentifier(a){a.schema&&(this.visitNode(a.schema),this.append(".")),this.visitNode(a.identifier)}visitCreateTable(a){this.append("create "),a.frontModifiers&&a.frontModifiers.length>0&&(this.compileList(a.frontModifiers," "),this.append(" ")),a.temporary&&this.append("temporary "),this.append("table "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.table),a.selectQuery?(this.append(" as "),this.visitNode(a.selectQuery)):(this.append(" ("),this.compileList([...a.columns,...a.constraints??[]]),this.append(")"),a.onCommit&&(this.append(" on commit "),this.append(a.onCommit)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," ")))}visitColumnDefinition(a){a.ifNotExists&&this.append("if not exists "),this.visitNode(a.column),this.append(" "),this.visitNode(a.dataType),a.unsigned&&this.append(" unsigned"),a.frontModifiers&&a.frontModifiers.length>0&&(this.append(" "),this.compileList(a.frontModifiers," ")),a.generated&&(this.append(" "),this.visitNode(a.generated)),a.identity&&this.append(" identity"),a.defaultTo&&(this.append(" "),this.visitNode(a.defaultTo)),a.notNull&&this.append(" not null"),a.unique&&this.append(" unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.primaryKey&&this.append(" primary key"),a.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),a.references&&(this.append(" "),this.visitNode(a.references)),a.check&&(this.append(" "),this.visitNode(a.check)),a.endModifiers&&a.endModifiers.length>0&&(this.append(" "),this.compileList(a.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(a){this.append("references "),this.visitNode(a.table),this.append(" ("),this.compileList(a.columns),this.append(")"),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate))}visitDropTable(a){this.append("drop table "),a.ifExists&&this.append("if exists "),this.visitNode(a.table),a.cascade&&this.append(" cascade")}visitDataType(a){this.append(a.dataType)}visitOrderBy(a){this.append("order by "),this.compileList(a.items)}visitOrderByItem(a){this.visitNode(a.orderBy),a.collation&&(this.append(" "),this.visitNode(a.collation)),a.direction&&(this.append(" "),this.visitNode(a.direction)),a.nulls&&(this.append(" nulls "),this.append(a.nulls))}visitGroupBy(a){this.append("group by "),this.compileList(a.items)}visitGroupByItem(a){this.visitNode(a.groupBy)}visitUpdateQuery(a){let b=this.nodeStack.find(j.L.is),c=b!==a;if(!c&&a.explain&&(this.visitNode(a.explain),this.append(" ")),c&&!m.r.is(b)&&this.append("("),a.with&&(this.visitNode(a.with),this.append(" ")),this.append("update "),a.top&&(this.visitNode(a.top),this.append(" ")),a.table&&(this.visitNode(a.table),this.append(" ")),this.append("set "),a.updates&&this.compileList(a.updates),a.output&&(this.append(" "),this.visitNode(a.output)),a.from&&(this.append(" "),this.visitNode(a.from)),a.joins){if(!a.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(a.joins," ")}a.where&&(this.append(" "),this.visitNode(a.where)),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),a.limit&&(this.append(" "),this.visitNode(a.limit)),a.returning&&(this.append(" "),this.visitNode(a.returning)),c&&!m.r.is(b)&&this.append(")"),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitColumnUpdate(a){this.visitNode(a.column),this.append(" = "),this.visitNode(a.value)}visitLimit(a){this.append("limit "),this.visitNode(a.limit)}visitOffset(a){this.append("offset "),this.visitNode(a.offset)}visitOnConflict(a){this.append("on conflict"),a.columns?(this.append(" ("),this.compileList(a.columns),this.append(")")):a.constraint?(this.append(" on constraint "),this.visitNode(a.constraint)):a.indexExpression&&(this.append(" ("),this.visitNode(a.indexExpression),this.append(")")),a.indexWhere&&(this.append(" "),this.visitNode(a.indexWhere)),!0===a.doNothing?this.append(" do nothing"):a.updates&&(this.append(" do update set "),this.compileList(a.updates),a.updateWhere&&(this.append(" "),this.visitNode(a.updateWhere)))}visitOnDuplicateKey(a){this.append("on duplicate key update "),this.compileList(a.updates)}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.using&&(this.append(" using "),this.visitNode(a.using)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.nullsNotDistinct&&this.append(" nulls not distinct"),a.where&&(this.append(" "),this.visitNode(a.where))}visitDropIndex(a){this.append("drop index "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.table&&(this.append(" on "),this.visitNode(a.table)),a.cascade&&this.append(" cascade")}visitCreateSchema(a){this.append("create schema "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.schema)}visitDropSchema(a){this.append("drop schema "),a.ifExists&&this.append("if exists "),this.visitNode(a.schema),a.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("primary key ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}buildDeferrable(a){void 0!==a.deferrable&&(a.deferrable?this.append(" deferrable"):this.append(" not deferrable")),void 0!==a.initiallyDeferred&&(a.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("unique"),a.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(a.columns),this.append(")"),this.buildDeferrable(a)}visitCheckConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("check ("),this.visitNode(a.expression),this.append(")")}visitForeignKeyConstraint(a){a.name&&(this.append("constraint "),this.visitNode(a.name),this.append(" ")),this.append("foreign key ("),this.compileList(a.columns),this.append(") "),this.visitNode(a.references),a.onDelete&&(this.append(" on delete "),this.append(a.onDelete)),a.onUpdate&&(this.append(" on update "),this.append(a.onUpdate)),this.buildDeferrable(a)}visitList(a){this.compileList(a.items)}visitWith(a){this.append("with "),a.recursive&&this.append("recursive "),this.compileList(a.expressions)}visitCommonTableExpression(a){this.visitNode(a.name),this.append(" as "),(0,f.Lm)(a.materialized)&&(a.materialized||this.append("not "),this.append("materialized ")),this.visitNode(a.expression)}visitCommonTableExpressionName(a){this.visitNode(a.table),a.columns&&(this.append("("),this.compileList(a.columns),this.append(")"))}visitAlterTable(a){this.append("alter table "),this.visitNode(a.table),this.append(" "),a.renameTo&&(this.append("rename to "),this.visitNode(a.renameTo)),a.setSchema&&(this.append("set schema "),this.visitNode(a.setSchema)),a.addConstraint&&this.visitNode(a.addConstraint),a.dropConstraint&&this.visitNode(a.dropConstraint),a.renameConstraint&&this.visitNode(a.renameConstraint),a.columnAlterations&&this.compileColumnAlterations(a.columnAlterations),a.addIndex&&this.visitNode(a.addIndex),a.dropIndex&&this.visitNode(a.dropIndex)}visitAddColumn(a){this.append("add column "),this.visitNode(a.column)}visitRenameColumn(a){this.append("rename column "),this.visitNode(a.column),this.append(" to "),this.visitNode(a.renameTo)}visitDropColumn(a){this.append("drop column "),this.visitNode(a.column)}visitAlterColumn(a){this.append("alter column "),this.visitNode(a.column),this.append(" "),a.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(a.dataType),a.dataTypeExpression&&(this.append("using "),this.visitNode(a.dataTypeExpression))),a.setDefault&&(this.append("set default "),this.visitNode(a.setDefault)),a.dropDefault&&this.append("drop default"),a.setNotNull&&this.append("set not null"),a.dropNotNull&&this.append("drop not null")}visitModifyColumn(a){this.append("modify column "),this.visitNode(a.column)}visitAddConstraint(a){this.append("add "),this.visitNode(a.constraint)}visitDropConstraint(a){this.append("drop constraint "),a.ifExists&&this.append("if exists "),this.visitNode(a.constraintName),"cascade"===a.modifier?this.append(" cascade"):"restrict"===a.modifier&&this.append(" restrict")}visitRenameConstraint(a){this.append("rename constraint "),this.visitNode(a.oldName),this.append(" to "),this.visitNode(a.newName)}visitSetOperation(a){this.append(a.operator),this.append(" "),a.all&&this.append("all "),this.visitNode(a.expression)}visitCreateView(a){this.append("create "),a.orReplace&&this.append("or replace "),a.materialized&&this.append("materialized "),a.temporary&&this.append("temporary "),this.append("view "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),this.append(" "),a.columns&&(this.append("("),this.compileList(a.columns),this.append(") ")),a.as&&(this.append("as "),this.visitNode(a.as))}visitRefreshMaterializedView(a){this.append("refresh materialized view "),a.concurrently&&this.append("concurrently "),this.visitNode(a.name),a.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(a){this.append("drop "),a.materialized&&this.append("materialized "),this.append("view "),a.ifExists&&this.append("if exists "),this.visitNode(a.name),a.cascade&&this.append(" cascade")}visitGenerated(a){this.append("generated "),a.always&&this.append("always "),a.byDefault&&this.append("by default "),this.append("as "),a.identity&&this.append("identity"),a.expression&&(this.append("("),this.visitNode(a.expression),this.append(")")),a.stored&&this.append(" stored")}visitDefaultValue(a){this.append("default "),this.visitNode(a.defaultValue)}visitSelectModifier(a){a.rawModifier?this.visitNode(a.rawModifier):this.append(q[a.modifier]),a.of&&(this.append(" of "),this.compileList(a.of,", "))}visitCreateType(a){this.append("create type "),this.visitNode(a.name),a.enum&&(this.append(" as enum "),this.visitNode(a.enum))}visitDropType(a){this.append("drop type "),a.ifExists&&this.append("if exists "),this.visitNode(a.name)}visitExplain(a){this.append("explain"),(a.options||a.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),a.options&&(this.visitNode(a.options),a.format&&this.append(this.getExplainOptionsDelimiter())),a.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(a.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(a){this.append("default")}visitAggregateFunction(a){this.append(a.func),this.append("("),a.distinct&&this.append("distinct "),this.compileList(a.aggregated),a.orderBy&&(this.append(" "),this.visitNode(a.orderBy)),this.append(")"),a.withinGroup&&(this.append(" within group ("),this.visitNode(a.withinGroup),this.append(")")),a.filter&&(this.append(" filter("),this.visitNode(a.filter),this.append(")")),a.over&&(this.append(" "),this.visitNode(a.over))}visitOver(a){this.append("over("),a.partitionBy&&(this.visitNode(a.partitionBy),a.orderBy&&this.append(" ")),a.orderBy&&this.visitNode(a.orderBy),this.append(")")}visitPartitionBy(a){this.append("partition by "),this.compileList(a.items)}visitPartitionByItem(a){this.visitNode(a.partitionBy)}visitBinaryOperation(a){this.visitNode(a.leftOperand),this.append(" "),this.visitNode(a.operator),this.append(" "),this.visitNode(a.rightOperand)}visitUnaryOperation(a){this.visitNode(a.operator),this.isMinusOperator(a.operator)||this.append(" "),this.visitNode(a.operand)}isMinusOperator(a){return h.zX.is(a)&&"-"===a.operator}visitUsing(a){this.append("using "),this.compileList(a.tables)}visitFunction(a){this.append(a.func),this.append("("),this.compileList(a.arguments),this.append(")")}visitCase(a){this.append("case"),a.value&&(this.append(" "),this.visitNode(a.value)),a.when&&(this.append(" "),this.compileList(a.when," ")),a.else&&(this.append(" else "),this.visitNode(a.else)),this.append(" end"),a.isStatement&&this.append(" case")}visitWhen(a){this.append("when "),this.visitNode(a.condition),a.result&&(this.append(" then "),this.visitNode(a.result))}visitJSONReference(a){this.visitNode(a.reference),this.visitNode(a.traversal)}visitJSONPath(a){for(let b of(a.inOperator&&this.visitNode(a.inOperator),this.append("'$"),a.pathLegs))this.visitNode(b);this.append("'")}visitJSONPathLeg(a){let b="ArrayLocation"===a.type;this.append(b?"[":"."),this.append(String(a.value)),b&&this.append("]")}visitJSONOperatorChain(a){for(let b=0,c=a.values.length;b<c;b++)b===c-1?this.visitNode(a.operator):this.append("->"),this.visitNode(a.values[b])}visitMergeQuery(a){a.with&&(this.visitNode(a.with),this.append(" ")),this.append("merge "),a.top&&(this.visitNode(a.top),this.append(" ")),this.append("into "),this.visitNode(a.into),a.using&&(this.append(" "),this.visitNode(a.using)),a.whens&&(this.append(" "),this.compileList(a.whens," ")),a.returning&&(this.append(" "),this.visitNode(a.returning)),a.output&&(this.append(" "),this.visitNode(a.output)),a.endModifiers?.length&&(this.append(" "),this.compileList(a.endModifiers," "))}visitMatched(a){a.not&&this.append("not "),this.append("matched"),a.bySource&&this.append(" by source")}visitAddIndex(a){this.append("add "),a.unique&&this.append("unique "),this.append("index "),this.visitNode(a.name),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.using&&(this.append(" using "),this.visitNode(a.using))}visitCast(a){this.append("cast("),this.visitNode(a.expression),this.append(" as "),this.visitNode(a.dataType),this.append(")")}visitFetch(a){this.append("fetch next "),this.visitNode(a.rowCount),this.append(` rows ${a.modifier}`)}visitOutput(a){this.append("output "),this.compileList(a.selections)}visitTop(a){this.append(`top(${a.expression})`),a.modifiers&&this.append(` ${a.modifiers}`)}visitOrAction(a){this.append(a.action)}visitCollate(a){this.append("collate "),this.visitNode(a.collation)}append(a){this.#t+=a}appendValue(a){this.addParameter(a),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(a){let b=this.getLeftIdentifierWrapper(),c=this.getRightIdentifierWrapper(),d="";for(let e of a)d+=e,e===b?d+=b:e===c&&(d+=c);return d}sanitizeStringLiteral(a){return a.replace(o,"''")}addParameter(a){this.#u.push(a)}appendImmediateValue(a){if((0,f.Kg)(a))this.appendStringLiteral(a);else if((0,f.Et)(a)||(0,f.Lm)(a)||(0,f.sI)(a))this.append(a.toString());else if((0,f.kZ)(a))this.append("null");else if((0,f.$P)(a))this.appendImmediateValue(a.toISOString());else throw Error(`invalid immediate value ${a}`)}appendStringLiteral(a){this.append("'"),this.append(this.sanitizeStringLiteral(a)),this.append("'")}sortSelectModifiers(a){return a.sort((a,b)=>a.modifier&&b.modifier?r[a.modifier]-r[b.modifier]:1),(0,f.CN)(a)}compileColumnAlterations(a){this.compileList(a)}announcesNewColumnDataType(){return!0}}let q=(0,f.CN)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),r=(0,f.CN)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),s=(0,f.CN)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})},25799:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=c(82831),e=c(43740),f=c(29305),g=c(61981),h=c(26906),i=c(69168);("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},26633:(a,b,c)=>{"use strict";c.d(b,{k:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"ParensNode"===a.kind,create:a=>(0,d.CN)({kind:"ParensNode",node:a})})},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},26883:(a,b,c)=>{"use strict";c.d(b,{r:()=>f});var d=c(97990),e=c(93448);let f=(0,d.CN)({is:a=>"MergeQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"MergeQueryNode",into:a,...b&&{with:b}}),cloneWithUsing:(a,b)=>(0,d.CN)({...a,using:b}),cloneWithWhen:(a,b)=>(0,d.CN)({...a,whens:a.whens?(0,d.CN)([...a.whens,b]):(0,d.CN)([b])}),cloneWithThen:(a,b)=>(0,d.CN)({...a,whens:a.whens?(0,d.CN)([...a.whens.slice(0,-1),e.t.cloneWithResult(a.whens[a.whens.length-1],b)]):void 0})})},27263:(a,b,c)=>{"use strict";c.d(b,{E:()=>g});var d=c(13072),e=c(97990),f=c(61861);let g=(0,e.CN)({raw:(a,b=[])=>(0,e.CN)({sql:a,query:d.z.createWithSql(a),parameters:(0,e.CN)(b),queryId:(0,f.a)()})})},27806:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{decryptActionBoundArgs:function(){return s},encryptActionBoundArgs:function(){return r}}),c(95818);let d=c(83183),e=c(51318),f=c(50931),g=c(54210),h=c(63033),i=c(90151),j=function(a){return a&&a.__esModule?a:{default:a}}(c(46204)),k=new TextEncoder,l=new TextDecoder,m=void 0,n=void 0;async function o(a,b){let c=await (0,g.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=atob(b),e=d.slice(0,16),f=d.slice(16),h=l.decode(await (0,g.decrypt)(c,(0,g.stringToUint8Array)(e),(0,g.stringToUint8Array)(f)));if(!h.startsWith(a))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return h.slice(a.length)}async function p(a,b){let c=await (0,g.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=new Uint8Array(16);h.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(d));let e=(0,g.arrayBufferToString)(d.buffer),f=await (0,g.encrypt)(c,d,k.encode(a+b));return btoa(e+(0,g.arrayBufferToString)(f))}var q=function(a){return a[a.Ready=0]="Ready",a[a.Pending=1]="Pending",a[a.Complete=2]="Complete",a}(q||{});let r=j.default.cache(async function a(b,...c){let e=h.workUnitAsyncStorage.getStore(),j=e?(0,h.getCacheSignal)(e):void 0,{clientModules:k}=(0,g.getClientReferenceManifestForRsc)(),l=Error();Error.captureStackTrace(l,a);let n=!1,o=e?(0,i.createHangingInputAbortSignal)(e):void 0,q=0;function r(){0===q&&(q=1,null==j||j.beginRead())}function s(){1===q&&(null==j||j.endRead()),q=2}o&&j&&o.addEventListener("abort",r,{once:!0});let t=await (0,f.streamToString)((0,d.renderToReadableStream)(c,k,{filterStackFrame:m,signal:o,onError(a){(null==o||!o.aborted)&&(n||(n=!0,l.message=a instanceof Error?a.message:String(a)))}}),o);if(n)throw s(),l;if(!e)return p(b,t);r();let u=(0,h.getPrerenderResumeDataCache)(e),v=(0,h.getRenderResumeDataCache)(e),w=b+t,x=(null==u?void 0:u.encryptedBoundArgs.get(w))??(null==v?void 0:v.encryptedBoundArgs.get(w));if(x)return x;let y=await p(b,t);return s(),null==u||u.encryptedBoundArgs.set(w,y),y});async function s(a,b){let c,d=await b,f=h.workUnitAsyncStorage.getStore();if(f){let b=(0,h.getCacheSignal)(f),e=(0,h.getPrerenderResumeDataCache)(f),g=(0,h.getRenderResumeDataCache)(f);(c=(null==e?void 0:e.decryptedBoundArgs.get(d))??(null==g?void 0:g.decryptedBoundArgs.get(d)))||(null==b||b.beginRead(),c=await o(a,d),null==b||b.endRead(),null==e||e.decryptedBoundArgs.set(d,c))}else c=await o(a,d);let{edgeRscModuleMapping:i,rscModuleMapping:j}=(0,g.getClientReferenceManifestForRsc)();return await (0,e.createFromReadableStream)(new ReadableStream({start(a){switch(a.enqueue(k.encode(c)),null==f?void 0:f.type){case"prerender":case"prerender-runtime":f.renderSignal.aborted?a.close():f.renderSignal.addEventListener("abort",()=>a.close(),{once:!0});break;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":case void 0:return a.close()}}}),{findSourceMapURL:n,serverConsumerManifest:{moduleLoading:null,moduleMap:j,serverModuleMap:(0,g.getServerModuleMap)()}})}},28354:a=>{"use strict";a.exports=require("util")},29088:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unauthorized",{enumerable:!0,get:function(){return d}}),c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},29089:a=>{(()=>{"use strict";var b={491:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ContextAPI=void 0;let d=c(223),e=c(172),f=c(930),g="context",h=new d.NoopContextManager;class i{constructor(){}static getInstance(){return this._instance||(this._instance=new i),this._instance}setGlobalContextManager(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}active(){return this._getContextManager().active()}with(a,b,c,...d){return this._getContextManager().with(a,b,c,...d)}bind(a,b){return this._getContextManager().bind(a,b)}_getContextManager(){return(0,e.getGlobal)(g)||h}disable(){this._getContextManager().disable(),(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.ContextAPI=i},930:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagAPI=void 0;let d=c(56),e=c(912),f=c(957),g=c(172);class h{constructor(){function a(a){return function(...b){let c=(0,g.getGlobal)("diag");if(c)return c[a](...b)}}let b=this;b.setLogger=(a,c={logLevel:f.DiagLogLevel.INFO})=>{var d,h,i;if(a===b){let a=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=a.stack)?d:a.message),!1}"number"==typeof c&&(c={logLevel:c});let j=(0,g.getGlobal)("diag"),k=(0,e.createLogLevelDiagLogger)(null!=(h=c.logLevel)?h:f.DiagLogLevel.INFO,a);if(j&&!c.suppressOverrideMessage){let a=null!=(i=Error().stack)?i:"<failed to generate stacktrace>";j.warn(`Current logger will be overwritten from ${a}`),k.warn(`Current logger will overwrite one already registered from ${a}`)}return(0,g.registerGlobal)("diag",k,b,!0)},b.disable=()=>{(0,g.unregisterGlobal)("diag",b)},b.createComponentLogger=a=>new d.DiagComponentLogger(a),b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}static instance(){return this._instance||(this._instance=new h),this._instance}}b.DiagAPI=h},653:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.MetricsAPI=void 0;let d=c(660),e=c(172),f=c(930),g="metrics";class h{constructor(){}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalMeterProvider(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}getMeterProvider(){return(0,e.getGlobal)(g)||d.NOOP_METER_PROVIDER}getMeter(a,b,c){return this.getMeterProvider().getMeter(a,b,c)}disable(){(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.MetricsAPI=h},181:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.PropagationAPI=void 0;let d=c(172),e=c(874),f=c(194),g=c(277),h=c(369),i=c(930),j="propagation",k=new e.NoopTextMapPropagator;class l{constructor(){this.createBaggage=h.createBaggage,this.getBaggage=g.getBaggage,this.getActiveBaggage=g.getActiveBaggage,this.setBaggage=g.setBaggage,this.deleteBaggage=g.deleteBaggage}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalPropagator(a){return(0,d.registerGlobal)(j,a,i.DiagAPI.instance())}inject(a,b,c=f.defaultTextMapSetter){return this._getGlobalPropagator().inject(a,b,c)}extract(a,b,c=f.defaultTextMapGetter){return this._getGlobalPropagator().extract(a,b,c)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,d.unregisterGlobal)(j,i.DiagAPI.instance())}_getGlobalPropagator(){return(0,d.getGlobal)(j)||k}}b.PropagationAPI=l},997:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceAPI=void 0;let d=c(172),e=c(846),f=c(139),g=c(607),h=c(930),i="trace";class j{constructor(){this._proxyTracerProvider=new e.ProxyTracerProvider,this.wrapSpanContext=f.wrapSpanContext,this.isSpanContextValid=f.isSpanContextValid,this.deleteSpan=g.deleteSpan,this.getSpan=g.getSpan,this.getActiveSpan=g.getActiveSpan,this.getSpanContext=g.getSpanContext,this.setSpan=g.setSpan,this.setSpanContext=g.setSpanContext}static getInstance(){return this._instance||(this._instance=new j),this._instance}setGlobalTracerProvider(a){let b=(0,d.registerGlobal)(i,this._proxyTracerProvider,h.DiagAPI.instance());return b&&this._proxyTracerProvider.setDelegate(a),b}getTracerProvider(){return(0,d.getGlobal)(i)||this._proxyTracerProvider}getTracer(a,b){return this.getTracerProvider().getTracer(a,b)}disable(){(0,d.unregisterGlobal)(i,h.DiagAPI.instance()),this._proxyTracerProvider=new e.ProxyTracerProvider}}b.TraceAPI=j},277:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.deleteBaggage=b.setBaggage=b.getActiveBaggage=b.getBaggage=void 0;let d=c(491),e=(0,c(780).createContextKey)("OpenTelemetry Baggage Key");function f(a){return a.getValue(e)||void 0}b.getBaggage=f,b.getActiveBaggage=function(){return f(d.ContextAPI.getInstance().active())},b.setBaggage=function(a,b){return a.setValue(e,b)},b.deleteBaggage=function(a){return a.deleteValue(e)}},993:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.BaggageImpl=void 0;class c{constructor(a){this._entries=a?new Map(a):new Map}getEntry(a){let b=this._entries.get(a);if(b)return Object.assign({},b)}getAllEntries(){return Array.from(this._entries.entries()).map(([a,b])=>[a,b])}setEntry(a,b){let d=new c(this._entries);return d._entries.set(a,b),d}removeEntry(a){let b=new c(this._entries);return b._entries.delete(a),b}removeEntries(...a){let b=new c(this._entries);for(let c of a)b._entries.delete(c);return b}clear(){return new c}}b.BaggageImpl=c},830:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataSymbol=void 0,b.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataFromString=b.createBaggage=void 0;let d=c(930),e=c(993),f=c(830),g=d.DiagAPI.instance();b.createBaggage=function(a={}){return new e.BaggageImpl(new Map(Object.entries(a)))},b.baggageEntryMetadataFromString=function(a){return"string"!=typeof a&&(g.error(`Cannot create baggage metadata from unknown type: ${typeof a}`),a=""),{__TYPE__:f.baggageEntryMetadataSymbol,toString:()=>a}}},67:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.context=void 0,b.context=c(491).ContextAPI.getInstance()},223:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopContextManager=void 0;let d=c(780);class e{active(){return d.ROOT_CONTEXT}with(a,b,c,...d){return b.call(c,...d)}bind(a,b){return b}enable(){return this}disable(){return this}}b.NoopContextManager=e},780:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ROOT_CONTEXT=b.createContextKey=void 0,b.createContextKey=function(a){return Symbol.for(a)};class c{constructor(a){let b=this;b._currentContext=a?new Map(a):new Map,b.getValue=a=>b._currentContext.get(a),b.setValue=(a,d)=>{let e=new c(b._currentContext);return e._currentContext.set(a,d),e},b.deleteValue=a=>{let d=new c(b._currentContext);return d._currentContext.delete(a),d}}}b.ROOT_CONTEXT=new c},506:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.diag=void 0,b.diag=c(930).DiagAPI.instance()},56:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagComponentLogger=void 0;let d=c(172);class e{constructor(a){this._namespace=a.namespace||"DiagComponentLogger"}debug(...a){return f("debug",this._namespace,a)}error(...a){return f("error",this._namespace,a)}info(...a){return f("info",this._namespace,a)}warn(...a){return f("warn",this._namespace,a)}verbose(...a){return f("verbose",this._namespace,a)}}function f(a,b,c){let e=(0,d.getGlobal)("diag");if(e)return c.unshift(b),e[a](...c)}b.DiagComponentLogger=e},972:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagConsoleLogger=void 0;let c=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class d{constructor(){for(let a=0;a<c.length;a++)this[c[a].n]=function(a){return function(...b){if(console){let c=console[a];if("function"!=typeof c&&(c=console.log),"function"==typeof c)return c.apply(console,b)}}}(c[a].c)}}b.DiagConsoleLogger=d},912:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createLogLevelDiagLogger=void 0;let d=c(957);b.createLogLevelDiagLogger=function(a,b){function c(c,d){let e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<d.DiagLogLevel.NONE?a=d.DiagLogLevel.NONE:a>d.DiagLogLevel.ALL&&(a=d.DiagLogLevel.ALL),b=b||{},{error:c("error",d.DiagLogLevel.ERROR),warn:c("warn",d.DiagLogLevel.WARN),info:c("info",d.DiagLogLevel.INFO),debug:c("debug",d.DiagLogLevel.DEBUG),verbose:c("verbose",d.DiagLogLevel.VERBOSE)}}},957:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagLogLevel=void 0,function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(b.DiagLogLevel||(b.DiagLogLevel={}))},172:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.unregisterGlobal=b.getGlobal=b.registerGlobal=void 0;let d=c(200),e=c(521),f=c(130),g=e.VERSION.split(".")[0],h=Symbol.for(`opentelemetry.js.api.${g}`),i=d._globalThis;b.registerGlobal=function(a,b,c,d=!1){var f;let g=i[h]=null!=(f=i[h])?f:{version:e.VERSION};if(!d&&g[a]){let b=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${a}`);return c.error(b.stack||b.message),!1}if(g.version!==e.VERSION){let b=Error(`@opentelemetry/api: Registration of version v${g.version} for ${a} does not match previously registered API v${e.VERSION}`);return c.error(b.stack||b.message),!1}return g[a]=b,c.debug(`@opentelemetry/api: Registered a global for ${a} v${e.VERSION}.`),!0},b.getGlobal=function(a){var b,c;let d=null==(b=i[h])?void 0:b.version;if(d&&(0,f.isCompatible)(d))return null==(c=i[h])?void 0:c[a]},b.unregisterGlobal=function(a,b){b.debug(`@opentelemetry/api: Unregistering a global for ${a} v${e.VERSION}.`);let c=i[h];c&&delete c[a]}},130:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.isCompatible=b._makeCompatibilityCheck=void 0;let d=c(521),e=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f(a){let b=new Set([a]),c=new Set,d=a.match(e);if(!d)return()=>!1;let f={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=f.prerelease)return function(b){return b===a};function g(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;let d=a.match(e);if(!d)return g(a);let h={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=h.prerelease||f.major!==h.major)return g(a);if(0===f.major)return f.minor===h.minor&&f.patch<=h.patch?(b.add(a),!0):g(a);return f.minor<=h.minor?(b.add(a),!0):g(a)}}b._makeCompatibilityCheck=f,b.isCompatible=f(d.VERSION)},886:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.metrics=void 0,b.metrics=c(653).MetricsAPI.getInstance()},901:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ValueType=void 0,function(a){a[a.INT=0]="INT",a[a.DOUBLE=1]="DOUBLE"}(b.ValueType||(b.ValueType={}))},102:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createNoopMeter=b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=b.NOOP_OBSERVABLE_GAUGE_METRIC=b.NOOP_OBSERVABLE_COUNTER_METRIC=b.NOOP_UP_DOWN_COUNTER_METRIC=b.NOOP_HISTOGRAM_METRIC=b.NOOP_COUNTER_METRIC=b.NOOP_METER=b.NoopObservableUpDownCounterMetric=b.NoopObservableGaugeMetric=b.NoopObservableCounterMetric=b.NoopObservableMetric=b.NoopHistogramMetric=b.NoopUpDownCounterMetric=b.NoopCounterMetric=b.NoopMetric=b.NoopMeter=void 0;class c{constructor(){}createHistogram(a,c){return b.NOOP_HISTOGRAM_METRIC}createCounter(a,c){return b.NOOP_COUNTER_METRIC}createUpDownCounter(a,c){return b.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(a,c){return b.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(a,c){return b.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(a,c){return b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(a,b){}removeBatchObservableCallback(a){}}b.NoopMeter=c;class d{}b.NoopMetric=d;class e extends d{add(a,b){}}b.NoopCounterMetric=e;class f extends d{add(a,b){}}b.NoopUpDownCounterMetric=f;class g extends d{record(a,b){}}b.NoopHistogramMetric=g;class h{addCallback(a){}removeCallback(a){}}b.NoopObservableMetric=h;class i extends h{}b.NoopObservableCounterMetric=i;class j extends h{}b.NoopObservableGaugeMetric=j;class k extends h{}b.NoopObservableUpDownCounterMetric=k,b.NOOP_METER=new c,b.NOOP_COUNTER_METRIC=new e,b.NOOP_HISTOGRAM_METRIC=new g,b.NOOP_UP_DOWN_COUNTER_METRIC=new f,b.NOOP_OBSERVABLE_COUNTER_METRIC=new i,b.NOOP_OBSERVABLE_GAUGE_METRIC=new j,b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new k,b.createNoopMeter=function(){return b.NOOP_METER}},660:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NOOP_METER_PROVIDER=b.NoopMeterProvider=void 0;let d=c(102);class e{getMeter(a,b,c){return d.NOOP_METER}}b.NoopMeterProvider=e,b.NOOP_METER_PROVIDER=new e},200:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(46),b)},651:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b._globalThis=void 0,b._globalThis="object"==typeof globalThis?globalThis:global},46:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(651),b)},939:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.propagation=void 0,b.propagation=c(181).PropagationAPI.getInstance()},874:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTextMapPropagator=void 0;class c{inject(a,b){}extract(a,b){return a}fields(){return[]}}b.NoopTextMapPropagator=c},194:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.defaultTextMapSetter=b.defaultTextMapGetter=void 0,b.defaultTextMapGetter={get(a,b){if(null!=a)return a[b]},keys:a=>null==a?[]:Object.keys(a)},b.defaultTextMapSetter={set(a,b,c){null!=a&&(a[b]=c)}}},845:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.trace=void 0,b.trace=c(997).TraceAPI.getInstance()},403:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NonRecordingSpan=void 0;let d=c(476);class e{constructor(a=d.INVALID_SPAN_CONTEXT){this._spanContext=a}spanContext(){return this._spanContext}setAttribute(a,b){return this}setAttributes(a){return this}addEvent(a,b){return this}setStatus(a){return this}updateName(a){return this}end(a){}isRecording(){return!1}recordException(a,b){}}b.NonRecordingSpan=e},614:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracer=void 0;let d=c(491),e=c(607),f=c(403),g=c(139),h=d.ContextAPI.getInstance();class i{startSpan(a,b,c=h.active()){var d;if(null==b?void 0:b.root)return new f.NonRecordingSpan;let i=c&&(0,e.getSpanContext)(c);return"object"==typeof(d=i)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&(0,g.isSpanContextValid)(i)?new f.NonRecordingSpan(i):new f.NonRecordingSpan}startActiveSpan(a,b,c,d){let f,g,i;if(arguments.length<2)return;2==arguments.length?i=b:3==arguments.length?(f=b,i=c):(f=b,g=c,i=d);let j=null!=g?g:h.active(),k=this.startSpan(a,f,j),l=(0,e.setSpan)(j,k);return h.with(l,i,void 0,k)}}b.NoopTracer=i},124:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracerProvider=void 0;let d=c(614);class e{getTracer(a,b,c){return new d.NoopTracer}}b.NoopTracerProvider=e},125:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracer=void 0;let d=new(c(614)).NoopTracer;class e{constructor(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}startSpan(a,b,c){return this._getTracer().startSpan(a,b,c)}startActiveSpan(a,b,c,d){let e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)}_getTracer(){if(this._delegate)return this._delegate;let a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):d}}b.ProxyTracer=e},846:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracerProvider=void 0;let d=c(125),e=new(c(124)).NoopTracerProvider;class f{getTracer(a,b,c){var e;return null!=(e=this.getDelegateTracer(a,b,c))?e:new d.ProxyTracer(this,a,b,c)}getDelegate(){var a;return null!=(a=this._delegate)?a:e}setDelegate(a){this._delegate=a}getDelegateTracer(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)}}b.ProxyTracerProvider=f},996:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SamplingDecision=void 0,function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(b.SamplingDecision||(b.SamplingDecision={}))},607:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getSpanContext=b.setSpanContext=b.deleteSpan=b.setSpan=b.getActiveSpan=b.getSpan=void 0;let d=c(780),e=c(403),f=c(491),g=(0,d.createContextKey)("OpenTelemetry Context Key SPAN");function h(a){return a.getValue(g)||void 0}function i(a,b){return a.setValue(g,b)}b.getSpan=h,b.getActiveSpan=function(){return h(f.ContextAPI.getInstance().active())},b.setSpan=i,b.deleteSpan=function(a){return a.deleteValue(g)},b.setSpanContext=function(a,b){return i(a,new e.NonRecordingSpan(b))},b.getSpanContext=function(a){var b;return null==(b=h(a))?void 0:b.spanContext()}},325:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceStateImpl=void 0;let d=c(564);class e{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),e=c.indexOf("=");if(-1!==e){let f=c.slice(0,e),g=c.slice(e+1,b.length);(0,d.validateKey)(f)&&(0,d.validateValue)(g)&&a.set(f,g)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new e;return a._internalState=new Map(this._internalState),a}}b.TraceStateImpl=e},564:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.validateValue=b.validateKey=void 0;let c="[_0-9a-z-*/]",d=`[a-z]${c}{0,255}`,e=`[a-z0-9]${c}{0,240}@[a-z]${c}{0,13}`,f=RegExp(`^(?:${d}|${e})$`),g=/^[ -~]{0,255}[!-~]$/,h=/,|=/;b.validateKey=function(a){return f.test(a)},b.validateValue=function(a){return g.test(a)&&!h.test(a)}},98:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createTraceState=void 0;let d=c(325);b.createTraceState=function(a){return new d.TraceStateImpl(a)}},476:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.INVALID_SPAN_CONTEXT=b.INVALID_TRACEID=b.INVALID_SPANID=void 0;let d=c(475);b.INVALID_SPANID="0000000000000000",b.INVALID_TRACEID="00000000000000000000000000000000",b.INVALID_SPAN_CONTEXT={traceId:b.INVALID_TRACEID,spanId:b.INVALID_SPANID,traceFlags:d.TraceFlags.NONE}},357:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanKind=void 0,function(a){a[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER"}(b.SpanKind||(b.SpanKind={}))},139:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.wrapSpanContext=b.isSpanContextValid=b.isValidSpanId=b.isValidTraceId=void 0;let d=c(476),e=c(403),f=/^([0-9a-f]{32})$/i,g=/^[0-9a-f]{16}$/i;function h(a){return f.test(a)&&a!==d.INVALID_TRACEID}function i(a){return g.test(a)&&a!==d.INVALID_SPANID}b.isValidTraceId=h,b.isValidSpanId=i,b.isSpanContextValid=function(a){return h(a.traceId)&&i(a.spanId)},b.wrapSpanContext=function(a){return new e.NonRecordingSpan(a)}},847:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanStatusCode=void 0,function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(b.SpanStatusCode||(b.SpanStatusCode={}))},475:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceFlags=void 0,function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(b.TraceFlags||(b.TraceFlags={}))},521:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VERSION=void 0,b.VERSION="1.6.0"}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a].call(f.exports,f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab=__dirname+"/";var e={};(()=>{Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var a=d(369);Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var b=d(780);Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return b.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return b.ROOT_CONTEXT}});var c=d(972);Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}});var f=d(957);Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return f.DiagLogLevel}});var g=d(102);Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return g.createNoopMeter}});var h=d(901);Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return h.ValueType}});var i=d(194);Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return i.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return i.defaultTextMapSetter}});var j=d(125);Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return j.ProxyTracer}});var k=d(846);Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return k.ProxyTracerProvider}});var l=d(996);Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return l.SamplingDecision}});var m=d(357);Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return m.SpanKind}});var n=d(847);Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return n.SpanStatusCode}});var o=d(475);Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return o.TraceFlags}});var p=d(98);Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return p.createTraceState}});var q=d(139);Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return q.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return q.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return q.isValidSpanId}});var r=d(476);Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return r.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return r.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return r.INVALID_SPAN_CONTEXT}});let s=d(67);Object.defineProperty(e,"context",{enumerable:!0,get:function(){return s.context}});let t=d(506);Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return t.diag}});let u=d(886);Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return u.metrics}});let v=d(939);Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return v.propagation}});let w=d(845);Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return w.trace}}),e.default={context:s.context,diag:t.diag,metrics:u.metrics,propagation:v.propagation,trace:w.trace}})(),a.exports=e})()},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29661:(a,b,c)=>{"use strict";c.d(b,{UserProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/Aquafornite/src/hooks/useUser.tsx","UserProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/Aquafornite/src/hooks/useUser.tsx","useUser")},30592:(a,b,c)=>{"use strict";c.d(b,{a:()=>h});var d=c(5209),e=c(68949),f=c(42658),g=c(98812);function h(a,b){var c,h,i,j,k,l,m,n;if(3===b.length){return c=a,h=b[0],i=b[1],j=b[2],d.b.createWithOn(c,(0,g.uJ)(h),(0,e.vC)(i,"=",j))}if(2===b.length){return k=a,l=b[0],(0,b[1])((0,f.GQ)(k,l)).toOperationNode()}if(1===b.length){return m=a,n=b[0],d.b.create(m,(0,g.uJ)(n))}throw Error("not implemented")}},30922:(a,b,c)=>{"use strict";c.d(b,{J:()=>n,G:()=>function a(b){return(0,d.Tn)(b)?a(b((0,l.A)())):(0,d.MH)(b)?b.map(a=>m(a)):[m(b)]}});var d=c(97990),e=c(89227),f=c(11570);let g=(0,d.CN)({is:a=>"SelectionNode"===a.kind,create:a=>(0,d.CN)({kind:"SelectionNode",selection:a}),createSelectAll:()=>(0,d.CN)({kind:"SelectionNode",selection:f.U.create()}),createSelectAllFromTable:a=>(0,d.CN)({kind:"SelectionNode",selection:e.q.createSelectAll(a)})});var h=c(45817),i=c(91307),j=c(78614),k=c(98812),l=c(92363);function m(a){return(0,d.Kg)(a)?g.create((0,h.DT)(a)):(0,i.C)(a)?g.create(a.toOperationNode()):g.create((0,j.v0)(a))}function n(a){return a?Array.isArray(a)?a.map(o):[o(a)]:[g.createSelectAll()]}function o(a){if((0,d.Kg)(a))return g.createSelectAllFromTable((0,k.M$)(a));throw Error(`invalid value selectAll expression: ${JSON.stringify(a)}`)}},33469:(a,b,c)=>{"use strict";c.d(b,{l:()=>r});var d=c(46975),e=c(8711),f=c(13072),g=c(43227),h=c(45817),i=c(98812),j=c(60581),k=c(61861),l=c(67798),m=c(97990),n=c(67380);class o{#l;constructor(a){this.#l=(0,m.CN)(a)}get expressionType(){}get isRawBuilder(){return!0}as(a){return new q(this,a)}$castTo(){return new o({...this.#l})}$notNull(){return new o(this.#l)}withPlugin(a){return new o({...this.#l,plugins:void 0!==this.#l.plugins?(0,m.CN)([...this.#l.plugins,a]):(0,m.CN)([a])})}toOperationNode(){return this.#v(this.#w())}compile(a){return this.#x(this.#w(a))}async execute(a){let b=this.#w(a);return b.executeQuery(this.#x(b))}#w(a){let b=void 0!==a?a.getExecutor():n.W;return void 0!==this.#l.plugins?b.withPlugins(this.#l.plugins):b}#v(a){return a.transformQuery(this.#l.rawNode,this.#l.queryId)}#x(a){return a.compileQuery(this.#v(a),this.#l.queryId)}}function p(a){return new o(a)}class q{#y;#o;constructor(a,b){this.#y=a,this.#o=b}get expression(){return this.#y}get alias(){return this.#o}get rawBuilder(){return this.#y}toOperationNode(){return l.N.create(this.#y.toOperationNode(),(0,e.N)(this.#o)?this.#o.toOperationNode():d.O.create(this.#o))}}let r=Object.assign((a,...b)=>p({queryId:(0,k.a)(),rawNode:f.z.create(a,b?.map(s)??[])}),{ref:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,h.q5)(a))}),val:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,j.$s)(a))}),value(a){return this.val(a)},table:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild((0,i.M$)(a))}),id(...a){let b=Array(a.length+1).fill(".");return b[0]="",b[b.length-1]="",p({queryId:(0,k.a)(),rawNode:f.z.create(b,a.map(d.O.create))})},lit:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithChild(g.q.createImmediate(a))}),literal(a){return this.lit(a)},raw:a=>p({queryId:(0,k.a)(),rawNode:f.z.createWithSql(a)}),join(a,b=r`, `){let c=Array(Math.max(2*a.length-1,0)),d=b.toOperationNode();for(let b=0;b<a.length;++b)c[2*b]=s(a[b]),b!==a.length-1&&(c[2*b+1]=d);return p({queryId:(0,k.a)(),rawNode:f.z.createWithChildren(c)})}});function s(a){return(0,e.N)(a)?a.toOperationNode():(0,j.$s)(a)}},33873:a=>{"use strict";a.exports=require("path")},35119:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{StaticGenBailoutError:function(){return d},isStaticGenBailoutError:function(){return e}});let c="NEXT_STATIC_GEN_BAILOUT";class d extends Error{constructor(...a){super(...a),this.code=c}}function e(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===c}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},35580:(a,b,c)=>{"use strict";c.d(b,{Xm:()=>h,we:()=>f,zX:()=>g});var d=c(97990);let e=["->","->>"],f=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...e,"not","-","exists","not exists","between","between symmetric"],g=(0,d.CN)({is:a=>"OperatorNode"===a.kind,create:a=>(0,d.CN)({kind:"OperatorNode",operator:a})});function h(a){return(0,d.Kg)(a)&&e.includes(a)}},36036:(a,b,c)=>{"use strict";c.d(b,{y:()=>f});var d=c(97990),e=c(46975);let f=(0,d.CN)({is:a=>"SchemableIdentifierNode"===a.kind,create:a=>(0,d.CN)({kind:"SchemableIdentifierNode",identifier:e.O.create(a)}),createWithSchema:(a,b)=>(0,d.CN)({kind:"SchemableIdentifierNode",schema:e.O.create(a),identifier:e.O.create(b)})})},36098:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"forbidden",{enumerable:!0,get:function(){return d}}),c(15570).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},36646:(a,b,c)=>{"use strict";c.d(b,{V:()=>e});var d=c(97990);class e{nodeStack=[];#z=(0,d.CN)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(a,b){if(!a)return a;this.nodeStack.push(a);let c=this.transformNodeImpl(a,b);return this.nodeStack.pop(),(0,d.CN)(c)}transformNodeImpl(a,b){return this.#z[a.kind](a,b)}transformNodeList(a,b){return a?(0,d.CN)(a.map(a=>this.transformNode(a,b))):a}transformSelectQuery(a,b){return{kind:"SelectQueryNode",from:this.transformNode(a.from,b),selections:this.transformNodeList(a.selections,b),distinctOn:this.transformNodeList(a.distinctOn,b),joins:this.transformNodeList(a.joins,b),groupBy:this.transformNode(a.groupBy,b),orderBy:this.transformNode(a.orderBy,b),where:this.transformNode(a.where,b),frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),limit:this.transformNode(a.limit,b),offset:this.transformNode(a.offset,b),with:this.transformNode(a.with,b),having:this.transformNode(a.having,b),explain:this.transformNode(a.explain,b),setOperations:this.transformNodeList(a.setOperations,b),fetch:this.transformNode(a.fetch,b),top:this.transformNode(a.top,b)}}transformSelection(a,b){return{kind:"SelectionNode",selection:this.transformNode(a.selection,b)}}transformColumn(a,b){return{kind:"ColumnNode",column:this.transformNode(a.column,b)}}transformAlias(a,b){return{kind:"AliasNode",node:this.transformNode(a.node,b),alias:this.transformNode(a.alias,b)}}transformTable(a,b){return{kind:"TableNode",table:this.transformNode(a.table,b)}}transformFrom(a,b){return{kind:"FromNode",froms:this.transformNodeList(a.froms,b)}}transformReference(a,b){return{kind:"ReferenceNode",column:this.transformNode(a.column,b),table:this.transformNode(a.table,b)}}transformAnd(a,b){return{kind:"AndNode",left:this.transformNode(a.left,b),right:this.transformNode(a.right,b)}}transformOr(a,b){return{kind:"OrNode",left:this.transformNode(a.left,b),right:this.transformNode(a.right,b)}}transformValueList(a,b){return{kind:"ValueListNode",values:this.transformNodeList(a.values,b)}}transformParens(a,b){return{kind:"ParensNode",node:this.transformNode(a.node,b)}}transformJoin(a,b){return{kind:"JoinNode",joinType:a.joinType,table:this.transformNode(a.table,b),on:this.transformNode(a.on,b)}}transformRaw(a,b){return{kind:"RawNode",sqlFragments:(0,d.CN)([...a.sqlFragments]),parameters:this.transformNodeList(a.parameters,b)}}transformWhere(a,b){return{kind:"WhereNode",where:this.transformNode(a.where,b)}}transformInsertQuery(a,b){return{kind:"InsertQueryNode",into:this.transformNode(a.into,b),columns:this.transformNodeList(a.columns,b),values:this.transformNode(a.values,b),returning:this.transformNode(a.returning,b),onConflict:this.transformNode(a.onConflict,b),onDuplicateKey:this.transformNode(a.onDuplicateKey,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),ignore:a.ignore,orAction:this.transformNode(a.orAction,b),replace:a.replace,explain:this.transformNode(a.explain,b),defaultValues:a.defaultValues,top:this.transformNode(a.top,b),output:this.transformNode(a.output,b)}}transformValues(a,b){return{kind:"ValuesNode",values:this.transformNodeList(a.values,b)}}transformDeleteQuery(a,b){return{kind:"DeleteQueryNode",from:this.transformNode(a.from,b),using:this.transformNode(a.using,b),joins:this.transformNodeList(a.joins,b),where:this.transformNode(a.where,b),returning:this.transformNode(a.returning,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),orderBy:this.transformNode(a.orderBy,b),limit:this.transformNode(a.limit,b),explain:this.transformNode(a.explain,b),top:this.transformNode(a.top,b),output:this.transformNode(a.output,b)}}transformReturning(a,b){return{kind:"ReturningNode",selections:this.transformNodeList(a.selections,b)}}transformCreateTable(a,b){return{kind:"CreateTableNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),constraints:this.transformNodeList(a.constraints,b),temporary:a.temporary,ifNotExists:a.ifNotExists,onCommit:a.onCommit,frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),selectQuery:this.transformNode(a.selectQuery,b)}}transformColumnDefinition(a,b){return{kind:"ColumnDefinitionNode",column:this.transformNode(a.column,b),dataType:this.transformNode(a.dataType,b),references:this.transformNode(a.references,b),primaryKey:a.primaryKey,autoIncrement:a.autoIncrement,unique:a.unique,notNull:a.notNull,unsigned:a.unsigned,defaultTo:this.transformNode(a.defaultTo,b),check:this.transformNode(a.check,b),generated:this.transformNode(a.generated,b),frontModifiers:this.transformNodeList(a.frontModifiers,b),endModifiers:this.transformNodeList(a.endModifiers,b),nullsNotDistinct:a.nullsNotDistinct,identity:a.identity,ifNotExists:a.ifNotExists}}transformAddColumn(a,b){return{kind:"AddColumnNode",column:this.transformNode(a.column,b)}}transformDropTable(a,b){return{kind:"DropTableNode",table:this.transformNode(a.table,b),ifExists:a.ifExists,cascade:a.cascade}}transformOrderBy(a,b){return{kind:"OrderByNode",items:this.transformNodeList(a.items,b)}}transformOrderByItem(a,b){return{kind:"OrderByItemNode",orderBy:this.transformNode(a.orderBy,b),direction:this.transformNode(a.direction,b),collation:this.transformNode(a.collation,b),nulls:a.nulls}}transformGroupBy(a,b){return{kind:"GroupByNode",items:this.transformNodeList(a.items,b)}}transformGroupByItem(a,b){return{kind:"GroupByItemNode",groupBy:this.transformNode(a.groupBy,b)}}transformUpdateQuery(a,b){return{kind:"UpdateQueryNode",table:this.transformNode(a.table,b),from:this.transformNode(a.from,b),joins:this.transformNodeList(a.joins,b),where:this.transformNode(a.where,b),updates:this.transformNodeList(a.updates,b),returning:this.transformNode(a.returning,b),endModifiers:this.transformNodeList(a.endModifiers,b),with:this.transformNode(a.with,b),explain:this.transformNode(a.explain,b),limit:this.transformNode(a.limit,b),top:this.transformNode(a.top,b),output:this.transformNode(a.output,b),orderBy:this.transformNode(a.orderBy,b)}}transformColumnUpdate(a,b){return{kind:"ColumnUpdateNode",column:this.transformNode(a.column,b),value:this.transformNode(a.value,b)}}transformLimit(a,b){return{kind:"LimitNode",limit:this.transformNode(a.limit,b)}}transformOffset(a,b){return{kind:"OffsetNode",offset:this.transformNode(a.offset,b)}}transformOnConflict(a,b){return{kind:"OnConflictNode",columns:this.transformNodeList(a.columns,b),constraint:this.transformNode(a.constraint,b),indexExpression:this.transformNode(a.indexExpression,b),indexWhere:this.transformNode(a.indexWhere,b),updates:this.transformNodeList(a.updates,b),updateWhere:this.transformNode(a.updateWhere,b),doNothing:a.doNothing}}transformOnDuplicateKey(a,b){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(a.updates,b)}}transformCreateIndex(a,b){return{kind:"CreateIndexNode",name:this.transformNode(a.name,b),table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),unique:a.unique,using:this.transformNode(a.using,b),ifNotExists:a.ifNotExists,where:this.transformNode(a.where,b),nullsNotDistinct:a.nullsNotDistinct}}transformList(a,b){return{kind:"ListNode",items:this.transformNodeList(a.items,b)}}transformDropIndex(a,b){return{kind:"DropIndexNode",name:this.transformNode(a.name,b),table:this.transformNode(a.table,b),ifExists:a.ifExists,cascade:a.cascade}}transformPrimaryKeyConstraint(a,b){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(a.columns,b),name:this.transformNode(a.name,b),deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformUniqueConstraint(a,b){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(a.columns,b),name:this.transformNode(a.name,b),nullsNotDistinct:a.nullsNotDistinct,deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformForeignKeyConstraint(a,b){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(a.columns,b),references:this.transformNode(a.references,b),name:this.transformNode(a.name,b),onDelete:a.onDelete,onUpdate:a.onUpdate,deferrable:a.deferrable,initiallyDeferred:a.initiallyDeferred}}transformSetOperation(a,b){return{kind:"SetOperationNode",operator:a.operator,expression:this.transformNode(a.expression,b),all:a.all}}transformReferences(a,b){return{kind:"ReferencesNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b),onDelete:a.onDelete,onUpdate:a.onUpdate}}transformCheckConstraint(a,b){return{kind:"CheckConstraintNode",expression:this.transformNode(a.expression,b),name:this.transformNode(a.name,b)}}transformWith(a,b){return{kind:"WithNode",expressions:this.transformNodeList(a.expressions,b),recursive:a.recursive}}transformCommonTableExpression(a,b){return{kind:"CommonTableExpressionNode",name:this.transformNode(a.name,b),materialized:a.materialized,expression:this.transformNode(a.expression,b)}}transformCommonTableExpressionName(a,b){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(a.table,b),columns:this.transformNodeList(a.columns,b)}}transformHaving(a,b){return{kind:"HavingNode",having:this.transformNode(a.having,b)}}transformCreateSchema(a,b){return{kind:"CreateSchemaNode",schema:this.transformNode(a.schema,b),ifNotExists:a.ifNotExists}}transformDropSchema(a,b){return{kind:"DropSchemaNode",schema:this.transformNode(a.schema,b),ifExists:a.ifExists,cascade:a.cascade}}transformAlterTable(a,b){return{kind:"AlterTableNode",table:this.transformNode(a.table,b),renameTo:this.transformNode(a.renameTo,b),setSchema:this.transformNode(a.setSchema,b),columnAlterations:this.transformNodeList(a.columnAlterations,b),addConstraint:this.transformNode(a.addConstraint,b),dropConstraint:this.transformNode(a.dropConstraint,b),renameConstraint:this.transformNode(a.renameConstraint,b),addIndex:this.transformNode(a.addIndex,b),dropIndex:this.transformNode(a.dropIndex,b)}}transformDropColumn(a,b){return{kind:"DropColumnNode",column:this.transformNode(a.column,b)}}transformRenameColumn(a,b){return{kind:"RenameColumnNode",column:this.transformNode(a.column,b),renameTo:this.transformNode(a.renameTo,b)}}transformAlterColumn(a,b){return{kind:"AlterColumnNode",column:this.transformNode(a.column,b),dataType:this.transformNode(a.dataType,b),dataTypeExpression:this.transformNode(a.dataTypeExpression,b),setDefault:this.transformNode(a.setDefault,b),dropDefault:a.dropDefault,setNotNull:a.setNotNull,dropNotNull:a.dropNotNull}}transformModifyColumn(a,b){return{kind:"ModifyColumnNode",column:this.transformNode(a.column,b)}}transformAddConstraint(a,b){return{kind:"AddConstraintNode",constraint:this.transformNode(a.constraint,b)}}transformDropConstraint(a,b){return{kind:"DropConstraintNode",constraintName:this.transformNode(a.constraintName,b),ifExists:a.ifExists,modifier:a.modifier}}transformRenameConstraint(a,b){return{kind:"RenameConstraintNode",oldName:this.transformNode(a.oldName,b),newName:this.transformNode(a.newName,b)}}transformCreateView(a,b){return{kind:"CreateViewNode",name:this.transformNode(a.name,b),temporary:a.temporary,orReplace:a.orReplace,ifNotExists:a.ifNotExists,materialized:a.materialized,columns:this.transformNodeList(a.columns,b),as:this.transformNode(a.as,b)}}transformRefreshMaterializedView(a,b){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(a.name,b),concurrently:a.concurrently,withNoData:a.withNoData}}transformDropView(a,b){return{kind:"DropViewNode",name:this.transformNode(a.name,b),ifExists:a.ifExists,materialized:a.materialized,cascade:a.cascade}}transformGenerated(a,b){return{kind:"GeneratedNode",byDefault:a.byDefault,always:a.always,identity:a.identity,stored:a.stored,expression:this.transformNode(a.expression,b)}}transformDefaultValue(a,b){return{kind:"DefaultValueNode",defaultValue:this.transformNode(a.defaultValue,b)}}transformOn(a,b){return{kind:"OnNode",on:this.transformNode(a.on,b)}}transformSelectModifier(a,b){return{kind:"SelectModifierNode",modifier:a.modifier,rawModifier:this.transformNode(a.rawModifier,b),of:this.transformNodeList(a.of,b)}}transformCreateType(a,b){return{kind:"CreateTypeNode",name:this.transformNode(a.name,b),enum:this.transformNode(a.enum,b)}}transformDropType(a,b){return{kind:"DropTypeNode",name:this.transformNode(a.name,b),ifExists:a.ifExists}}transformExplain(a,b){return{kind:"ExplainNode",format:a.format,options:this.transformNode(a.options,b)}}transformSchemableIdentifier(a,b){return{kind:"SchemableIdentifierNode",schema:this.transformNode(a.schema,b),identifier:this.transformNode(a.identifier,b)}}transformAggregateFunction(a,b){return{kind:"AggregateFunctionNode",func:a.func,aggregated:this.transformNodeList(a.aggregated,b),distinct:a.distinct,orderBy:this.transformNode(a.orderBy,b),withinGroup:this.transformNode(a.withinGroup,b),filter:this.transformNode(a.filter,b),over:this.transformNode(a.over,b)}}transformOver(a,b){return{kind:"OverNode",orderBy:this.transformNode(a.orderBy,b),partitionBy:this.transformNode(a.partitionBy,b)}}transformPartitionBy(a,b){return{kind:"PartitionByNode",items:this.transformNodeList(a.items,b)}}transformPartitionByItem(a,b){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(a.partitionBy,b)}}transformBinaryOperation(a,b){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(a.leftOperand,b),operator:this.transformNode(a.operator,b),rightOperand:this.transformNode(a.rightOperand,b)}}transformUnaryOperation(a,b){return{kind:"UnaryOperationNode",operator:this.transformNode(a.operator,b),operand:this.transformNode(a.operand,b)}}transformUsing(a,b){return{kind:"UsingNode",tables:this.transformNodeList(a.tables,b)}}transformFunction(a,b){return{kind:"FunctionNode",func:a.func,arguments:this.transformNodeList(a.arguments,b)}}transformCase(a,b){return{kind:"CaseNode",value:this.transformNode(a.value,b),when:this.transformNodeList(a.when,b),else:this.transformNode(a.else,b),isStatement:a.isStatement}}transformWhen(a,b){return{kind:"WhenNode",condition:this.transformNode(a.condition,b),result:this.transformNode(a.result,b)}}transformJSONReference(a,b){return{kind:"JSONReferenceNode",reference:this.transformNode(a.reference,b),traversal:this.transformNode(a.traversal,b)}}transformJSONPath(a,b){return{kind:"JSONPathNode",inOperator:this.transformNode(a.inOperator,b),pathLegs:this.transformNodeList(a.pathLegs,b)}}transformJSONPathLeg(a,b){return{kind:"JSONPathLegNode",type:a.type,value:a.value}}transformJSONOperatorChain(a,b){return{kind:"JSONOperatorChainNode",operator:this.transformNode(a.operator,b),values:this.transformNodeList(a.values,b)}}transformTuple(a,b){return{kind:"TupleNode",values:this.transformNodeList(a.values,b)}}transformMergeQuery(a,b){return{kind:"MergeQueryNode",into:this.transformNode(a.into,b),using:this.transformNode(a.using,b),whens:this.transformNodeList(a.whens,b),with:this.transformNode(a.with,b),top:this.transformNode(a.top,b),endModifiers:this.transformNodeList(a.endModifiers,b),output:this.transformNode(a.output,b),returning:this.transformNode(a.returning,b)}}transformMatched(a,b){return{kind:"MatchedNode",not:a.not,bySource:a.bySource}}transformAddIndex(a,b){return{kind:"AddIndexNode",name:this.transformNode(a.name,b),columns:this.transformNodeList(a.columns,b),unique:a.unique,using:this.transformNode(a.using,b),ifNotExists:a.ifNotExists}}transformCast(a,b){return{kind:"CastNode",expression:this.transformNode(a.expression,b),dataType:this.transformNode(a.dataType,b)}}transformFetch(a,b){return{kind:"FetchNode",rowCount:this.transformNode(a.rowCount,b),modifier:a.modifier}}transformTop(a,b){return{kind:"TopNode",expression:a.expression,modifiers:a.modifiers}}transformOutput(a,b){return{kind:"OutputNode",selections:this.transformNodeList(a.selections,b)}}transformDataType(a,b){return a}transformSelectAll(a,b){return a}transformIdentifier(a,b){return a}transformValue(a,b){return a}transformPrimitiveValueList(a,b){return a}transformOperator(a,b){return a}transformDefaultInsertValue(a,b){return a}transformOrAction(a,b){return a}transformCollate(a,b){return a}}},36821:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{BubbledError:function(){return m},SpanKind:function(){return k},SpanStatusCode:function(){return j},getTracer:function(){return u},isBubbledError:function(){return n}});let e=c(45441),f=c(23998);try{d=c(29089)}catch(a){d=c(29089)}let{context:g,propagation:h,trace:i,SpanStatusCode:j,SpanKind:k,ROOT_CONTEXT:l}=d;class m extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}function n(a){return"object"==typeof a&&null!==a&&a instanceof m}let o=(a,b)=>{n(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:j.ERROR,message:null==b?void 0:b.message})),a.end()},p=new Map,q=d.createContextKey("next.rootSpanId"),r=0,s={set(a,b,c){a.push({key:b,value:c})}};class t{getTracerInstance(){return i.getTracer("next.js","0.0.1")}getContext(){return g}getTracePropagationData(){let a=g.active(),b=[];return h.inject(a,b,s),b}getActiveScopeSpan(){return i.getSpan(null==g?void 0:g.active())}withPropagatedContext(a,b,c){let d=g.active();if(i.getSpanContext(d))return b();let e=h.extract(d,a,c);return g.with(e,b)}trace(...a){var b;let[c,d,h]=a,{fn:j,options:k}="function"==typeof d?{fn:d,options:{}}:{fn:h,options:{...d}},m=k.spanName??c;if(!e.NextVanillaSpanAllowlist.includes(c)&&"1"!==process.env.NEXT_OTEL_VERBOSE||k.hideSpan)return j();let n=this.getSpanContext((null==k?void 0:k.parentSpan)??this.getActiveScopeSpan()),s=!1;n?(null==(b=i.getSpanContext(n))?void 0:b.isRemote)&&(s=!0):(n=(null==g?void 0:g.active())??l,s=!0);let t=r++;return k.attributes={"next.span_name":m,"next.span_type":c,...k.attributes},g.with(n.setValue(q,t),()=>this.getTracerInstance().startActiveSpan(m,k,a=>{let b="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,d=()=>{p.delete(t),b&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&e.LogSpanAllowList.includes(c||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(c.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:b,end:performance.now()})};s&&p.set(t,new Map(Object.entries(k.attributes??{})));try{if(j.length>1)return j(a,b=>o(a,b));let b=j(a);if((0,f.isThenable)(b))return b.then(b=>(a.end(),b)).catch(b=>{throw o(a,b),b}).finally(d);return a.end(),d(),b}catch(b){throw o(a,b),d(),b}}))}wrap(...a){let b=this,[c,d,f]=3===a.length?a:[a[0],{},a[1]];return e.NextVanillaSpanAllowlist.includes(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof f&&(a=a.apply(this,arguments));let e=arguments.length-1,h=arguments[e];if("function"!=typeof h)return b.trace(c,a,()=>f.apply(this,arguments));{let d=b.getContext().bind(g.active(),h);return b.trace(c,a,(a,b)=>(arguments[e]=function(a){return null==b||b(a),d.apply(this,arguments)},f.apply(this,arguments)))}}:f}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?i.setSpan(g.active(),a):void 0}getRootSpanAttributes(){let a=g.active().getValue(q);return p.get(a)}setRootSpanAttribute(a,b){let c=g.active().getValue(q),d=p.get(c);d&&d.set(a,b)}}let u=(()=>{let a=new t;return()=>a})()},40410:(a,b)=>{"use strict";function c(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(b,"D",{enumerable:!0,get:function(){return c}})},40670:(a,b,c)=>{"use strict";c.d(b,{n:()=>an});var d=c(21352),e=c(30922),f=c(83878),g=c(44820),h=c(96544),i=c(97990),j=c(60581);let k=(0,i.CN)({is:a=>"ValuesNode"===a.kind,create:a=>(0,i.CN)({kind:"ValuesNode",values:(0,i.CN)(a)})});var l=c(78614);let m=(0,i.CN)({is:a=>"DefaultInsertValueNode"===a.kind,create:()=>(0,i.CN)({kind:"DefaultInsertValueNode"})});var n=c(92363);function o(a){let b=(0,i.Tn)(a)?a((0,n.A)()):a;var c=(0,i.MH)(b)?b:(0,i.CN)([b]);let d=function(a){let b=new Map;for(let c of a)for(let a of Object.keys(c))b.has(a)||void 0===c[a]||b.set(a,b.size);return b}(c);return[(0,i.CN)([...d.keys()].map(f.Z.create)),k.create(c.map(a=>(function(a,b){let c=Object.keys(a),d=Array.from({length:b.size}),e=!1,f=c.length;for(let g of c){let c=b.get(g);if((0,i.b0)(c)){f--;continue}let h=a[g];((0,i.b0)(h)||(0,l.SS)(h))&&(e=!0),d[c]=h}if(f<b.size||e){let a=m.create();return h.s.create(d.map(b=>(0,i.b0)(b)?a:(0,j.$s)(b)))}return g.h.create(d)})(a,d)))]}var p=c(52116),q=c(8974);let r=(0,i.CN)({is:a=>"ColumnUpdateNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"ColumnUpdateNode",column:a,value:b})});var s=c(45817);function t(a){return Object.entries((0,i.Tn)(a)?a((0,n.A)()):a).filter(([a,b])=>void 0!==b).map(([a,b])=>r.create(f.Z.create(a),(0,j.$s)(b)))}let u=(0,i.CN)({is:a=>"OnDuplicateKeyNode"===a.kind,create:a=>(0,i.CN)({kind:"OnDuplicateKeyNode",updates:a})});class v{insertId;numInsertedOrUpdatedRows;constructor(a,b){this.insertId=a,this.numInsertedOrUpdatedRows=b}}var w=c(60231),x=c(46975),y=c(83913);let z=(0,i.CN)({is:a=>"OnConflictNode"===a.kind,create:()=>(0,i.CN)({kind:"OnConflictNode"}),cloneWith:(a,b)=>(0,i.CN)({...a,...b}),cloneWithIndexWhere:(a,b)=>(0,i.CN)({...a,indexWhere:a.indexWhere?y.o.cloneWithOperation(a.indexWhere,"And",b):y.o.create(b)}),cloneWithIndexOrWhere:(a,b)=>(0,i.CN)({...a,indexWhere:a.indexWhere?y.o.cloneWithOperation(a.indexWhere,"Or",b):y.o.create(b)}),cloneWithUpdateWhere:(a,b)=>(0,i.CN)({...a,updateWhere:a.updateWhere?y.o.cloneWithOperation(a.updateWhere,"And",b):y.o.create(b)}),cloneWithUpdateOrWhere:(a,b)=>(0,i.CN)({...a,updateWhere:a.updateWhere?y.o.cloneWithOperation(a.updateWhere,"Or",b):y.o.create(b)}),cloneWithoutIndexWhere:a=>(0,i.CN)({...a,indexWhere:void 0}),cloneWithoutUpdateWhere:a=>(0,i.CN)({...a,updateWhere:void 0})});var A=c(68949);class B{#l;constructor(a){this.#l=(0,i.CN)(a)}column(a){let b=f.Z.create(a);return new B({...this.#l,onConflictNode:z.cloneWith(this.#l.onConflictNode,{columns:this.#l.onConflictNode.columns?(0,i.CN)([...this.#l.onConflictNode.columns,b]):(0,i.CN)([b])})})}columns(a){let b=a.map(f.Z.create);return new B({...this.#l,onConflictNode:z.cloneWith(this.#l.onConflictNode,{columns:this.#l.onConflictNode.columns?(0,i.CN)([...this.#l.onConflictNode.columns,...b]):(0,i.CN)(b)})})}constraint(a){return new B({...this.#l,onConflictNode:z.cloneWith(this.#l.onConflictNode,{constraint:x.O.create(a)})})}expression(a){return new B({...this.#l,onConflictNode:z.cloneWith(this.#l.onConflictNode,{indexExpression:a.toOperationNode()})})}where(...a){return new B({...this.#l,onConflictNode:z.cloneWithIndexWhere(this.#l.onConflictNode,(0,A.GB)(a))})}whereRef(a,b,c){return new B({...this.#l,onConflictNode:z.cloneWithIndexWhere(this.#l.onConflictNode,(0,A.vC)(a,b,c))})}clearWhere(){return new B({...this.#l,onConflictNode:z.cloneWithoutIndexWhere(this.#l.onConflictNode)})}doNothing(){return new C({...this.#l,onConflictNode:z.cloneWith(this.#l.onConflictNode,{doNothing:!0})})}doUpdateSet(a){return new D({...this.#l,onConflictNode:z.cloneWith(this.#l.onConflictNode,{updates:t(a)})})}$call(a){return a(this)}}class C{#l;constructor(a){this.#l=(0,i.CN)(a)}toOperationNode(){return this.#l.onConflictNode}}class D{#l;constructor(a){this.#l=(0,i.CN)(a)}where(...a){return new D({...this.#l,onConflictNode:z.cloneWithUpdateWhere(this.#l.onConflictNode,(0,A.GB)(a))})}whereRef(a,b,c){return new D({...this.#l,onConflictNode:z.cloneWithUpdateWhere(this.#l.onConflictNode,(0,A.vC)(a,b,c))})}clearWhere(){return new D({...this.#l,onConflictNode:z.cloneWithoutUpdateWhere(this.#l.onConflictNode)})}$call(a){return a(this)}toOperationNode(){return this.#l.onConflictNode}}var E=c(2947);let F=(0,i.CN)({is:a=>"OrActionNode"===a.kind,create:a=>(0,i.CN)({kind:"OrActionNode",action:a})});class G{#l;constructor(a){this.#l=(0,i.CN)(a)}values(a){let[b,c]=o(a);return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{columns:b,values:c})})}columns(a){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{columns:(0,i.CN)(a.map(f.Z.create))})})}expression(a){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{values:(0,l.YK)(a)})})}defaultValues(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{defaultValues:!0})})}modifyEnd(a){return new G({...this.#l,queryNode:q.L.cloneWithEndModifier(this.#l.queryNode,a.toOperationNode())})}ignore(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{orAction:F.create("ignore")})})}orIgnore(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{orAction:F.create("ignore")})})}orAbort(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{orAction:F.create("abort")})})}orFail(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{orAction:F.create("fail")})})}orReplace(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{orAction:F.create("replace")})})}orRollback(){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{orAction:F.create("rollback")})})}top(a,b){return new G({...this.#l,queryNode:q.L.cloneWithTop(this.#l.queryNode,(0,E.f)(a,b))})}onConflict(a){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{onConflict:a(new B({onConflictNode:z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(a){return new G({...this.#l,queryNode:p.o.cloneWith(this.#l.queryNode,{onDuplicateKey:u.create(t(a))})})}returning(a){return new G({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.G)(a))})}returningAll(){return new G({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.J)())})}output(a){return new G({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.G)(a))})}outputAll(a){return new G({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.J)(a))})}clearReturning(){return new G({...this.#l,queryNode:q.L.cloneWithoutReturning(this.#l.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new G({...this.#l})}$castTo(){return new G(this.#l)}$narrowType(){return new G(this.#l)}$assertType(){return new G(this.#l)}withPlugin(a){return new G({...this.#l,executor:this.#l.executor.withPlugin(a)})}toOperationNode(){return this.#l.executor.transformQuery(this.#l.queryNode,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){let a=this.compile(),b=await this.#l.executor.executeQuery(a),{adapter:c}=this.#l.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new v(b.insertId,b.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#l.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new G({...this.#l,queryNode:q.L.cloneWithExplain(this.#l.queryNode,a,b)});return await c.execute()}}var H=c(30592),I=c(98812);class J{numDeletedRows;constructor(a){this.numDeletedRows=a}}var K=c(62298),L=c(45077),M=c(11802);class N{#l;constructor(a){this.#l=(0,i.CN)(a)}where(...a){return new N({...this.#l,queryNode:q.L.cloneWithWhere(this.#l.queryNode,(0,A.GB)(a))})}whereRef(a,b,c){return new N({...this.#l,queryNode:q.L.cloneWithWhere(this.#l.queryNode,(0,A.vC)(a,b,c))})}clearWhere(){return new N({...this.#l,queryNode:q.L.cloneWithoutWhere(this.#l.queryNode)})}top(a,b){return new N({...this.#l,queryNode:q.L.cloneWithTop(this.#l.queryNode,(0,E.f)(a,b))})}using(a){return new N({...this.#l,queryNode:K.e.cloneWithUsing(this.#l.queryNode,(0,I.JB)(a))})}innerJoin(...a){return this.#m("InnerJoin",a)}leftJoin(...a){return this.#m("LeftJoin",a)}rightJoin(...a){return this.#m("RightJoin",a)}fullJoin(...a){return this.#m("FullJoin",a)}#m(a,b){return new N({...this.#l,queryNode:q.L.cloneWithJoin(this.#l.queryNode,(0,H.a)(a,b))})}returning(a){return new N({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.G)(a))})}returningAll(a){return new N({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.J)(a))})}output(a){return new N({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.G)(a))})}outputAll(a){return new N({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.J)(a))})}clearReturning(){return new N({...this.#l,queryNode:q.L.cloneWithoutReturning(this.#l.queryNode)})}clearLimit(){return new N({...this.#l,queryNode:K.e.cloneWithoutLimit(this.#l.queryNode)})}orderBy(...a){return new N({...this.#l,queryNode:q.L.cloneWithOrderByItems(this.#l.queryNode,(0,M.xk)(a))})}clearOrderBy(){return new N({...this.#l,queryNode:q.L.cloneWithoutOrderBy(this.#l.queryNode)})}limit(a){return new N({...this.#l,queryNode:K.e.cloneWithLimit(this.#l.queryNode,L.a.create((0,j.$s)(a)))})}modifyEnd(a){return new N({...this.#l,queryNode:q.L.cloneWithEndModifier(this.#l.queryNode,a.toOperationNode())})}$call(a){return a(this)}$if(a,b){return a?b(this):new N({...this.#l})}$castTo(){return new N(this.#l)}$narrowType(){return new N(this.#l)}$assertType(){return new N(this.#l)}withPlugin(a){return new N({...this.#l,executor:this.#l.executor.withPlugin(a)})}toOperationNode(){return this.#l.executor.transformQuery(this.#l.queryNode,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){let a=this.compile(),b=await this.#l.executor.executeQuery(a),{adapter:c}=this.#l.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new J(b.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#l.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new N({...this.#l,queryNode:q.L.cloneWithExplain(this.#l.queryNode,a,b)});return await c.execute()}}var O=c(13624);class P{numUpdatedRows;numChangedRows;constructor(a,b){this.numUpdatedRows=a,this.numChangedRows=b}}class Q{#l;constructor(a){this.#l=(0,i.CN)(a)}where(...a){return new Q({...this.#l,queryNode:q.L.cloneWithWhere(this.#l.queryNode,(0,A.GB)(a))})}whereRef(a,b,c){return new Q({...this.#l,queryNode:q.L.cloneWithWhere(this.#l.queryNode,(0,A.vC)(a,b,c))})}clearWhere(){return new Q({...this.#l,queryNode:q.L.cloneWithoutWhere(this.#l.queryNode)})}top(a,b){return new Q({...this.#l,queryNode:q.L.cloneWithTop(this.#l.queryNode,(0,E.f)(a,b))})}from(a){return new Q({...this.#l,queryNode:O.U.cloneWithFromItems(this.#l.queryNode,(0,I.JB)(a))})}innerJoin(...a){return this.#m("InnerJoin",a)}leftJoin(...a){return this.#m("LeftJoin",a)}rightJoin(...a){return this.#m("RightJoin",a)}fullJoin(...a){return this.#m("FullJoin",a)}#m(a,b){return new Q({...this.#l,queryNode:q.L.cloneWithJoin(this.#l.queryNode,(0,H.a)(a,b))})}orderBy(...a){return new Q({...this.#l,queryNode:q.L.cloneWithOrderByItems(this.#l.queryNode,(0,M.xk)(a))})}clearOrderBy(){return new Q({...this.#l,queryNode:q.L.cloneWithoutOrderBy(this.#l.queryNode)})}limit(a){return new Q({...this.#l,queryNode:O.U.cloneWithLimit(this.#l.queryNode,L.a.create((0,j.$s)(a)))})}set(...a){return new Q({...this.#l,queryNode:O.U.cloneWithUpdates(this.#l.queryNode,function(...a){return 2===a.length?[r.create((0,s.$O)(a[0]),(0,j.$s)(a[1]))]:t(a[0])}(...a))})}returning(a){return new Q({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.G)(a))})}returningAll(a){return new Q({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.J)(a))})}output(a){return new Q({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.G)(a))})}outputAll(a){return new Q({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.J)(a))})}modifyEnd(a){return new Q({...this.#l,queryNode:q.L.cloneWithEndModifier(this.#l.queryNode,a.toOperationNode())})}clearReturning(){return new Q({...this.#l,queryNode:q.L.cloneWithoutReturning(this.#l.queryNode)})}$call(a){return a(this)}$if(a,b){return a?b(this):new Q({...this.#l})}$castTo(){return new Q(this.#l)}$narrowType(){return new Q(this.#l)}$assertType(){return new Q(this.#l)}withPlugin(a){return new Q({...this.#l,executor:this.#l.executor.withPlugin(a)})}toOperationNode(){return this.#l.executor.transformQuery(this.#l.queryNode,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){let a=this.compile(),b=await this.#l.executor.executeQuery(a),{adapter:c}=this.#l.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new P(b.numAffectedRows??BigInt(0),b.numChangedRows)]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}async *stream(a=100){let b=this.compile();for await(let c of this.#l.executor.stream(b,a))yield*c.rows}async explain(a,b){let c=new Q({...this.#l,queryNode:q.L.cloneWithExplain(this.#l.queryNode,a,b)});return await c.execute()}}var R=c(70946),S=c(79662);let T=(0,i.CN)({is:a=>"CommonTableExpressionNameNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CommonTableExpressionNameNode",table:S.H.create(a),columns:b?(0,i.CN)(b.map(f.Z.create)):void 0})});var U=c(42658);let V=(0,i.CN)({is:a=>"CommonTableExpressionNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"CommonTableExpressionNode",name:a,expression:b}),cloneWith:(a,b)=>(0,i.CN)({...a,...b})});class W{#l;constructor(a){this.#l=(0,i.CN)(a)}materialized(){return new W({...this.#l,node:V.cloneWith(this.#l.node,{materialized:!0})})}notMaterialized(){return new W({...this.#l,node:V.cloneWith(this.#l.node,{materialized:!1})})}toOperationNode(){return this.#l.node}}function X(a,b){var c;let d=b((0,U.bl)()).toOperationNode();return(0,i.Tn)(a)?a((c=d,a=>new W({node:V.create(Y(a),c)}))).toOperationNode():V.create(Y(a),d)}function Y(a){if(!a.includes("("))return T.create(a);{let b=a.split(/[\(\)]/),c=b[0],d=b[1].split(",").map(a=>a.trim());return T.create(c,d)}}let Z=(0,i.CN)({is:a=>"WithNode"===a.kind,create:(a,b)=>(0,i.CN)({kind:"WithNode",expressions:(0,i.CN)([a]),...b}),cloneWithExpression:(a,b)=>(0,i.CN)({...a,expressions:(0,i.CN)([...a.expressions,b])})});var $=c(61861),_=c(5595),aa=c(26883);let ab=(0,i.CN)({is:a=>"MatchedNode"===a.kind,create:(a,b=!1)=>(0,i.CN)({kind:"MatchedNode",not:a,bySource:b})});var ac=c(8711),ad=c(13072),ae=c(93448);function af(a,b,c){return ae.t.create((0,A.KN)([ab.create(!a.isMatched,a.bySource),...b&&b.length>0?[3===b.length&&c?(0,A.vC)(b[0],b[1],b[2]):(0,A.GB)(b)]:[]],"and",!1))}function ag(a){return(0,i.Kg)(a)?ad.z.create([a],[]):(0,ac.N)(a)?a.toOperationNode():a}var ah=c(67380);class ai{numChangedRows;constructor(a){this.numChangedRows=a}}class aj{#l;constructor(a){this.#l=(0,i.CN)(a)}modifyEnd(a){return new aj({...this.#l,queryNode:q.L.cloneWithEndModifier(this.#l.queryNode,a.toOperationNode())})}top(a,b){return new aj({...this.#l,queryNode:q.L.cloneWithTop(this.#l.queryNode,(0,E.f)(a,b))})}using(...a){return new ak({...this.#l,queryNode:aa.r.cloneWithUsing(this.#l.queryNode,(0,H.a)("Using",a))})}returning(a){return new aj({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.G)(a))})}returningAll(a){return new aj({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.J)(a))})}output(a){return new aj({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.G)(a))})}outputAll(a){return new aj({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.J)(a))})}}class ak{#l;constructor(a){this.#l=(0,i.CN)(a)}modifyEnd(a){return new ak({...this.#l,queryNode:q.L.cloneWithEndModifier(this.#l.queryNode,a.toOperationNode())})}top(a,b){return new ak({...this.#l,queryNode:q.L.cloneWithTop(this.#l.queryNode,(0,E.f)(a,b))})}whenMatched(){return this.#A([])}whenMatchedAnd(...a){return this.#A(a)}whenMatchedAndRef(a,b,c){return this.#A([a,b,c],!0)}#A(a,b){return new al({...this.#l,queryNode:aa.r.cloneWithWhen(this.#l.queryNode,af({isMatched:!0},a,b))})}whenNotMatched(){return this.#B([])}whenNotMatchedAnd(...a){return this.#B(a)}whenNotMatchedAndRef(a,b,c){return this.#B([a,b,c],!0)}whenNotMatchedBySource(){return this.#B([],!1,!0)}whenNotMatchedBySourceAnd(...a){return this.#B(a,!1,!0)}whenNotMatchedBySourceAndRef(a,b,c){return this.#B([a,b,c],!0,!0)}returning(a){return new ak({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.G)(a))})}returningAll(a){return new ak({...this.#l,queryNode:q.L.cloneWithReturning(this.#l.queryNode,(0,e.J)(a))})}output(a){return new ak({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.G)(a))})}outputAll(a){return new ak({...this.#l,queryNode:q.L.cloneWithOutput(this.#l.queryNode,(0,e.J)(a))})}#B(a,b=!1,c=!1){let d={...this.#l,queryNode:aa.r.cloneWithWhen(this.#l.queryNode,af({isMatched:!1,bySource:c},a,b))};return new(c?al:am)(d)}$call(a){return a(this)}$if(a,b){return a?b(this):new ak({...this.#l})}toOperationNode(){return this.#l.executor.transformQuery(this.#l.queryNode,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){let a=this.compile(),b=await this.#l.executor.executeQuery(a),{adapter:c}=this.#l.executor,d=a.query;return d.returning&&c.supportsReturning||d.output&&c.supportsOutput?b.rows:[new ai(b.numAffectedRows)]}async executeTakeFirst(){let[a]=await this.execute();return a}async executeTakeFirstOrThrow(a=w.F){let b=await this.executeTakeFirst();if(void 0===b)throw(0,w.x)(a)?new a(this.toOperationNode()):a(this.toOperationNode());return b}}class al{#l;constructor(a){this.#l=(0,i.CN)(a)}thenDelete(){return new ak({...this.#l,queryNode:aa.r.cloneWithThen(this.#l.queryNode,ag("delete"))})}thenDoNothing(){return new ak({...this.#l,queryNode:aa.r.cloneWithThen(this.#l.queryNode,ag("do nothing"))})}thenUpdate(a){return new ak({...this.#l,queryNode:aa.r.cloneWithThen(this.#l.queryNode,ag(a(new Q({queryId:this.#l.queryId,executor:ah.W,queryNode:O.U.createWithoutTable()}))))})}thenUpdateSet(...a){return this.thenUpdate(b=>b.set(...a))}}class am{#l;constructor(a){this.#l=(0,i.CN)(a)}thenDoNothing(){return new ak({...this.#l,queryNode:aa.r.cloneWithThen(this.#l.queryNode,ag("do nothing"))})}thenInsertValues(a){let[b,c]=o(a);return new ak({...this.#l,queryNode:aa.r.cloneWithThen(this.#l.queryNode,ag(p.o.cloneWith(p.o.createWithoutInto(),{columns:b,values:c})))})}}class an{#l;constructor(a){this.#l=(0,i.CN)(a)}selectFrom(a){return(0,d.c)({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:R.L.createFrom((0,I.JB)(a),this.#l.withNode)})}selectNoFrom(a){return(0,d.c)({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:R.L.cloneWithSelections(R.L.create(this.#l.withNode),(0,e.G)(a))})}insertInto(a){return new G({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:p.o.create((0,I.M$)(a),this.#l.withNode)})}replaceInto(a){return new G({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:p.o.create((0,I.M$)(a),this.#l.withNode,!0)})}deleteFrom(a){return new N({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:K.e.create((0,I.JB)(a),this.#l.withNode)})}updateTable(a){return new Q({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:O.U.create((0,I.JB)(a),this.#l.withNode)})}mergeInto(a){return new aj({queryId:(0,$.a)(),executor:this.#l.executor,queryNode:aa.r.create((0,I.Xm)(a),this.#l.withNode)})}with(a,b){let c=X(a,b);return new an({...this.#l,withNode:this.#l.withNode?Z.cloneWithExpression(this.#l.withNode,c):Z.create(c)})}withRecursive(a,b){let c=X(a,b);return new an({...this.#l,withNode:this.#l.withNode?Z.cloneWithExpression(this.#l.withNode,c):Z.create(c,{recursive:!0})})}withPlugin(a){return new an({...this.#l,executor:this.#l.executor.withPlugin(a)})}withoutPlugins(){return new an({...this.#l,executor:this.#l.executor.withoutPlugins()})}withSchema(a){return new an({...this.#l,executor:this.#l.executor.withPluginAtFront(new _.B(a))})}}},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},42378:(a,b,c)=>{"use strict";var d=c(91330);c.o(d,"useRouter")&&c.d(b,{useRouter:function(){return d.useRouter}}),c.o(d,"useSearchParams")&&c.d(b,{useSearchParams:function(){return d.useSearchParams}})},42474:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"DetachedPromise",{enumerable:!0,get:function(){return c}});class c{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c,b=d}),this.resolve=a,this.reject=b}}},42658:(a,b,c)=>{"use strict";c.d(b,{GQ:()=>u,EQ:()=>v,bl:()=>t});var d=c(5209),e=c(97990),f=c(18662);let g=(0,e.CN)({is:a=>"PartitionByNode"===a.kind,create:a=>(0,e.CN)({kind:"PartitionByNode",items:(0,e.CN)(a)}),cloneWithItems:(a,b)=>(0,e.CN)({...a,items:(0,e.CN)([...a.items,...b])})}),h=(0,e.CN)({is:a=>"OverNode"===a.kind,create:()=>(0,e.CN)({kind:"OverNode"}),cloneWithOrderByItems:(a,b)=>(0,e.CN)({...a,orderBy:a.orderBy?f.O.cloneWithItems(a.orderBy,b):f.O.create(b)}),cloneWithPartitionByItems:(a,b)=>(0,e.CN)({...a,partitionBy:a.partitionBy?g.cloneWithItems(a.partitionBy,b):g.create(b)})});var i=c(13072),j=c(68949);class k{#l;constructor(a){this.#l=(0,e.CN)(a)}on(...a){return new k({...this.#l,joinNode:d.b.cloneWithOn(this.#l.joinNode,(0,j.GB)(a))})}onRef(a,b,c){return new k({...this.#l,joinNode:d.b.cloneWithOn(this.#l.joinNode,(0,j.vC)(a,b,c))})}onTrue(){return new k({...this.#l,joinNode:d.b.cloneWithOn(this.#l.joinNode,i.z.createWithSql("true"))})}$call(a){return a(this)}toOperationNode(){return this.#l.joinNode}}var l=c(8974),m=c(11802);let n=(0,e.CN)({is:a=>"PartitionByItemNode"===a.kind,create:a=>(0,e.CN)({kind:"PartitionByItemNode",partitionBy:a})});var o=c(45817);class p{#l;constructor(a){this.#l=(0,e.CN)(a)}orderBy(...a){return new p({overNode:h.cloneWithOrderByItems(this.#l.overNode,(0,m.xk)(a))})}clearOrderBy(){return new p({overNode:l.L.cloneWithoutOrderBy(this.#l.overNode)})}partitionBy(a){return new p({overNode:h.cloneWithPartitionByItems(this.#l.overNode,(0,o.kU)(a).map(n.create))})}$call(a){return a(this)}toOperationNode(){return this.#l.overNode}}var q=c(40670),r=c(67380),s=c(98812);function t(){return new q.n({executor:r.W})}function u(a,b){return new k({joinNode:d.b.create(a,(0,s.uJ)(b))})}function v(){return new p({overNode:h.create()})}},43227:(a,b,c)=>{"use strict";c.d(b,{q:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"ValueNode"===a.kind,create:a=>(0,d.CN)({kind:"ValueNode",value:a}),createImmediate:a=>(0,d.CN)({kind:"ValueNode",value:a,immediate:!0})})},44338:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{REDIRECT_ERROR_CODE:function(){return e},RedirectType:function(){return f},isRedirectError:function(){return g}});let d=c(62284),e="NEXT_REDIRECT";var f=function(a){return a.push="push",a.replace="replace",a}({});function g(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,f]=b,g=b.slice(2,-2).join(";"),h=Number(b.at(-2));return c===e&&("replace"===f||"push"===f)&&"string"==typeof g&&!isNaN(h)&&h in d.RedirectStatusCode}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},44500:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{RequestCookies:function(){return d.RequestCookies},ResponseCookies:function(){return d.ResponseCookies},stringifyCookie:function(){return d.stringifyCookie}});let d=c(7265)},44820:(a,b,c)=>{"use strict";c.d(b,{h:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"PrimitiveValueListNode"===a.kind,create:a=>(0,d.CN)({kind:"PrimitiveValueListNode",values:(0,d.CN)([...a])})})},45077:(a,b,c)=>{"use strict";c.d(b,{a:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"LimitNode"===a.kind,create:a=>(0,d.CN)({kind:"LimitNode",limit:a})})},45441:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{AppRenderSpan:function(){return i},AppRouteRouteHandlersSpan:function(){return l},BaseServerSpan:function(){return c},LoadComponentsSpan:function(){return d},LogSpanAllowList:function(){return p},MiddlewareSpan:function(){return n},NextNodeServerSpan:function(){return f},NextServerSpan:function(){return e},NextVanillaSpanAllowlist:function(){return o},NodeSpan:function(){return k},RenderSpan:function(){return h},ResolveMetadataSpan:function(){return m},RouterSpan:function(){return j},StartServerSpan:function(){return g}});var c=function(a){return a.handleRequest="BaseServer.handleRequest",a.run="BaseServer.run",a.pipe="BaseServer.pipe",a.getStaticHTML="BaseServer.getStaticHTML",a.render="BaseServer.render",a.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",a.renderToResponse="BaseServer.renderToResponse",a.renderToHTML="BaseServer.renderToHTML",a.renderError="BaseServer.renderError",a.renderErrorToResponse="BaseServer.renderErrorToResponse",a.renderErrorToHTML="BaseServer.renderErrorToHTML",a.render404="BaseServer.render404",a}(c||{}),d=function(a){return a.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",a.loadComponents="LoadComponents.loadComponents",a}(d||{}),e=function(a){return a.getRequestHandler="NextServer.getRequestHandler",a.getServer="NextServer.getServer",a.getServerRequestHandler="NextServer.getServerRequestHandler",a.createServer="createServer.createServer",a}(e||{}),f=function(a){return a.compression="NextNodeServer.compression",a.getBuildId="NextNodeServer.getBuildId",a.createComponentTree="NextNodeServer.createComponentTree",a.clientComponentLoading="NextNodeServer.clientComponentLoading",a.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",a.generateStaticRoutes="NextNodeServer.generateStaticRoutes",a.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",a.generatePublicRoutes="NextNodeServer.generatePublicRoutes",a.generateImageRoutes="NextNodeServer.generateImageRoutes.route",a.sendRenderResult="NextNodeServer.sendRenderResult",a.proxyRequest="NextNodeServer.proxyRequest",a.runApi="NextNodeServer.runApi",a.render="NextNodeServer.render",a.renderHTML="NextNodeServer.renderHTML",a.imageOptimizer="NextNodeServer.imageOptimizer",a.getPagePath="NextNodeServer.getPagePath",a.getRoutesManifest="NextNodeServer.getRoutesManifest",a.findPageComponents="NextNodeServer.findPageComponents",a.getFontManifest="NextNodeServer.getFontManifest",a.getServerComponentManifest="NextNodeServer.getServerComponentManifest",a.getRequestHandler="NextNodeServer.getRequestHandler",a.renderToHTML="NextNodeServer.renderToHTML",a.renderError="NextNodeServer.renderError",a.renderErrorToHTML="NextNodeServer.renderErrorToHTML",a.render404="NextNodeServer.render404",a.startResponse="NextNodeServer.startResponse",a.route="route",a.onProxyReq="onProxyReq",a.apiResolver="apiResolver",a.internalFetch="internalFetch",a}(f||{}),g=function(a){return a.startServer="startServer.startServer",a}(g||{}),h=function(a){return a.getServerSideProps="Render.getServerSideProps",a.getStaticProps="Render.getStaticProps",a.renderToString="Render.renderToString",a.renderDocument="Render.renderDocument",a.createBodyResult="Render.createBodyResult",a}(h||{}),i=function(a){return a.renderToString="AppRender.renderToString",a.renderToReadableStream="AppRender.renderToReadableStream",a.getBodyResult="AppRender.getBodyResult",a.fetch="AppRender.fetch",a}(i||{}),j=function(a){return a.executeRoute="Router.executeRoute",a}(j||{}),k=function(a){return a.runHandler="Node.runHandler",a}(k||{}),l=function(a){return a.runHandler="AppRouteRouteHandlers.runHandler",a}(l||{}),m=function(a){return a.generateMetadata="ResolveMetadata.generateMetadata",a.generateViewport="ResolveMetadata.generateViewport",a}(m||{}),n=function(a){return a.execute="Middleware.execute",a}(n||{});let o=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],p=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},45817:(a,b,c)=>{"use strict";c.d(b,{$O:()=>r,DT:()=>u,NF:()=>s,Ow:()=>w,RY:()=>v,kU:()=>q,q5:()=>t,vd:()=>p});var d=c(67798),e=c(83878),f=c(89227),g=c(79662),h=c(97990),i=c(78614),j=c(46975),k=c(11802),l=c(35580),m=c(79374),n=c(91767),o=c(70376);function p(a){return(0,h.Kg)(a)?t(a):a.toOperationNode()}function q(a){return(0,h.MH)(a)?a.map(a=>r(a)):[r(a)]}function r(a){return(0,i.SS)(a)?(0,i.YK)(a):p(a)}function s(a,b){let c=t(a);if((0,l.Xm)(b))return m.Q.create(c,n.k.create(l.zX.create(b)));let d=b.slice(0,-1);if((0,l.Xm)(d))return m.Q.create(c,o.c.create(l.zX.create(d)));throw Error(`Invalid JSON operator: ${b}`)}function t(a){if(!a.includes("."))return f.q.create(e.Z.create(a));let b=a.split(".").map(x);if(3===b.length){var c=b;let[a,d,h]=c;return f.q.create(e.Z.create(h),g.H.createWithSchema(a,d))}if(2===b.length){var d=b;let[a,c]=d;return f.q.create(e.Z.create(c),g.H.create(a))}throw Error(`invalid column reference ${a}`)}function u(a){let b=" as ";if(!a.includes(b))return t(a);{let[c,e]=a.split(b).map(x);return d.N.create(t(c),j.O.create(e))}}function v(a){return e.Z.create(a)}function w(a){if(!a.includes(" "))return v(a);{let[b,c]=a.split(" ").map(x);if(!(0,k.bE)(c))throw Error(`invalid order direction "${c}" next to "${b}"`);return(0,k.xk)([b,c])[0]}}function x(a){return a.trim()}},46204:(a,b,c)=>{"use strict";a.exports=c(49754).vendored["react-rsc"].React},46975:(a,b,c)=>{"use strict";c.d(b,{O:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"IdentifierNode"===a.kind,create:a=>(0,d.CN)({kind:"IdentifierNode",name:a})})},47614:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRedirectError:function(){return g},getRedirectStatusCodeFromError:function(){return l},getRedirectTypeFromError:function(){return k},getURLFromRedirectError:function(){return j},permanentRedirect:function(){return i},redirect:function(){return h}});let d=c(91203),e=c(92781),f=c(19121).actionAsyncStorage;function g(a,b,c){void 0===c&&(c=d.RedirectStatusCode.TemporaryRedirect);let f=Object.defineProperty(Error(e.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return f.digest=e.REDIRECT_ERROR_CODE+";"+b+";"+a+";"+c+";",f}function h(a,b){var c;throw null!=b||(b=(null==f||null==(c=f.getStore())?void 0:c.isAction)?e.RedirectType.push:e.RedirectType.replace),g(a,b,d.RedirectStatusCode.TemporaryRedirect)}function i(a,b){throw void 0===b&&(b=e.RedirectType.replace),g(a,b,d.RedirectStatusCode.PermanentRedirect)}function j(a){return(0,e.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function k(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function l(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},47827:(a,b,c)=>{"use strict";c.d(b,{J:()=>j,UserProvider:()=>i});var d=c(21124),e=c(34294),f=c(38301);let g=a=>fetch(a).then(a=>a.json()),h=(0,f.createContext)(null);function i({children:a}){let{data:b,error:c,isLoading:f}=(0,e.Ay)("/api/profile",g);return(0,d.jsx)(h.Provider,{value:{user:b||null,isLoading:f},children:a})}function j(){let a=(0,f.useContext)(h);if(!a)throw Error("Error: useUser debe ser usado dentro de UserProvider");return a}},48494:(a,b,c)=>{"use strict";c.d(b,{G:()=>f});var d=c(22058),e=c(97990);async function f(a){let b=new d.c,c=new d.c;return a.provideConnection(async a=>(b.resolve(a),await c.promise)).catch(a=>b.reject(a)),(0,e.CN)({connection:await b.promise,release:c.resolve})}},49904:(a,b,c)=>{Promise.resolve().then(c.bind(c,47827))},50931:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{chainStreams:function(){return n},continueDynamicHTMLResume:function(){return E},continueDynamicPrerender:function(){return C},continueFizzStream:function(){return B},continueStaticPrerender:function(){return D},createBufferedTransformStream:function(){return s},createDocumentClosingStream:function(){return F},createRootLayoutValidatorStream:function(){return A},renderToInitialFizzStream:function(){return u},streamFromBuffer:function(){return p},streamFromString:function(){return o},streamToBuffer:function(){return q},streamToString:function(){return r}});let d=c(36821),e=c(45441),f=c(42474),g=c(86331),h=c(93047),i=c(53476),j=c(57941),k=c(54353);function l(){}let m=new TextEncoder;function n(...a){if(0===a.length)return new ReadableStream({start(a){a.close()}});if(1===a.length)return a[0];let{readable:b,writable:c}=new TransformStream,d=a[0].pipeTo(c,{preventClose:!0}),e=1;for(;e<a.length-1;e++){let b=a[e];d=d.then(()=>b.pipeTo(c,{preventClose:!0}))}let f=a[e];return(d=d.then(()=>f.pipeTo(c))).catch(l),b}function o(a){return new ReadableStream({start(b){b.enqueue(m.encode(a)),b.close()}})}function p(a){return new ReadableStream({start(b){b.enqueue(a),b.close()}})}async function q(a){let b=a.getReader(),c=[];for(;;){let{done:a,value:d}=await b.read();if(a)break;c.push(d)}return Buffer.concat(c)}async function r(a,b){let c=new TextDecoder("utf-8",{fatal:!0}),d="";for await(let e of a){if(null==b?void 0:b.aborted)return d;d+=c.decode(e,{stream:!0})}return d+c.decode()}function s(){let a,b=[],c=0;return new TransformStream({transform(d,e){b.push(d),c+=d.byteLength,(d=>{if(a)return;let e=new f.DetachedPromise;a=e,(0,g.scheduleImmediate)(()=>{try{let a=new Uint8Array(c),e=0;for(let c=0;c<b.length;c++){let d=b[c];a.set(d,e),e+=d.byteLength}b.length=0,c=0,d.enqueue(a)}catch{}finally{a=void 0,e.resolve()}})})(e)},flush(){if(a)return a.promise}})}function t(a,b){let c=!1;return new TransformStream({transform(d,e){if(a&&!c){c=!0;let a=new TextDecoder("utf-8",{fatal:!0}).decode(d,{stream:!0}),f=(0,k.insertBuildIdComment)(a,b);e.enqueue(m.encode(f));return}e.enqueue(d)}})}function u({ReactDOMServer:a,element:b,streamOptions:c}){return(0,d.getTracer)().trace(e.AppRenderSpan.renderToReadableStream,async()=>a.renderToReadableStream(b,c))}function v(a){let b=-1,c=!1;return new TransformStream({async transform(d,e){let f=-1,g=-1;if(b++,c)return void e.enqueue(d);let j=0;if(-1===f){if(-1===(f=(0,i.indexOfUint8Array)(d,h.ENCODED_TAGS.META.ICON_MARK)))return void e.enqueue(d);47===d[f+(j=h.ENCODED_TAGS.META.ICON_MARK.length)]?j+=2:j++}if(0===b){if(g=(0,i.indexOfUint8Array)(d,h.ENCODED_TAGS.CLOSED.HEAD),-1!==f){if(f<g){let a=new Uint8Array(d.length-j);a.set(d.subarray(0,f)),a.set(d.subarray(f+j),f),d=a}else{let b=await a(),c=m.encode(b),e=c.length,g=new Uint8Array(d.length-j+e);g.set(d.subarray(0,f)),g.set(c,f),g.set(d.subarray(f+j),f+e),d=g}c=!0}}else{let b=await a(),e=m.encode(b),g=e.length,h=new Uint8Array(d.length-j+g);h.set(d.subarray(0,f)),h.set(e,f),h.set(d.subarray(f+j),f+g),d=h,c=!0}e.enqueue(d)}})}function w(a){let b=!1,c=!1;return new TransformStream({async transform(d,e){c=!0;let f=await a();if(b){if(f){let a=m.encode(f);e.enqueue(a)}e.enqueue(d)}else{let a=(0,i.indexOfUint8Array)(d,h.ENCODED_TAGS.CLOSED.HEAD);if(-1!==a){if(f){let b=m.encode(f),c=new Uint8Array(d.length+b.length);c.set(d.slice(0,a)),c.set(b,a),c.set(d.slice(a),a+b.length),e.enqueue(c)}else e.enqueue(d);b=!0}else f&&e.enqueue(m.encode(f)),e.enqueue(d),b=!0}},async flush(b){if(c){let c=await a();c&&b.enqueue(m.encode(c))}}})}function x(a,b){let c=!1,d=null,e=!1;function f(a){return d||(d=h(a)),d}async function h(d){let f=a.getReader();b&&await (0,g.atLeastOneTask)();try{for(;;){let{done:a,value:h}=await f.read();if(a){e=!0;return}b||c||await (0,g.atLeastOneTask)(),d.enqueue(h)}}catch(a){d.error(a)}}return new TransformStream({start(a){b||f(a)},transform(a,c){c.enqueue(a),b&&f(c)},flush(a){if(c=!0,!e)return f(a)}})}let y="</body></html>";function z(){let a=!1;return new TransformStream({transform(b,c){if(a)return c.enqueue(b);let d=(0,i.indexOfUint8Array)(b,h.ENCODED_TAGS.CLOSED.BODY_AND_HTML);if(d>-1){if(a=!0,b.length===h.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length)return;let e=b.slice(0,d);if(c.enqueue(e),b.length>h.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length+d){let a=b.slice(d+h.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length);c.enqueue(a)}}else c.enqueue(b)},flush(a){a.enqueue(h.ENCODED_TAGS.CLOSED.BODY_AND_HTML)}})}function A(){let a=!1,b=!1;return new TransformStream({async transform(c,d){!a&&(0,i.indexOfUint8Array)(c,h.ENCODED_TAGS.OPENING.HTML)>-1&&(a=!0),!b&&(0,i.indexOfUint8Array)(c,h.ENCODED_TAGS.OPENING.BODY)>-1&&(b=!0),d.enqueue(c)},flush(c){let d=[];a||d.push("html"),b||d.push("body"),d.length&&c.enqueue(m.encode(`<html id="__next_error__">
            <template
              data-next-error-message="Missing ${d.map(a=>`<${a}>`).join(d.length>1?" and ":"")} tags in the root layout.
Read more at https://nextjs.org/docs/messages/missing-root-layout-tags"
              data-next-error-digest="${j.MISSING_ROOT_TAGS_ERROR}"
              data-next-error-stack=""
            ></template>
          `))}})}async function B(a,{suffix:b,inlinedDataStream:c,isStaticGeneration:d,isBuildTimePrerendering:e,buildId:h,getServerInsertedHTML:i,getServerInsertedMetadata:j,validateRootLayout:k}){let l,n,o=b?b.split(y,1)[0]:null;d&&await a.allReady;var p=[s(),t(e,h),v(j),null!=o&&o.length>0?(n=!1,new TransformStream({transform(a,b){if(b.enqueue(a),!n){n=!0;let a=new f.DetachedPromise;l=a,(0,g.scheduleImmediate)(()=>{try{b.enqueue(m.encode(o))}catch{}finally{l=void 0,a.resolve()}})}},flush(a){if(l)return l.promise;n||a.enqueue(m.encode(o))}})):null,c?x(c,!0):null,k?A():null,z(),w(i)];let q=a;for(let a of p)a&&(q=q.pipeThrough(a));return q}async function C(a,{getServerInsertedHTML:b,getServerInsertedMetadata:c}){return a.pipeThrough(s()).pipeThrough(new TransformStream({transform(a,b){(0,i.isEquivalentUint8Arrays)(a,h.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,i.isEquivalentUint8Arrays)(a,h.ENCODED_TAGS.CLOSED.BODY)||(0,i.isEquivalentUint8Arrays)(a,h.ENCODED_TAGS.CLOSED.HTML)||(a=(0,i.removeFromUint8Array)(a,h.ENCODED_TAGS.CLOSED.BODY),a=(0,i.removeFromUint8Array)(a,h.ENCODED_TAGS.CLOSED.HTML),b.enqueue(a))}})).pipeThrough(w(b)).pipeThrough(v(c))}async function D(a,{inlinedDataStream:b,getServerInsertedHTML:c,getServerInsertedMetadata:d,isBuildTimePrerendering:e,buildId:f}){return a.pipeThrough(s()).pipeThrough(t(e,f)).pipeThrough(w(c)).pipeThrough(v(d)).pipeThrough(x(b,!0)).pipeThrough(z())}async function E(a,{delayDataUntilFirstHtmlChunk:b,inlinedDataStream:c,getServerInsertedHTML:d,getServerInsertedMetadata:e}){return a.pipeThrough(s()).pipeThrough(w(d)).pipeThrough(v(e)).pipeThrough(x(c,b)).pipeThrough(z())}function F(){return o(y)}},51318:(a,b,c)=>{"use strict";a.exports=c(9907)},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>h});var d=c(75338),e=c(94752),f=c.n(e);c(61135);var g=c(29661);let h={title:"Aquafornais",description:"uwu"};function i({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:`${f().variable}  antialiased`,children:(0,d.jsx)(g.UserProvider,{children:a})})})}},52116:(a,b,c)=>{"use strict";c.d(b,{o:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"InsertQueryNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"InsertQueryNode",into:a,...b&&{with:b},replace:c}),createWithoutInto:()=>(0,d.CN)({kind:"InsertQueryNode"}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},52318:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{BailoutToCSRError:function(){return d},isBailoutToCSRError:function(){return e}});let c="BAILOUT_TO_CLIENT_SIDE_RENDERING";class d extends Error{constructor(a){super("Bail out to client-side rendering: "+a),this.reason=a,this.digest=c}}function e(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===c}},52577:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DynamicServerError:function(){return d},isDynamicServerError:function(){return e}});let c="DYNAMIC_SERVER_USAGE";class d extends Error{constructor(a){super("Dynamic server usage: "+a),this.description=a,this.digest=c}}function e(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===c}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},52741:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"notFound",{enumerable:!0,get:function(){return e}});let d=""+c(15570).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function e(){let a=Object.defineProperty(Error(d),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=d,a}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},53476:(a,b)=>{"use strict";function c(a,b){if(0===b.length)return 0;if(0===a.length||b.length>a.length)return -1;for(let c=0;c<=a.length-b.length;c++){let d=!0;for(let e=0;e<b.length;e++)if(a[c+e]!==b[e]){d=!1;break}if(d)return c}return -1}function d(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function e(a,b){let d=c(a,b);if(0===d)return a.subarray(b.length);if(!(d>-1))return a;{let c=new Uint8Array(a.length-b.length);return c.set(a.slice(0,d)),c.set(a.slice(d+b.length),d),c}}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{indexOfUint8Array:function(){return c},isEquivalentUint8Arrays:function(){return d},removeFromUint8Array:function(){return e}})},54210:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{arrayBufferToString:function(){return h},decrypt:function(){return k},encrypt:function(){return j},getActionEncryptionKey:function(){return p},getClientReferenceManifestForRsc:function(){return o},getServerModuleMap:function(){return n},setReferenceManifestsSingleton:function(){return m},stringToUint8Array:function(){return i}});let e=c(58871),f=c(17916),g=c(29294);function h(a){let b=new Uint8Array(a),c=b.byteLength;if(c<65535)return String.fromCharCode.apply(null,b);let d="";for(let a=0;a<c;a++)d+=String.fromCharCode(b[a]);return d}function i(a){let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function j(a,b,c){return crypto.subtle.encrypt({name:"AES-GCM",iv:b},a,c)}function k(a,b,c){return crypto.subtle.decrypt({name:"AES-GCM",iv:b},a,c)}let l=Symbol.for("next.server.action-manifests");function m({page:a,clientReferenceManifest:b,serverActionsManifest:c,serverModuleMap:d}){var e;let g=null==(e=globalThis[l])?void 0:e.clientReferenceManifestsPerPage;globalThis[l]={clientReferenceManifestsPerPage:{...g,[(0,f.normalizeAppPath)(a)]:b},serverActionsManifest:c,serverModuleMap:d}}function n(){let a=globalThis[l];if(!a)throw Object.defineProperty(new e.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return a.serverModuleMap}function o(){let a=globalThis[l];if(!a)throw Object.defineProperty(new e.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:b}=a,c=g.workAsyncStorage.getStore();if(!c){var d=b;let a=Object.values(d),c={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let b of a)c.clientModules={...c.clientModules,...b.clientModules},c.edgeRscModuleMapping={...c.edgeRscModuleMapping,...b.edgeRscModuleMapping},c.rscModuleMapping={...c.rscModuleMapping,...b.rscModuleMapping};return c}let f=b[c.route];if(!f)throw Object.defineProperty(new e.InvariantError(`Missing Client Reference Manifest for ${c.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return f}async function p(){if(d)return d;let a=globalThis[l];if(!a)throw Object.defineProperty(new e.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let b=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||a.serverActionsManifest.encryptionKey;if(void 0===b)throw Object.defineProperty(new e.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return d=await crypto.subtle.importKey("raw",i(atob(b)),"AES-GCM",!0,["encrypt","decrypt"])}},54353:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{DOC_PREFETCH_RANGE_HEADER_VALUE:function(){return d},doesExportedHtmlMatchBuildId:function(){return g},insertBuildIdComment:function(){return f}});let c="<!DOCTYPE html>",d="bytes=0-63";function e(a){return a.slice(0,24).replace(/-/g,"_")}function f(a,b){return b.includes("--\x3e")||!a.startsWith(c)?a:a.replace(c,c+"\x3c!--"+e(b)+"--\x3e")}function g(a,b){return a.startsWith(c+"\x3c!--"+e(b)+"--\x3e")}},56552:(a,b,c)=>{"use strict";c.d(b,{bj:()=>i,uc:()=>k});var d=c(67798),e=c(46975),f=c(8711),g=c(98812),h=c(97990);class i{#C;get table(){return this.#C}constructor(a){this.#C=a}as(a){return new j(this.#C,a)}}class j{#C;#o;get table(){return this.#C}get alias(){return this.#o}constructor(a,b){this.#C=a,this.#o=b}toOperationNode(){return d.N.create((0,g.M$)(this.#C),e.O.create(this.#o))}}function k(a){return(0,h.Gv)(a)&&(0,f.N)(a)&&(0,h.Kg)(a.table)&&(0,h.Kg)(a.alias)}},57769:(a,b,c)=>{"use strict";c.d(b,{Is:()=>k});var d=c(67798),e=c(78039),f=c(46975),g=c(8711),h=c(97413),i=c(26633),j=c(68949);class k{#D;constructor(a){this.#D=a}get expressionType(){}as(a){return new l(this,a)}or(...a){return new m(h.K.create(this.#D,(0,j.GB)(a)))}and(...a){return new n(e.s.create(this.#D,(0,j.GB)(a)))}$castTo(){return new k(this.#D)}$notNull(){return new k(this.#D)}toOperationNode(){return this.#D}}class l{#E;#o;constructor(a,b){this.#E=a,this.#o=b}get expression(){return this.#E}get alias(){return this.#o}toOperationNode(){return d.N.create(this.#E.toOperationNode(),(0,g.N)(this.#o)?this.#o.toOperationNode():f.O.create(this.#o))}}class m{#D;constructor(a){this.#D=a}get expressionType(){}as(a){return new l(this,a)}or(...a){return new m(h.K.create(this.#D,(0,j.GB)(a)))}$castTo(){return new m(this.#D)}toOperationNode(){return i.k.create(this.#D)}}class n{#D;constructor(a){this.#D=a}get expressionType(){}as(a){return new l(this,a)}and(...a){return new n(e.s.create(this.#D,(0,j.GB)(a)))}$castTo(){return new n(this.#D)}toOperationNode(){return i.k.create(this.#D)}}},57941:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"MISSING_ROOT_TAGS_ERROR",{enumerable:!0,get:function(){return c}});let c="NEXT_MISSING_ROOT_TAGS";("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},58871:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"InvariantError",{enumerable:!0,get:function(){return c}});class c extends Error{constructor(a,b){super("Invariant: "+(a.endsWith(".")?a:a+".")+" This is a bug in Next.js.",b),this.name="InvariantError"}}},60231:(a,b,c)=>{"use strict";c.d(b,{F:()=>d,x:()=>e});class d extends Error{node;constructor(a){super("no result"),this.node=a}}function e(a){return Object.prototype.hasOwnProperty.call(a,"prototype")}},60326:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},60551:(a,b,c)=>{"use strict";c.d(b,{B:()=>f,q:()=>g});var d=c(8711),e=c(97990);function f(a){return(0,e.Gv)(a)&&"expressionType"in a&&(0,d.N)(a)}function g(a){return(0,e.Gv)(a)&&"expression"in a&&(0,e.Kg)(a.alias)&&(0,d.N)(a)}},60581:(a,b,c)=>{"use strict";c.d(b,{$s:()=>j,U2:()=>i,dJ:()=>l,qH:()=>k});var d=c(44820),e=c(96544),f=c(43227),g=c(97990),h=c(78614);function i(a){var b;return(0,g.MH)(a)?(b=a).some(h.SS)?e.s.create(b.map(a=>j(a))):d.h.create(b):j(a)}function j(a){return(0,h.SS)(a)?(0,h.YK)(a):f.q.create(a)}function k(a){return(0,g.Et)(a)||(0,g.Lm)(a)||(0,g.kZ)(a)}function l(a){if(!k(a))throw Error(`unsafe immediate value ${JSON.stringify(a)}`);return f.q.createImmediate(a)}},61135:()=>{},61861:(a,b,c)=>{"use strict";c.d(b,{a:()=>e});var d=c(92140);function e(){return new f}class f{#F;get queryId(){return void 0===this.#F&&(this.#F=(0,d.D)(8)),this.#F}}},62284:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"RedirectStatusCode",{enumerable:!0,get:function(){return c}});var c=function(a){return a[a.SeeOther=303]="SeeOther",a[a.TemporaryRedirect=307]="TemporaryRedirect",a[a.PermanentRedirect=308]="PermanentRedirect",a}({});("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},62298:(a,b,c)=>{"use strict";c.d(b,{e:()=>h});var d=c(97990),e=c(72356);let f=(0,d.CN)({is:a=>"UsingNode"===a.kind,create:a=>(0,d.CN)({kind:"UsingNode",tables:(0,d.CN)(a)}),cloneWithTables:(a,b)=>(0,d.CN)({...a,tables:(0,d.CN)([...a.tables,...b])})});var g=c(8974);let h=(0,d.CN)({is:a=>"DeleteQueryNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"DeleteQueryNode",from:e.N.create(a),...b&&{with:b}}),cloneWithOrderByItems:(a,b)=>g.L.cloneWithOrderByItems(a,b),cloneWithoutOrderBy:a=>g.L.cloneWithoutOrderBy(a),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b}),cloneWithoutLimit:a=>(0,d.CN)({...a,limit:void 0}),cloneWithUsing:(a,b)=>(0,d.CN)({...a,using:void 0!==a.using?f.cloneWithTables(a.using,b):f.create(b)})})},62894:(a,b,c)=>{"use strict";c.d(b,{i:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"SetOperationNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"SetOperationNode",operator:a,expression:b,all:c})})},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63724:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(c(46204));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},63981:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ReflectAdapter",{enumerable:!0,get:function(){return c}});class c{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},63989:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{isRequestAPICallableInsideAfter:function(){return i},throwForSearchParamsAccessInUseCache:function(){return h},throwWithStaticGenerationBailoutError:function(){return f},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return g}});let d=c(35119),e=c(3295);function f(a,b){throw Object.defineProperty(new d.StaticGenBailoutError(`Route ${a} couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E576",enumerable:!1,configurable:!0})}function g(a,b){throw Object.defineProperty(new d.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function h(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used "searchParams" inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await "searchParams" outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E779",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function i(){let a=e.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},64404:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"notFound",{enumerable:!0,get:function(){return e}});let d=""+c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function e(){let a=Object.defineProperty(Error(d),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=d,a}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},64712:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=c(25799).unstable_rethrow;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},67360:(a,b,c)=>{"use strict";c.d(b,{j:()=>i});var d=c(3518),e=c(4424),f=c(96330),g=c(62728);let h=new f.PrismaClient,i=(0,d.li)({database:(0,e._)(h,{provider:"mysql"}),advanced:{database:{generateId:!1,useNumberId:!0}},secret:process.env.BETTER_AUTH_SECRET,emailAndPassword:{enabled:!0},socialProviders:{discord:{clientId:process.env.DISCORD_CLIENT_ID,clientSecret:process.env.DISCORD_CLIENT_SECRET,permissions:18432}},plugins:[(0,g.d)()]})},67380:(a,b,c)=>{"use strict";c.d(b,{W:()=>f});var d=c(94511);class e extends d.R{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(a){return new e([...this.plugins,a])}withPlugins(a){return new e([...this.plugins,...a])}withPluginAtFront(a){return new e([a,...this.plugins])}withoutPlugins(){return new e([])}}let f=new e},67798:(a,b,c)=>{"use strict";c.d(b,{N:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"AliasNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"AliasNode",node:a,alias:b})})},67837:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"forbidden",{enumerable:!0,get:function(){return d}}),c(98541).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},68004:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{HeadersAdapter:function(){return f},ReadonlyHeadersError:function(){return e}});let d=c(63981);class e extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new e}}class f extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,e){if("symbol"==typeof c)return d.ReflectAdapter.get(b,c,e);let f=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===f);if(void 0!==g)return d.ReflectAdapter.get(b,g,e)},set(b,c,e,f){if("symbol"==typeof c)return d.ReflectAdapter.set(b,c,e,f);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return d.ReflectAdapter.set(b,h??c,e,f)},has(b,c){if("symbol"==typeof c)return d.ReflectAdapter.has(b,c);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);return void 0!==f&&d.ReflectAdapter.has(b,f)},deleteProperty(b,c){if("symbol"==typeof c)return d.ReflectAdapter.deleteProperty(b,c);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);return void 0===f||d.ReflectAdapter.deleteProperty(b,f)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return e.callable;default:return d.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new f(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},68949:(a,b,c)=>{"use strict";c.d(b,{GB:()=>n,KN:()=>r,Ve:()=>q,ds:()=>o,vC:()=>p});var d=c(83777),e=c(97990),f=c(8711),g=c(35580),h=c(45817),i=c(60581),j=c(43227),k=c(78039),l=c(26633),m=c(97413);function n(a){if(3===a.length)return o(a[0],a[1],a[2]);if(1===a.length)return(0,i.$s)(a[0]);throw Error(`invalid arguments: ${JSON.stringify(a)}`)}function o(a,b,c){var e;return("is"===(e=b)||"is not"===e)&&s(c)?d.l.create((0,h.$O)(a),t(b),j.q.createImmediate(c)):d.l.create((0,h.$O)(a),t(b),(0,i.U2)(c))}function p(a,b,c){return d.l.create((0,h.$O)(a),t(b),(0,h.$O)(c))}function q(a,b){return r(Object.entries(a).filter(([,a])=>!(0,e.b0)(a)).map(([a,b])=>o(a,s(b)?"is":"=",b)),b)}function r(a,b,c=!0){let e="and"===b?k.s.create:m.K.create;if(0===a.length)return d.l.create(j.q.createImmediate(1),g.zX.create("="),j.q.createImmediate(+("and"===b)));let f=u(a[0]);for(let b=1;b<a.length;++b)f=e(f,u(a[b]));return a.length>1&&c?l.k.create(f):f}function s(a){return(0,e.kZ)(a)||(0,e.Lm)(a)}function t(a){if((0,e.Kg)(a)&&g.we.includes(a))return g.zX.create(a);if((0,f.N)(a))return a.toOperationNode();throw Error(`invalid operator ${JSON.stringify(a)}`)}function u(a){return(0,f.N)(a)?a.toOperationNode():a}},70376:(a,b,c)=>{"use strict";c.d(b,{c:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"JSONPathNode"===a.kind,create:a=>(0,d.CN)({kind:"JSONPathNode",inOperator:a,pathLegs:(0,d.CN)([])}),cloneWithLeg:(a,b)=>(0,d.CN)({...a,pathLegs:(0,d.CN)([...a.pathLegs,b])})})},70440:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"48x48",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},70495:(a,b,c)=>{"use strict";c.d(b,{b3:()=>e.b,cookies:()=>d.U});var d=c(70499),e=c(76116);c(23613)},70499:(a,b,c)=>{"use strict";Object.defineProperty(b,"U",{enumerable:!0,get:function(){return n}});let d=c(3727),e=c(44500),f=c(29294),g=c(63033),h=c(90151),i=c(35119),j=c(85384),k=c(63724),l=c(63989),m=c(58871);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a client component. Next.js should be preventing ${s} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,function(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}c(63981);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),Object.defineProperties(c,{[Symbol.iterator]:{value:a[Symbol.iterator]?a[Symbol.iterator].bind(a):q.bind(a)},size:{get:()=>a.size},get:{value:a.get.bind(a)},getAll:{value:a.getAll.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},delete:{value:a.delete.bind(a)},clear:{value:"function"==typeof a.clear?a.clear.bind(a):r.bind(a,c)},toString:{value:a.toString.bind(a)}}),c}function q(){return this.getAll().map(a=>[a.name,a]).values()}function r(a){for(let a of this.getAll())this.delete(a.name);return a}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})})},70946:(a,b,c)=>{"use strict";c.d(b,{L:()=>k});var d=c(97990),e=c(72356);let f=(0,d.CN)({is:a=>"GroupByNode"===a.kind,create:a=>(0,d.CN)({kind:"GroupByNode",items:(0,d.CN)(a)}),cloneWithItems:(a,b)=>(0,d.CN)({...a,items:(0,d.CN)([...a.items,...b])})});var g=c(78039),h=c(97413);let i=(0,d.CN)({is:a=>"HavingNode"===a.kind,create:a=>(0,d.CN)({kind:"HavingNode",having:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,having:"And"===b?g.s.create(a.having,c):h.K.create(a.having,c)})});var j=c(8974);let k=(0,d.CN)({is:a=>"SelectQueryNode"===a.kind,create:a=>(0,d.CN)({kind:"SelectQueryNode",...a&&{with:a}}),createFrom:(a,b)=>(0,d.CN)({kind:"SelectQueryNode",from:e.N.create(a),...b&&{with:b}}),cloneWithSelections:(a,b)=>(0,d.CN)({...a,selections:a.selections?(0,d.CN)([...a.selections,...b]):(0,d.CN)(b)}),cloneWithDistinctOn:(a,b)=>(0,d.CN)({...a,distinctOn:a.distinctOn?(0,d.CN)([...a.distinctOn,...b]):(0,d.CN)(b)}),cloneWithFrontModifier:(a,b)=>(0,d.CN)({...a,frontModifiers:a.frontModifiers?(0,d.CN)([...a.frontModifiers,b]):(0,d.CN)([b])}),cloneWithOrderByItems:(a,b)=>j.L.cloneWithOrderByItems(a,b),cloneWithGroupByItems:(a,b)=>(0,d.CN)({...a,groupBy:a.groupBy?f.cloneWithItems(a.groupBy,b):f.create(b)}),cloneWithLimit:(a,b)=>(0,d.CN)({...a,limit:b}),cloneWithOffset:(a,b)=>(0,d.CN)({...a,offset:b}),cloneWithFetch:(a,b)=>(0,d.CN)({...a,fetch:b}),cloneWithHaving:(a,b)=>(0,d.CN)({...a,having:a.having?i.cloneWithOperation(a.having,"And",b):i.create(b)}),cloneWithSetOperations:(a,b)=>(0,d.CN)({...a,setOperations:a.setOperations?(0,d.CN)([...a.setOperations,...b]):(0,d.CN)([...b])}),cloneWithoutSelections:a=>(0,d.CN)({...a,selections:[]}),cloneWithoutLimit:a=>(0,d.CN)({...a,limit:void 0}),cloneWithoutOffset:a=>(0,d.CN)({...a,offset:void 0}),cloneWithoutOrderBy:a=>j.L.cloneWithoutOrderBy(a),cloneWithoutGroupBy:a=>(0,d.CN)({...a,groupBy:void 0})})},71942:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(75338),e=c(67360),f=c(73651),g=c(86802),h=c(93045);async function i(){return await e.j.api.getSession({headers:await (0,g.b3)()})&&(0,h.redirect)("/perfil"),(0,d.jsx)(f.default,{})}},72356:(a,b,c)=>{"use strict";c.d(b,{N:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"FromNode"===a.kind,create:a=>(0,d.CN)({kind:"FromNode",froms:(0,d.CN)(a)}),cloneWithFroms:(a,b)=>(0,d.CN)({...a,froms:(0,d.CN)([...a.froms,...b])})})},72734:(a,b,c)=>{"use strict";c.d(b,{t:()=>u});var d=c(57769),e=c(97990),f=c(83913),g=c(18662);let h=(0,e.CN)({is:a=>"AggregateFunctionNode"===a.kind,create:(a,b=[])=>(0,e.CN)({kind:"AggregateFunctionNode",func:a,aggregated:b}),cloneWithDistinct:a=>(0,e.CN)({...a,distinct:!0}),cloneWithOrderBy(a,b,c=!1){let d=c?"withinGroup":"orderBy";return(0,e.CN)({...a,[d]:a[d]?g.O.cloneWithItems(a[d],b):g.O.create(b)})},cloneWithFilter:(a,b)=>(0,e.CN)({...a,filter:a.filter?f.o.cloneWithOperation(a.filter,"And",b):f.o.create(b)}),cloneWithOrFilter:(a,b)=>(0,e.CN)({...a,filter:a.filter?f.o.cloneWithOperation(a.filter,"Or",b):f.o.create(b)}),cloneWithOver:(a,b)=>(0,e.CN)({...a,over:b})}),i=(0,e.CN)({is:a=>"FunctionNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"FunctionNode",func:a,arguments:b})});var j=c(45817),k=c(30922),l=c(67798),m=c(46975),n=c(42658),o=c(68949),p=c(11802),q=c(8974);class r{#l;constructor(a){this.#l=(0,e.CN)(a)}get expressionType(){}as(a){return new s(this,a)}distinct(){return new r({...this.#l,aggregateFunctionNode:h.cloneWithDistinct(this.#l.aggregateFunctionNode)})}orderBy(...a){return new r({...this.#l,aggregateFunctionNode:q.L.cloneWithOrderByItems(this.#l.aggregateFunctionNode,(0,p.xk)(a))})}clearOrderBy(){return new r({...this.#l,aggregateFunctionNode:q.L.cloneWithoutOrderBy(this.#l.aggregateFunctionNode)})}withinGroupOrderBy(...a){return new r({...this.#l,aggregateFunctionNode:h.cloneWithOrderBy(this.#l.aggregateFunctionNode,(0,p.xk)(a),!0)})}filterWhere(...a){return new r({...this.#l,aggregateFunctionNode:h.cloneWithFilter(this.#l.aggregateFunctionNode,(0,o.GB)(a))})}filterWhereRef(a,b,c){return new r({...this.#l,aggregateFunctionNode:h.cloneWithFilter(this.#l.aggregateFunctionNode,(0,o.vC)(a,b,c))})}over(a){let b=(0,n.EQ)();return new r({...this.#l,aggregateFunctionNode:h.cloneWithOver(this.#l.aggregateFunctionNode,(a?a(b):b).toOperationNode())})}$call(a){return a(this)}$castTo(){return new r(this.#l)}$notNull(){return new r(this.#l)}toOperationNode(){return this.#l.aggregateFunctionNode}}class s{#G;#o;constructor(a,b){this.#G=a,this.#o=b}get expression(){return this.#G}get alias(){return this.#o}toOperationNode(){return l.N.create(this.#G.toOperationNode(),m.O.create(this.#o))}}var t=c(98812);function u(){let a=(a,b)=>new d.Is(i.create(a,(0,j.kU)(b??[]))),b=(a,b)=>new r({aggregateFunctionNode:h.create(a,b?(0,j.kU)(b):void 0)});return Object.assign(a,{agg:b,avg:a=>b("avg",[a]),coalesce:(...b)=>a("coalesce",b),count:a=>b("count",[a]),countAll:a=>new r({aggregateFunctionNode:h.create("count",(0,k.J)(a))}),max:a=>b("max",[a]),min:a=>b("min",[a]),sum:a=>b("sum",[a]),any:b=>a("any",[b]),jsonAgg:a=>new r({aggregateFunctionNode:h.create("json_agg",[(0,e.Kg)(a)?(0,t.M$)(a):a.toOperationNode()])}),toJson:a=>new d.Is(i.create("to_json",[(0,e.Kg)(a)?(0,t.M$)(a):a.toOperationNode()]))})}},73651:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/Aquafornite/src/app/auth/auth-client.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/Aquafornite/src/app/auth/auth-client.tsx","default")},74144:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=c(85384),e=c(97357),f=c(52318),g=c(90626),h=c(90151),i=c(52577);("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},76116:(a,b,c)=>{"use strict";Object.defineProperty(b,"b",{enumerable:!0,get:function(){return m}});let d=c(68004),e=c(29294),f=c(63033),g=c(90151),h=c(35119),i=c(85384),j=c(63724),k=c(63989),l=c(58871);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"private-cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache: private". Accessing "headers" inside a private cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E742",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":case"prerender-runtime":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}c(63981);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),Object.defineProperties(c,{append:{value:a.append.bind(a)},delete:{value:a.delete.bind(a)},get:{value:a.get.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},getSetCookie:{value:a.getSetCookie.bind(a)},forEach:{value:a.forEach.bind(a)},keys:{value:a.keys.bind(a)},values:{value:a.values.bind(a)},entries:{value:a.entries.bind(a)},[Symbol.iterator]:{value:a[Symbol.iterator].bind(a)}}),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})})},77630:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},78039:(a,b,c)=>{"use strict";c.d(b,{s:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"AndNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"AndNode",left:a,right:b})})},78614:(a,b,c)=>{"use strict";c.d(b,{SS:()=>j,YK:()=>h,v0:()=>i});var d=c(60551),e=c(8711),f=c(92363),g=c(97990);function h(a){if((0,e.N)(a))return a.toOperationNode();if((0,g.Tn)(a))return a((0,f.A)()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(a)}`)}function i(a){if((0,e.N)(a))return a.toOperationNode();if((0,g.Tn)(a))return a((0,f.A)()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(a)}`)}function j(a){return(0,d.B)(a)||(0,d.q)(a)||(0,g.Tn)(a)}},79374:(a,b,c)=>{"use strict";c.d(b,{Q:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"JSONReferenceNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"JSONReferenceNode",reference:a,traversal:b}),cloneWithTraversal:(a,b)=>(0,d.CN)({...a,traversal:b})})},79595:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRedirectError:function(){return g},getRedirectStatusCodeFromError:function(){return l},getRedirectTypeFromError:function(){return k},getURLFromRedirectError:function(){return j},permanentRedirect:function(){return i},redirect:function(){return h}});let d=c(62284),e=c(44338),f=c(19121).actionAsyncStorage;function g(a,b,c){void 0===c&&(c=d.RedirectStatusCode.TemporaryRedirect);let f=Object.defineProperty(Error(e.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return f.digest=e.REDIRECT_ERROR_CODE+";"+b+";"+a+";"+c+";",f}function h(a,b){var c;throw null!=b||(b=(null==f||null==(c=f.getStore())?void 0:c.isAction)?e.RedirectType.push:e.RedirectType.replace),g(a,b,d.RedirectStatusCode.TemporaryRedirect)}function i(a,b){throw void 0===b&&(b=e.RedirectType.replace),g(a,b,d.RedirectStatusCode.PermanentRedirect)}function j(a){return(0,e.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function k(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function l(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},79662:(a,b,c)=>{"use strict";c.d(b,{H:()=>f});var d=c(97990),e=c(36036);let f=(0,d.CN)({is:a=>"TableNode"===a.kind,create:a=>(0,d.CN)({kind:"TableNode",table:e.y.create(a)}),createWithSchema:(a,b)=>(0,d.CN)({kind:"TableNode",table:e.y.createWithSchema(a,b)})})},81289:(a,b,c)=>{"use strict";c.d(b,{Q:()=>i});var d=c(97990);let e=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],f=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],g=(0,d.CN)({is:a=>"DataTypeNode"===a.kind,create:a=>(0,d.CN)({kind:"DataTypeNode",dataType:a})});var h=c(8711);function i(a){if((0,h.N)(a))return a.toOperationNode();if(e.includes(a)||f.some(b=>b.test(a)))return g.create(a);throw Error(`invalid column data type ${JSON.stringify(a)}`)}},81744:(a,b,c)=>{"use strict";c.d(b,{P:()=>f});var d=c(97990),e=c(93448);let f=(0,d.CN)({is:a=>"CaseNode"===a.kind,create:a=>(0,d.CN)({kind:"CaseNode",value:a}),cloneWithWhen:(a,b)=>(0,d.CN)({...a,when:(0,d.CN)(a.when?[...a.when,b]:[b])}),cloneWithThen:(a,b)=>(0,d.CN)({...a,when:a.when?(0,d.CN)([...a.when.slice(0,-1),e.t.cloneWithResult(a.when[a.when.length-1],b)]):void 0}),cloneWith:(a,b)=>(0,d.CN)({...a,...b})})},83183:(a,b,c)=>{"use strict";a.exports=c(49754).vendored["react-rsc"].ReactServerDOMWebpackServer},83601:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,71942)),"/home/user/Aquafornite/src/app/auth/page.tsx"]}]},{metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(c.bind(c,51472)),"/home/user/Aquafornite/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[async a=>(await Promise.resolve().then(c.bind(c,70440))).default(a)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,I=["/home/user/Aquafornite/src/app/auth/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/auth/page",pathname:"/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/auth/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw aF||b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},83777:(a,b,c)=>{"use strict";c.d(b,{l:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"BinaryOperationNode"===a.kind,create:(a,b,c)=>(0,d.CN)({kind:"BinaryOperationNode",leftOperand:a,operator:b,rightOperand:c})})},83878:(a,b,c)=>{"use strict";c.d(b,{Z:()=>f});var d=c(97990),e=c(46975);let f=(0,d.CN)({is:a=>"ColumnNode"===a.kind,create:a=>(0,d.CN)({kind:"ColumnNode",column:e.O.create(a)})})},83913:(a,b,c)=>{"use strict";c.d(b,{o:()=>g});var d=c(97990),e=c(78039),f=c(97413);let g=(0,d.CN)({is:a=>"WhereNode"===a.kind,create:a=>(0,d.CN)({kind:"WhereNode",where:a}),cloneWithOperation:(a,b,c)=>(0,d.CN)({...a,where:"And"===b?e.s.create(a.where,c):f.K.create(a.where,c)})})},85384:(a,b)=>{"use strict";function c(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===d}Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{isHangingPromiseRejectionError:function(){return c},makeDevtoolsIOAwarePromise:function(){return i},makeHangingPromise:function(){return g}});let d="HANGING_PROMISE_REJECTION";class e extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=d}}let f=new WeakMap;function g(a,b,c){if(a.aborted)return Promise.reject(new e(b,c));{let d=new Promise((d,g)=>{let h=g.bind(null,new e(b,c)),i=f.get(a);if(i)i.push(h);else{let b=[h];f.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(h),d}}function h(){}function i(a){return new Promise(b=>{setTimeout(()=>{b(a)},0)})}},85708:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{callServer:function(){return d.callServer},createServerReference:function(){return f.createServerReference},findSourceMapURL:function(){return e.findSourceMapURL}});let d=c(76779),e=c(6927),f=c(63188)},86331:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{atLeastOneTask:function(){return e},scheduleImmediate:function(){return d},scheduleOnNextTick:function(){return c},waitAtLeastOneReactRenderTask:function(){return f}});let c=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},d=a=>{setImmediate(a)};function e(){return new Promise(a=>d(a))}function f(){return new Promise(a=>setImmediate(a))}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},87345:(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unauthorized",{enumerable:!0,get:function(){return d}}),c(15570).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},89227:(a,b,c)=>{"use strict";c.d(b,{q:()=>f});var d=c(11570),e=c(97990);let f=(0,e.CN)({is:a=>"ReferenceNode"===a.kind,create:(a,b)=>(0,e.CN)({kind:"ReferenceNode",table:b,column:a}),createSelectAll:a=>(0,e.CN)({kind:"ReferenceNode",table:a,column:d.U.create()})})},90151:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{Postpone:function(){return A},PreludeState:function(){return V},abortAndThrowOnSynchronousRequestDataAccess:function(){return x},abortOnSynchronousPlatformIOAccess:function(){return v},accessedDynamicData:function(){return I},annotateDynamicAccess:function(){return N},consumeDynamicAccess:function(){return J},createDynamicTrackingState:function(){return o},createDynamicValidationState:function(){return p},createHangingInputAbortSignal:function(){return M},createRenderInBrowserAbortSignal:function(){return L},delayUntilRuntimeStage:function(){return Y},formatDynamicAPIAccesses:function(){return K},getFirstDynamicReason:function(){return q},isDynamicPostpone:function(){return D},isPrerenderInterruptedError:function(){return H},logDisallowedDynamicError:function(){return W},markCurrentScopeAsDynamic:function(){return r},postponeWithTracking:function(){return B},throwIfDisallowedDynamic:function(){return X},throwToInterruptStaticGeneration:function(){return s},trackAllowedDynamicAccess:function(){return U},trackDynamicDataInDynamicRender:function(){return t},trackSynchronousPlatformIOAccessInDev:function(){return w},trackSynchronousRequestDataAccessInDev:function(){return z},useDynamicRouteParams:function(){return O},warnOnSyncDynamicError:function(){return y}});let d=function(a){return a&&a.__esModule?a:{default:a}}(c(46204)),e=c(52577),f=c(35119),g=c(63033),h=c(29294),i=c(85384),j=c(18633),k=c(86331),l=c(52318),m=c(58871),n="function"==typeof d.default.unstable_postpone;function o(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function p(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function q(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function r(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return B(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new e.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function s(a,b,c){let d=Object.defineProperty(new e.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function t(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function u(a,b,c){let d=G(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function v(a,b,c,d){let e=d.dynamicTracking;u(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function w(a){a.prerenderPhase=!1}function x(a,b,c,d){if(!1===d.controller.signal.aborted){u(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw G(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function y(a){a.syncDynamicErrorWithStack&&console.error(a.syncDynamicErrorWithStack)}let z=w;function A({reason:a,route:b}){let c=g.workUnitAsyncStorage.getStore();B(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function B(a,b,c){(function(){if(!n)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),d.default.unstable_postpone(C(a,b))}function C(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function D(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&E(a.message)}function E(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===E(C("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let F="NEXT_PRERENDER_INTERRUPTED";function G(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=F,b}function H(a){return"object"==typeof a&&null!==a&&a.digest===F&&"name"in a&&"message"in a&&a instanceof Error}function I(a){return a.length>0}function J(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function K(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function L(){let a=new AbortController;return a.abort(Object.defineProperty(new l.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function M(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,g.getRuntimeStagePromise)(a);c?c.then(()=>(0,k.scheduleOnNextTick)(()=>b.abort())):(0,k.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function N(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function O(a){let b=h.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let e=c.fallbackRouteParams;e&&e.size>0&&d.default.use((0,i.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return B(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new m.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new m.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}let P=/\n\s+at Suspense \(<anonymous>\)/,Q=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${j.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),R=RegExp(`\\n\\s+at ${j.METADATA_BOUNDARY_NAME}[\\n\\s]`),S=RegExp(`\\n\\s+at ${j.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),T=RegExp(`\\n\\s+at ${j.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function U(a,b,c,d){if(!T.test(b)){if(R.test(b)){c.hasDynamicMetadata=!0;return}if(S.test(b)){c.hasDynamicViewport=!0;return}if(Q.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(P.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=function(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}(`Route "${a.route}": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a "use cache" above it. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`,b);return void c.dynamicErrors.push(e)}}}var V=function(a){return a[a.Full=0]="Full",a[a.Empty=1]="Empty",a[a.Errored=2]="Errored",a}({});function W(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function X(a,b,c,d){if(0!==b){if(c.hasSuspenseAboveBody)return;if(d.syncDynamicErrorWithStack)throw W(a,d.syncDynamicErrorWithStack),new f.StaticGenBailoutError;let e=c.dynamicErrors;if(e.length>0){for(let b=0;b<e.length;b++)W(a,e[b]);throw new f.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new f.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new f.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new f.StaticGenBailoutError}function Y(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},90626:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=c(15570),e=c(44338);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},91307:(a,b,c)=>{"use strict";c.d(b,{C:()=>h,g:()=>g});var d=c(8711),e=c(45817),f=c(97990);class g{#H;get dynamicReference(){return this.#H}get refType(){}constructor(a){this.#H=a}toOperationNode(){return(0,e.vd)(this.#H)}}function h(a){return(0,f.Gv)(a)&&(0,d.N)(a)&&(0,f.Kg)(a.dynamicReference)}},91415:(a,b,c)=>{"use strict";c.d(b,{u:()=>e});let d=new Set;function e(a){d.has(a)||(d.add(a),console.log(a))}},91488:(a,b,c)=>{"use strict";Object.defineProperty(b,"A",{enumerable:!0,get:function(){return d.registerServerReference}});let d=c(83183)},91767:(a,b,c)=>{"use strict";c.d(b,{k:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"JSONOperatorChainNode"===a.kind,create:a=>(0,d.CN)({kind:"JSONOperatorChainNode",operator:a,values:(0,d.CN)([])}),cloneWithValue:(a,b)=>(0,d.CN)({...a,values:(0,d.CN)([...a.values,b])})})},92140:(a,b,c)=>{"use strict";c.d(b,{D:()=>e});let d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function e(a){let b="";for(let c=0;c<a;++c)b+=d[~~(Math.random()*d.length)];return b}},92323:(a,b,c)=>{"use strict";c.d(b,{OU:()=>j});var d=c(57769),e=c(97990),f=c(81744),g=c(93448),h=c(68949),i=c(60581);class j{#l;constructor(a){this.#l=(0,e.CN)(a)}when(...a){return new k({...this.#l,node:f.P.cloneWithWhen(this.#l.node,g.t.create((0,h.GB)(a)))})}}class k{#l;constructor(a){this.#l=(0,e.CN)(a)}then(a){return new l({...this.#l,node:f.P.cloneWithThen(this.#l.node,(0,i.qH)(a)?(0,i.dJ)(a):(0,i.$s)(a))})}}class l{#l;constructor(a){this.#l=(0,e.CN)(a)}when(...a){return new k({...this.#l,node:f.P.cloneWithWhen(this.#l.node,g.t.create((0,h.GB)(a)))})}else(a){return new m({...this.#l,node:f.P.cloneWith(this.#l.node,{else:(0,i.qH)(a)?(0,i.dJ)(a):(0,i.$s)(a)})})}end(){return new d.Is(f.P.cloneWith(this.#l.node,{isStatement:!1}))}endCase(){return new d.Is(f.P.cloneWith(this.#l.node,{isStatement:!0}))}}class m{#l;constructor(a){this.#l=(0,e.CN)(a)}end(){return new d.Is(f.P.cloneWith(this.#l.node,{isStatement:!1}))}endCase(){return new d.Is(f.P.cloneWith(this.#l.node,{isStatement:!0}))}}},92363:(a,b,c)=>{"use strict";c.d(b,{O:()=>K,A:()=>L});var d=c(21352),e=c(70946),f=c(98812),g=c(5595),h=c(61861),i=c(72734),j=c(45817),k=c(68949),l=c(26633),m=c(57769),n=c(35580),o=c(97990);let p=(0,o.CN)({is:a=>"UnaryOperationNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"UnaryOperationNode",operator:a,operand:b})});var q=c(60581),r=c(67380),s=c(92323),t=c(81744),u=c(67798),v=c(46975),w=c(91767);let x=(0,o.CN)({is:a=>"JSONPathLegNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"JSONPathLegNode",type:a,value:b})});var y=c(70376),z=c(79374),A=c(8711),B=c(43227);class C{#D;constructor(a){this.#D=a}at(a){return this.#I("ArrayLocation",a)}key(a){return this.#I("Member",a)}#I(a,b){return new D(z.Q.is(this.#D)?z.Q.cloneWithTraversal(this.#D,y.c.is(this.#D.traversal)?y.c.cloneWithLeg(this.#D.traversal,x.create(a,b)):w.k.cloneWithValue(this.#D.traversal,B.q.createImmediate(b))):y.c.cloneWithLeg(this.#D,x.create(a,b)))}}class D extends C{#D;constructor(a){super(a),this.#D=a}get expressionType(){}as(a){return new E(this,a)}$castTo(){return new D(this.#D)}$notNull(){return new D(this.#D)}toOperationNode(){return this.#D}}class E{#J;#o;constructor(a,b){this.#J=a,this.#o=b}get expression(){return this.#J}get alias(){return this.#o}toOperationNode(){return u.N.create(this.#J.toOperationNode(),(0,A.N)(this.#o)?this.#o.toOperationNode():v.O.create(this.#o))}}var F=c(83777),G=c(78039);let H=(0,o.CN)({is:a=>"TupleNode"===a.kind,create:a=>(0,o.CN)({kind:"TupleNode",values:(0,o.CN)(a)})});var I=c(81289);let J=(0,o.CN)({is:a=>"CastNode"===a.kind,create:(a,b)=>(0,o.CN)({kind:"CastNode",expression:a,dataType:b})});function K(a=r.W){function b(a,b){return new m.Is(p.create(n.zX.create(a),(0,j.$O)(b)))}let c=Object.assign(function(a,b,c){return new m.Is((0,k.ds)(a,b,c))},{fn:void 0,eb:void 0,selectFrom:b=>(0,d.c)({queryId:(0,h.a)(),executor:a,queryNode:e.L.createFrom((0,f.JB)(b))}),case:a=>new s.OU({node:t.P.create((0,o.b0)(a)?void 0:(0,j.$O)(a))}),ref:(a,b)=>(0,o.b0)(b)?new m.Is((0,j.q5)(a)):new C((0,j.NF)(a,b)),jsonPath:()=>new C(y.c.create()),table:a=>new m.Is((0,f.M$)(a)),val:a=>new m.Is((0,q.$s)(a)),refTuple:(...a)=>new m.Is(H.create(a.map(j.$O))),tuple:(...a)=>new m.Is(H.create(a.map(q.$s))),lit:a=>new m.Is((0,q.dJ)(a)),unary:b,not:a=>b("not",a),exists:a=>b("exists",a),neg:a=>b("-",a),between:(a,b,c)=>new m.Is(F.l.create((0,j.$O)(a),n.zX.create("between"),G.s.create((0,q.$s)(b),(0,q.$s)(c)))),betweenSymmetric:(a,b,c)=>new m.Is(F.l.create((0,j.$O)(a),n.zX.create("between symmetric"),G.s.create((0,q.$s)(b),(0,q.$s)(c)))),and:a=>new m.Is((0,o.MH)(a)?(0,k.KN)(a,"and"):(0,k.Ve)(a,"and")),or:a=>new m.Is((0,o.MH)(a)?(0,k.KN)(a,"or"):(0,k.Ve)(a,"or")),parens(...a){let b=(0,k.GB)(a);return new m.Is(l.k.is(b)?b:l.k.create(b))},cast:(a,b)=>new m.Is(J.create((0,j.$O)(a),(0,I.Q)(b))),withSchema:b=>K(a.withPluginAtFront(new g.B(b)))});return c.fn=(0,i.t)(),c.eb=c,c}function L(a){return K()}},93045:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ReadonlyURLSearchParams:function(){return k},RedirectType:function(){return e.RedirectType},forbidden:function(){return g.forbidden},notFound:function(){return f.notFound},permanentRedirect:function(){return d.permanentRedirect},redirect:function(){return d.redirect},unauthorized:function(){return h.unauthorized},unstable_isUnrecognizedActionError:function(){return l},unstable_rethrow:function(){return i.unstable_rethrow}});let d=c(47614),e=c(92781),f=c(64404),g=c(67837),h=c(29088),i=c(64712);class j extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class k extends URLSearchParams{append(){throw new j}delete(){throw new j}set(){throw new j}sort(){throw new j}}function l(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},93047:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ENCODED_TAGS",{enumerable:!0,get:function(){return c}});let c={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])},META:{ICON_MARK:new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34])}}},93448:(a,b,c)=>{"use strict";c.d(b,{t:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"WhenNode"===a.kind,create:a=>(0,d.CN)({kind:"WhenNode",condition:a}),cloneWithResult:(a,b)=>(0,d.CN)({...a,result:b})})},94511:(a,b,c)=>{"use strict";c.d(b,{R:()=>h});var d=c(97990),e=c(48494),f=c(91415);let g=(0,d.CN)([]);class h{#K;constructor(a=g){this.#K=a}get plugins(){return this.#K}transformQuery(a,b){for(let c of this.#K){let d=c.transformQuery({node:a,queryId:b});if(d.kind===a.kind)a=d;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${a.kind} but it returned a ${d.kind}`)}return a}async executeQuery(a){return await this.provideConnection(async b=>{let c=await b.executeQuery(a);return"numUpdatedOrDeletedRows"in c&&(0,f.u)("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#L(c,a.queryId)})}async *stream(a,b){let{connection:c,release:d}=await (0,e.G)(this);try{for await(let d of c.streamQuery(a,b))yield await this.#L(d,a.queryId)}finally{d()}}async #L(a,b){for(let c of this.#K)a=await c.transformResult({result:a,queryId:b});return a}}},94877:(a,b,c)=>{Promise.resolve().then(c.bind(c,6318))},95134:(a,b,c)=>{"use strict";c.d(b,{kQ:()=>e,sy:()=>f});var d=c(97990);let e="kysely_migration",f="kysely_migration_lock";(0,d.CN)({__noMigrations__:!0})},95282:(a,b,c)=>{"use strict";let d,e,f,g,h;c.r(b),c.d(b,{"7f0cd864e08f4c42f9df66a5dfe8fbd53f46ad3616":()=>rd,"7f8802913bf15bda51a2953c5bb2ec122e0af7a7e1":()=>rb,"7f913036436356ffbc1146c83ef819704c9cb0397e":()=>ra,"7fce3f53e1f05586de0417cdacb01d33519151b45e":()=>rc});var i,j,k=c(91488);function l(){let a="undefined"!=typeof globalThis&&globalThis.crypto;if(a&&"object"==typeof a.subtle&&null!=a.subtle)return a.subtle;throw Error("crypto.subtle must be defined")}c(27806);let m=(()=>{let a=function(){};return a.prototype=Object.create(null),a})();function n(){return{root:{key:""},static:new m}}function o(a){return a.split("/").filter(Boolean)}function p(a,b){let c=new m;for(let[d,e]of b){let b=d<0?a.slice(-1*d).join("/"):a[d];if("string"==typeof e)c[e]=b;else{let a=b.match(e);if(a)for(let b in a.groups)c[b]=a.groups[b]}}return c}function q(a,b="",c,d){let e=o(c),f=a.root,g=0,h=[];for(let a=0;a<e.length;a++){let b=e[a];if(b.startsWith("**")){f.wildcard||(f.wildcard={key:"**"}),f=f.wildcard,h.push([-a,b.split(":")[1]||"_",2===b.length]);break}if("*"===b||b.includes(":")){f.param||(f.param={key:"*"}),f=f.param;let c="*"===b;h.push([a,c?`_${g++}`:function(a){if(!a.includes(":",1))return a.slice(1);let b=a.replace(/:(\w+)/g,(a,b)=>`(?<${b}>\\w+)`);return RegExp(`^${b}$`)}(b),c]);continue}let c=f.static?.[b];if(c)f=c;else{let a={key:b};f.static||(f.static=new m),f.static[b]=a,f=a}}let i=h.length>0;f.methods||(f.methods=new m),f.methods[b]||(f.methods[b]=[]),f.methods[b].push({data:d||null,paramsMap:i?h:void 0}),i||(a.static[c]=f)}var r=Object.defineProperty,s={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},t=function(a,b){class c extends a{#M;constructor(...a){if(function(){let a=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return void 0===a?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(a,"writable")?a.writable:void 0!==a.set}()){let b=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...a),Error.stackTraceLimit=b}else super(...a);let b=Error().stack;b&&(this.#M=function(a){let b=a.split("\n    at ");return b.length<=1?a:(b.splice(1,1),b.join("\n    at "))}(b.replace(/^Error/,this.name)))}get errorStack(){return this.#M}}return Object.defineProperty(c.prototype,"constructor",{get:()=>b,enumerable:!1,configurable:!0}),c}(class extends Error{constructor(a="INTERNAL_SERVER_ERROR",b,c={},d="number"==typeof a?a:s[a]){super(b?.message,b?.cause?{cause:b.cause}:void 0),this.status=a,this.body=b,this.headers=c,this.statusCode=d,this.name="APIError",this.status=a,this.headers=c,this.statusCode=d,this.body=b?{code:b?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...b}:void 0}},Error);async function u(a){let b=a.headers.get("content-type")||"";if(a.body){if(b.includes("application/json"))return await a.json();if(b.includes("application/x-www-form-urlencoded")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a.toString()}),c}if(b.includes("multipart/form-data")){let b=await a.formData(),c={};return b.forEach((a,b)=>{c[b]=a}),c}return b.includes("text/plain")?await a.text():b.includes("application/octet-stream")?await a.arrayBuffer():b.includes("application/pdf")||b.includes("image/")||b.includes("video/")?await a.blob():b.includes("application/stream")||a.body instanceof ReadableStream?a.body:await a.text()}}function v(a){return a instanceof t||a?.name==="APIError"}function w(a,b){if(a instanceof Response)return b?.headers instanceof Headers&&b.headers.forEach((b,c)=>{a.headers.set(c,b)}),a;if(a&&"object"==typeof a&&"_flag"in a&&"json"===a._flag){let c=a.body,d=a.routerResponse;if(d instanceof Response)return d;let e=new Headers({...d?.headers,...a.headers,...b?.headers,"Content-Type":"application/json"});return new Response(JSON.stringify(c),{...d,headers:e,status:a.status??b?.status??d?.status,statusText:b?.statusText??d?.statusText})}if(v(a))return w(a.body,{status:b?.status??a.statusCode,statusText:a.status.toString(),headers:b?.headers||a.headers});let c=a,d=new Headers(b?.headers);return a?"string"==typeof a?(c=a,d.set("Content-Type","text/plain")):a instanceof ArrayBuffer||ArrayBuffer.isView(a)?(c=a,d.set("Content-Type","application/octet-stream")):a instanceof Blob?(c=a,d.set("Content-Type",a.type||"application/octet-stream")):a instanceof FormData?c=a:a instanceof URLSearchParams?(c=a,d.set("Content-Type","application/x-www-form-urlencoded")):a instanceof ReadableStream?(c=a,d.set("Content-Type","application/octet-stream")):function(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}(a)&&(c=function(a,b,c){let d=0,e=new WeakMap;return JSON.stringify(a,(a,b)=>{if("bigint"==typeof b)return b.toString();if("object"==typeof b&&null!==b){if(e.has(b))return`[Circular ref-${e.get(b)}]`;e.set(b,d++)}return b},void 0)}(a),d.set("Content-Type","application/json")):(null===a&&(c=JSON.stringify(null)),d.set("content-type","application/json")),new Response(c,{...b,headers:d})}async function x(a,b={}){let c={body:b.body,query:b.query};if(a.body){let d=await a.body["~standard"].validate(b.body);if(d.issues)return{data:null,error:y(d.issues,"body")};c.body=d.value}if(a.query){let d=await a.query["~standard"].validate(b.query);if(d.issues)return{data:null,error:y(d.issues,"query")};c.query=d.value}return a.requireHeaders&&!b.headers?{data:null,error:{message:"Headers is required"}}:a.requireRequest&&!b.request?{data:null,error:{message:"Request is required"}}:{data:c,error:null}}function y(a,b){let c=[];for(let b of a){let a=b.message;c.push(a)}return{message:`Invalid ${b} parameters`}}var z={name:"HMAC",hash:"SHA-256"},A=async a=>{let b="string"==typeof a?new TextEncoder().encode(a):a;return await l().importKey("raw",b,z,!1,["sign","verify"])},B=async(a,b,c)=>{try{let d=atob(a),e=new Uint8Array(d.length);for(let a=0,b=d.length;a<b;a++)e[a]=d.charCodeAt(a);return await l().verify(z,c,e,new TextEncoder().encode(b))}catch(a){return!1}},C=async(a,b)=>{let c=await A(b);return btoa(String.fromCharCode(...new Uint8Array(await l().sign(z.name,c,new TextEncoder().encode(a)))))},D=async(a,b)=>{let c=await C(a,b);return encodeURIComponent(a=`${a}.${c}`)},E=(a,b)=>{let c=a;if(b)if("secure"===b)c="__Secure-"+a;else{if("host"!==b)return;c="__Host-"+a}return c},F=(a,b,c={})=>{let d;if(d=c?.prefix==="secure"?`__Secure-${a}=${b}`:c?.prefix==="host"?`__Host-${a}=${b}`:`${a}=${b}`,a.startsWith("__Secure-")&&!c.secure&&(c.secure=!0),a.startsWith("__Host-")&&(c.secure||(c.secure=!0),"/"!==c.path&&(c.path="/"),c.domain&&(c.domain=void 0)),c&&"number"==typeof c.maxAge&&c.maxAge>=0){if(c.maxAge>3456e4)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");d+=`; Max-Age=${Math.floor(c.maxAge)}`}if(c.domain&&"host"!==c.prefix&&(d+=`; Domain=${c.domain}`),c.path&&(d+=`; Path=${c.path}`),c.expires){if(c.expires.getTime()-Date.now()>3456e7)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");d+=`; Expires=${c.expires.toUTCString()}`}return c.httpOnly&&(d+="; HttpOnly"),c.secure&&(d+="; Secure"),c.sameSite&&(d+=`; SameSite=${c.sameSite.charAt(0).toUpperCase()+c.sameSite.slice(1)}`),c.partitioned&&(c.secure||(c.secure=!0),d+="; Partitioned"),d},G=async(a,b,c,d)=>F(a,b=await D(b,c),d),H=async(a,{options:b,path:c})=>{let d=new Headers,{data:e,error:f}=await x(b,a);if(f)throw new t(400,{message:f.message,code:"VALIDATION_ERROR"});let g="headers"in a?a.headers instanceof Headers?a.headers:new Headers(a.headers):"request"in a&&a.request instanceof Request?a.request.headers:null,h=g?.get("cookie"),i=h?function(a){if("string"!=typeof a)throw TypeError("argument str must be a string");let b=new Map,c=0;for(;c<a.length;){let d=a.indexOf("=",c);if(-1===d)break;let e=a.indexOf(";",c);if(-1===e)e=a.length;else if(e<d){c=a.lastIndexOf(";",d-1)+1;continue}let f=a.slice(c,d).trim();if(!b.has(f)){let c=a.slice(d+1,e).trim();34===c.codePointAt(0)&&(c=c.slice(1,-1)),b.set(f,function(a){try{return a.includes("%")?decodeURIComponent(a):a}catch{return a}}(c))}c=e+1}return b}(h):void 0,j={...a,body:e.body,query:e.query,path:a.path||c,context:"context"in a&&a.context?a.context:{},returned:void 0,headers:a?.headers,request:a?.request,params:"params"in a?a.params:void 0,method:a.method,setHeader:(a,b)=>{d.set(a,b)},getHeader:a=>g?g.get(a):null,getCookie:(a,b)=>{let c=E(a,b);return c&&i?.get(c)||null},getSignedCookie:async(a,b,c)=>{let d=E(a,c);if(!d)return null;let e=i?.get(d);if(!e)return null;let f=e.lastIndexOf(".");if(f<1)return null;let g=e.substring(0,f),h=e.substring(f+1);if(44!==h.length||!h.endsWith("="))return null;let j=await A(b);return!!await B(h,g,j)&&g},setCookie:(a,b,c)=>{let e=((a,b,c)=>F(a,b=encodeURIComponent(b),c))(a,b,c);return d.append("set-cookie",e),e},setSignedCookie:async(a,b,c,e)=>{let f=await G(a,b,c,e);return d.append("set-cookie",f),f},redirect:a=>(d.set("location",a),new t("FOUND",void 0,d)),error:(a,b,c)=>new t(a,b,c),json:(b,c)=>a.asResponse?{body:c?.body||b,routerResponse:c,_flag:"json"}:b,responseHeaders:d};for(let a of b.use||[]){let b=await a({...j,returnHeaders:!0,asResponse:!1});b.response&&Object.assign(j.context,b.response),b.headers&&b.headers.forEach((a,b)=>{j.responseHeaders.set(b,a)})}return j};function I(a,b){let c=async c=>{let d="function"==typeof a?a:b,e=await H(c,{options:"function"==typeof a?{}:a,path:"/"});if(!d)throw Error("handler must be defined");let f=await d(e),g=e.responseHeaders;return c.returnHeaders?{headers:g,response:f}:f};return c.options="function"==typeof a?{}:a,c}I.create=a=>function(b,c){if("function"==typeof b)return I({use:a?.use},b);if(!c)throw Error("Middleware handler is required");return I({...b,method:"*",use:[...a?.use||[],...b.use||[]]},c)};var J=(a,b,c)=>{let d=async(...d)=>{let e=d[0]||{},f=await H(e,{options:b,path:a}),g=await c(f).catch(async a=>{if(v(a)){let c=b.onAPIError;if(c&&await c(a),e.asResponse)return a}throw a}),h=f.responseHeaders;return e.asResponse?w(g,{headers:h}):e.returnHeaders?{headers:h,response:g}:g};return d.options=b,d.path=a,d};function K(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}J.create=a=>(b,c,d)=>J(b,{...c,use:[...c?.use||[],...a?.use||[]]},d),Object.freeze({status:"aborted"}),Symbol("zod_brand");var L=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},M={};function N(a){return a&&Object.assign(M,a),M}var O={};function P(a){return a}function Q(a){return a}function R(a){}function S(a){throw Error()}function T(a){}function U(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}function V(a,b="|"){return a.map(a=>ar(a)).join(b)}function W(a,b){return"bigint"==typeof b?b.toString():b}function X(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function Y(a){return null==a}function Z(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}function $(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}function _(a,b,c){Object.defineProperty(a,b,{get(){{let d=c();return a[b]=d,d}},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function aa(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function ab(a,b){return b?b.reduce((a,b)=>a?.[b],a):a}function ac(a){let b=Object.keys(a);return Promise.all(b.map(b=>a[b])).then(a=>{let c={};for(let d=0;d<b.length;d++)c[b[d]]=a[d];return c})}function ad(a=10){let b="abcdefghijklmnopqrstuvwxyz",c="";for(let d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c}function ae(a){return JSON.stringify(a)}((a,b)=>{for(var c in b)r(a,c,{get:b[c],enumerable:!0})})(O,{BIGINT_FORMAT_RANGES:()=>au,Class:()=>aJ,NUMBER_FORMAT_RANGES:()=>at,aborted:()=>aB,allowsEval:()=>ah,assert:()=>T,assertEqual:()=>P,assertIs:()=>R,assertNever:()=>S,assertNotEqual:()=>Q,assignProp:()=>aa,cached:()=>X,captureStackTrace:()=>af,cleanEnum:()=>aI,cleanRegex:()=>Z,clone:()=>ao,createTransparentProxy:()=>aq,defineLazy:()=>_,esc:()=>ae,escapeRegex:()=>an,extend:()=>ax,finalizeIssue:()=>aE,floatSafeRemainder:()=>$,getElementAtPath:()=>ab,getEnumValues:()=>U,getLengthableOrigin:()=>aG,getParsedType:()=>ak,getSizableOrigin:()=>aF,isObject:()=>ag,isPlainObject:()=>ai,issue:()=>aH,joinValues:()=>V,jsonStringifyReplacer:()=>W,merge:()=>ay,normalizeParams:()=>ap,nullish:()=>Y,numKeys:()=>aj,omit:()=>aw,optionalKeys:()=>as,partial:()=>az,pick:()=>av,prefixIssues:()=>aC,primitiveTypes:()=>am,promiseAllObject:()=>ac,propertyKeyTypes:()=>al,randomString:()=>ad,required:()=>aA,stringifyPrimitive:()=>ar,unwrapMessage:()=>aD});var af=Error.captureStackTrace?Error.captureStackTrace:(...a)=>{};function ag(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}var ah=X(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function ai(a){if(!1===ag(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==ag(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function aj(a){let b=0;for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b++;return b}var ak=a=>{let b=typeof a;switch(b){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(a)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return"promise";if("undefined"!=typeof Map&&a instanceof Map)return"map";if("undefined"!=typeof Set&&a instanceof Set)return"set";if("undefined"!=typeof Date&&a instanceof Date)return"date";if("undefined"!=typeof File&&a instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${b}`)}},al=new Set(["string","number","symbol"]),am=new Set(["string","number","bigint","boolean","symbol","undefined"]);function an(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ao(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function ap(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function aq(a){let b;return new Proxy({},{get:(c,d,e)=>(b??(b=a()),Reflect.get(b,d,e)),set:(c,d,e,f)=>(b??(b=a()),Reflect.set(b,d,e,f)),has:(c,d)=>(b??(b=a()),Reflect.has(b,d)),deleteProperty:(c,d)=>(b??(b=a()),Reflect.deleteProperty(b,d)),ownKeys:c=>(b??(b=a()),Reflect.ownKeys(b)),getOwnPropertyDescriptor:(c,d)=>(b??(b=a()),Reflect.getOwnPropertyDescriptor(b,d)),defineProperty:(c,d,e)=>(b??(b=a()),Reflect.defineProperty(b,d,e))})}function ar(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}function as(a){return Object.keys(a).filter(b=>"optional"===a[b]._zod.optin&&"optional"===a[b]._zod.optout)}var at={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},au={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function av(a,b){let c={},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&(c[a]=d.shape[a])}return ao(a,{...a._zod.def,shape:c,checks:[]})}function aw(a,b){let c={...a._zod.def.shape},d=a._zod.def;for(let a in b){if(!(a in d.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete c[a]}return ao(a,{...a._zod.def,shape:c,checks:[]})}function ax(a,b){if(!ai(b))throw Error("Invalid input to extend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return aa(this,"shape",c),c},checks:[]};return ao(a,c)}function ay(a,b){return ao(a,{...a._zod.def,get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return aa(this,"shape",c),c},catchall:b._zod.def.catchall,checks:[]})}function az(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return ao(b,{...b._zod.def,shape:e,checks:[]})}function aA(a,b,c){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return ao(b,{...b._zod.def,shape:e,checks:[]})}function aB(a,b=0){for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function aC(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function aD(a){return"string"==typeof a?a:a?.message}function aE(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=aD(a.inst?._zod.def?.error?.(a))??aD(b?.error?.(a))??aD(c.customError?.(a))??aD(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function aF(a){return a instanceof Set?"set":a instanceof Map?"map":a instanceof File?"file":"unknown"}function aG(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function aH(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}function aI(a){return Object.entries(a).filter(([a,b])=>Number.isNaN(Number.parseInt(a,10))).map(a=>a[1])}var aJ=class{constructor(...a){}},aK=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),Object.defineProperty(a,"message",{get:()=>JSON.stringify(b,W,2),enumerable:!0}),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},aL=K("$ZodError",aK),aM=K("$ZodError",aK,{Parent:Error}),aN=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new L;return f.issues.length?{success:!1,error:new(a??aL)(f.issues.map(a=>aE(a,e,N())))}:{success:!0,data:f.value}},aO=aN(aM),aP=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>aE(a,e,N())))}:{success:!0,data:f.value}},aQ=aP(aM),aR=K("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),aS=K("$ZodCheckMaxLength",(a,b)=>{var c;aR.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!Y(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=aG(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),aT=K("$ZodCheckMinLength",(a,b)=>{var c;aR.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!Y(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=aG(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),aU=K("$ZodCheckLengthEquals",(a,b)=>{var c;aR.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return!Y(b)&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=aG(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),aV=K("$ZodCheckOverwrite",(a,b)=>{aR.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}}),aW=class{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}},aX={major:4,minor:0,patch:0},aY=K("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=aX;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=aB(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new L;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=aB(a,b)))});else{if(a.issues.length===b)continue;e||(e=aB(a,b))}}return d?d.then(()=>a):a};a._zod.run=(c,e)=>{let f=a._zod.parse(c,e);if(f instanceof Promise){if(!1===e.async)throw new L;return f.then(a=>b(a,d,e))}return b(f,d,e)}}a["~standard"]={validate:b=>{try{let c=aO(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return aQ(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),aZ=K("$ZodUnknown",(a,b)=>{aY.init(a,b),a._zod.parse=a=>a}),a$=K("$ZodNever",(a,b)=>{aY.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)});function a_(a,b,c){a.issues.length&&b.issues.push(...aC(c,a.issues)),b.value[c]=a.value}var a0=K("$ZodArray",(a,b)=>{aY.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>a_(b,c,a))):a_(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function a1(a,b,c){a.issues.length&&b.issues.push(...aC(c,a.issues)),b.value[c]=a.value}function a2(a,b,c,d){a.issues.length?void 0===d[c]?c in d?b.value[c]=void 0:b.value[c]=a.value:b.issues.push(...aC(c,a.issues)):void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}var a3=K("$ZodObject",(a,b)=>{let c,d;aY.init(a,b);let e=X(()=>{let a=Object.keys(b.shape);for(let c of a)if(!(b.shape[c]instanceof aY))throw Error(`Invalid element at key "${c}": expected a Zod schema`);let c=as(b.shape);return{shape:b.shape,keys:a,keySet:new Set(a),numKeys:a.length,optionalKeys:new Set(c)}});_(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=!M.jitless,g=f&&ah.value,h=b.catchall;a._zod.parse=(i,j)=>{d??(d=e.value);let k=i.value;if(!ag(k))return i.issues.push({expected:"object",code:"invalid_type",input:k,inst:a}),i;let l=[];if(f&&g&&j?.async===!1&&!0!==j.jitless)c||(c=(a=>{let b=new aW(["shape","payload","ctx"]),c=e.value,d=a=>{let b=ae(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let f=Object.create(null),g=0;for(let a of c.keys)f[a]=`key_${g++}`;for(let a of(b.write("const newResult = {}"),c.keys))if(c.optionalKeys.has(a)){let c=f[a];b.write(`const ${c} = ${d(a)};`);let e=ae(a);b.write(`
        if (${c}.issues.length) {
          if (input[${e}] === undefined) {
            if (${e} in input) {
              newResult[${e}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${c}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${e}, ...iss.path] : [${e}],
              }))
            );
          }
        } else if (${c}.value === undefined) {
          if (${e} in input) newResult[${e}] = undefined;
        } else {
          newResult[${e}] = ${c}.value;
        }
        `)}else{let c=f[a];b.write(`const ${c} = ${d(a)};`),b.write(`
          if (${c}.issues.length) payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${ae(a)}, ...iss.path] : [${ae(a)}]
          })));`),b.write(`newResult[${ae(a)}] = ${c}.value`)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),i=c(i,j);else{i.value={};let a=d.shape;for(let b of d.keys){let c=a[b],d=c._zod.run({value:k[b],issues:[]},j),e="optional"===c._zod.optin&&"optional"===c._zod.optout;d instanceof Promise?l.push(d.then(a=>e?a2(a,i,b,k):a1(a,i,b))):e?a2(d,i,b,k):a1(d,i,b)}}if(!h)return l.length?Promise.all(l).then(()=>i):i;let m=[],n=d.keySet,o=h._zod,p=o.def.type;for(let a of Object.keys(k)){if(n.has(a))continue;if("never"===p){m.push(a);continue}let b=o.run({value:k[a],issues:[]},j);b instanceof Promise?l.push(b.then(b=>a1(b,i,a))):a1(b,i,a)}return(m.length&&i.issues.push({code:"unrecognized_keys",keys:m,input:k,inst:a}),l.length)?Promise.all(l).then(()=>i):i}});function a4(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;return b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>aE(a,d,N())))}),b}var a5=K("$ZodUnion",(a,b)=>{aY.init(a,b),_(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),_(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),_(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),_(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>Z(a.source)).join("|")})$`)}}),a._zod.parse=(c,d)=>{let e=!1,f=[];for(let a of b.options){let b=a._zod.run({value:c.value,issues:[]},d);if(b instanceof Promise)f.push(b),e=!0;else{if(0===b.issues.length)return b;f.push(b)}}return e?Promise.all(f).then(b=>a4(b,c,a,d)):a4(f,c,a,d)}}),a6=K("$ZodIntersection",(a,b)=>{aY.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>a7(a,b,c)):a7(a,e,f)}});function a7(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),aB(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(ai(b)&&ai(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}var a8=K("$ZodEnum",(a,b)=>{aY.init(a,b);let c=U(b.entries);a._zod.values=new Set(c),a._zod.pattern=RegExp(`^(${c.filter(a=>al.has(typeof a)).map(a=>"string"==typeof a?an(a):a.toString()).join("|")})$`),a._zod.parse=(b,d)=>{let e=b.value;return a._zod.values.has(e)||b.issues.push({code:"invalid_value",values:c,input:e,inst:a}),b}}),a9=K("$ZodTransform",(a,b)=>{aY.init(a,b),a._zod.parse=(a,c)=>{let d=b.transform(a.value,a);if(c.async)return(d instanceof Promise?d:Promise.resolve(d)).then(b=>(a.value=b,a));if(d instanceof Promise)throw new L;return a.value=d,a}}),ba=K("$ZodOptional",(a,b)=>{aY.init(a,b),a._zod.optin="optional",a._zod.optout="optional",_(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),_(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${Z(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>"optional"===b.innerType._zod.optin?b.innerType._zod.run(a,c):void 0===a.value?a:b.innerType._zod.run(a,c)}),bb=K("$ZodNullable",(a,b)=>{aY.init(a,b),_(a._zod,"optin",()=>b.innerType._zod.optin),_(a._zod,"optout",()=>b.innerType._zod.optout),_(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${Z(a.source)}|null)$`):void 0}),_(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),bc=K("$ZodDefault",(a,b)=>{aY.init(a,b),a._zod.optin="optional",_(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>bd(a,b)):bd(d,b)}});function bd(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}var be=K("$ZodPrefault",(a,b)=>{aY.init(a,b),a._zod.optin="optional",_(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>(void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),bf=K("$ZodNonOptional",(a,b)=>{aY.init(a,b),_(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>bg(b,a)):bg(e,a)}});function bg(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}var bh=K("$ZodCatch",(a,b)=>{aY.init(a,b),a._zod.optin="optional",_(a._zod,"optout",()=>b.innerType._zod.optout),_(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>aE(a,c,N()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>aE(a,c,N()))},input:a.value}),a.issues=[]),a)}}),bi=K("$ZodPipe",(a,b)=>{aY.init(a,b),_(a._zod,"values",()=>b.in._zod.values),_(a._zod,"optin",()=>b.in._zod.optin),_(a._zod,"optout",()=>b.out._zod.optout),a._zod.parse=(a,c)=>{let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>bj(a,b,c)):bj(d,b,c)}});function bj(a,b,c){return aB(a)?a:b.out._zod.run({value:a.value,issues:a.issues},c)}var bk=K("$ZodReadonly",(a,b)=>{aY.init(a,b),_(a._zod,"propValues",()=>b.innerType._zod.propValues),_(a._zod,"values",()=>b.innerType._zod.values),_(a._zod,"optin",()=>b.innerType._zod.optin),_(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(bl):bl(d)}});function bl(a){return a.value=Object.freeze(a.value),a}var bm=K("$ZodCustom",(a,b)=>{aR.init(a,b),aY.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>bn(b,c,d,a));bn(e,c,d,a)}});function bn(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(aH(a))}}Symbol("ZodOutput"),Symbol("ZodInput");var bo=new class{constructor(){this._map=new Map,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};return delete c.id,{...c,...this._map.get(a)}}return this._map.get(a)}has(a){return this._map.has(a)}};function bp(a,b){return new aT({check:"min_length",...ap(b),minimum:a})}var bq=(a,b)=>{aL.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b){let c=b||function(a){return a.message},d={_errors:[]},e=a=>{for(let b of a.issues)if("invalid_union"===b.code&&b.errors.length)b.errors.map(a=>e({issues:a}));else if("invalid_key"===b.code)e({issues:b.issues});else if("invalid_element"===b.code)e({issues:b.issues});else if(0===b.path.length)d._errors.push(c(b));else{let a=d,e=0;for(;e<b.path.length;){let d=b.path[e];e===b.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(c(b))):a[d]=a[d]||{_errors:[]},a=a[d],e++}}};return e(a),d})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>a.issues.push(b)},addIssues:{value:b=>a.issues.push(...b)},isEmpty:{get:()=>0===a.issues.length}})};K("ZodError",bq);var br=K("ZodError",bq,{Parent:Error}),bs=(a,b,c,d)=>{let e=c?Object.assign(c,{async:!1}):{async:!1},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise)throw new L;if(f.issues.length){let a=new(d?.Err??br)(f.issues.map(a=>aE(a,e,N())));throw af(a,d?.callee),a}return f.value},bt=async(a,b,c,d)=>{let e=c?Object.assign(c,{async:!0}):{async:!0},f=a._zod.run({value:b,issues:[]},e);if(f instanceof Promise&&(f=await f),f.issues.length){let a=new(d?.Err??br)(f.issues.map(a=>aE(a,e,N())));throw af(a,d?.callee),a}return f.value},bu=aN(br),bv=aP(br),bw=K("ZodType",(a,b)=>(aY.init(a,b),a.def=b,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone({...b,checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),a.clone=(b,c)=>ao(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>bs(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>bu(a,b,c),a.parseAsync=async(b,c)=>bt(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>bv(a,b,c),a.spa=a.safeParseAsync,a.refine=(b,c)=>a.check(function(a,b={}){return new bR({type:"custom",check:"custom",fn:a,...ap(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a){let b=new aR({check:"custom"});return b._zod.check=a,b}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(O.issue(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(O.issue(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(new aV({check:"overwrite",tx:b})),a.optional=()=>bH(a),a.nullable=()=>bJ(a),a.nullish=()=>bH(bJ(a)),a.nonoptional=b=>{var c,d;return c=a,d=b,new bM({type:"nonoptional",innerType:c,...O.normalizeParams(d)})},a.array=()=>(function(a,b){return new bA({type:"array",element:a,...ap(void 0)})})(a),a.or=b=>new bC({type:"union",options:[a,b],...O.normalizeParams(void 0)}),a.and=b=>{var c;return c=a,new bD({type:"intersection",left:c,right:b})},a.transform=b=>bP(a,new bF({type:"transform",transform:b})),a.default=b=>(function(a,b){return new bK({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.prefault=b=>(function(a,b){return new bL({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():b}})})(a,b),a.catch=b=>(function(a,b){return new bN({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>bP(a,b),a.readonly=()=>new bQ({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return bo.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>bo.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return bo.get(a);let c=a.clone();return bo.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),bx=K("ZodUnknown",(a,b)=>{aZ.init(a,b),bw.init(a,b)});function by(){return new bx({type:"unknown"})}var bz=K("ZodNever",(a,b)=>{a$.init(a,b),bw.init(a,b)}),bA=K("ZodArray",(a,b)=>{a0.init(a,b),bw.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(bp(b,c)),a.nonempty=b=>a.check(bp(1,b)),a.max=(b,c)=>a.check(new aS({check:"max_length",...ap(c),maximum:b})),a.length=(b,c)=>a.check(new aU({check:"length_equals",...ap(c),length:b})),a.unwrap=()=>a.element}),bB=K("ZodObject",(a,b)=>{a3.init(a,b),bw.init(a,b),O.defineLazy(a,"shape",()=>b.shape),a.keyof=()=>(function(a,b){return new bE({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...O.normalizeParams(void 0)})})(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:by()}),a.loose=()=>a.clone({...a._zod.def,catchall:by()}),a.strict=()=>a.clone({...a._zod.def,catchall:new bz({type:"never",...ap(void 0)})}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>O.extend(a,b),a.merge=b=>O.merge(a,b),a.pick=b=>O.pick(a,b),a.omit=b=>O.omit(a,b),a.partial=(...b)=>O.partial(bG,a,b[0]),a.required=(...b)=>O.required(bM,a,b[0])}),bC=K("ZodUnion",(a,b)=>{a5.init(a,b),bw.init(a,b),a.options=b.options}),bD=K("ZodIntersection",(a,b)=>{a6.init(a,b),bw.init(a,b)}),bE=K("ZodEnum",(a,b)=>{a8.init(a,b),bw.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new bE({...b,checks:[],...O.normalizeParams(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new bE({...b,checks:[],...O.normalizeParams(d),entries:e})}}),bF=K("ZodTransform",(a,b)=>{a9.init(a,b),bw.init(a,b),a._zod.parse=(c,d)=>{c.addIssue=d=>{"string"==typeof d?c.issues.push(O.issue(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),d.continue??(d.continue=!0),c.issues.push(O.issue(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),bG=K("ZodOptional",(a,b)=>{ba.init(a,b),bw.init(a,b),a.unwrap=()=>a._zod.def.innerType});function bH(a){return new bG({type:"optional",innerType:a})}var bI=K("ZodNullable",(a,b)=>{bb.init(a,b),bw.init(a,b),a.unwrap=()=>a._zod.def.innerType});function bJ(a){return new bI({type:"nullable",innerType:a})}var bK=K("ZodDefault",(a,b)=>{bc.init(a,b),bw.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),bL=K("ZodPrefault",(a,b)=>{be.init(a,b),bw.init(a,b),a.unwrap=()=>a._zod.def.innerType}),bM=K("ZodNonOptional",(a,b)=>{bf.init(a,b),bw.init(a,b),a.unwrap=()=>a._zod.def.innerType}),bN=K("ZodCatch",(a,b)=>{bh.init(a,b),bw.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),bO=K("ZodPipe",(a,b)=>{bi.init(a,b),bw.init(a,b),a.in=b.in,a.out=b.out});function bP(a,b){return new bO({type:"pipe",in:a,out:b})}var bQ=K("ZodReadonly",(a,b)=>{bk.init(a,b),bw.init(a,b)}),bR=K("ZodCustom",(a,b)=>{bm.init(a,b),bw.init(a,b)}),bS={};function bT(a){switch(a.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function bU(a){let b=[];return a.metadata?.openapi?.parameters?b.push(...a.metadata.openapi.parameters):a.query instanceof bB&&Object.entries(a.query.shape).forEach(([a,c])=>{c instanceof bB&&b.push({name:a,in:"query",schema:{type:bT(c),..."minLength"in c&&c.minLength?{minLength:c.minLength}:{},description:c.description}})}),b}function bV(a){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...a}}async function bW(a,b){return Object.entries(a).forEach(([a,b])=>{let c=b.options;if(!c.metadata?.SERVER_ONLY&&("GET"===c.method&&(bS[b.path]={get:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:bU(c),responses:bV(c.metadata?.openapi?.responses)}}),"POST"===c.method)){let a=function(a){if(a.metadata?.openapi?.requestBody)return a.metadata.openapi.requestBody;if(a.body&&(a.body instanceof bB||a.body instanceof bG)){let b=a.body.shape;if(!b)return;let c={},d=[];return Object.entries(b).forEach(([a,b])=>{b instanceof bB&&(c[a]={type:bT(b),description:b.description},b instanceof bG||d.push(a))}),{required:!(a.body instanceof bG)&&!!a.body,content:{"application/json":{schema:{type:"object",properties:c,required:d}}}}}}(c);bS[b.path]={post:{tags:["Default",...c.metadata?.openapi?.tags||[]],description:c.metadata?.openapi?.description,operationId:c.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:bU(c),...a?{requestBody:a}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:bV(c.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:b?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:bS}}function bX(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}Object.freeze({status:"aborted"}),Symbol("zod_brand");class bY extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class bZ extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let b$={};function b_(a){return a&&Object.assign(b$,a),b$}function b0(a,b="|"){return a.map(a=>ci(a)).join(b)}function b1(a,b){return"bigint"==typeof b?b.toString():b}function b2(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function b3(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}let b4=Symbol("evaluating");function b5(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==b4)return void 0===d&&(d=b4,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function b6(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function b7(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function b8(a){return JSON.stringify(a)}let b9="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function ca(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let cb=b2(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function cc(a){if(!1===ca(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==ca(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function cd(a){return cc(a)?{...a}:Array.isArray(a)?[...a]:a}let ce=new Set(["string","number","symbol"]);function cf(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function cg(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function ch(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function ci(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}let cj={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ck(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function cl(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function cm(a){return"string"==typeof a?a:a?.message}function cn(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=cm(a.inst?._zod.def?.error?.(a))??cm(b?.error?.(a))??cm(c.customError?.(a))??cm(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function co(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function cp(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}let cq=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,b1,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},cr=bX("$ZodError",cq),cs=bX("$ZodError",cq,{Parent:Error}),ct=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new bY;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>cn(a,f,b_())));throw b9(b,e?.callee),b}return g.value},cu=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>cn(a,f,b_())));throw b9(b,e?.callee),b}return g.value},cv=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new bY;return f.issues.length?{success:!1,error:new(a??cr)(f.issues.map(a=>cn(a,e,b_())))}:{success:!0,data:f.value}},cw=cv(cs),cx=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>cn(a,e,b_())))}:{success:!0,data:f.value}},cy=cx(cs),cz=/^[cC][^\s-]{8,}$/,cA=/^[0-9a-z]+$/,cB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,cC=/^[0-9a-vA-V]{20}$/,cD=/^[A-Za-z0-9]{27}$/,cE=/^[a-zA-Z0-9_-]{21}$/,cF=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,cG=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,cH=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cI=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,cJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cK=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cL=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cM=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cN=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,cO=/^[A-Za-z0-9_-]*$/,cP=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,cQ=/^\+(?:[0-9]){6,14}[0-9]$/,cR="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cS=RegExp(`^${cR}$`);function cT(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}let cU=/^-?\d+n?$/,cV=/^-?\d+$/,cW=/^-?\d+(?:\.\d+)?/,cX=/^(?:true|false)$/i,cY=/^[^A-Z]*$/,cZ=/^[^a-z]*$/,c$=bX("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),c_={number:"number",bigint:"bigint",object:"date"},c0=bX("$ZodCheckLessThan",(a,b)=>{c$.init(a,b);let c=c_[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),c1=bX("$ZodCheckGreaterThan",(a,b)=>{c$.init(a,b);let c=c_[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),c2=bX("$ZodCheckMultipleOf",(a,b)=>{c$.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),c3=bX("$ZodCheckNumberFormat",(a,b)=>{c$.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=cj[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=cV)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),c4=bX("$ZodCheckMaxLength",(a,b)=>{var c;c$.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=co(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),c5=bX("$ZodCheckMinLength",(a,b)=>{var c;c$.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=co(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),c6=bX("$ZodCheckLengthEquals",(a,b)=>{var c;c$.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=co(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),c7=bX("$ZodCheckStringFormat",(a,b)=>{var c,d;c$.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),c8=bX("$ZodCheckRegex",(a,b)=>{c7.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),c9=bX("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=cY),c7.init(a,b)}),da=bX("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=cZ),c7.init(a,b)}),db=bX("$ZodCheckIncludes",(a,b)=>{c$.init(a,b);let c=cf(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),dc=bX("$ZodCheckStartsWith",(a,b)=>{c$.init(a,b);let c=RegExp(`^${cf(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),dd=bX("$ZodCheckEndsWith",(a,b)=>{c$.init(a,b);let c=RegExp(`.*${cf(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}}),de=bX("$ZodCheckOverwrite",(a,b)=>{c$.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class df{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let dg={major:4,minor:1,patch:11},dh=bX("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=dg;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=ck(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new bY;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=ck(a,b)))});else{if(a.issues.length===b)continue;e||(e=ck(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(ck(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new bY;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new bY;return g.then(a=>b(a,d,f))}return b(g,d,f)}}a["~standard"]={validate:b=>{try{let c=cw(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return cy(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),di=bX("$ZodString",(a,b)=>{dh.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),dj=bX("$ZodStringFormat",(a,b)=>{c7.init(a,b),di.init(a,b)}),dk=bX("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=cG),dj.init(a,b)}),dl=bX("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=cH(a))}else b.pattern??(b.pattern=cH());dj.init(a,b)}),dm=bX("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=cI),dj.init(a,b)}),dn=bX("$ZodURL",(a,b)=>{dj.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:cP.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),dp=bX("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),dj.init(a,b)}),dq=bX("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=cE),dj.init(a,b)}),dr=bX("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=cz),dj.init(a,b)}),ds=bX("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=cA),dj.init(a,b)}),dt=bX("$ZodULID",(a,b)=>{b.pattern??(b.pattern=cB),dj.init(a,b)}),du=bX("$ZodXID",(a,b)=>{b.pattern??(b.pattern=cC),dj.init(a,b)}),dv=bX("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=cD),dj.init(a,b)}),dw=bX("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=cT({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${cR}T(?:${d})$`)}(b)),dj.init(a,b)}),dx=bX("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=cS),dj.init(a,b)}),dy=bX("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=RegExp(`^${cT(b)}$`)),dj.init(a,b)}),dz=bX("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=cF),dj.init(a,b)}),dA=bX("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=cJ),dj.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv4"})}),dB=bX("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=cK),dj.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv6"}),a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),dC=bX("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=cL),dj.init(a,b)}),dD=bX("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=cM),dj.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function dE(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let dF=bX("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=cN),dj.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),a._zod.check=c=>{dE(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),dG=bX("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=cO),dj.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),a._zod.check=c=>{!function(a){if(!cO.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return dE(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),dH=bX("$ZodE164",(a,b)=>{b.pattern??(b.pattern=cQ),dj.init(a,b)}),dI=bX("$ZodJWT",(a,b)=>{dj.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),dJ=bX("$ZodNumber",(a,b)=>{dh.init(a,b),a._zod.pattern=a._zod.bag.pattern??cW,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),dK=bX("$ZodNumber",(a,b)=>{c3.init(a,b),dJ.init(a,b)}),dL=bX("$ZodBoolean",(a,b)=>{dh.init(a,b),a._zod.pattern=cX,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),dM=((a,b)=>{dh.init(a,b),a._zod.pattern=cU,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}},bX("$ZodAny",(a,b)=>{dh.init(a,b),a._zod.parse=a=>a})),dN=bX("$ZodUnknown",(a,b)=>{dh.init(a,b),a._zod.parse=a=>a}),dO=bX("$ZodNever",(a,b)=>{dh.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),dP=bX("$ZodDate",(a,b)=>{dh.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function dQ(a,b,c){a.issues.length&&b.issues.push(...cl(c,a.issues)),b.value[c]=a.value}let dR=bX("$ZodArray",(a,b)=>{dh.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>dQ(b,c,a))):dQ(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function dS(a,b,c,d){a.issues.length&&b.issues.push(...cl(c,a.issues)),void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function dT(a){var b;let c=Object.keys(a.shape);for(let b of c)if(!a.shape?.[b]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${b}": expected a Zod schema`);let d=Object.keys(b=a.shape).filter(a=>"optional"===b[a]._zod.optin&&"optional"===b[a]._zod.optout);return{...a,keys:c,keySet:new Set(c),numKeys:c.length,optionalKeys:new Set(d)}}function dU(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type;for(let e of Object.keys(b)){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>dS(a,c,e,b))):dS(f,c,e,b)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let dV=bX("$ZodObject",(a,b)=>{let c;dh.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=b2(()=>dT(b));b5(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!ca(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a]._zod.run({value:g[a],issues:[]},d);c instanceof Promise?h.push(c.then(c=>dS(c,b,a,g))):dS(c,b,a,g)}return f?dU(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),dW=bX("$ZodObjectJIT",(a,b)=>{let c,d;dV.init(a,b);let e=a._zod.parse,f=b2(()=>dT(b)),g=!b$.jitless,h=g&&cb.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return ca(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new df(["shape","payload","ctx"]),c=f.value,d=a=>{let b=b8(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let a of(b.write("const newResult = {};"),c.keys)){let c=e[a],f=b8(a);b.write(`const ${c} = ${d(a)};`),b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${f}, ...iss.path] : [${f}]
          })));
        }
        
        
        if (${c}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?dU([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function dX(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!ck(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>cn(a,d,b_())))}),b)}let dY=bX("$ZodUnion",(a,b)=>{dh.init(a,b),b5(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),b5(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),b5(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),b5(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>b3(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>dX(b,e,a,f)):dX(h,e,a,f)}}),dZ=bX("$ZodIntersection",(a,b)=>{dh.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>d$(a,b,c)):d$(a,e,f)}});function d$(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),ck(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(cc(b)&&cc(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let d_=bX("$ZodRecord",(a,b)=>{dh.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!cc(e))return c.issues.push({expected:"record",code:"invalid_type",input:e,inst:a}),c;let f=[];if(b.keyType._zod.values){let g,h=b.keyType._zod.values;for(let a of(c.value={},h))if("string"==typeof a||"number"==typeof a||"symbol"==typeof a){let g=b.valueType._zod.run({value:e[a],issues:[]},d);g instanceof Promise?f.push(g.then(b=>{b.issues.length&&c.issues.push(...cl(a,b.issues)),c.value[a]=b.value})):(g.issues.length&&c.issues.push(...cl(a,g.issues)),c.value[a]=g.value)}for(let a in e)h.has(a)||(g=g??[]).push(a);g&&g.length>0&&c.issues.push({code:"unrecognized_keys",input:e,inst:a,keys:g})}else for(let g of(c.value={},Reflect.ownKeys(e))){if("__proto__"===g)continue;let h=b.keyType._zod.run({value:g,issues:[]},d);if(h instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(h.issues.length){c.issues.push({code:"invalid_key",origin:"record",issues:h.issues.map(a=>cn(a,d,b_())),input:g,path:[g],inst:a}),c.value[h.value]=h.value;continue}let i=b.valueType._zod.run({value:e[g],issues:[]},d);i instanceof Promise?f.push(i.then(a=>{a.issues.length&&c.issues.push(...cl(g,a.issues)),c.value[h.value]=a.value})):(i.issues.length&&c.issues.push(...cl(g,i.issues)),c.value[h.value]=i.value)}return f.length?Promise.all(f).then(()=>c):c}}),d0=bX("$ZodEnum",(a,b)=>{dh.init(a,b);let c=function(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>ce.has(typeof a)).map(a=>"string"==typeof a?cf(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),d1=bX("$ZodTransform",(a,b)=>{dh.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new bZ(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new bY;return c.value=e,c}});function d2(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let d3=bX("$ZodOptional",(a,b)=>{dh.init(a,b),a._zod.optin="optional",a._zod.optout="optional",b5(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),b5(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${b3(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>d2(b,a.value)):d2(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),d4=bX("$ZodNullable",(a,b)=>{dh.init(a,b),b5(a._zod,"optin",()=>b.innerType._zod.optin),b5(a._zod,"optout",()=>b.innerType._zod.optout),b5(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${b3(a.source)}|null)$`):void 0}),b5(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),d5=bX("$ZodDefault",(a,b)=>{dh.init(a,b),a._zod.optin="optional",b5(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>d6(a,b)):d6(d,b)}});function d6(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let d7=bX("$ZodPrefault",(a,b)=>{dh.init(a,b),a._zod.optin="optional",b5(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),d8=bX("$ZodNonOptional",(a,b)=>{dh.init(a,b),b5(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>d9(b,a)):d9(e,a)}});function d9(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let ea=bX("$ZodCatch",(a,b)=>{dh.init(a,b),b5(a._zod,"optin",()=>b.innerType._zod.optin),b5(a._zod,"optout",()=>b.innerType._zod.optout),b5(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>cn(a,c,b_()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>cn(a,c,b_()))},input:a.value}),a.issues=[]),a)}}),eb=bX("$ZodPipe",(a,b)=>{dh.init(a,b),b5(a._zod,"values",()=>b.in._zod.values),b5(a._zod,"optin",()=>b.in._zod.optin),b5(a._zod,"optout",()=>b.out._zod.optout),b5(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>ec(a,b.in,c)):ec(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>ec(a,b.out,c)):ec(d,b.out,c)}});function ec(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let ed=bX("$ZodReadonly",(a,b)=>{dh.init(a,b),b5(a._zod,"propValues",()=>b.innerType._zod.propValues),b5(a._zod,"values",()=>b.innerType._zod.values),b5(a._zod,"optin",()=>b.innerType._zod.optin),b5(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(ee):ee(d)}});function ee(a){return a.value=Object.freeze(a.value),a}let ef=bX("$ZodCustom",(a,b)=>{c$.init(a,b),dh.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>eg(b,c,d,a));eg(e,c,d,a)}});function eg(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(cp(a))}}Symbol("ZodOutput"),Symbol("ZodInput");class eh{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}let ei=new eh;function ej(a,b){return new a({type:"string",format:"email",check:"string_format",abort:!1,...ch(b)})}function ek(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...ch(b)})}function el(a,b){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...ch(b)})}function em(a,b){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...ch(b)})}function en(a,b){return new c0({check:"less_than",...ch(b),value:a,inclusive:!1})}function eo(a,b){return new c0({check:"less_than",...ch(b),value:a,inclusive:!0})}function ep(a,b){return new c1({check:"greater_than",...ch(b),value:a,inclusive:!1})}function eq(a,b){return new c1({check:"greater_than",...ch(b),value:a,inclusive:!0})}function er(a,b){return new c2({check:"multiple_of",...ch(b),value:a})}function es(a,b){return new c4({check:"max_length",...ch(b),maximum:a})}function et(a,b){return new c5({check:"min_length",...ch(b),minimum:a})}function eu(a,b){return new c6({check:"length_equals",...ch(b),length:a})}function ev(a){return new de({check:"overwrite",tx:a})}let ew=bX("ZodISODateTime",(a,b)=>{dw.init(a,b),eS.init(a,b)}),ex=bX("ZodISODate",(a,b)=>{dx.init(a,b),eS.init(a,b)}),ey=bX("ZodISOTime",(a,b)=>{dy.init(a,b),eS.init(a,b)}),ez=bX("ZodISODuration",(a,b)=>{dz.init(a,b),eS.init(a,b)}),eA=(a,b)=>{cr.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b){let c=b||function(a){return a.message},d={_errors:[]},e=a=>{for(let b of a.issues)if("invalid_union"===b.code&&b.errors.length)b.errors.map(a=>e({issues:a}));else if("invalid_key"===b.code)e({issues:b.issues});else if("invalid_element"===b.code)e({issues:b.issues});else if(0===b.path.length)d._errors.push(c(b));else{let a=d,e=0;for(;e<b.path.length;){let d=b.path[e];e===b.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(c(b))):a[d]=a[d]||{_errors:[]},a=a[d],e++}}};return e(a),d})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,b1,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,b1,2)}},isEmpty:{get:()=>0===a.issues.length}})};bX("ZodError",eA);let eB=bX("ZodError",eA,{Parent:Error}),eC=ct(eB),eD=cu(eB),eE=cv(eB),eF=cx(eB),eG=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return ct(eB)(a,b,d)},eH=(a,b,c)=>ct(eB)(a,b,c),eI=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return cu(eB)(a,b,d)},eJ=async(a,b,c)=>cu(eB)(a,b,c),eK=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return cv(eB)(a,b,d)},eL=(a,b,c)=>cv(eB)(a,b,c),eM=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return cx(eB)(a,b,d)},eN=async(a,b,c)=>cx(eB)(a,b,c),eO=bX("ZodType",(a,b)=>(dh.init(a,b),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(b7(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),a.clone=(b,c)=>cg(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>eC(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>eE(a,b,c),a.parseAsync=async(b,c)=>eD(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>eF(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>eG(a,b,c),a.decode=(b,c)=>eH(a,b,c),a.encodeAsync=async(b,c)=>eI(a,b,c),a.decodeAsync=async(b,c)=>eJ(a,b,c),a.safeEncode=(b,c)=>eK(a,b,c),a.safeDecode=(b,c)=>eL(a,b,c),a.safeEncodeAsync=async(b,c)=>eM(a,b,c),a.safeDecodeAsync=async(b,c)=>eN(a,b,c),a.refine=(b,c)=>a.check(function(a,b={}){return new fK({type:"custom",check:"custom",fn:a,...ch(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a,b){let c=new c$({check:"custom",...ch(void 0)});return c._zod.check=a,c}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(cp(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(cp(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(ev(b)),a.optional=()=>fA(a),a.nullable=()=>fC(a),a.nullish=()=>fA(fC(a)),a.nonoptional=b=>new fF({type:"nonoptional",innerType:a,...ch(b)}),a.array=()=>fo(a),a.or=b=>fs([a,b]),a.and=b=>new ft({type:"intersection",left:a,right:b}),a.transform=b=>fI(a,new fy({type:"transform",transform:b})),a.default=b=>(function(a,b){return new fD({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():cd(b)}})})(a,b),a.prefault=b=>(function(a,b){return new fE({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():cd(b)}})})(a,b),a.catch=b=>(function(a,b){return new fG({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>fI(a,b),a.readonly=()=>new fJ({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return ei.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>ei.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return ei.get(a);let c=a.clone();return ei.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),eP=bX("_ZodString",(a,b)=>{di.init(a,b),eO.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new c8({check:"string_format",format:"regex",...ch(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new db({check:"string_format",format:"includes",...ch(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new dc({check:"string_format",format:"starts_with",...ch(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new dd({check:"string_format",format:"ends_with",...ch(b),suffix:a})}(...b)),a.min=(...b)=>a.check(et(...b)),a.max=(...b)=>a.check(es(...b)),a.length=(...b)=>a.check(eu(...b)),a.nonempty=(...b)=>a.check(et(1,...b)),a.lowercase=b=>a.check(new c9({check:"string_format",format:"lowercase",...ch(b)})),a.uppercase=b=>a.check(new da({check:"string_format",format:"uppercase",...ch(b)})),a.trim=()=>a.check(ev(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return ev(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(ev(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(ev(a=>a.toUpperCase()))}),eQ=bX("ZodString",(a,b)=>{di.init(a,b),eP.init(a,b),a.email=b=>a.check(ej(eT,b)),a.url=b=>a.check(new eW({type:"string",format:"url",check:"string_format",abort:!1,...ch(b)})),a.jwt=b=>a.check(new e9({type:"string",format:"jwt",check:"string_format",abort:!1,...ch(b)})),a.emoji=b=>a.check(new eX({type:"string",format:"emoji",check:"string_format",abort:!1,...ch(b)})),a.guid=b=>a.check(ek(eU,b)),a.uuid=b=>a.check(new eV({type:"string",format:"uuid",check:"string_format",abort:!1,...ch(b)})),a.uuidv4=b=>a.check(new eV({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ch(b)})),a.uuidv6=b=>a.check(new eV({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ch(b)})),a.uuidv7=b=>a.check(new eV({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ch(b)})),a.nanoid=b=>a.check(new eY({type:"string",format:"nanoid",check:"string_format",abort:!1,...ch(b)})),a.guid=b=>a.check(ek(eU,b)),a.cuid=b=>a.check(new eZ({type:"string",format:"cuid",check:"string_format",abort:!1,...ch(b)})),a.cuid2=b=>a.check(new e$({type:"string",format:"cuid2",check:"string_format",abort:!1,...ch(b)})),a.ulid=b=>a.check(new e_({type:"string",format:"ulid",check:"string_format",abort:!1,...ch(b)})),a.base64=b=>a.check(new e6({type:"string",format:"base64",check:"string_format",abort:!1,...ch(b)})),a.base64url=b=>a.check(new e7({type:"string",format:"base64url",check:"string_format",abort:!1,...ch(b)})),a.xid=b=>a.check(new e0({type:"string",format:"xid",check:"string_format",abort:!1,...ch(b)})),a.ksuid=b=>a.check(new e1({type:"string",format:"ksuid",check:"string_format",abort:!1,...ch(b)})),a.ipv4=b=>a.check(el(e2,b)),a.ipv6=b=>a.check(em(e3,b)),a.cidrv4=b=>a.check(new e4({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ch(b)})),a.cidrv6=b=>a.check(new e5({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ch(b)})),a.e164=b=>a.check(new e8({type:"string",format:"e164",check:"string_format",abort:!1,...ch(b)})),a.datetime=b=>a.check(new ew({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ch(b)})),a.date=b=>a.check(new ex({type:"string",format:"date",check:"string_format",...ch(b)})),a.time=b=>a.check(new ey({type:"string",format:"time",check:"string_format",precision:null,...ch(b)})),a.duration=b=>a.check(new ez({type:"string",format:"duration",check:"string_format",...ch(b)}))});function eR(a){return new eQ({type:"string",...ch(a)})}let eS=bX("ZodStringFormat",(a,b)=>{dj.init(a,b),eP.init(a,b)}),eT=bX("ZodEmail",(a,b)=>{dm.init(a,b),eS.init(a,b)}),eU=bX("ZodGUID",(a,b)=>{dk.init(a,b),eS.init(a,b)}),eV=bX("ZodUUID",(a,b)=>{dl.init(a,b),eS.init(a,b)}),eW=bX("ZodURL",(a,b)=>{dn.init(a,b),eS.init(a,b)}),eX=bX("ZodEmoji",(a,b)=>{dp.init(a,b),eS.init(a,b)}),eY=bX("ZodNanoID",(a,b)=>{dq.init(a,b),eS.init(a,b)}),eZ=bX("ZodCUID",(a,b)=>{dr.init(a,b),eS.init(a,b)}),e$=bX("ZodCUID2",(a,b)=>{ds.init(a,b),eS.init(a,b)}),e_=bX("ZodULID",(a,b)=>{dt.init(a,b),eS.init(a,b)}),e0=bX("ZodXID",(a,b)=>{du.init(a,b),eS.init(a,b)}),e1=bX("ZodKSUID",(a,b)=>{dv.init(a,b),eS.init(a,b)}),e2=bX("ZodIPv4",(a,b)=>{dA.init(a,b),eS.init(a,b)}),e3=bX("ZodIPv6",(a,b)=>{dB.init(a,b),eS.init(a,b)}),e4=bX("ZodCIDRv4",(a,b)=>{dC.init(a,b),eS.init(a,b)}),e5=bX("ZodCIDRv6",(a,b)=>{dD.init(a,b),eS.init(a,b)}),e6=bX("ZodBase64",(a,b)=>{dF.init(a,b),eS.init(a,b)}),e7=bX("ZodBase64URL",(a,b)=>{dG.init(a,b),eS.init(a,b)}),e8=bX("ZodE164",(a,b)=>{dH.init(a,b),eS.init(a,b)}),e9=bX("ZodJWT",(a,b)=>{dI.init(a,b),eS.init(a,b)}),fa=bX("ZodNumber",(a,b)=>{dJ.init(a,b),eO.init(a,b),a.gt=(b,c)=>a.check(ep(b,c)),a.gte=(b,c)=>a.check(eq(b,c)),a.min=(b,c)=>a.check(eq(b,c)),a.lt=(b,c)=>a.check(en(b,c)),a.lte=(b,c)=>a.check(eo(b,c)),a.max=(b,c)=>a.check(eo(b,c)),a.int=b=>a.check(fd(b)),a.safe=b=>a.check(fd(b)),a.positive=b=>a.check(ep(0,b)),a.nonnegative=b=>a.check(eq(0,b)),a.negative=b=>a.check(en(0,b)),a.nonpositive=b=>a.check(eo(0,b)),a.multipleOf=(b,c)=>a.check(er(b,c)),a.step=(b,c)=>a.check(er(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null});function fb(a){return new fa({type:"number",checks:[],...ch(a)})}let fc=bX("ZodNumberFormat",(a,b)=>{dK.init(a,b),fa.init(a,b)});function fd(a){return new fc({type:"number",check:"number_format",abort:!1,format:"safeint",...ch(a)})}let fe=bX("ZodBoolean",(a,b)=>{dL.init(a,b),eO.init(a,b)});function ff(a){return new fe({type:"boolean",...ch(a)})}let fg=bX("ZodAny",(a,b)=>{dM.init(a,b),eO.init(a,b)});function fh(){return new fg({type:"any"})}let fi=bX("ZodUnknown",(a,b)=>{dN.init(a,b),eO.init(a,b)});function fj(){return new fi({type:"unknown"})}let fk=bX("ZodNever",(a,b)=>{dO.init(a,b),eO.init(a,b)}),fl=bX("ZodDate",(a,b)=>{dP.init(a,b),eO.init(a,b),a.min=(b,c)=>a.check(eq(b,c)),a.max=(b,c)=>a.check(eo(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function fm(a){return new fl({type:"date",...ch(a)})}let fn=bX("ZodArray",(a,b)=>{dR.init(a,b),eO.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(et(b,c)),a.nonempty=b=>a.check(et(1,b)),a.max=(b,c)=>a.check(es(b,c)),a.length=(b,c)=>a.check(eu(b,c)),a.unwrap=()=>a.element});function fo(a,b){return new fn({type:"array",element:a,...ch(b)})}let fp=bX("ZodObject",(a,b)=>{dW.init(a,b),eO.init(a,b),b5(a,"shape",()=>b.shape),a.keyof=()=>fx(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:fj()}),a.loose=()=>a.clone({...a._zod.def,catchall:fj()}),a.strict=()=>a.clone({...a._zod.def,catchall:new fk({type:"never",...ch(void 0)})}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!cc(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let d=b7(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return b6(this,"shape",c),c},checks:[]});return cg(a,d)})(a,b),a.safeExtend=b=>(function(a,b){if(!cc(b))throw Error("Invalid input to safeExtend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return b6(this,"shape",c),c},checks:a._zod.def.checks};return cg(a,c)})(a,b),a.merge=b=>(function(a,b){let c=b7(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return b6(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return cg(a,c)})(a,b),a.pick=b=>(function(a,b){let c=a._zod.def,d=b7(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return b6(this,"shape",a),a},checks:[]});return cg(a,d)})(a,b),a.omit=b=>(function(a,b){let c=a._zod.def,d=b7(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return b6(this,"shape",d),d},checks:[]});return cg(a,d)})(a,b),a.partial=(...b)=>(function(a,b,c){let d=b7(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return b6(this,"shape",e),e},checks:[]});return cg(b,d)})(fz,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=b7(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return b6(this,"shape",e),e},checks:[]});return cg(b,d)})(fF,a,b[0])});function fq(a,b){return new fp({type:"object",shape:a??{},...ch(b)})}let fr=bX("ZodUnion",(a,b)=>{dY.init(a,b),eO.init(a,b),a.options=b.options});function fs(a,b){return new fr({type:"union",options:a,...ch(b)})}let ft=bX("ZodIntersection",(a,b)=>{dZ.init(a,b),eO.init(a,b)}),fu=bX("ZodRecord",(a,b)=>{d_.init(a,b),eO.init(a,b),a.keyType=b.keyType,a.valueType=b.valueType});function fv(a,b,c){return new fu({type:"record",keyType:a,valueType:b,...ch(c)})}let fw=bX("ZodEnum",(a,b)=>{d0.init(a,b),eO.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new fw({...b,checks:[],...ch(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new fw({...b,checks:[],...ch(d),entries:e})}});function fx(a,b){return new fw({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...ch(b)})}let fy=bX("ZodTransform",(a,b)=>{d1.init(a,b),eO.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new bZ(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(cp(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(cp(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),fz=bX("ZodOptional",(a,b)=>{d3.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType});function fA(a){return new fz({type:"optional",innerType:a})}let fB=bX("ZodNullable",(a,b)=>{d4.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType});function fC(a){return new fB({type:"nullable",innerType:a})}let fD=bX("ZodDefault",(a,b)=>{d5.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),fE=bX("ZodPrefault",(a,b)=>{d7.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType}),fF=bX("ZodNonOptional",(a,b)=>{d8.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType}),fG=bX("ZodCatch",(a,b)=>{ea.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),fH=bX("ZodPipe",(a,b)=>{eb.init(a,b),eO.init(a,b),a.in=b.in,a.out=b.out});function fI(a,b){return new fH({type:"pipe",in:a,out:b})}let fJ=bX("ZodReadonly",(a,b)=>{ed.init(a,b),eO.init(a,b),a.unwrap=()=>a._zod.def.innerType}),fK=bX("ZodCustom",(a,b)=>{ef.init(a,b),eO.init(a,b)});function fL(a,b){let c=ch(b);return c.abort??(c.abort=!0),new fK({type:"custom",check:"custom",fn:a??(()=>!0),...c})}function fM(a){return new eQ({type:"string",coerce:!0,...ch(a)})}function fN(a){return new fe({type:"boolean",coerce:!0,...ch(a)})}i||(i={}),b_({localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return c=>{switch(c.code){case"invalid_type":return`Invalid input: expected ${c.expected}, received ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${ci(c.values[0])}`;return`Invalid option: expected one of ${b0(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Too big: expected ${c.origin??"value"} to have ${b}${c.maximum.toString()} ${d.unit??"elements"}`;return`Too big: expected ${c.origin??"value"} to be ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Too small: expected ${c.origin} to have ${b}${c.minimum.toString()} ${d.unit}`;return`Too small: expected ${c.origin} to be ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Invalid string: must start with "${c.prefix}"`;if("ends_with"===c.format)return`Invalid string: must end with "${c.suffix}"`;if("includes"===c.format)return`Invalid string: must include "${c.includes}"`;if("regex"===c.format)return`Invalid string: must match pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${c.divisor}`;case"unrecognized_keys":return`Unrecognized key${c.keys.length>1?"s":""}: ${b0(c.keys,", ")}`;case"invalid_key":return`Invalid key in ${c.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${c.origin}`}}})()});let fO=(a,b="ms")=>new Date(Date.now()+("sec"===b?1e3*a:a));class fP extends Error{constructor(a,b){super(a),this.name="BetterAuthError",this.message=a,this.cause=b,this.stack=""}}let fQ=Object.create(null),fR=a=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(a?fQ:globalThis),fS=new Proxy(fQ,{get:(a,b)=>fR()[b]??fQ[b],has:(a,b)=>b in fR()||b in fQ,set:(a,b,c)=>(fR(!0)[b]=c,!0),deleteProperty(a,b){if(!b)return!1;let c=fR(!0);return delete c[b],!0},ownKeys:()=>Object.keys(fR(!0))}),fT="undefined"!=typeof process&&process.env&&"production"||"",fU="production"===fT,fV="dev"===fT||"development"===fT,fW=()=>"test"===fT||function(a){return!!a&&"false"!==a}(fS.TEST);function fX(a,b){return"undefined"!=typeof process&&process.env?process.env[a]??b:"undefined"!=typeof Deno?Deno.env.get(a)??b:"undefined"!=typeof Bun?Bun.env[a]??b:b}function fY(a,b=!0){let c=fX(a);return c?"0"!==c&&"false"!==c.toLowerCase()&&""!==c:b}let fZ={get BETTER_AUTH_TELEMETRY_ENDPOINT(){return fX("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}};function f$(a){return a?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function f_(a,b,c){let d="",e=0,f=0;for(let c of a)for(e=e<<8|c,f+=8;f>=6;)f-=6,d+=b[e>>f&63];if(f>0&&(d+=b[e<<6-f&63]),c){let a=(4-d.length%4)%4;d+="=".repeat(a)}return d}function f0(a,b){let c=new Map;for(let a=0;a<b.length;a++)c.set(b[a],a);let d=[],e=0,f=0;for(let b of a){if("="===b)break;let a=c.get(b);if(void 0===a)throw Error(`Invalid Base64 character: ${b}`);e=e<<6|a,(f+=6)>=8&&(f-=8,d.push(e>>f&255))}return Uint8Array.from(d)}let f1={encode(a,b={}){let c=f$(!1);return f_("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){"string"!=typeof a&&(a=new TextDecoder().decode(a));let b=f$(a.includes("-")||a.includes("_"));return f0(a,b)}},f2={encode(a,b={}){let c=f$(!0);return f_("string"==typeof a?new TextEncoder().encode(a):new Uint8Array(a),c,b.padding??!0)},decode(a){let b=f$(a.includes("-")||a.includes("_"));return f0(a,b)}},f3={encode:a=>{if("string"==typeof a&&(a=new TextEncoder().encode(a)),0===a.byteLength)return"";let b=new Uint8Array(a),c="";for(let a of b)c+=a.toString(16).padStart(2,"0");return c},decode:a=>{if(!a)return"";if("string"==typeof a){if(a.length%2!=0||!RegExp("^[0123456789abcdef]+$").test(a))throw Error("Invalid hexadecimal string");let b=new Uint8Array(a.length/2);for(let c=0;c<a.length;c+=2)b[c/2]=parseInt(a.slice(c,c+2),16);return new TextDecoder().decode(b)}return new TextDecoder().decode(a)}},f4=(a="SHA-256",b="none")=>{let c={importKey:async(b,c)=>l().importKey("raw","string"==typeof b?new TextEncoder().encode(b):b,{name:"HMAC",hash:{name:a}},!1,[c]),sign:async(a,d)=>{"string"==typeof a&&(a=await c.importKey(a,"sign"));let e=await l().sign("HMAC",a,"string"==typeof d?new TextEncoder().encode(d):d);return"hex"===b?f3.encode(e):"base64"===b||"base64url"===b||"base64urlnopad"===b?f2.encode(e,{padding:"base64urlnopad"!==b}):e},verify:async(a,d,e)=>("string"==typeof a&&(a=await c.importKey(a,"verify")),"hex"===b&&(e=f3.decode(e)),("base64"===b||"base64url"===b||"base64urlnopad"===b)&&(e=await f1.decode(e)),l().verify("HMAC",a,"string"==typeof e?new TextEncoder().encode(e):e,"string"==typeof d?new TextEncoder().encode(d):d))};return c},f5={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},f6=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),f7=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],f8={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",fg:{red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m"},bg:{black:"\x1b[40m"}},f9=["info","success","warn","error","debug"];function ga(a,b){return f9.indexOf(b)<=f9.indexOf(a)}let gb={info:f8.fg.blue,success:f8.fg.green,warn:f8.fg.yellow,error:f8.fg.red,debug:f8.fg.magenta},gc=a=>{let b=a?.disabled!==!0,c=a?.level??"error",d=a?.disableColors!==void 0?!a.disableColors:1!==function(){if(void 0!==fX("FORCE_COLOR"))switch(fX("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==fX("NODE_DISABLE_COLORS")&&""!==fX("NODE_DISABLE_COLORS")||void 0!==fX("NO_COLOR")&&""!==fX("NO_COLOR")||"dumb"===fX("TERM"))return 1;if("undefined"!=typeof process&&"win32"===process.platform||fX("TMUX"))return 24;if("TF_BUILD"in fS&&"AGENT_NAME"in fS)return 4;if("CI"in fS){for(let{0:a,1:b}of f6)if(a in fS)return b;return"codeship"===fX("CI_NAME")?8:1}if("TEAMCITY_VERSION"in fS)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(fX("TEAMCITY_VERSION"))?4:1;switch(fX("TERM_PROGRAM")){case"iTerm.app":if(!fX("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(fX("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===fX("COLORTERM")||"24bit"===fX("COLORTERM"))return 24;if(fX("TERM")){if(null!==/truecolor/.exec(fX("TERM")))return 24;if(null!==/^xterm-256/.exec(fX("TERM")))return 8;let a=fX("TERM").toLowerCase();if(f5[a])return f5[a];if(f7.some(b=>null!==b.exec(a)))return 4}return fX("COLORTERM")?4:1}();return{...Object.fromEntries(f9.map(e=>[e,(...[f,...g])=>((e,f,g=[])=>{if(!b||!ga(c,e))return;let h=((a,b,c)=>{let d=new Date().toISOString();return c?`${f8.dim}${d}${f8.reset} ${gb[a]}${a.toUpperCase()}${f8.reset} ${f8.bright}[Better Auth]:${f8.reset} ${b}`:`${d} ${a.toUpperCase()} [Better Auth]: ${b}`})(e,f,d);if(!a||"function"!=typeof a.log)return void("error"===e?console.error(h,...g):"warn"===e?console.warn(h,...g):console.log(h,...g));a.log("success"===e?"info":e,f,...g)})(e,f,g)])),get level(){return c}}},gd=gc();function ge(a){try{if("string"!=typeof a)return a;return JSON.parse(a,function(a,b){if("string"==typeof b&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(b)){let a=new Date(b);if(!isNaN(a.getTime()))return a}return b})}catch(a){return gd.error("Error parsing JSON",{error:a}),null}}function gf(a,b="/api/auth"){if(function(a){try{let b=new URL(a).pathname.replace(/\/+$/,"")||"/";return"/"!==b}catch(b){throw new fP(`Invalid base URL: ${a}. Please provide a valid base URL.`)}}(a))return a;let c=a.replace(/\/+$/,"");return b&&"/"!==b?(b=b.startsWith("/")?b:`/${b}`,`${c}${b}`):c}function gg(a,b,c,d){if(a)return gf(a,b);if(!1!==d){let a=fS.BETTER_AUTH_URL||fS.NEXT_PUBLIC_BETTER_AUTH_URL||fS.PUBLIC_BETTER_AUTH_URL||fS.NUXT_PUBLIC_BETTER_AUTH_URL||fS.NUXT_PUBLIC_AUTH_URL||("/"!==fS.BASE_URL?fS.BASE_URL:void 0);if(a)return gf(a,b)}let e=c?.headers.get("x-forwarded-host"),f=c?.headers.get("x-forwarded-proto");if(e&&f)return gf(`${f}://${e}`,b);if(c){let a=gh(c.url);if(!a)throw new fP("Could not get origin from request. Please provide a valid base URL.");return gf(a,b)}if("undefined"!=typeof window&&window.location)return gf(window.location.origin,b)}function gh(a){try{return new URL(a).origin}catch(a){return null}}function gi(a){try{return new URL(a).protocol}catch(a){return null}}function gj(a){try{return new URL(a).host}catch(b){return a}}let gk=new Map,gl={decode:(a,b="utf-8")=>(gk.has(b)||gk.set(b,new TextDecoder(b)),gk.get(b).decode(a)),encode:new TextEncoder().encode};function gm(a,b){if("string"==typeof a){var c=a;if("string"!=typeof c||0===c.length||c.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(c)}`);let b=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(c);if(!b?.groups)return NaN;let{value:d,unit:e="ms"}=b.groups,f=parseFloat(d),g=e.toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*f;case"months":case"month":case"mo":return 26298e5*f;case"weeks":case"week":case"w":return 6048e5*f;case"days":case"day":case"d":return 864e5*f;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*f;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*f;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:throw Error(`Unknown unit "${g}" provided to ms.parse(). value=${JSON.stringify(c)}`)}}if("number"==typeof a){var d=a;if("number"!=typeof d||!Number.isFinite(d))throw Error("Value provided to ms.format() must be of type number.");let b=Math.abs(d);return b>=315576e5?`${Math.round(d/315576e5)}y`:b>=26298e5?`${Math.round(d/26298e5)}mo`:b>=6048e5?`${Math.round(d/6048e5)}w`:b>=864e5?`${Math.round(d/864e5)}d`:b>=36e5?`${Math.round(d/36e5)}h`:b>=6e4?`${Math.round(d/6e4)}m`:b>=1e3?`${Math.round(d/1e3)}s`:`${d}ms`}throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(a)}`)}function gn(a){let b=(a.advanced?.useSecureCookies!==void 0?a.advanced?.useSecureCookies:void 0!==a.baseURL?!!a.baseURL.startsWith("https://"):fU)?"__Secure-":"",c=!!a.advanced?.crossSubDomainCookies?.enabled,d=c?a.advanced?.crossSubDomainCookies?.domain||(a.baseURL?new URL(a.baseURL).hostname:void 0):void 0;if(c&&!d)throw new fP("baseURL is required when crossSubdomainCookies are enabled");return function(e,f={}){let g=a.advanced?.cookiePrefix||"better-auth",h=a.advanced?.cookies?.[e]?.name||`${g}.${e}`,i=a.advanced?.cookies?.[e]?.attributes;return{name:`${b}${h}`,attributes:{secure:!!b,sameSite:"lax",path:"/",httpOnly:!0,...c?{domain:d}:{},...a.advanced?.defaultCookieAttributes,...f,...i}}}}async function go(a,b,c){if(a.context.options.session?.cookieCache?.enabled){let d={session:Object.entries(b.session).reduce((b,[c,d])=>{let e=a.context.options.session?.additionalFields?.[c];return e&&!1===e.returned||(b[c]=d),b},{}),user:b.user},e={...a.context.authCookies.sessionData.options,maxAge:c?void 0:a.context.authCookies.sessionData.options.maxAge},f=fO(e.maxAge||60,"sec").getTime(),g=f2.encode(JSON.stringify({session:d,expiresAt:f,signature:await f4("SHA-256","base64urlnopad").sign(a.context.secret,JSON.stringify({...d,expiresAt:f}))}),{padding:!1});if(g.length>4093)return void a.context?.logger?.error(`Session data exceeds cookie size limit (${g.length} bytes > 4093 bytes). Consider reducing session data size or disabling cookie cache. Session will not be cached in cookie.`);a.setCookie(a.context.authCookies.sessionData.name,g,e)}}async function gp(a,b,c,d){let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);c=void 0!==c?c:!!e;let f=a.context.authCookies.sessionToken.options,g=c?void 0:a.context.sessionConfig.expiresIn;await a.setSignedCookie(a.context.authCookies.sessionToken.name,b.session.token,a.context.secret,{...f,maxAge:g,...d}),c&&await a.setSignedCookie(a.context.authCookies.dontRememberToken.name,"true",a.context.secret,a.context.authCookies.dontRememberToken.options),await go(a,b,c),a.context.setNewSession(b),a.context.options.secondaryStorage&&await a.context.secondaryStorage?.set(b.session.token,JSON.stringify({user:b.user,session:b.session}),Math.floor((new Date(b.session.expiresAt).getTime()-Date.now())/1e3))}function gq(a,b){a.setCookie(a.context.authCookies.sessionToken.name,"",{...a.context.authCookies.sessionToken.options,maxAge:0}),a.setCookie(a.context.authCookies.sessionData.name,"",{...a.context.authCookies.sessionData.options,maxAge:0}),b||a.setCookie(a.context.authCookies.dontRememberToken.name,"",{...a.context.authCookies.dontRememberToken.options,maxAge:0})}let gr=I(async()=>({})),gs=I.create({use:[gr,I(async()=>({}))]}),gt=J.create({use:[gr]}),gu={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."},gv=fA(fq({disableCookieCache:fN().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:fN().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),gw=()=>gt("/get-session",{method:"GET",query:gv,requireHeaders:!0,metadata:{openapi:{description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async a=>{try{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(!b)return null;let c=a.getCookie(a.context.authCookies.sessionData.name),d=c?ge(gl.decode(f2.decode(c))):null;if(d&&!await f4("SHA-256","base64urlnopad").verify(a.context.secret,JSON.stringify({...d.session,expiresAt:d.expiresAt}),d.signature)){let b=a.context.authCookies.sessionData.name;return a.setCookie(b,"",{maxAge:0}),a.json(null)}let e=await a.getSignedCookie(a.context.authCookies.dontRememberToken.name,a.context.secret);if(d?.session&&a.context.options.session?.cookieCache?.enabled&&!a.query?.disableCookieCache){let b=d.session;if(!(d.expiresAt<Date.now()||b.session.expiresAt<new Date))return a.context.session=b,a.json(b);{let b=a.context.authCookies.sessionData.name;a.setCookie(b,"",{maxAge:0})}}let f=await a.context.internalAdapter.findSession(b);if(a.context.session=f,!f||f.session.expiresAt<new Date)return gq(a),f&&await a.context.internalAdapter.deleteSession(f.session.token),a.json(null);if(e||a.query?.disableRefresh)return a.json(f);let g=a.context.sessionConfig.expiresIn,h=a.context.sessionConfig.updateAge;if(f.session.expiresAt.valueOf()-1e3*g+1e3*h<=Date.now()&&(!a.query?.disableRefresh||!a.context.options.session?.disableSessionRefresh)){let b=await a.context.internalAdapter.updateSession(f.session.token,{expiresAt:fO(a.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!b)return gq(a),a.json(null,{status:401});let c=(b.expiresAt.valueOf()-Date.now())/1e3;return await gp(a,{session:b,user:f.user},!1,{maxAge:c}),a.json({session:b,user:f.user})}return await go(a,f,!!e),a.json(f)}catch(b){throw a.context.logger.error("INTERNAL_SERVER_ERROR",b),new t("INTERNAL_SERVER_ERROR",{message:gu.FAILED_TO_GET_SESSION})}}),gx=async(a,b)=>{if(a.context.session)return a.context.session;let c=await gw()({...a,asResponse:!1,headers:a.headers,returnHeaders:!1,query:{...b,...a.query}}).catch(a=>null);return a.context.session=c,c},gy=gs(async a=>{let b=await gx(a);if(!b?.session)throw new t("UNAUTHORIZED");return{session:b}}),gz=gs(async a=>{let b=await gx(a,{disableCookieCache:!0});if(!b?.session)throw new t("UNAUTHORIZED");return{session:b}});gs(async a=>{let b=await gx(a);if(!b?.session&&(a.request||a.headers))throw new t("UNAUTHORIZED");return{session:b}});let gA=gs(async a=>{let b=await gx(a);if(!b?.session)throw new t("UNAUTHORIZED");if(0===a.context.sessionConfig.freshAge)return{session:b};let c=a.context.sessionConfig.freshAge,d=b.session.updatedAt?.valueOf()||b.session.createdAt.valueOf();if(!(Date.now()-d<1e3*c))throw new t("FORBIDDEN",{message:"Session is not fresh"});return{session:b}}),gB=gt("/revoke-session",{method:"POST",body:fq({token:eR().meta({description:"The token to revoke"})}),use:[gz],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.body.token,c=await a.context.internalAdapter.findSession(b);if(!c)throw new t("BAD_REQUEST",{message:"Session not found"});if(c.session.userId!==a.context.session.user.id)throw new t("UNAUTHORIZED");try{await a.context.internalAdapter.deleteSession(b)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new t("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),gC=gt("/revoke-sessions",{method:"POST",use:[gz],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{try{await a.context.internalAdapter.deleteSessions(a.context.session.user.id)}catch(b){throw a.context.logger.error(b&&"object"==typeof b&&"name"in b?b.name:"",b),new t("INTERNAL_SERVER_ERROR")}return a.json({status:!0})}),gD=gt("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[gz],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async a=>{let b=a.context.session;if(!b.user)throw new t("UNAUTHORIZED");let c=(await a.context.internalAdapter.listSessions(b.user.id)).filter(a=>a.expiresAt>new Date).filter(b=>b.token!==a.context.session.session.token);return await Promise.all(c.map(b=>a.context.internalAdapter.deleteSession(b.token))),a.json({status:!0})});function gE(a,b){return{digest:async c=>{let d=new TextEncoder,e="string"==typeof c?d.encode(c):c,f=await l().digest(a,e);return"hex"===b?Array.from(new Uint8Array(f)).map(a=>a.toString(16).padStart(2,"0")).join(""):"base64"===b||"base64url"===b||"base64urlnopad"===b?b.includes("url")?f2.encode(f,{padding:"base64urlnopad"!==b}):f1.encode(f):f}}}function gF(a){if("boolean"!=typeof a)throw Error(`boolean expected, not ${a}`)}function gG(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function gH(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function gI(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function gJ(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function gK(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}let gL=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],gM="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,gN=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0")),gO={_0:48,_9:57,A:65,F:70,a:97,f:102};function gP(a){return a>=gO._0&&a<=gO._9?a-gO._0:a>=gO.A&&a<=gO.F?a-(gO.A-10):a>=gO.a&&a<=gO.f?a-(gO.a-10):void 0}function gQ(a,b,c=!0){if(void 0===b)return new Uint8Array(a);if(b.length!==a)throw Error('"output" expected Uint8Array of length '+a+", got: "+b.length);if(c&&b.byteOffset%4!=0)throw Error("invalid output, must be aligned");return b}function gR(a){return Uint8Array.from(a)}function gS(a=32){let b="object"==typeof globalThis?globalThis.crypto:null;if("function"!=typeof b?.getRandomValues)throw Error("crypto.getRandomValues must be defined");return b.getRandomValues(new Uint8Array(a))}function gT(a,b=gS){let{nonceLength:c}=a;gG(c);let d=(a,b)=>{let c=function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];gH(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}(a,b);return b.fill(0),c};return(e,...f)=>({encrypt(g){gH(g);let h=b(c),i=a(e,h,...f).encrypt(g);return i instanceof Promise?i.then(a=>d(h,a)):d(h,i)},decrypt(b){gH(b);let d=b.subarray(0,c),g=b.subarray(c);return a(e,d,...f).decrypt(g)}})}let gU=a=>Uint8Array.from(a.split(""),a=>a.charCodeAt(0)),gV=gU("expand 16-byte k"),gW=gU("expand 32-byte k"),gX=gJ(gV),gY=gJ(gW);function gZ(a,b){return a<<b|a>>>32-b}function g$(a){return a.byteOffset%4==0}let g_=0x100000000-1,g0=Uint32Array.of();function g1(a,b){let{allowShortKeys:c,extendNonceFn:d,counterLength:e,counterRight:f,rounds:g}=function(a,b){if(null==b||"object"!=typeof b)throw Error("options must be defined");return Object.assign(a,b)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},b);if("function"!=typeof a)throw Error("core must be a function");return gG(e),gG(g),gF(f),gF(c),(b,h,i,j,k=0)=>{let l,m;gH(b,void 0,"key"),gH(h,void 0,"nonce"),gH(i,void 0,"data");let n=i.length;if(void 0===j&&(j=new Uint8Array(n)),gH(j,void 0,"output"),gG(k),k<0||k>=g_)throw Error("arx: counter overflow");if(j.length<n)throw Error(`arx: output (${j.length}) is shorter than data (${n})`);let o=[],p=b.length;if(32===p)o.push(l=gR(b)),m=gY;else if(16===p&&c)(l=new Uint8Array(32)).set(b),l.set(b,16),m=gX,o.push(l);else throw gH(b,32,"arx key"),Error("invalid key size");g$(h)||o.push(h=gR(h));let q=gJ(l);if(d){if(24!==h.length)throw Error("arx: extended nonce must be 24 bytes");d(m,q,gJ(h.subarray(0,16)),q),h=h.subarray(16)}let r=16-e;if(r!==h.length)throw Error(`arx: nonce must be ${r} or 16 bytes`);if(12!==r){let a=new Uint8Array(12);a.set(h,f?0:12-h.length),h=a,o.push(h)}return!function(a,b,c,d,e,f,g,h){let i=e.length,j=new Uint8Array(64),k=gJ(j),l=g$(e)&&g$(f),m=l?gJ(e):g0,n=l?gJ(f):g0;for(let o=0;o<i;g++){if(a(b,c,d,k,g,h),g>=g_)throw Error("arx: counter overflow");let p=Math.min(64,i-o);if(l&&64===p){let a=o/4;if(o%4!=0)throw Error("arx: invalid block position");for(let b=0,c;b<16;b++)n[c=a+b]=m[c]^k[b];o+=64;continue}for(let a=0,b;a<p;a++)f[b=o+a]=e[b]^j[a];o+=p}}(a,m,q,gJ(h),i,j,k,g),gK(...o),j}}function g2(a,b){return 255&a[b++]|(255&a[b++])<<8}class g3{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(a){let b=g2(a=gR(gH(a,32,"key")),0),c=g2(a,2),d=g2(a,4),e=g2(a,6),f=g2(a,8),g=g2(a,10),h=g2(a,12),i=g2(a,14);this.r[0]=8191&b,this.r[1]=(b>>>13|c<<3)&8191,this.r[2]=(c>>>10|d<<6)&7939,this.r[3]=(d>>>7|e<<9)&8191,this.r[4]=(e>>>4|f<<12)&255,this.r[5]=f>>>1&8190,this.r[6]=(f>>>14|g<<2)&8191,this.r[7]=(g>>>11|h<<5)&8065,this.r[8]=(h>>>8|i<<8)&8191,this.r[9]=i>>>5&127;for(let b=0;b<8;b++)this.pad[b]=g2(a,16+2*b)}process(a,b,c=!1){let{h:d,r:e}=this,f=e[0],g=e[1],h=e[2],i=e[3],j=e[4],k=e[5],l=e[6],m=e[7],n=e[8],o=e[9],p=g2(a,b+0),q=g2(a,b+2),r=g2(a,b+4),s=g2(a,b+6),t=g2(a,b+8),u=g2(a,b+10),v=g2(a,b+12),w=g2(a,b+14),x=d[0]+(8191&p),y=d[1]+((p>>>13|q<<3)&8191),z=d[2]+((q>>>10|r<<6)&8191),A=d[3]+((r>>>7|s<<9)&8191),B=d[4]+((s>>>4|t<<12)&8191),C=d[5]+(t>>>1&8191),D=d[6]+((t>>>14|u<<2)&8191),E=d[7]+((u>>>11|v<<5)&8191),F=d[8]+((v>>>8|w<<8)&8191),G=d[9]+(w>>>5|2048*!c),H=0,I=0+x*f+5*o*y+5*n*z+5*m*A+5*l*B;H=I>>>13,I&=8191,I+=5*k*C+5*j*D+5*i*E+5*h*F+5*g*G,H+=I>>>13,I&=8191;let J=H+x*g+y*f+5*o*z+5*n*A+5*m*B;H=J>>>13,J&=8191,J+=5*l*C+5*k*D+5*j*E+5*i*F+5*h*G,H+=J>>>13,J&=8191;let K=H+x*h+y*g+z*f+5*o*A+5*n*B;H=K>>>13,K&=8191,K+=5*m*C+5*l*D+5*k*E+5*j*F+5*i*G,H+=K>>>13,K&=8191;let L=H+x*i+y*h+z*g+A*f+5*o*B;H=L>>>13,L&=8191,L+=5*n*C+5*m*D+5*l*E+5*k*F+5*j*G,H+=L>>>13,L&=8191;let M=H+x*j+y*i+z*h+A*g+B*f;H=M>>>13,M&=8191,M+=5*o*C+5*n*D+5*m*E+5*l*F+5*k*G,H+=M>>>13,M&=8191;let N=H+x*k+y*j+z*i+A*h+B*g;H=N>>>13,N&=8191,N+=C*f+5*o*D+5*n*E+5*m*F+5*l*G,H+=N>>>13,N&=8191;let O=H+x*l+y*k+z*j+A*i+B*h;H=O>>>13,O&=8191,O+=C*g+D*f+5*o*E+5*n*F+5*m*G,H+=O>>>13,O&=8191;let P=H+x*m+y*l+z*k+A*j+B*i;H=P>>>13,P&=8191,P+=C*h+D*g+E*f+5*o*F+5*n*G,H+=P>>>13,P&=8191;let Q=H+x*n+y*m+z*l+A*k+B*j;H=Q>>>13,Q&=8191,Q+=C*i+D*h+E*g+F*f+5*o*G,H+=Q>>>13,Q&=8191;let R=H+x*o+y*n+z*m+A*l+B*k;H=R>>>13,R&=8191,R+=C*j+D*i+E*h+F*g+G*f,H+=R>>>13,R&=8191,I=8191&(H=(H=(H<<2)+H|0)+I|0),H>>>=13,J+=H,d[0]=I,d[1]=J,d[2]=K,d[3]=L,d[4]=M,d[5]=N,d[6]=O,d[7]=P,d[8]=Q,d[9]=R}finalize(){let{h:a,pad:b}=this,c=new Uint16Array(10),d=a[1]>>>13;a[1]&=8191;for(let b=2;b<10;b++)a[b]+=d,d=a[b]>>>13,a[b]&=8191;a[0]+=5*d,d=a[0]>>>13,a[0]&=8191,a[1]+=d,d=a[1]>>>13,a[1]&=8191,a[2]+=d,c[0]=a[0]+5,d=c[0]>>>13,c[0]&=8191;for(let b=1;b<10;b++)c[b]=a[b]+d,d=c[b]>>>13,c[b]&=8191;c[9]-=8192;let e=(1^d)-1;for(let a=0;a<10;a++)c[a]&=e;e=~e;for(let b=0;b<10;b++)a[b]=a[b]&e|c[b];a[0]=(a[0]|a[1]<<13)&65535,a[1]=(a[1]>>>3|a[2]<<10)&65535,a[2]=(a[2]>>>6|a[3]<<7)&65535,a[3]=(a[3]>>>9|a[4]<<4)&65535,a[4]=(a[4]>>>12|a[5]<<1|a[6]<<14)&65535,a[5]=(a[6]>>>2|a[7]<<11)&65535,a[6]=(a[7]>>>5|a[8]<<8)&65535,a[7]=(a[8]>>>8|a[9]<<5)&65535;let f=a[0]+b[0];a[0]=65535&f;for(let c=1;c<8;c++)f=(a[c]+b[c]|0)+(f>>>16)|0,a[c]=65535&f;gK(c)}update(a){gI(this),gH(a);let{buffer:b,blockLen:c}=this,d=(a=gR(a)).length;for(let e=0;e<d;){let f=Math.min(c-this.pos,d-e);if(f===c){for(;c<=d-e;e+=c)this.process(a,e);continue}b.set(a.subarray(e,e+f),this.pos),this.pos+=f,e+=f,this.pos===c&&(this.process(b,0,!1),this.pos=0)}return this}destroy(){gK(this.h,this.r,this.buffer,this.pad)}digestInto(a){gI(this);gH(a,void 0,"output");let b=this.outputLen;if(a.length<b)throw Error("digestInto() expects output buffer of length at least "+b);this.finished=!0;let{buffer:c,h:d}=this,{pos:e}=this;if(e){for(c[e++]=1;e<16;e++)c[e]=0;this.process(c,0,!0)}this.finalize();let f=0;for(let b=0;b<8;b++)a[f++]=d[b]>>>0,a[f++]=d[b]>>>8;return a}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}}let g4=function(a){let b=(b,c)=>a(c).update(b).digest(),c=a(new Uint8Array(32));return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=b=>a(b),b}(a=>new g3(a));function g5(a,b,c,d,e,f=20){let g=a[0],h=a[1],i=a[2],j=a[3],k=b[0],l=b[1],m=b[2],n=b[3],o=b[4],p=b[5],q=b[6],r=b[7],s=c[0],t=c[1],u=c[2],v=g,w=h,x=i,y=j,z=k,A=l,B=m,C=n,D=o,E=p,F=q,G=r,H=e,I=s,J=t,K=u;for(let a=0;a<f;a+=2)D=D+(H=gZ(H^(v=v+z|0),16))|0,v=v+(z=gZ(z^D,12))|0,D=D+(H=gZ(H^v,8))|0,z=gZ(z^D,7),E=E+(I=gZ(I^(w=w+A|0),16))|0,w=w+(A=gZ(A^E,12))|0,E=E+(I=gZ(I^w,8))|0,A=gZ(A^E,7),F=F+(J=gZ(J^(x=x+B|0),16))|0,x=x+(B=gZ(B^F,12))|0,F=F+(J=gZ(J^x,8))|0,B=gZ(B^F,7),G=G+(K=gZ(K^(y=y+C|0),16))|0,y=y+(C=gZ(C^G,12))|0,G=G+(K=gZ(K^y,8))|0,C=gZ(C^G,7),F=F+(K=gZ(K^(v=v+A|0),16))|0,v=v+(A=gZ(A^F,12))|0,F=F+(K=gZ(K^v,8))|0,A=gZ(A^F,7),G=G+(H=gZ(H^(w=w+B|0),16))|0,w=w+(B=gZ(B^G,12))|0,G=G+(H=gZ(H^w,8))|0,B=gZ(B^G,7),D=D+(I=gZ(I^(x=x+C|0),16))|0,x=x+(C=gZ(C^D,12))|0,D=D+(I=gZ(I^x,8))|0,C=gZ(C^D,7),E=E+(J=gZ(J^(y=y+z|0),16))|0,y=y+(z=gZ(z^E,12))|0,E=E+(J=gZ(J^y,8))|0,z=gZ(z^E,7);let L=0;d[L++]=g+v|0,d[L++]=h+w|0,d[L++]=i+x|0,d[L++]=j+y|0,d[L++]=k+z|0,d[L++]=l+A|0,d[L++]=m+B|0,d[L++]=n+C|0,d[L++]=o+D|0,d[L++]=p+E|0,d[L++]=q+F|0,d[L++]=r+G|0,d[L++]=e+H|0,d[L++]=s+I|0,d[L++]=t+J|0,d[L++]=u+K|0}let g6=g1(g5,{counterRight:!1,counterLength:4,allowShortKeys:!1}),g7=g1(g5,{counterRight:!1,counterLength:8,extendNonceFn:function(a,b,c,d){let e=a[0],f=a[1],g=a[2],h=a[3],i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=c[0],r=c[1],s=c[2],t=c[3];for(let a=0;a<20;a+=2)m=m+(q=gZ(q^(e=e+i|0),16))|0,e=e+(i=gZ(i^m,12))|0,m=m+(q=gZ(q^e,8))|0,i=gZ(i^m,7),n=n+(r=gZ(r^(f=f+j|0),16))|0,f=f+(j=gZ(j^n,12))|0,n=n+(r=gZ(r^f,8))|0,j=gZ(j^n,7),o=o+(s=gZ(s^(g=g+k|0),16))|0,g=g+(k=gZ(k^o,12))|0,o=o+(s=gZ(s^g,8))|0,k=gZ(k^o,7),p=p+(t=gZ(t^(h=h+l|0),16))|0,h=h+(l=gZ(l^p,12))|0,p=p+(t=gZ(t^h,8))|0,l=gZ(l^p,7),o=o+(t=gZ(t^(e=e+j|0),16))|0,e=e+(j=gZ(j^o,12))|0,o=o+(t=gZ(t^e,8))|0,j=gZ(j^o,7),p=p+(q=gZ(q^(f=f+k|0),16))|0,f=f+(k=gZ(k^p,12))|0,p=p+(q=gZ(q^f,8))|0,k=gZ(k^p,7),m=m+(r=gZ(r^(g=g+l|0),16))|0,g=g+(l=gZ(l^m,12))|0,m=m+(r=gZ(r^g,8))|0,l=gZ(l^m,7),n=n+(s=gZ(s^(h=h+i|0),16))|0,h=h+(i=gZ(i^n,12))|0,n=n+(s=gZ(s^h,8))|0,i=gZ(i^n,7);let u=0;d[u++]=e,d[u++]=f,d[u++]=g,d[u++]=h,d[u++]=q,d[u++]=r,d[u++]=s,d[u++]=t},allowShortKeys:!1}),g8=new Uint8Array(16),g9=(a,b)=>{a.update(b);let c=b.length%16;c&&a.update(g8.subarray(c))},ha=new Uint8Array(32);function hb(a,b,c,d,e){void 0!==e&&gH(e,void 0,"AAD");let f=a(b,c,ha),g=function(a,b,c){gF(c);let d=new Uint8Array(16),e=new DataView(d.buffer,d.byteOffset,d.byteLength);return e.setBigUint64(0,BigInt(b),c),e.setBigUint64(8,BigInt(a),c),d}(d.length,e?e.length:0,!0),h=g4.create(f);e&&g9(h,e),g9(h,d),h.update(g);let i=h.digest();return gK(f,g),i}let hc=a=>(b,c,d)=>({encrypt(e,f){let g=e.length;(f=gQ(g+16,f,!1)).set(e);let h=f.subarray(0,-16);a(b,c,h,h,1);let i=hb(a,b,c,h,d);return f.set(i,g),gK(i),f},decrypt(e,f){f=gQ(e.length-16,f,!1);let g=e.subarray(0,-16),h=e.subarray(-16),i=hb(a,b,c,g,d);if(!function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}(h,i))throw Error("invalid tag");return f.set(e.subarray(0,-16)),a(b,c,f,f,1),gK(i),f}});hc(g6);let hd=((a,b)=>{function c(d,...e){if(gH(d,void 0,"key"),!gL)throw Error("Non little-endian hardware is not yet supported");void 0!==a.nonceLength&&gH(e[0],a.varSizeNonce?void 0:a.nonceLength,"nonce");let f=a.tagLength;f&&void 0!==e[1]&&gH(e[1],void 0,"AAD");let g=b(d,...e),h=(a,b)=>{if(void 0!==b){if(2!==a)throw Error("cipher output not supported");gH(b,void 0,"output")}},i=!1;return{encrypt(a,b){if(i)throw Error("cannot encrypt() twice with same key + nonce");return i=!0,gH(a),h(g.encrypt.length,b),g.encrypt(a,b)},decrypt(a,b){if(gH(a),f&&a.length<f)throw Error('"ciphertext" expected length bigger than tagLength='+f);return h(g.decrypt.length,b),g.decrypt(a,b)}}}return Object.assign(c,a),c})({blockSize:64,nonceLength:24,tagLength:16},hc(g7)),he=new TextEncoder,hf=new TextDecoder;function hg(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function hh(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:hf.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=hf.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{var c=b;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(c);let a=atob(c),d=new Uint8Array(a.length);for(let b=0;b<a.length;b++)d[b]=a.charCodeAt(b);return d}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function hi(a){let b=a;return("string"==typeof b&&(b=he.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class hj extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class hk extends hj{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class hl extends hj{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class hm extends hj{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class hn extends hj{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class ho extends hj{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class hp extends hj{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class hq extends hj{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class hr extends hj{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(a="no applicable key found in the JSON Web Key Set",b){super(a,b)}}class hs extends hj{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class ht extends hj{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(a="request timed out",b){super(a,b)}}class hu extends hj{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}let hv=(a,b)=>{let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new hn(`alg ${a} is not supported either by JOSE or your javascript runtime`)}},hw=(a,b)=>{if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}};function hx(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function hy(a,b){return a.name===b}function hz(a){return parseInt(a.name.slice(4),10)}function hA(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}function hB(a,b,...c){return hA(`Key for the ${a} algorithm must be `,b,...c)}let hC=async(a,b,c)=>{if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(((a,...b)=>hA("Key must be ",a,...b))(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return!function(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if(!hy(a.algorithm,"HMAC"))throw hx("HMAC");let c=parseInt(b.slice(2),10);if(hz(a.algorithm.hash)!==c)throw hx(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!hy(a.algorithm,"RSASSA-PKCS1-v1_5"))throw hx("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(hz(a.algorithm.hash)!==c)throw hx(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!hy(a.algorithm,"RSA-PSS"))throw hx("RSA-PSS");let c=parseInt(b.slice(2),10);if(hz(a.algorithm.hash)!==c)throw hx(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!hy(a.algorithm,"Ed25519"))throw hx("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":if(!hy(a.algorithm,b))throw hx(b);break;case"ES256":case"ES384":case"ES512":{if(!hy(a.algorithm,"ECDSA"))throw hx("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw hx(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(c&&!a.usages.includes(c))throw TypeError(`CryptoKey does not support this operation, its usages must include ${c}.`)}(b,a,c),b},hD=async(a,b,c)=>{let d=await hC(a,b,"sign");return hw(a,d),new Uint8Array(await crypto.subtle.sign(hv(a,d.algorithm),d,c))},hE=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0};function hF(a){return a?.[Symbol.toStringTag]==="CryptoKey"}function hG(a){return a?.[Symbol.toStringTag]==="KeyObject"}let hH=a=>hF(a)||hG(a),hI=a=>{if(!function(a){return"object"==typeof a&&null!==a}(a)||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b};function hJ(a){return hI(a)&&"string"==typeof a.kty}let hK=a=>a?.[Symbol.toStringTag],hL=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0},hM=(a,b,c)=>{a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(a)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(a)?((a,b,c)=>{if(!(b instanceof Uint8Array)){if(hJ(b)){if(function(a){return"oct"===a.kty&&"string"==typeof a.k}(b)&&hL(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!hH(b))throw TypeError(hB(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${hK(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c):((a,b,c)=>{if(hJ(b))switch(c){case"decrypt":case"sign":if(function(a){return"oct"!==a.kty&&("AKP"===a.kty&&"string"==typeof a.priv||"string"==typeof a.d)}(b)&&hL(a,b,c))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(a){return"oct"!==a.kty&&void 0===a.d&&void 0===a.priv}(b)&&hL(a,b,c))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!hH(b))throw TypeError(hB(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${hK(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${hK(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${hK(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${hK(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${hK(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)},hN=(a,b,c,d,e)=>{let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new hn(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)},hO=async a=>{if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new hn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new hn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new hn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new hn('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new hn('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)},hP=async(a,b,c,e=!1)=>{let f=(d||=new WeakMap).get(a);if(f?.[c])return f[c];let g=await hO({...b,alg:c});return e&&Object.freeze(a),f?f[c]=g:d.set(a,{[c]:g}),g},hQ=async(a,b)=>{if(a instanceof Uint8Array||hF(a))return a;if(hG(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let c,e=(d||=new WeakMap).get(a);if(e?.[b])return e[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}c=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let d;switch(b){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:d},g,f?["encrypt"]:["decrypt"]);c=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(c=a.toCryptoKey({name:"ECDH",namedCurve:d},g,f?[]:["deriveBits"]))}if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");return e?e[b]=c:d.set(a,{[b]:c}),c})(a,b)}catch(a){if(a instanceof TypeError)throw a}let c=a.export({format:"jwk"});return hP(a,c,b)}if(hJ(a))return a.k?hh(a.k):hP(a,a,b,!0);throw Error("unreachable")};class hR{#N;#O;#P;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#N=a}setProtectedHeader(a){if(this.#O)throw TypeError("setProtectedHeader can only be called once");return this.#O=a,this}setUnprotectedHeader(a){if(this.#P)throw TypeError("setUnprotectedHeader can only be called once");return this.#P=a,this}async sign(a,b){let c;if(!this.#O&&!this.#P)throw new ho("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!hE(this.#O,this.#P))throw new ho("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let d={...this.#O,...this.#P},e=hN(ho,new Map([["b64",!0]]),b?.crit,this.#O,d),f=!0;if(e.has("b64")&&"boolean"!=typeof(f=this.#O.b64))throw new ho('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:g}=d;if("string"!=typeof g||!g)throw new ho('JWS "alg" (Algorithm) Header Parameter missing or invalid');hM(g,a,"sign");let h=this.#N;f&&(h=he.encode(hi(h)));let i=hg(c=this.#O?he.encode(hi(JSON.stringify(this.#O))):he.encode(""),he.encode("."),h),j=await hQ(a,g),k={signature:hi(await hD(g,j,i)),payload:""};return f&&(k.payload=hf.decode(h)),this.#P&&(k.header=this.#P),this.#O&&(k.protected=hf.decode(c)),k}}class hS{#Q;constructor(a){this.#Q=new hR(a)}setProtectedHeader(a){return this.#Q.setProtectedHeader(a),this}async sign(a,b){let c=await this.#Q.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}let hT=a=>Math.floor(a.getTime()/1e3),hU=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,hV=a=>{let b,c=hU.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b};function hW(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let hX=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;class hY{#N;constructor(a){if(!hI(a))throw TypeError("JWT Claims Set MUST be an object");this.#N=structuredClone(a)}data(){return he.encode(JSON.stringify(this.#N))}get iss(){return this.#N.iss}set iss(a){this.#N.iss=a}get sub(){return this.#N.sub}set sub(a){this.#N.sub=a}get aud(){return this.#N.aud}set aud(a){this.#N.aud=a}set jti(a){this.#N.jti=a}set nbf(a){"number"==typeof a?this.#N.nbf=hW("setNotBefore",a):a instanceof Date?this.#N.nbf=hW("setNotBefore",hT(a)):this.#N.nbf=hT(new Date)+hV(a)}set exp(a){"number"==typeof a?this.#N.exp=hW("setExpirationTime",a):a instanceof Date?this.#N.exp=hW("setExpirationTime",hT(a)):this.#N.exp=hT(new Date)+hV(a)}set iat(a){void 0===a?this.#N.iat=hT(new Date):a instanceof Date?this.#N.iat=hW("setIssuedAt",hT(a)):"string"==typeof a?this.#N.iat=hW("setIssuedAt",hT(new Date)+hV(a)):this.#N.iat=hW("setIssuedAt",a)}}class hZ{#O;#R;constructor(a={}){this.#R=new hY(a)}setIssuer(a){return this.#R.iss=a,this}setSubject(a){return this.#R.sub=a,this}setAudience(a){return this.#R.aud=a,this}setJti(a){return this.#R.jti=a,this}setNotBefore(a){return this.#R.nbf=a,this}setExpirationTime(a){return this.#R.exp=a,this}setIssuedAt(a){return this.#R.iat=a,this}setProtectedHeader(a){return this.#O=a,this}async sign(a,b){let c=new hS(this.#R.data());if(c.setProtectedHeader(this.#O),Array.isArray(this.#O?.crit)&&this.#O.crit.includes("b64")&&!1===this.#O.b64)throw new hp("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}function h$(a,b=""){if(!Number.isSafeInteger(a)||a<0){let c=b&&`"${b}" `;throw Error(`${c}expected integer >= 0, got ${a}`)}}function h_(a,b,c=""){let d=a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name,e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function h0(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash must wrapped by utils.createHasher");h$(a.outputLen),h$(a.blockLen)}function h1(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function h2(a){return new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4))}function h3(...a){for(let b=0;b<a.length;b++)a[b].fill(0)}function h4(a){return new DataView(a.buffer,a.byteOffset,a.byteLength)}function h5(a,b){return a<<32-b|a>>>b}function h6(a,b){return a<<b|a>>>32-b>>>0}let h7=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?a=>a:function(a){for(let c=0;c<a.length;c++){var b;a[c]=(b=a[c])<<24&0xff000000|b<<8&0xff0000|b>>>8&65280|b>>>24&255}return a},h8="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,h9={_0:48,_9:57,A:65,F:70,a:97,f:102};function ia(a){return a>=h9._0&&a<=h9._9?a-h9._0:a>=h9.A&&a<=h9.F?a-(h9.A-10):a>=h9.a&&a<=h9.f?a-(h9.a-10):void 0}let ib=async()=>{};async function ic(a,b,c){let d=Date.now();for(let e=0;e<a;e++){c(e);let a=Date.now()-d;a>=0&&a<b||(await ib(),d+=a)}}function id(a,b=""){if("string"==typeof a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}return h_(a,void 0,b)}function ie(a,b){if(void 0!==b&&"[object Object]"!==({}).toString.call(b))throw Error("options must be object or undefined");return Object.assign(a,b)}class ig{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(a,b){if(h0(a),h_(b,void 0,"key"),this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let c=this.blockLen,d=new Uint8Array(c);d.set(b.length>c?a.create().update(b).digest():b);for(let a=0;a<d.length;a++)d[a]^=54;this.iHash.update(d),this.oHash=a.create();for(let a=0;a<d.length;a++)d[a]^=106;this.oHash.update(d),h3(d)}update(a){return h1(this),this.iHash.update(a),this}digestInto(a){h1(this),h_(a,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||=Object.create(Object.getPrototypeOf(this),{});let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ih=(a,b,c)=>new ig(a,b).update(c).digest();function ii(a,b,c,d){var e;let f,{c:g,dkLen:h,DK:i,PRF:j,PRFSalt:k}=function(a,b,c,d){h0(a);let{c:e,dkLen:f,asyncTick:g}=ie({dkLen:32,asyncTick:10},d);if(h$(e,"c"),h$(f,"dkLen"),h$(g,"asyncTick"),e<1)throw Error("iterations (c) must be >= 1");let h=id(b,"password"),i=id(c,"salt"),j=new Uint8Array(f),k=ih.create(a,h),l=k._cloneInto().update(i);return{c:e,dkLen:f,asyncTick:g,DK:j,PRF:k,PRFSalt:l}}(a,b,c,d),l=new Uint8Array(4),m=h4(l),n=new Uint8Array(j.outputLen);for(let a=1,b=0;b<h;a++,b+=j.outputLen){let c=i.subarray(b,b+j.outputLen);m.setInt32(0,a,!1),(f=k._cloneInto(f)).update(l).digestInto(n),c.set(n.subarray(0,c.length));for(let a=1;a<g;a++){j._cloneInto(f).update(n).digestInto(n);for(let a=0;a<c.length;a++)c[a]^=n[a]}}return e=f,j.destroy(),k.destroy(),e&&e.destroy(),h3(n),i}ih.create=(a,b)=>new ig(a,b);class ij{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(a,b,c,d){this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.buffer=new Uint8Array(a),this.view=h4(this.buffer)}update(a){h1(this),h_(a);let{view:b,buffer:c,blockLen:d}=this,e=a.length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=h4(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){h1(this);h_(a,void 0,"digestInto() output");let b=this.outputLen;if(a.length<b)throw Error('"digestInto() output" expected to be of length >='+b);this.finished=!0;let{buffer:c,view:d,blockLen:e,isLE:f}=this,{pos:g}=this;c[g++]=128,h3(this.buffer.subarray(g)),this.padOffset>e-g&&(this.process(d,0),g=0);for(let a=g;a<e;a++)c[a]=0;d.setBigUint64(e-8,BigInt(8*this.length),f),this.process(d,0);let h=h4(a),i=this.outputLen;if(i%4)throw Error("_sha2: outputLen must be aligned to 32bit");let j=i/4,k=this.get();if(j>k.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<j;a++)h.setUint32(4*a,k[a],f)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){(a||=new this.constructor).set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.destroyed=f,a.finished=e,a.length=d,a.pos=g,d%b&&a.buffer.set(c),a}clone(){return this._cloneInto()}}let ik=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),il=BigInt(0x100000000-1),im=BigInt(32),io=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),ip=new Uint32Array(64);class iq extends ij{constructor(a){super(64,a,8,!1)}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)ip[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=ip[a-15],c=ip[a-2],d=h5(b,7)^h5(b,18)^b>>>3,e=h5(c,17)^h5(c,19)^c>>>10;ip[a]=e+ip[a-7]+d+ip[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){var k,l,m,n;let b=j+(h5(g,6)^h5(g,11)^h5(g,25))+((k=g)&h^~k&i)+io[a]+ip[a]|0,o=(h5(c,2)^h5(c,13)^h5(c,22))+((l=c)&(m=d)^l&(n=e)^m&n)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+o|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){h3(ip)}destroy(){this.set(0,0,0,0,0,0,0,0),h3(this.buffer)}}class ir extends iq{A=0|ik[0];B=0|ik[1];C=0|ik[2];D=0|ik[3];E=0|ik[4];F=0|ik[5];G=0|ik[6];H=0|ik[7];constructor(){super(32)}}let is=function(a,b=!1){let c=a.length,d=new Uint32Array(c),e=new Uint32Array(c);for(let f=0;f<c;f++){let{h:c,l:g}=function(a,b=!1){return b?{h:Number(a&il),l:Number(a>>im&il)}:{h:0|Number(a>>im&il),l:0|Number(a&il)}}(a[f],b);[d[f],e[f]]=[c,g]}return[d,e]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(a=>BigInt(a))),it=is[0],iu=is[1],iv=new Uint32Array(80),iw=new Uint32Array(80),ix=function(a,b={}){let c=(b,c)=>a(c).update(b).digest(),d=a(void 0);return c.outputLen=d.outputLen,c.blockLen=d.blockLen,c.create=b=>a(b),Object.assign(c,b),Object.freeze(c)}(()=>new ir,{oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,1])});function iy(a,b,c,d,e,f){let g=a[b++]^c[d++],h=a[b++]^c[d++],i=a[b++]^c[d++],j=a[b++]^c[d++],k=a[b++]^c[d++],l=a[b++]^c[d++],m=a[b++]^c[d++],n=a[b++]^c[d++],o=a[b++]^c[d++],p=a[b++]^c[d++],q=a[b++]^c[d++],r=a[b++]^c[d++],s=a[b++]^c[d++],t=a[b++]^c[d++],u=a[b++]^c[d++],v=a[b++]^c[d++],w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v;for(let a=0;a<8;a+=2)A^=h6(w+I|0,7),E^=h6(A+w|0,9),I^=h6(E+A|0,13),w^=h6(I+E|0,18),F^=h6(B+x|0,7),J^=h6(F+B|0,9),x^=h6(J+F|0,13),B^=h6(x+J|0,18),K^=h6(G+C|0,7),y^=h6(K+G|0,9),C^=h6(y+K|0,13),G^=h6(C+y|0,18),z^=h6(L+H|0,7),D^=h6(z+L|0,9),H^=h6(D+z|0,13),L^=h6(H+D|0,18),x^=h6(w+z|0,7),y^=h6(x+w|0,9),z^=h6(y+x|0,13),w^=h6(z+y|0,18),C^=h6(B+A|0,7),D^=h6(C+B|0,9),A^=h6(D+C|0,13),B^=h6(A+D|0,18),H^=h6(G+F|0,7),E^=h6(H+G|0,9),F^=h6(E+H|0,13),G^=h6(F+E|0,18),I^=h6(L+K|0,7),J^=h6(I+L|0,9),K^=h6(J+I|0,13),L^=h6(K+J|0,18);e[f++]=g+w|0,e[f++]=h+x|0,e[f++]=i+y|0,e[f++]=j+z|0,e[f++]=k+A|0,e[f++]=l+B|0,e[f++]=m+C|0,e[f++]=n+D|0,e[f++]=o+E|0,e[f++]=p+F|0,e[f++]=q+G|0,e[f++]=r+H|0,e[f++]=s+I|0,e[f++]=t+J|0,e[f++]=u+K|0,e[f++]=v+L|0}function iz(a,b,c,d,e){let f=d+0,g=d+16*e;for(let d=0;d<16;d++)c[g+d]=a[b+(2*e-1)*16+d];for(let d=0;d<e;d++,f+=16,b+=16)iy(c,g,a,b,c,f),d>0&&(g+=16),iy(c,f,a,b+=16,c,g)}async function iA(a,b,c){let{N:d,r:e,p:f,dkLen:g,blockSize32:h,V:i,B32:j,B:k,tmp:l,blockMixCb:m,asyncTick:n}=function(a,b,c){let{N:d,r:e,p:f,dkLen:g,asyncTick:h,maxmem:i,onProgress:j}=ie({dkLen:32,asyncTick:10,maxmem:0x40000400},c);if(h$(d,"N"),h$(e,"r"),h$(f,"p"),h$(g,"dkLen"),h$(h,"asyncTick"),h$(i,"maxmem"),void 0!==j&&"function"!=typeof j)throw Error("progressCb must be a function");let k=128*e,l=k/4;if(d<=1||(d&d-1)!=0||d>0x100000000)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(f<1||f>0x1fffffffe0/k)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(g<1||g>0x1fffffffe0)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(k*(d+f)>i)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+i);let m=ii(ix,a,b,{c:1,dkLen:k*f}),n=h2(m),o=h2(new Uint8Array(k*d)),p=h2(new Uint8Array(k)),q=()=>{};if(j){let a=2*d*f,b=Math.max(Math.floor(a/1e4),1),c=0;q=()=>{c++,j&&(!(c%b)||c===a)&&j(c/a)}}return{N:d,r:e,p:f,dkLen:g,blockSize32:l,V:o,B32:n,B:m,tmp:p,blockMixCb:q,asyncTick:h}}(a,b,c);h7(j);for(let a=0;a<f;a++){let b=h*a;for(let a=0;a<h;a++)i[a]=j[b+a];let c=0;await ic(d-1,n,()=>{iz(i,c,i,c+=h,e),m()}),iz(i,(d-1)*h,j,b,e),m(),await ic(d,n,()=>{let a=(j[b+h-16]&d-1)>>>0;for(let c=0;c<h;c++)l[c]=j[b+c]^i[a*h+c];iz(l,0,j,b,e),m()})}h7(j);let o=ii(ix,a,k,{c:1,dkLen:g});return h3(k,i,l),o}function iB(a){switch(a){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${a}`)}}function iC(...a){let b=a.map(iB).join("");if(0===b.length)throw Error("No valid characters provided for random string generation.");let c=b.length;return(a,...d)=>{let e;if(a<=0)throw Error("Length must be a positive integer.");let f=b,g=c;d.length>0&&(g=(f=d.map(iB).join("")).length);let h=Math.floor(256/g)*g,i=new Uint8Array(2*a),j=i.length,k="",l=j;for(;k.length<a;)l>=j&&(crypto.getRandomValues(i),l=0),(e=i[l++])<h&&(k+=f[e%g]);return k}}let iD=iC("a-z","0-9","A-Z","-_");async function iE(a,b,c=3600){return await new hZ(a).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+c).sign(new TextEncoder().encode(b))}async function iF(a){let b=await gE("SHA-256").digest(a);return f1.encode(b)}let iG={N:16384,r:16,p:1,dkLen:64};async function iH(a,b){return await iA(a.normalize("NFKC"),b,{N:iG.N,p:iG.p,r:iG.r,dkLen:iG.dkLen,maxmem:128*iG.N*iG.r*2})}let iI=async a=>{let b=f3.encode(crypto.getRandomValues(new Uint8Array(16))),c=await iH(a,b);return`${b}:${f3.encode(c)}`},iJ=async({hash:a,password:b})=>{let[c,d]=a.split(":");if(!c||!d)throw new fP("Invalid password hash");return function(a,b){let c=new Uint8Array(a),d=new Uint8Array(b),e=c.length^d.length,f=Math.max(c.length,d.length);for(let a=0;a<f;a++)e|=(a<c.length?c[a]:0)^(a<d.length?d[a]:0);return 0===e}(await iH(b,c),function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(h8)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=ia(a.charCodeAt(e)),f=ia(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}(d))},iK=async({key:a,data:b})=>{let c=await gE("SHA-256").digest(a),d=function(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}(b);return function(a){if(gH(a),gM)return a.toHex();let b="";for(let c=0;c<a.length;c++)b+=gN[a[c]];return b}(gT(hd)(new Uint8Array(c)).encrypt(d))},iL=async({key:a,data:b})=>{let c=await gE("SHA-256").digest(a),d=function(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);if(gM)return Uint8Array.fromHex(a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=gP(a.charCodeAt(e)),f=gP(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}(b),e=gT(hd)(new Uint8Array(c));return new TextDecoder().decode(e.decrypt(d))};var iM=Object.defineProperty,iN=Object.defineProperties,iO=Object.getOwnPropertyDescriptors,iP=Object.getOwnPropertySymbols,iQ=Object.prototype.hasOwnProperty,iR=Object.prototype.propertyIsEnumerable,iS=(a,b,c)=>b in a?iM(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,iT=(a,b)=>{for(var c in b||(b={}))iQ.call(b,c)&&iS(a,c,b[c]);if(iP)for(var c of iP(b))iR.call(b,c)&&iS(a,c,b[c]);return a},iU=(a,b)=>iN(a,iO(b)),iV=class extends Error{constructor(a,b,c){super(b||a.toString(),{cause:c}),this.status=a,this.statusText=b,this.error=c}},iW=async(a,b)=>{var c,d,e,f,g,h;let i=b||{},j={onRequest:[null==b?void 0:b.onRequest],onResponse:[null==b?void 0:b.onResponse],onSuccess:[null==b?void 0:b.onSuccess],onError:[null==b?void 0:b.onError],onRetry:[null==b?void 0:b.onRetry]};if(!b||!(null==b?void 0:b.plugins))return{url:a,options:i,hooks:j};for(let k of(null==b?void 0:b.plugins)||[]){if(k.init){let d=await (null==(c=k.init)?void 0:c.call(k,a.toString(),b));i=d.options||i,a=d.url}j.onRequest.push(null==(d=k.hooks)?void 0:d.onRequest),j.onResponse.push(null==(e=k.hooks)?void 0:e.onResponse),j.onSuccess.push(null==(f=k.hooks)?void 0:f.onSuccess),j.onError.push(null==(g=k.hooks)?void 0:g.onError),j.onRetry.push(null==(h=k.hooks)?void 0:h.onRetry)}return{url:a,options:i,hooks:j}},iX=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(){return this.options.delay}},iY=class{constructor(a){this.options=a}shouldAttemptRetry(a,b){return this.options.shouldRetry?Promise.resolve(a<this.options.attempts&&this.options.shouldRetry(b)):Promise.resolve(a<this.options.attempts)}getDelay(a){return Math.min(this.options.maxDelay,this.options.baseDelay*2**a)}},iZ=async a=>{let b={},c=async a=>"function"==typeof a?await a():a;if(null==a?void 0:a.auth){if("Bearer"===a.auth.type){let d=await c(a.auth.token);if(!d)return b;b.authorization=`Bearer ${d}`}else if("Basic"===a.auth.type){let d=c(a.auth.username),e=c(a.auth.password);if(!d||!e)return b;b.authorization=`Basic ${btoa(`${d}:${e}`)}`}else if("Custom"===a.auth.type){let d=c(a.auth.value);if(!d)return b;b.authorization=`${c(a.auth.prefix)} ${d}`}}return b},i$=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function i_(a){if(void 0===a)return!1;let b=typeof a;return"string"===b||"number"===b||"boolean"===b||null===b||"object"===b&&(!!Array.isArray(a)||!a.buffer&&(a.constructor&&"Object"===a.constructor.name||"function"==typeof a.toJSON))}function i0(a){try{return JSON.parse(a)}catch(b){return a}}function i1(a){return"function"==typeof a}async function i2(a){let b=new Headers(null==a?void 0:a.headers);for(let[c,d]of Object.entries(await iZ(a)||{}))b.set(c,d);if(!b.has("content-type")){let c=i_(null==a?void 0:a.body)?"application/json":null;c&&b.set("content-type",c)}return b}var i3=class a extends Error{constructor(b,c){super(c||JSON.stringify(b,null,2)),this.issues=b,Object.setPrototypeOf(this,a.prototype)}};async function i4(a,b){let c=await a["~standard"].validate(b);if(c.issues)throw new i3(c.issues);return c.value}var i5=["get","post","put","patch","delete"],i6=async(a,b)=>{var c,d,e,f,g,h,i,j;let{hooks:k,url:l,options:m}=await iW(a,b),n=function(a){if(null==a?void 0:a.customFetchImpl)return a.customFetchImpl;if("undefined"!=typeof globalThis&&i1(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&i1(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(m),o=new AbortController,p=null!=(c=m.signal)?c:o.signal,q=function(a,b){let{baseURL:c,params:d,query:e}=b||{query:{},params:{},baseURL:""},f=a.startsWith("http")?a.split("/").slice(0,3).join("/"):c||"";if(a.startsWith("@")){let b=a.toString().split("@")[1].split("/")[0];i5.includes(b)&&(a=a.replace(`@${b}/`,"/"))}f.endsWith("/")||(f+="/");let[g,h]=a.replace(f,"").split("?"),i=new URLSearchParams(h);for(let[a,b]of Object.entries(e||{}))null!=b&&i.set(a,String(b));if(d)if(Array.isArray(d))for(let[a,b]of g.split("/").filter(a=>a.startsWith(":")).entries()){let c=d[a];g=g.replace(b,c)}else for(let[a,b]of Object.entries(d))g=g.replace(`:${a}`,String(b));(g=g.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(g=g.slice(1));let j=i.toString();return(j=j.length>0?`?${j}`.replace(/\+/g,"%20"):"",f.startsWith("http"))?new URL(`${g}${j}`,f):`${f}${g}${j}`}(l,m),r=function(a){if(!(null==a?void 0:a.body))return null;let b=new Headers(null==a?void 0:a.headers);if(i_(a.body)&&!b.has("content-type")){for(let[b,c]of Object.entries(null==a?void 0:a.body))c instanceof Date&&(a.body[b]=c.toISOString());return JSON.stringify(a.body)}return a.body}(m),s=await i2(m),t=function(a,b){var c;if(null==b?void 0:b.method)return b.method.toUpperCase();if(a.startsWith("@")){let d=null==(c=a.split("@")[1])?void 0:c.split("/")[0];return i5.includes(d)?d.toUpperCase():(null==b?void 0:b.body)?"POST":"GET"}return(null==b?void 0:b.body)?"POST":"GET"}(l,m),u=iU(iT({},m),{url:q,headers:s,body:r,method:t,signal:p});for(let a of k.onRequest)if(a){let b=await a(u);b instanceof Object&&(u=b)}("pipeTo"in u&&"function"==typeof u.pipeTo||"function"==typeof(null==(d=null==b?void 0:b.body)?void 0:d.pipe))&&!("duplex"in u)&&(u.duplex="half");let{clearTimeout:v}=function(a,b){let c;return!(null==a?void 0:a.signal)&&(null==a?void 0:a.timeout)&&(c=setTimeout(()=>null==b?void 0:b.abort(),null==a?void 0:a.timeout)),{abortTimeout:c,clearTimeout:()=>{c&&clearTimeout(c)}}}(m,o),w=await n(u.url,u);v();let x={response:w,request:u};for(let a of k.onResponse)if(a){let c=await a(iU(iT({},x),{response:(null==(e=null==b?void 0:b.hookOptions)?void 0:e.cloneResponse)?w.clone():w}));c instanceof Response?w=c:c instanceof Object&&(w=c.response)}if(w.ok){if("HEAD"===u.method)return{data:"",error:null};let a=function(a){let b=a.headers.get("content-type"),c=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!b)return"json";let d=b.split(";").shift()||"";return i$.test(d)?"json":c.has(d)||d.startsWith("text/")?"text":"blob"}(w),c={data:"",response:w,request:u};if("json"===a||"text"===a){let a=await w.text(),b=null!=(f=u.jsonParser)?f:i0;c.data=await b(a)}else c.data=await w[a]();for(let a of((null==u?void 0:u.output)&&u.output&&!u.disableValidation&&(c.data=await i4(u.output,c.data)),k.onSuccess))a&&await a(iU(iT({},c),{response:(null==(g=null==b?void 0:b.hookOptions)?void 0:g.cloneResponse)?w.clone():w}));return(null==b?void 0:b.throw)?c.data:{data:c.data,error:null}}let y=null!=(h=null==b?void 0:b.jsonParser)?h:i0,z=await w.text(),A=function(a){try{return JSON.parse(a),!0}catch(a){return!1}}(z),B=A?await y(z):null,C={response:w,responseText:z,request:u,error:iU(iT({},B),{status:w.status,statusText:w.statusText})};for(let a of k.onError)a&&await a(iU(iT({},C),{response:(null==(i=null==b?void 0:b.hookOptions)?void 0:i.cloneResponse)?w.clone():w}));if(null==b?void 0:b.retry){let c=function(a){if("number"==typeof a)return new iX({type:"linear",attempts:a,delay:1e3});switch(a.type){case"linear":return new iX(a);case"exponential":return new iY(a);default:throw Error("Invalid retry strategy")}}(b.retry),d=null!=(j=b.retryAttempt)?j:0;if(await c.shouldAttemptRetry(d,w)){for(let a of k.onRetry)a&&await a(x);let e=c.getDelay(d);return await new Promise(a=>setTimeout(a,e)),await i6(a,iU(iT({},b),{retryAttempt:d+1}))}}if(null==b?void 0:b.throw)throw new iV(w.status,w.statusText,A?B:z);return{data:null,error:iU(iT({},B),{status:w.status,statusText:w.statusText})}};let i7=async(a,b,c,d)=>{let e=await hC(a,b,"verify");hw(a,e);let f=hv(a,e.algorithm);try{return await crypto.subtle.verify(f,e,c,d)}catch{return!1}};async function i8(a,b,c){let d,e;if(!hI(a))throw new ho("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new ho('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new ho("JWS Protected Header incorrect type");if(void 0===a.payload)throw new ho("JWS Payload missing");if("string"!=typeof a.signature)throw new ho("JWS Signature missing or incorrect type");if(void 0!==a.header&&!hI(a.header))throw new ho("JWS Unprotected Header incorrect type");let f={};if(a.protected)try{let b=hh(a.protected);f=JSON.parse(hf.decode(b))}catch{throw new ho("JWS Protected Header is invalid")}if(!hE(f,a.header))throw new ho("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...f,...a.header},h=hN(ho,new Map([["b64",!0]]),c?.crit,f,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=f.b64))throw new ho('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new ho('JWS "alg" (Algorithm) Header Parameter missing or invalid');let k=c&&((a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)})("algorithms",c.algorithms);if(k&&!k.has(j))throw new hm('"alg" (Algorithm) Header Parameter value not allowed');if(i){if("string"!=typeof a.payload)throw new ho("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new ho("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof b&&(b=await b(f,a),l=!0),hM(j,b,"verify");let m=hg(he.encode(a.protected??""),he.encode("."),"string"==typeof a.payload?he.encode(a.payload):a.payload);try{d=hh(a.signature)}catch{throw new ho("Failed to base64url decode the signature")}let n=await hQ(b,j);if(!await i7(j,n,d,m))throw new hu;if(i)try{e=hh(a.payload)}catch{throw new ho("Failed to base64url decode the payload")}else e="string"==typeof a.payload?he.encode(a.payload):a.payload;let o={payload:e};return(void 0!==a.protected&&(o.protectedHeader=f),void 0!==a.header&&(o.unprotectedHeader=a.header),l)?{...o,key:n}:o}async function i9(a,b,c){if(a instanceof Uint8Array&&(a=hf.decode(a)),"string"!=typeof a)throw new ho("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new ho("Invalid Compact JWS");let h=await i8({payload:e,protected:d,signature:f},b,c),i={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}async function ja(a,b,c){let d=await i9(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new hp("JWTs MUST NOT use unencoded payload");let e={payload:function(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(hf.decode(b))}catch{}if(!hI(f))throw new hp("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||hX(a.typ)!==hX(h)))throw new hk('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new hk(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new hk('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new hk('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new hk('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=hV(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=hT(o||new Date);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new hk('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new hk('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new hk('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new hk('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new hl('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:hV(m)))throw new hl('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new hk('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}function jb(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(hf.decode(hh(b)));if(!hI(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}function jc(a){let b,c;if("string"!=typeof a)throw new hp("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new hp("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new hp("Invalid JWT");if(!d)throw new hp("JWTs must contain a payload");try{b=hh(d)}catch{throw new hp("Failed to base64url decode the payload")}try{c=JSON.parse(hf.decode(b))}catch{throw new hp("Failed to parse the decoded payload as JSON")}if(!hI(c))throw new hp("Invalid JWT Claims Set");return c}async function jd(a,b,c){let d;if(!hI(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return hh(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new hn('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return hO({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return hO({...a,ext:d});case"EC":case"OKP":return hO({...a,alg:b,ext:d});default:throw new hn('Unsupported "kty" (Key Type) Parameter value')}}function je(a){return hI(a)}class jf{#S;#T=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(je)}(a))throw new hq("JSON Web Key Set malformed");this.#S=structuredClone(a)}jwks(){return this.#S}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new hn('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this.#S.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&("string"==typeof a.alg||"AKP"===e)&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv;break;case"Ed25519":case"EdDSA":b="Ed25519"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new hr;if(1!==h){let a=new hs,b=this.#T;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await jg(b,a,c)}catch{}},a}return jg(this.#T,g,c)}}async function jg(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await jd({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new hq("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function jh(a){let b=new jf(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>structuredClone(b.jwks()),enumerable:!1,configurable:!1,writable:!1}}),c}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(e="jose/v6.1.0");let ji=Symbol();async function jj(a,b,c,d=fetch){let e=await d(a,{method:"GET",signal:c,redirect:"manual",headers:b}).catch(a=>{if("TimeoutError"===a.name)throw new ht;throw a});if(200!==e.status)throw new hj("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await e.json()}catch{throw new hj("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let jk=Symbol();class jl{#U;#V;#W;#X;#Y;#Z;#$;#_;#aa;#ab;constructor(a,b){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this.#U=new URL(a.href),this.#V="number"==typeof b?.timeoutDuration?b?.timeoutDuration:5e3,this.#W="number"==typeof b?.cooldownDuration?b?.cooldownDuration:3e4,this.#X="number"==typeof b?.cacheMaxAge?b?.cacheMaxAge:6e5,this.#$=new Headers(b?.headers),e&&!this.#$.has("User-Agent")&&this.#$.set("User-Agent",e),this.#$.has("accept")||(this.#$.set("accept","application/json"),this.#$.append("accept","application/jwk-set+json")),this.#_=b?.[ji],b?.[jk]!==void 0&&(this.#ab=b?.[jk],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!hI(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,hI)}(b?.[jk],this.#X)&&(this.#Y=this.#ab.uat,this.#aa=jh(this.#ab.jwks)))}pendingFetch(){return!!this.#Z}coolingDown(){return"number"==typeof this.#Y&&Date.now()<this.#Y+this.#W}fresh(){return"number"==typeof this.#Y&&Date.now()<this.#Y+this.#X}jwks(){return this.#aa?.jwks()}async getKey(a,b){this.#aa&&this.fresh()||await this.reload();try{return await this.#aa(a,b)}catch(c){if(c instanceof hr&&!1===this.coolingDown())return await this.reload(),this.#aa(a,b);throw c}}async reload(){this.#Z&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#Z=void 0),this.#Z||=jj(this.#U.href,this.#$,AbortSignal.timeout(this.#V),this.#_).then(a=>{this.#aa=jh(a),this.#ab&&(this.#ab.uat=Date.now(),this.#ab.jwks=a),this.#Y=Date.now(),this.#Z=void 0}).catch(a=>{throw this.#Z=void 0,a}),await this.#Z}}let jm=a=>iC("a-z","A-Z","0-9")(a||32);function jn(a,b,c){function d(c,d){var e;for(let f in Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(e=c._zod).traits??(e.traits=new Set),c._zod.traits.add(a),b(c,d),g.prototype)f in c||Object.defineProperty(c,f,{value:g.prototype[f].bind(c)});c._zod.constr=g,c._zod.def=d}let e=c?.Parent??Object;class f extends e{}function g(a){var b;let e=c?.Parent?new f:this;for(let c of(d(e,a),(b=e._zod).deferred??(b.deferred=[]),e._zod.deferred))c();return e}return Object.defineProperty(f,"name",{value:a}),Object.defineProperty(g,"init",{value:d}),Object.defineProperty(g,Symbol.hasInstance,{value:b=>!!c?.Parent&&b instanceof c.Parent||b?._zod?.traits?.has(a)}),Object.defineProperty(g,"name",{value:a}),g}Object.freeze({status:"aborted"}),Symbol("zod_brand");class jo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class jp extends Error{constructor(a){super(`Encountered unidirectional transform during encode: ${a}`),this.name="ZodEncodeError"}}let jq={};function jr(a){return a&&Object.assign(jq,a),jq}function js(a,b="|"){return a.map(a=>jK(a)).join(b)}function jt(a,b){return"bigint"==typeof b?b.toString():b}function ju(a){return{get value(){{let b=a();return Object.defineProperty(this,"value",{value:b}),b}}}}function jv(a){let b=+!!a.startsWith("^"),c=a.endsWith("$")?a.length-1:a.length;return a.slice(b,c)}let jw=Symbol("evaluating");function jx(a,b,c){let d;Object.defineProperty(a,b,{get(){if(d!==jw)return void 0===d&&(d=jw,d=c()),d},set(c){Object.defineProperty(a,b,{value:c})},configurable:!0})}function jy(a,b,c){Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!0,configurable:!0})}function jz(...a){let b={};for(let c of a)Object.assign(b,Object.getOwnPropertyDescriptors(c));return Object.defineProperties({},b)}function jA(a){return JSON.stringify(a)}let jB="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function jC(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}let jD=ju(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(a){return!1}});function jE(a){if(!1===jC(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!1!==jC(c)&&!1!==Object.prototype.hasOwnProperty.call(c,"isPrototypeOf")}function jF(a){return jE(a)?{...a}:Array.isArray(a)?[...a]:a}let jG=new Set(["string","number","symbol"]);function jH(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function jI(a,b,c){let d=new a._zod.constr(b??a._zod.def);return(!b||c?.parent)&&(d._zod.parent=a),d}function jJ(a){if(!a)return{};if("string"==typeof a)return{error:()=>a};if(a?.message!==void 0){if(a?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");a.error=a.message}return(delete a.message,"string"==typeof a.error)?{...a,error:()=>a.error}:a}function jK(a){return"bigint"==typeof a?a.toString()+"n":"string"==typeof a?`"${a}"`:`${a}`}let jL={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-0x80000000,0x7fffffff],uint32:[0,0xffffffff],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function jM(a,b=0){if(!0===a.aborted)return!0;for(let c=b;c<a.issues.length;c++)if(a.issues[c]?.continue!==!0)return!0;return!1}function jN(a,b){return b.map(b=>(b.path??(b.path=[]),b.path.unshift(a),b))}function jO(a){return"string"==typeof a?a:a?.message}function jP(a,b,c){let d={...a,path:a.path??[]};return a.message||(d.message=jO(a.inst?._zod.def?.error?.(a))??jO(b?.error?.(a))??jO(c.customError?.(a))??jO(c.localeError?.(a))??"Invalid input"),delete d.inst,delete d.continue,b?.reportInput||delete d.input,d}function jQ(a){return Array.isArray(a)?"array":"string"==typeof a?"string":"unknown"}function jR(...a){let[b,c,d]=a;return"string"==typeof b?{message:b,code:"custom",input:c,inst:d}:{...b}}let jS=(a,b)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:b,enumerable:!1}),a.message=JSON.stringify(b,jt,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},jT=jn("$ZodError",jS),jU=jn("$ZodError",jS,{Parent:Error}),jV=a=>(b,c,d,e)=>{let f=d?Object.assign(d,{async:!1}):{async:!1},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise)throw new jo;if(g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>jP(a,f,jr())));throw jB(b,e?.callee),b}return g.value},jW=a=>async(b,c,d,e)=>{let f=d?Object.assign(d,{async:!0}):{async:!0},g=b._zod.run({value:c,issues:[]},f);if(g instanceof Promise&&(g=await g),g.issues.length){let b=new(e?.Err??a)(g.issues.map(a=>jP(a,f,jr())));throw jB(b,e?.callee),b}return g.value},jX=a=>(b,c,d)=>{let e=d?{...d,async:!1}:{async:!1},f=b._zod.run({value:c,issues:[]},e);if(f instanceof Promise)throw new jo;return f.issues.length?{success:!1,error:new(a??jT)(f.issues.map(a=>jP(a,e,jr())))}:{success:!0,data:f.value}},jY=jX(jU),jZ=a=>async(b,c,d)=>{let e=d?Object.assign(d,{async:!0}):{async:!0},f=b._zod.run({value:c,issues:[]},e);return f instanceof Promise&&(f=await f),f.issues.length?{success:!1,error:new a(f.issues.map(a=>jP(a,e,jr())))}:{success:!0,data:f.value}},j$=jZ(jU),j_=/^[cC][^\s-]{8,}$/,j0=/^[0-9a-z]+$/,j1=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,j2=/^[0-9a-vA-V]{20}$/,j3=/^[A-Za-z0-9]{27}$/,j4=/^[a-zA-Z0-9_-]{21}$/,j5=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,j6=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,j7=a=>a?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,j8=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,j9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ka=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,kb=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,kc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,kd=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ke=/^[A-Za-z0-9_-]*$/,kf=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,kg=/^\+(?:[0-9]){6,14}[0-9]$/,kh="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ki=RegExp(`^${kh}$`);function kj(a){let b="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof a.precision?-1===a.precision?`${b}`:0===a.precision?`${b}:[0-5]\\d`:`${b}:[0-5]\\d\\.\\d{${a.precision}}`:`${b}(?::[0-5]\\d(?:\\.\\d+)?)?`}let kk=/^-?\d+n?$/,kl=/^-?\d+$/,km=/^-?\d+(?:\.\d+)?/,kn=/^(?:true|false)$/i,ko=/^[^A-Z]*$/,kp=/^[^a-z]*$/,kq=jn("$ZodCheck",(a,b)=>{var c;a._zod??(a._zod={}),a._zod.def=b,(c=a._zod).onattach??(c.onattach=[])}),kr={number:"number",bigint:"bigint",object:"date"},ks=jn("$ZodCheckLessThan",(a,b)=>{kq.init(a,b);let c=kr[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.maximum:c.exclusiveMaximum)??1/0;b.value<d&&(b.inclusive?c.maximum=b.value:c.exclusiveMaximum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value<=b.value:d.value<b.value)||d.issues.push({origin:c,code:"too_big",maximum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),kt=jn("$ZodCheckGreaterThan",(a,b)=>{kq.init(a,b);let c=kr[typeof b.value];a._zod.onattach.push(a=>{let c=a._zod.bag,d=(b.inclusive?c.minimum:c.exclusiveMinimum)??-1/0;b.value>d&&(b.inclusive?c.minimum=b.value:c.exclusiveMinimum=b.value)}),a._zod.check=d=>{(b.inclusive?d.value>=b.value:d.value>b.value)||d.issues.push({origin:c,code:"too_small",minimum:b.value,input:d.value,inclusive:b.inclusive,inst:a,continue:!b.abort})}}),ku=jn("$ZodCheckMultipleOf",(a,b)=>{kq.init(a,b),a._zod.onattach.push(a=>{var c;(c=a._zod.bag).multipleOf??(c.multipleOf=b.value)}),a._zod.check=c=>{if(typeof c.value!=typeof b.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof c.value?c.value%b.value===BigInt(0):0===function(a,b){let c=(a.toString().split(".")[1]||"").length,d=b.toString(),e=(d.split(".")[1]||"").length;if(0===e&&/\d?e-\d?/.test(d)){let a=d.match(/\d?e-(\d?)/);a?.[1]&&(e=Number.parseInt(a[1]))}let f=c>e?c:e;return Number.parseInt(a.toFixed(f).replace(".",""))%Number.parseInt(b.toFixed(f).replace(".",""))/10**f}(c.value,b.value))||c.issues.push({origin:typeof c.value,code:"not_multiple_of",divisor:b.value,input:c.value,inst:a,continue:!b.abort})}}),kv=jn("$ZodCheckNumberFormat",(a,b)=>{kq.init(a,b),b.format=b.format||"float64";let c=b.format?.includes("int"),d=c?"int":"number",[e,f]=jL[b.format];a._zod.onattach.push(a=>{let d=a._zod.bag;d.format=b.format,d.minimum=e,d.maximum=f,c&&(d.pattern=kl)}),a._zod.check=g=>{let h=g.value;if(c){if(!Number.isInteger(h))return void g.issues.push({expected:d,format:b.format,code:"invalid_type",continue:!1,input:h,inst:a});if(!Number.isSafeInteger(h))return void(h>0?g.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}):g.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:a,origin:d,continue:!b.abort}))}h<e&&g.issues.push({origin:"number",input:h,code:"too_small",minimum:e,inclusive:!0,inst:a,continue:!b.abort}),h>f&&g.issues.push({origin:"number",input:h,code:"too_big",maximum:f,inst:a})}}),kw=jn("$ZodCheckMaxLength",(a,b)=>{var c;kq.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.maximum??1/0;b.maximum<c&&(a._zod.bag.maximum=b.maximum)}),a._zod.check=c=>{let d=c.value;if(d.length<=b.maximum)return;let e=jQ(d);c.issues.push({origin:e,code:"too_big",maximum:b.maximum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),kx=jn("$ZodCheckMinLength",(a,b)=>{var c;kq.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag.minimum??-1/0;b.minimum>c&&(a._zod.bag.minimum=b.minimum)}),a._zod.check=c=>{let d=c.value;if(d.length>=b.minimum)return;let e=jQ(d);c.issues.push({origin:e,code:"too_small",minimum:b.minimum,inclusive:!0,input:d,inst:a,continue:!b.abort})}}),ky=jn("$ZodCheckLengthEquals",(a,b)=>{var c;kq.init(a,b),(c=a._zod.def).when??(c.when=a=>{let b=a.value;return null!=b&&void 0!==b.length}),a._zod.onattach.push(a=>{let c=a._zod.bag;c.minimum=b.length,c.maximum=b.length,c.length=b.length}),a._zod.check=c=>{let d=c.value,e=d.length;if(e===b.length)return;let f=jQ(d),g=e>b.length;c.issues.push({origin:f,...g?{code:"too_big",maximum:b.length}:{code:"too_small",minimum:b.length},inclusive:!0,exact:!0,input:c.value,inst:a,continue:!b.abort})}}),kz=jn("$ZodCheckStringFormat",(a,b)=>{var c,d;kq.init(a,b),a._zod.onattach.push(a=>{let c=a._zod.bag;c.format=b.format,b.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(b.pattern))}),b.pattern?(c=a._zod).check??(c.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:b.format,input:c.value,...b.pattern?{pattern:b.pattern.toString()}:{},inst:a,continue:!b.abort})}):(d=a._zod).check??(d.check=()=>{})}),kA=jn("$ZodCheckRegex",(a,b)=>{kz.init(a,b),a._zod.check=c=>{b.pattern.lastIndex=0,b.pattern.test(c.value)||c.issues.push({origin:"string",code:"invalid_format",format:"regex",input:c.value,pattern:b.pattern.toString(),inst:a,continue:!b.abort})}}),kB=jn("$ZodCheckLowerCase",(a,b)=>{b.pattern??(b.pattern=ko),kz.init(a,b)}),kC=jn("$ZodCheckUpperCase",(a,b)=>{b.pattern??(b.pattern=kp),kz.init(a,b)}),kD=jn("$ZodCheckIncludes",(a,b)=>{kq.init(a,b);let c=jH(b.includes),d=new RegExp("number"==typeof b.position?`^.{${b.position}}${c}`:c);b.pattern=d,a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(d)}),a._zod.check=c=>{c.value.includes(b.includes,b.position)||c.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:b.includes,input:c.value,inst:a,continue:!b.abort})}}),kE=jn("$ZodCheckStartsWith",(a,b)=>{kq.init(a,b);let c=RegExp(`^${jH(b.prefix)}.*`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.startsWith(b.prefix)||c.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:b.prefix,input:c.value,inst:a,continue:!b.abort})}}),kF=jn("$ZodCheckEndsWith",(a,b)=>{kq.init(a,b);let c=RegExp(`.*${jH(b.suffix)}$`);b.pattern??(b.pattern=c),a._zod.onattach.push(a=>{let b=a._zod.bag;b.patterns??(b.patterns=new Set),b.patterns.add(c)}),a._zod.check=c=>{c.value.endsWith(b.suffix)||c.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:b.suffix,input:c.value,inst:a,continue:!b.abort})}}),kG=jn("$ZodCheckOverwrite",(a,b)=>{kq.init(a,b),a._zod.check=a=>{a.value=b.tx(a.value)}});class kH{constructor(a=[]){this.content=[],this.indent=0,this&&(this.args=a)}indented(a){this.indent+=1,a(this),this.indent-=1}write(a){if("function"==typeof a){a(this,{execution:"sync"}),a(this,{execution:"async"});return}let b=a.split("\n").filter(a=>a),c=Math.min(...b.map(a=>a.length-a.trimStart().length));for(let a of b.map(a=>a.slice(c)).map(a=>" ".repeat(2*this.indent)+a))this.content.push(a)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(a=>`  ${a}`)].join("\n"))}}let kI={major:4,minor:1,patch:12},kJ=jn("$ZodType",(a,b)=>{var c;a??(a={}),a._zod.def=b,a._zod.bag=a._zod.bag||{},a._zod.version=kI;let d=[...a._zod.def.checks??[]];for(let b of(a._zod.traits.has("$ZodCheck")&&d.unshift(a),d))for(let c of b._zod.onattach)c(a);if(0===d.length)(c=a._zod).deferred??(c.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{let b=(a,b,c)=>{let d,e=jM(a);for(let f of b){if(f._zod.def.when){if(!f._zod.def.when(a))continue}else if(e)continue;let b=a.issues.length,g=f._zod.check(a);if(g instanceof Promise&&c?.async===!1)throw new jo;if(d||g instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await g,a.issues.length!==b&&(e||(e=jM(a,b)))});else{if(a.issues.length===b)continue;e||(e=jM(a,b))}}return d?d.then(()=>a):a},c=(c,e,f)=>{if(jM(c))return c.aborted=!0,c;let g=b(e,d,f);if(g instanceof Promise){if(!1===f.async)throw new jo;return g.then(b=>a._zod.parse(b,f))}return a._zod.parse(g,f)};a._zod.run=(e,f)=>{if(f.skipChecks)return a._zod.parse(e,f);if("backward"===f.direction){let b=a._zod.parse({value:e.value,issues:[]},{...f,skipChecks:!0});return b instanceof Promise?b.then(a=>c(a,e,f)):c(b,e,f)}let g=a._zod.parse(e,f);if(g instanceof Promise){if(!1===f.async)throw new jo;return g.then(a=>b(a,d,f))}return b(g,d,f)}}a["~standard"]={validate:b=>{try{let c=jY(a,b);return c.success?{value:c.data}:{issues:c.error?.issues}}catch(c){return j$(a,b).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),kK=jn("$ZodString",(a,b)=>{kJ.init(a,b),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??(a=>{let b=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${b}$`)})(a._zod.bag),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=String(c.value)}catch(a){}return"string"==typeof c.value||c.issues.push({expected:"string",code:"invalid_type",input:c.value,inst:a}),c}}),kL=jn("$ZodStringFormat",(a,b)=>{kz.init(a,b),kK.init(a,b)}),kM=jn("$ZodGUID",(a,b)=>{b.pattern??(b.pattern=j6),kL.init(a,b)}),kN=jn("$ZodUUID",(a,b)=>{if(b.version){let a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[b.version];if(void 0===a)throw Error(`Invalid UUID version: "${b.version}"`);b.pattern??(b.pattern=j7(a))}else b.pattern??(b.pattern=j7());kL.init(a,b)}),kO=jn("$ZodEmail",(a,b)=>{b.pattern??(b.pattern=j8),kL.init(a,b)}),kP=jn("$ZodURL",(a,b)=>{kL.init(a,b),a._zod.check=c=>{try{let d=c.value.trim(),e=new URL(d);b.hostname&&(b.hostname.lastIndex=0,b.hostname.test(e.hostname)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:kf.source,input:c.value,inst:a,continue:!b.abort})),b.protocol&&(b.protocol.lastIndex=0,b.protocol.test(e.protocol.endsWith(":")?e.protocol.slice(0,-1):e.protocol)||c.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:b.protocol.source,input:c.value,inst:a,continue:!b.abort})),b.normalize?c.value=e.href:c.value=d;return}catch(d){c.issues.push({code:"invalid_format",format:"url",input:c.value,inst:a,continue:!b.abort})}}}),kQ=jn("$ZodEmoji",(a,b)=>{b.pattern??(b.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),kL.init(a,b)}),kR=jn("$ZodNanoID",(a,b)=>{b.pattern??(b.pattern=j4),kL.init(a,b)}),kS=jn("$ZodCUID",(a,b)=>{b.pattern??(b.pattern=j_),kL.init(a,b)}),kT=jn("$ZodCUID2",(a,b)=>{b.pattern??(b.pattern=j0),kL.init(a,b)}),kU=jn("$ZodULID",(a,b)=>{b.pattern??(b.pattern=j1),kL.init(a,b)}),kV=jn("$ZodXID",(a,b)=>{b.pattern??(b.pattern=j2),kL.init(a,b)}),kW=jn("$ZodKSUID",(a,b)=>{b.pattern??(b.pattern=j3),kL.init(a,b)}),kX=jn("$ZodISODateTime",(a,b)=>{b.pattern??(b.pattern=function(a){let b=kj({precision:a.precision}),c=["Z"];a.local&&c.push(""),a.offset&&c.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let d=`${b}(?:${c.join("|")})`;return RegExp(`^${kh}T(?:${d})$`)}(b)),kL.init(a,b)}),kY=jn("$ZodISODate",(a,b)=>{b.pattern??(b.pattern=ki),kL.init(a,b)}),kZ=jn("$ZodISOTime",(a,b)=>{b.pattern??(b.pattern=RegExp(`^${kj(b)}$`)),kL.init(a,b)}),k$=jn("$ZodISODuration",(a,b)=>{b.pattern??(b.pattern=j5),kL.init(a,b)}),k_=jn("$ZodIPv4",(a,b)=>{b.pattern??(b.pattern=j9),kL.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv4"})}),k0=jn("$ZodIPv6",(a,b)=>{b.pattern??(b.pattern=ka),kL.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.format="ipv6"}),a._zod.check=c=>{try{new URL(`http://[${c.value}]`)}catch{c.issues.push({code:"invalid_format",format:"ipv6",input:c.value,inst:a,continue:!b.abort})}}}),k1=jn("$ZodCIDRv4",(a,b)=>{b.pattern??(b.pattern=kb),kL.init(a,b)}),k2=jn("$ZodCIDRv6",(a,b)=>{b.pattern??(b.pattern=kc),kL.init(a,b),a._zod.check=c=>{let d=c.value.split("/");try{if(2!==d.length)throw Error();let[a,b]=d;if(!b)throw Error();let c=Number(b);if(`${c}`!==b||c<0||c>128)throw Error();new URL(`http://[${a}]`)}catch{c.issues.push({code:"invalid_format",format:"cidrv6",input:c.value,inst:a,continue:!b.abort})}}});function k3(a){if(""===a)return!0;if(a.length%4!=0)return!1;try{return atob(a),!0}catch{return!1}}let k4=jn("$ZodBase64",(a,b)=>{b.pattern??(b.pattern=kd),kL.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64"}),a._zod.check=c=>{k3(c.value)||c.issues.push({code:"invalid_format",format:"base64",input:c.value,inst:a,continue:!b.abort})}}),k5=jn("$ZodBase64URL",(a,b)=>{b.pattern??(b.pattern=ke),kL.init(a,b),a._zod.onattach.push(a=>{a._zod.bag.contentEncoding="base64url"}),a._zod.check=c=>{!function(a){if(!ke.test(a))return!1;let b=a.replace(/[-_]/g,a=>"-"===a?"+":"/");return k3(b.padEnd(4*Math.ceil(b.length/4),"="))}(c.value)&&c.issues.push({code:"invalid_format",format:"base64url",input:c.value,inst:a,continue:!b.abort})}}),k6=jn("$ZodE164",(a,b)=>{b.pattern??(b.pattern=kg),kL.init(a,b)}),k7=jn("$ZodJWT",(a,b)=>{kL.init(a,b),a._zod.check=c=>{!function(a,b=null){try{let c=a.split(".");if(3!==c.length)return!1;let[d]=c;if(!d)return!1;let e=JSON.parse(atob(d));if("typ"in e&&e?.typ!=="JWT"||!e.alg||b&&(!("alg"in e)||e.alg!==b))return!1;return!0}catch{return!1}}(c.value,b.alg)&&c.issues.push({code:"invalid_format",format:"jwt",input:c.value,inst:a,continue:!b.abort})}}),k8=jn("$ZodNumber",(a,b)=>{kJ.init(a,b),a._zod.pattern=a._zod.bag.pattern??km,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=Number(c.value)}catch(a){}let e=c.value;if("number"==typeof e&&!Number.isNaN(e)&&Number.isFinite(e))return c;let f="number"==typeof e?Number.isNaN(e)?"NaN":Number.isFinite(e)?void 0:"Infinity":void 0;return c.issues.push({expected:"number",code:"invalid_type",input:e,inst:a,...f?{received:f}:{}}),c}}),k9=jn("$ZodNumber",(a,b)=>{kv.init(a,b),k8.init(a,b)}),la=jn("$ZodBoolean",(a,b)=>{kJ.init(a,b),a._zod.pattern=kn,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=!!c.value}catch(a){}let e=c.value;return"boolean"==typeof e||c.issues.push({expected:"boolean",code:"invalid_type",input:e,inst:a}),c}}),lb=((a,b)=>{kJ.init(a,b),a._zod.pattern=kk,a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=BigInt(c.value)}catch(a){}return"bigint"==typeof c.value||c.issues.push({expected:"bigint",code:"invalid_type",input:c.value,inst:a}),c}},jn("$ZodUnknown",(a,b)=>{kJ.init(a,b),a._zod.parse=a=>a})),lc=jn("$ZodNever",(a,b)=>{kJ.init(a,b),a._zod.parse=(b,c)=>(b.issues.push({expected:"never",code:"invalid_type",input:b.value,inst:a}),b)}),ld=jn("$ZodDate",(a,b)=>{kJ.init(a,b),a._zod.parse=(c,d)=>{if(b.coerce)try{c.value=new Date(c.value)}catch(a){}let e=c.value,f=e instanceof Date;return f&&!Number.isNaN(e.getTime())||c.issues.push({expected:"date",code:"invalid_type",input:e,...f?{received:"Invalid Date"}:{},inst:a}),c}});function le(a,b,c){a.issues.length&&b.issues.push(...jN(c,a.issues)),b.value[c]=a.value}let lf=jn("$ZodArray",(a,b)=>{kJ.init(a,b),a._zod.parse=(c,d)=>{let e=c.value;if(!Array.isArray(e))return c.issues.push({expected:"array",code:"invalid_type",input:e,inst:a}),c;c.value=Array(e.length);let f=[];for(let a=0;a<e.length;a++){let g=e[a],h=b.element._zod.run({value:g,issues:[]},d);h instanceof Promise?f.push(h.then(b=>le(b,c,a))):le(h,c,a)}return f.length?Promise.all(f).then(()=>c):c}});function lg(a,b,c,d){a.issues.length&&b.issues.push(...jN(c,a.issues)),void 0===a.value?c in d&&(b.value[c]=void 0):b.value[c]=a.value}function lh(a){var b;let c=Object.keys(a.shape);for(let b of c)if(!a.shape?.[b]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${b}": expected a Zod schema`);let d=Object.keys(b=a.shape).filter(a=>"optional"===b[a]._zod.optin&&"optional"===b[a]._zod.optout);return{...a,keys:c,keySet:new Set(c),numKeys:c.length,optionalKeys:new Set(d)}}function li(a,b,c,d,e,f){let g=[],h=e.keySet,i=e.catchall._zod,j=i.def.type;for(let e of Object.keys(b)){if(h.has(e))continue;if("never"===j){g.push(e);continue}let f=i.run({value:b[e],issues:[]},d);f instanceof Promise?a.push(f.then(a=>lg(a,c,e,b))):lg(f,c,e,b)}return(g.length&&c.issues.push({code:"unrecognized_keys",keys:g,input:b,inst:f}),a.length)?Promise.all(a).then(()=>c):c}let lj=jn("$ZodObject",(a,b)=>{let c;kJ.init(a,b);let d=Object.getOwnPropertyDescriptor(b,"shape");if(!d?.get){let a=b.shape;Object.defineProperty(b,"shape",{get:()=>{let c={...a};return Object.defineProperty(b,"shape",{value:c}),c}})}let e=ju(()=>lh(b));jx(a._zod,"propValues",()=>{let a=b.shape,c={};for(let b in a){let d=a[b]._zod;if(d.values)for(let a of(c[b]??(c[b]=new Set),d.values))c[b].add(a)}return c});let f=b.catchall;a._zod.parse=(b,d)=>{c??(c=e.value);let g=b.value;if(!jC(g))return b.issues.push({expected:"object",code:"invalid_type",input:g,inst:a}),b;b.value={};let h=[],i=c.shape;for(let a of c.keys){let c=i[a]._zod.run({value:g[a],issues:[]},d);c instanceof Promise?h.push(c.then(c=>lg(c,b,a,g))):lg(c,b,a,g)}return f?li(h,g,b,d,e.value,a):h.length?Promise.all(h).then(()=>b):b}}),lk=jn("$ZodObjectJIT",(a,b)=>{let c,d;lj.init(a,b);let e=a._zod.parse,f=ju(()=>lh(b)),g=!jq.jitless,h=g&&jD.value,i=b.catchall;a._zod.parse=(j,k)=>{d??(d=f.value);let l=j.value;return jC(l)?g&&h&&k?.async===!1&&!0!==k.jitless?(c||(c=(a=>{let b=new kH(["shape","payload","ctx"]),c=f.value,d=a=>{let b=jA(a);return`shape[${b}]._zod.run({ value: input[${b}], issues: [] }, ctx)`};b.write("const input = payload.value;");let e=Object.create(null),g=0;for(let a of c.keys)e[a]=`key_${g++}`;for(let a of(b.write("const newResult = {};"),c.keys)){let c=e[a],f=jA(a);b.write(`const ${c} = ${d(a)};`),b.write(`
        if (${c}.issues.length) {
          payload.issues = payload.issues.concat(${c}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${f}, ...iss.path] : [${f}]
          })));
        }
        
        
        if (${c}.value === undefined) {
          if (${f} in input) {
            newResult[${f}] = undefined;
          }
        } else {
          newResult[${f}] = ${c}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");let h=b.compile();return(b,c)=>h(a,b,c)})(b.shape)),j=c(j,k),i)?li([],l,j,k,d,a):j:e(j,k):(j.issues.push({expected:"object",code:"invalid_type",input:l,inst:a}),j)}});function ll(a,b,c,d){for(let c of a)if(0===c.issues.length)return b.value=c.value,b;let e=a.filter(a=>!jM(a));return 1===e.length?(b.value=e[0].value,e[0]):(b.issues.push({code:"invalid_union",input:b.value,inst:c,errors:a.map(a=>a.issues.map(a=>jP(a,d,jr())))}),b)}let lm=jn("$ZodUnion",(a,b)=>{kJ.init(a,b),jx(a._zod,"optin",()=>b.options.some(a=>"optional"===a._zod.optin)?"optional":void 0),jx(a._zod,"optout",()=>b.options.some(a=>"optional"===a._zod.optout)?"optional":void 0),jx(a._zod,"values",()=>{if(b.options.every(a=>a._zod.values))return new Set(b.options.flatMap(a=>Array.from(a._zod.values)))}),jx(a._zod,"pattern",()=>{if(b.options.every(a=>a._zod.pattern)){let a=b.options.map(a=>a._zod.pattern);return RegExp(`^(${a.map(a=>jv(a.source)).join("|")})$`)}});let c=1===b.options.length,d=b.options[0]._zod.run;a._zod.parse=(e,f)=>{if(c)return d(e,f);let g=!1,h=[];for(let a of b.options){let b=a._zod.run({value:e.value,issues:[]},f);if(b instanceof Promise)h.push(b),g=!0;else{if(0===b.issues.length)return b;h.push(b)}}return g?Promise.all(h).then(b=>ll(b,e,a,f)):ll(h,e,a,f)}}),ln=jn("$ZodIntersection",(a,b)=>{kJ.init(a,b),a._zod.parse=(a,c)=>{let d=a.value,e=b.left._zod.run({value:d,issues:[]},c),f=b.right._zod.run({value:d,issues:[]},c);return e instanceof Promise||f instanceof Promise?Promise.all([e,f]).then(([b,c])=>lo(a,b,c)):lo(a,e,f)}});function lo(a,b,c){if(b.issues.length&&a.issues.push(...b.issues),c.issues.length&&a.issues.push(...c.issues),jM(a))return a;let d=function a(b,c){if(b===c||b instanceof Date&&c instanceof Date&&+b==+c)return{valid:!0,data:b};if(jE(b)&&jE(c)){let d=Object.keys(c),e=Object.keys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1,mergeErrorPath:[d,...e.mergeErrorPath]};f[d]=e.data}return{valid:!0,data:f}}if(Array.isArray(b)&&Array.isArray(c)){if(b.length!==c.length)return{valid:!1,mergeErrorPath:[]};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1,mergeErrorPath:[e,...f.mergeErrorPath]};d.push(f.data)}return{valid:!0,data:d}}return{valid:!1,mergeErrorPath:[]}}(b.value,c.value);if(!d.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(d.mergeErrorPath)}`);return a.value=d.data,a}let lp=jn("$ZodEnum",(a,b)=>{kJ.init(a,b);let c=function(a){let b=Object.values(a).filter(a=>"number"==typeof a);return Object.entries(a).filter(([a,c])=>-1===b.indexOf(+a)).map(([a,b])=>b)}(b.entries),d=new Set(c);a._zod.values=d,a._zod.pattern=RegExp(`^(${c.filter(a=>jG.has(typeof a)).map(a=>"string"==typeof a?jH(a):a.toString()).join("|")})$`),a._zod.parse=(b,e)=>{let f=b.value;return d.has(f)||b.issues.push({code:"invalid_value",values:c,input:f,inst:a}),b}}),lq=jn("$ZodTransform",(a,b)=>{kJ.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new jp(a.constructor.name);let e=b.transform(c.value,c);if(d.async)return(e instanceof Promise?e:Promise.resolve(e)).then(a=>(c.value=a,c));if(e instanceof Promise)throw new jo;return c.value=e,c}});function lr(a,b){return a.issues.length&&void 0===b?{issues:[],value:void 0}:a}let ls=jn("$ZodOptional",(a,b)=>{kJ.init(a,b),a._zod.optin="optional",a._zod.optout="optional",jx(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,void 0]):void 0),jx(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${jv(a.source)})?$`):void 0}),a._zod.parse=(a,c)=>{if("optional"===b.innerType._zod.optin){let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(b=>lr(b,a.value)):lr(d,a.value)}return void 0===a.value?a:b.innerType._zod.run(a,c)}}),lt=jn("$ZodNullable",(a,b)=>{kJ.init(a,b),jx(a._zod,"optin",()=>b.innerType._zod.optin),jx(a._zod,"optout",()=>b.innerType._zod.optout),jx(a._zod,"pattern",()=>{let a=b.innerType._zod.pattern;return a?RegExp(`^(${jv(a.source)}|null)$`):void 0}),jx(a._zod,"values",()=>b.innerType._zod.values?new Set([...b.innerType._zod.values,null]):void 0),a._zod.parse=(a,c)=>null===a.value?a:b.innerType._zod.run(a,c)}),lu=jn("$ZodDefault",(a,b)=>{kJ.init(a,b),a._zod.optin="optional",jx(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);if(void 0===a.value)return a.value=b.defaultValue,a;let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(a=>lv(a,b)):lv(d,b)}});function lv(a,b){return void 0===a.value&&(a.value=b.defaultValue),a}let lw=jn("$ZodPrefault",(a,b)=>{kJ.init(a,b),a._zod.optin="optional",jx(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>("backward"===c.direction||void 0===a.value&&(a.value=b.defaultValue),b.innerType._zod.run(a,c))}),lx=jn("$ZodNonOptional",(a,b)=>{kJ.init(a,b),jx(a._zod,"values",()=>{let a=b.innerType._zod.values;return a?new Set([...a].filter(a=>void 0!==a)):void 0}),a._zod.parse=(c,d)=>{let e=b.innerType._zod.run(c,d);return e instanceof Promise?e.then(b=>ly(b,a)):ly(e,a)}});function ly(a,b){return a.issues.length||void 0!==a.value||a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:b}),a}let lz=jn("$ZodCatch",(a,b)=>{kJ.init(a,b),jx(a._zod,"optin",()=>b.innerType._zod.optin),jx(a._zod,"optout",()=>b.innerType._zod.optout),jx(a._zod,"values",()=>b.innerType._zod.values),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(d=>(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>jP(a,c,jr()))},input:a.value}),a.issues=[]),a)):(a.value=d.value,d.issues.length&&(a.value=b.catchValue({...a,error:{issues:d.issues.map(a=>jP(a,c,jr()))},input:a.value}),a.issues=[]),a)}}),lA=jn("$ZodPipe",(a,b)=>{kJ.init(a,b),jx(a._zod,"values",()=>b.in._zod.values),jx(a._zod,"optin",()=>b.in._zod.optin),jx(a._zod,"optout",()=>b.out._zod.optout),jx(a._zod,"propValues",()=>b.in._zod.propValues),a._zod.parse=(a,c)=>{if("backward"===c.direction){let d=b.out._zod.run(a,c);return d instanceof Promise?d.then(a=>lB(a,b.in,c)):lB(d,b.in,c)}let d=b.in._zod.run(a,c);return d instanceof Promise?d.then(a=>lB(a,b.out,c)):lB(d,b.out,c)}});function lB(a,b,c){return a.issues.length?(a.aborted=!0,a):b._zod.run({value:a.value,issues:a.issues},c)}let lC=jn("$ZodReadonly",(a,b)=>{kJ.init(a,b),jx(a._zod,"propValues",()=>b.innerType._zod.propValues),jx(a._zod,"values",()=>b.innerType._zod.values),jx(a._zod,"optin",()=>b.innerType._zod.optin),jx(a._zod,"optout",()=>b.innerType._zod.optout),a._zod.parse=(a,c)=>{if("backward"===c.direction)return b.innerType._zod.run(a,c);let d=b.innerType._zod.run(a,c);return d instanceof Promise?d.then(lD):lD(d)}});function lD(a){return a.value=Object.freeze(a.value),a}let lE=jn("$ZodCustom",(a,b)=>{kq.init(a,b),kJ.init(a,b),a._zod.parse=(a,b)=>a,a._zod.check=c=>{let d=c.value,e=b.fn(d);if(e instanceof Promise)return e.then(b=>lF(b,c,d,a));lF(e,c,d,a)}});function lF(a,b,c,d){if(!a){let a={code:"custom",input:c,inst:d,path:[...d._zod.def.path??[]],continue:!d._zod.def.abort};d._zod.def.params&&(a.params=d._zod.def.params),b.issues.push(jR(a))}}Symbol("ZodOutput"),Symbol("ZodInput");class lG{constructor(){this._map=new WeakMap,this._idmap=new Map}add(a,...b){let c=b[0];if(this._map.set(a,c),c&&"object"==typeof c&&"id"in c){if(this._idmap.has(c.id))throw Error(`ID ${c.id} already exists in the registry`);this._idmap.set(c.id,a)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(a){let b=this._map.get(a);return b&&"object"==typeof b&&"id"in b&&this._idmap.delete(b.id),this._map.delete(a),this}get(a){let b=a._zod.parent;if(b){let c={...this.get(b)??{}};delete c.id;let d={...c,...this._map.get(a)};return Object.keys(d).length?d:void 0}return this._map.get(a)}has(a){return this._map.has(a)}}let lH=new lG;function lI(a,b){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...jJ(b)})}function lJ(a,b){return new ks({check:"less_than",...jJ(b),value:a,inclusive:!1})}function lK(a,b){return new ks({check:"less_than",...jJ(b),value:a,inclusive:!0})}function lL(a,b){return new kt({check:"greater_than",...jJ(b),value:a,inclusive:!1})}function lM(a,b){return new kt({check:"greater_than",...jJ(b),value:a,inclusive:!0})}function lN(a,b){return new ku({check:"multiple_of",...jJ(b),value:a})}function lO(a,b){return new kw({check:"max_length",...jJ(b),maximum:a})}function lP(a,b){return new kx({check:"min_length",...jJ(b),minimum:a})}function lQ(a,b){return new ky({check:"length_equals",...jJ(b),length:a})}function lR(a){return new kG({check:"overwrite",tx:a})}let lS=jn("ZodISODateTime",(a,b)=>{kX.init(a,b),mc.init(a,b)}),lT=jn("ZodISODate",(a,b)=>{kY.init(a,b),mc.init(a,b)}),lU=jn("ZodISOTime",(a,b)=>{kZ.init(a,b),mc.init(a,b)}),lV=jn("ZodISODuration",(a,b)=>{k$.init(a,b),mc.init(a,b)}),lW=(a,b)=>{jT.init(a,b),a.name="ZodError",Object.defineProperties(a,{format:{value:b=>(function(a,b=a=>a.message){let c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code&&e.errors.length)e.errors.map(a=>d({issues:a}));else if("invalid_key"===e.code)d({issues:e.issues});else if("invalid_element"===e.code)d({issues:e.issues});else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(a),c})(a,b)},flatten:{value:b=>(function(a,b=a=>a.message){let c={},d=[];for(let e of a.issues)e.path.length>0?(c[e.path[0]]=c[e.path[0]]||[],c[e.path[0]].push(b(e))):d.push(b(e));return{formErrors:d,fieldErrors:c}})(a,b)},addIssue:{value:b=>{a.issues.push(b),a.message=JSON.stringify(a.issues,jt,2)}},addIssues:{value:b=>{a.issues.push(...b),a.message=JSON.stringify(a.issues,jt,2)}},isEmpty:{get:()=>0===a.issues.length}})};jn("ZodError",lW);let lX=jn("ZodError",lW,{Parent:Error}),lY=jV(lX),lZ=jW(lX),l$=jX(lX),l_=jZ(lX),l0=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return jV(lX)(a,b,d)},l1=(a,b,c)=>jV(lX)(a,b,c),l2=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return jW(lX)(a,b,d)},l3=async(a,b,c)=>jW(lX)(a,b,c),l4=(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return jX(lX)(a,b,d)},l5=(a,b,c)=>jX(lX)(a,b,c),l6=async(a,b,c)=>{let d=c?Object.assign(c,{direction:"backward"}):{direction:"backward"};return jZ(lX)(a,b,d)},l7=async(a,b,c)=>jZ(lX)(a,b,c),l8=jn("ZodType",(a,b)=>(kJ.init(a,b),a.def=b,a.type=b.type,Object.defineProperty(a,"_def",{value:b}),a.check=(...c)=>a.clone(jz(b,{checks:[...b.checks??[],...c.map(a=>"function"==typeof a?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]})),a.clone=(b,c)=>jI(a,b,c),a.brand=()=>a,a.register=(b,c)=>(b.add(a,c),a),a.parse=(b,c)=>lY(a,b,c,{callee:a.parse}),a.safeParse=(b,c)=>l$(a,b,c),a.parseAsync=async(b,c)=>lZ(a,b,c,{callee:a.parseAsync}),a.safeParseAsync=async(b,c)=>l_(a,b,c),a.spa=a.safeParseAsync,a.encode=(b,c)=>l0(a,b,c),a.decode=(b,c)=>l1(a,b,c),a.encodeAsync=async(b,c)=>l2(a,b,c),a.decodeAsync=async(b,c)=>l3(a,b,c),a.safeEncode=(b,c)=>l4(a,b,c),a.safeDecode=(b,c)=>l5(a,b,c),a.safeEncodeAsync=async(b,c)=>l6(a,b,c),a.safeDecodeAsync=async(b,c)=>l7(a,b,c),a.refine=(b,c)=>a.check(function(a,b={}){return new mW({type:"custom",check:"custom",fn:a,...jJ(b)})}(b,c)),a.superRefine=b=>a.check(function(a){let b=function(a,b){let c=new kq({check:"custom",...jJ(void 0)});return c._zod.check=a,c}(c=>(c.addIssue=a=>{"string"==typeof a?c.issues.push(jR(a,c.value,b._zod.def)):(a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=c.value),a.inst??(a.inst=b),a.continue??(a.continue=!b._zod.def.abort),c.issues.push(jR(a)))},a(c.value,c)));return b}(b)),a.overwrite=b=>a.check(lR(b)),a.optional=()=>mM(a),a.nullable=()=>mO(a),a.nullish=()=>mM(mO(a)),a.nonoptional=b=>new mR({type:"nonoptional",innerType:a,...jJ(b)}),a.array=()=>(function(a,b){return new mF({type:"array",element:a,...jJ(void 0)})})(a),a.or=b=>new mH({type:"union",options:[a,b],...jJ(void 0)}),a.and=b=>new mI({type:"intersection",left:a,right:b}),a.transform=b=>mU(a,new mK({type:"transform",transform:b})),a.default=b=>(function(a,b){return new mP({type:"default",innerType:a,get defaultValue(){return"function"==typeof b?b():jF(b)}})})(a,b),a.prefault=b=>(function(a,b){return new mQ({type:"prefault",innerType:a,get defaultValue(){return"function"==typeof b?b():jF(b)}})})(a,b),a.catch=b=>(function(a,b){return new mS({type:"catch",innerType:a,catchValue:"function"==typeof b?b:()=>b})})(a,b),a.pipe=b=>mU(a,b),a.readonly=()=>new mV({type:"readonly",innerType:a}),a.describe=b=>{let c=a.clone();return lH.add(c,{description:b}),c},Object.defineProperty(a,"description",{get:()=>lH.get(a)?.description,configurable:!0}),a.meta=(...b)=>{if(0===b.length)return lH.get(a);let c=a.clone();return lH.add(c,b[0]),c},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),l9=jn("_ZodString",(a,b)=>{kK.init(a,b),l8.init(a,b);let c=a._zod.bag;a.format=c.format??null,a.minLength=c.minimum??null,a.maxLength=c.maximum??null,a.regex=(...b)=>a.check(function(a,b){return new kA({check:"string_format",format:"regex",...jJ(b),pattern:a})}(...b)),a.includes=(...b)=>a.check(function(a,b){return new kD({check:"string_format",format:"includes",...jJ(b),includes:a})}(...b)),a.startsWith=(...b)=>a.check(function(a,b){return new kE({check:"string_format",format:"starts_with",...jJ(b),prefix:a})}(...b)),a.endsWith=(...b)=>a.check(function(a,b){return new kF({check:"string_format",format:"ends_with",...jJ(b),suffix:a})}(...b)),a.min=(...b)=>a.check(lP(...b)),a.max=(...b)=>a.check(lO(...b)),a.length=(...b)=>a.check(lQ(...b)),a.nonempty=(...b)=>a.check(lP(1,...b)),a.lowercase=b=>a.check(new kB({check:"string_format",format:"lowercase",...jJ(b)})),a.uppercase=b=>a.check(new kC({check:"string_format",format:"uppercase",...jJ(b)})),a.trim=()=>a.check(lR(a=>a.trim())),a.normalize=(...b)=>a.check(function(a){return lR(b=>b.normalize(a))}(...b)),a.toLowerCase=()=>a.check(lR(a=>a.toLowerCase())),a.toUpperCase=()=>a.check(lR(a=>a.toUpperCase()))}),ma=jn("ZodString",(a,b)=>{kK.init(a,b),l9.init(a,b),a.email=b=>a.check(new md({type:"string",format:"email",check:"string_format",abort:!1,...jJ(b)})),a.url=b=>a.check(new mg({type:"string",format:"url",check:"string_format",abort:!1,...jJ(b)})),a.jwt=b=>a.check(new mv({type:"string",format:"jwt",check:"string_format",abort:!1,...jJ(b)})),a.emoji=b=>a.check(new mh({type:"string",format:"emoji",check:"string_format",abort:!1,...jJ(b)})),a.guid=b=>a.check(lI(me,b)),a.uuid=b=>a.check(new mf({type:"string",format:"uuid",check:"string_format",abort:!1,...jJ(b)})),a.uuidv4=b=>a.check(new mf({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...jJ(b)})),a.uuidv6=b=>a.check(new mf({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...jJ(b)})),a.uuidv7=b=>a.check(new mf({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...jJ(b)})),a.nanoid=b=>a.check(new mi({type:"string",format:"nanoid",check:"string_format",abort:!1,...jJ(b)})),a.guid=b=>a.check(lI(me,b)),a.cuid=b=>a.check(new mj({type:"string",format:"cuid",check:"string_format",abort:!1,...jJ(b)})),a.cuid2=b=>a.check(new mk({type:"string",format:"cuid2",check:"string_format",abort:!1,...jJ(b)})),a.ulid=b=>a.check(new ml({type:"string",format:"ulid",check:"string_format",abort:!1,...jJ(b)})),a.base64=b=>a.check(new ms({type:"string",format:"base64",check:"string_format",abort:!1,...jJ(b)})),a.base64url=b=>a.check(new mt({type:"string",format:"base64url",check:"string_format",abort:!1,...jJ(b)})),a.xid=b=>a.check(new mm({type:"string",format:"xid",check:"string_format",abort:!1,...jJ(b)})),a.ksuid=b=>a.check(new mn({type:"string",format:"ksuid",check:"string_format",abort:!1,...jJ(b)})),a.ipv4=b=>a.check(new mo({type:"string",format:"ipv4",check:"string_format",abort:!1,...jJ(b)})),a.ipv6=b=>a.check(new mp({type:"string",format:"ipv6",check:"string_format",abort:!1,...jJ(b)})),a.cidrv4=b=>a.check(new mq({type:"string",format:"cidrv4",check:"string_format",abort:!1,...jJ(b)})),a.cidrv6=b=>a.check(new mr({type:"string",format:"cidrv6",check:"string_format",abort:!1,...jJ(b)})),a.e164=b=>a.check(new mu({type:"string",format:"e164",check:"string_format",abort:!1,...jJ(b)})),a.datetime=b=>a.check(new lS({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...jJ(b)})),a.date=b=>a.check(new lT({type:"string",format:"date",check:"string_format",...jJ(b)})),a.time=b=>a.check(new lU({type:"string",format:"time",check:"string_format",precision:null,...jJ(b)})),a.duration=b=>a.check(new lV({type:"string",format:"duration",check:"string_format",...jJ(b)}))});function mb(a){return new ma({type:"string",...jJ(a)})}let mc=jn("ZodStringFormat",(a,b)=>{kL.init(a,b),l9.init(a,b)}),md=jn("ZodEmail",(a,b)=>{kO.init(a,b),mc.init(a,b)}),me=jn("ZodGUID",(a,b)=>{kM.init(a,b),mc.init(a,b)}),mf=jn("ZodUUID",(a,b)=>{kN.init(a,b),mc.init(a,b)}),mg=jn("ZodURL",(a,b)=>{kP.init(a,b),mc.init(a,b)}),mh=jn("ZodEmoji",(a,b)=>{kQ.init(a,b),mc.init(a,b)}),mi=jn("ZodNanoID",(a,b)=>{kR.init(a,b),mc.init(a,b)}),mj=jn("ZodCUID",(a,b)=>{kS.init(a,b),mc.init(a,b)}),mk=jn("ZodCUID2",(a,b)=>{kT.init(a,b),mc.init(a,b)}),ml=jn("ZodULID",(a,b)=>{kU.init(a,b),mc.init(a,b)}),mm=jn("ZodXID",(a,b)=>{kV.init(a,b),mc.init(a,b)}),mn=jn("ZodKSUID",(a,b)=>{kW.init(a,b),mc.init(a,b)}),mo=jn("ZodIPv4",(a,b)=>{k_.init(a,b),mc.init(a,b)}),mp=jn("ZodIPv6",(a,b)=>{k0.init(a,b),mc.init(a,b)}),mq=jn("ZodCIDRv4",(a,b)=>{k1.init(a,b),mc.init(a,b)}),mr=jn("ZodCIDRv6",(a,b)=>{k2.init(a,b),mc.init(a,b)}),ms=jn("ZodBase64",(a,b)=>{k4.init(a,b),mc.init(a,b)}),mt=jn("ZodBase64URL",(a,b)=>{k5.init(a,b),mc.init(a,b)}),mu=jn("ZodE164",(a,b)=>{k6.init(a,b),mc.init(a,b)}),mv=jn("ZodJWT",(a,b)=>{k7.init(a,b),mc.init(a,b)}),mw=jn("ZodNumber",(a,b)=>{k8.init(a,b),l8.init(a,b),a.gt=(b,c)=>a.check(lL(b,c)),a.gte=(b,c)=>a.check(lM(b,c)),a.min=(b,c)=>a.check(lM(b,c)),a.lt=(b,c)=>a.check(lJ(b,c)),a.lte=(b,c)=>a.check(lK(b,c)),a.max=(b,c)=>a.check(lK(b,c)),a.int=b=>a.check(my(b)),a.safe=b=>a.check(my(b)),a.positive=b=>a.check(lL(0,b)),a.nonnegative=b=>a.check(lM(0,b)),a.negative=b=>a.check(lJ(0,b)),a.nonpositive=b=>a.check(lK(0,b)),a.multipleOf=(b,c)=>a.check(lN(b,c)),a.step=(b,c)=>a.check(lN(b,c)),a.finite=()=>a;let c=a._zod.bag;a.minValue=Math.max(c.minimum??-1/0,c.exclusiveMinimum??-1/0)??null,a.maxValue=Math.min(c.maximum??1/0,c.exclusiveMaximum??1/0)??null,a.isInt=(c.format??"").includes("int")||Number.isSafeInteger(c.multipleOf??.5),a.isFinite=!0,a.format=c.format??null}),mx=jn("ZodNumberFormat",(a,b)=>{k9.init(a,b),mw.init(a,b)});function my(a){return new mx({type:"number",check:"number_format",abort:!1,format:"safeint",...jJ(a)})}let mz=jn("ZodBoolean",(a,b)=>{la.init(a,b),l8.init(a,b)}),mA=jn("ZodUnknown",(a,b)=>{lb.init(a,b),l8.init(a,b)});function mB(){return new mA({type:"unknown"})}let mC=jn("ZodNever",(a,b)=>{lc.init(a,b),l8.init(a,b)}),mD=jn("ZodDate",(a,b)=>{ld.init(a,b),l8.init(a,b),a.min=(b,c)=>a.check(lM(b,c)),a.max=(b,c)=>a.check(lK(b,c));let c=a._zod.bag;a.minDate=c.minimum?new Date(c.minimum):null,a.maxDate=c.maximum?new Date(c.maximum):null});function mE(a){return new mD({type:"date",...jJ(a)})}let mF=jn("ZodArray",(a,b)=>{lf.init(a,b),l8.init(a,b),a.element=b.element,a.min=(b,c)=>a.check(lP(b,c)),a.nonempty=b=>a.check(lP(1,b)),a.max=(b,c)=>a.check(lO(b,c)),a.length=(b,c)=>a.check(lQ(b,c)),a.unwrap=()=>a.element}),mG=jn("ZodObject",(a,b)=>{lk.init(a,b),l8.init(a,b),jx(a,"shape",()=>b.shape),a.keyof=()=>(function(a,b){return new mJ({type:"enum",entries:Array.isArray(a)?Object.fromEntries(a.map(a=>[a,a])):a,...jJ(void 0)})})(Object.keys(a._zod.def.shape)),a.catchall=b=>a.clone({...a._zod.def,catchall:b}),a.passthrough=()=>a.clone({...a._zod.def,catchall:mB()}),a.loose=()=>a.clone({...a._zod.def,catchall:mB()}),a.strict=()=>a.clone({...a._zod.def,catchall:new mC({type:"never",...jJ(void 0)})}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=b=>(function(a,b){if(!jE(b))throw Error("Invalid input to extend: expected a plain object");let c=a._zod.def.checks;if(c&&c.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let d=jz(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b};return jy(this,"shape",c),c},checks:[]});return jI(a,d)})(a,b),a.safeExtend=b=>(function(a,b){if(!jE(b))throw Error("Invalid input to safeExtend: expected a plain object");let c={...a._zod.def,get shape(){let c={...a._zod.def.shape,...b};return jy(this,"shape",c),c},checks:a._zod.def.checks};return jI(a,c)})(a,b),a.merge=b=>(function(a,b){let c=jz(a._zod.def,{get shape(){let c={...a._zod.def.shape,...b._zod.def.shape};return jy(this,"shape",c),c},get catchall(){return b._zod.def.catchall},checks:[]});return jI(a,c)})(a,b),a.pick=b=>(function(a,b){let c=a._zod.def,d=jz(a._zod.def,{get shape(){let a={};for(let d in b){if(!(d in c.shape))throw Error(`Unrecognized key: "${d}"`);b[d]&&(a[d]=c.shape[d])}return jy(this,"shape",a),a},checks:[]});return jI(a,d)})(a,b),a.omit=b=>(function(a,b){let c=a._zod.def,d=jz(a._zod.def,{get shape(){let d={...a._zod.def.shape};for(let a in b){if(!(a in c.shape))throw Error(`Unrecognized key: "${a}"`);b[a]&&delete d[a]}return jy(this,"shape",d),d},checks:[]});return jI(a,d)})(a,b),a.partial=(...b)=>(function(a,b,c){let d=jz(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in d))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=a?new a({type:"optional",innerType:d[b]}):d[b])}else for(let b in d)e[b]=a?new a({type:"optional",innerType:d[b]}):d[b];return jy(this,"shape",e),e},checks:[]});return jI(b,d)})(mL,a,b[0]),a.required=(...b)=>(function(a,b,c){let d=jz(b._zod.def,{get shape(){let d=b._zod.def.shape,e={...d};if(c)for(let b in c){if(!(b in e))throw Error(`Unrecognized key: "${b}"`);c[b]&&(e[b]=new a({type:"nonoptional",innerType:d[b]}))}else for(let b in d)e[b]=new a({type:"nonoptional",innerType:d[b]});return jy(this,"shape",e),e},checks:[]});return jI(b,d)})(mR,a,b[0])}),mH=jn("ZodUnion",(a,b)=>{lm.init(a,b),l8.init(a,b),a.options=b.options}),mI=jn("ZodIntersection",(a,b)=>{ln.init(a,b),l8.init(a,b)}),mJ=jn("ZodEnum",(a,b)=>{lp.init(a,b),l8.init(a,b),a.enum=b.entries,a.options=Object.values(b.entries);let c=new Set(Object.keys(b.entries));a.extract=(a,d)=>{let e={};for(let d of a)if(c.has(d))e[d]=b.entries[d];else throw Error(`Key ${d} not found in enum`);return new mJ({...b,checks:[],...jJ(d),entries:e})},a.exclude=(a,d)=>{let e={...b.entries};for(let b of a)if(c.has(b))delete e[b];else throw Error(`Key ${b} not found in enum`);return new mJ({...b,checks:[],...jJ(d),entries:e})}}),mK=jn("ZodTransform",(a,b)=>{lq.init(a,b),l8.init(a,b),a._zod.parse=(c,d)=>{if("backward"===d.direction)throw new jp(a.constructor.name);c.addIssue=d=>{"string"==typeof d?c.issues.push(jR(d,c.value,b)):(d.fatal&&(d.continue=!1),d.code??(d.code="custom"),d.input??(d.input=c.value),d.inst??(d.inst=a),c.issues.push(jR(d)))};let e=b.transform(c.value,c);return e instanceof Promise?e.then(a=>(c.value=a,c)):(c.value=e,c)}}),mL=jn("ZodOptional",(a,b)=>{ls.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType});function mM(a){return new mL({type:"optional",innerType:a})}let mN=jn("ZodNullable",(a,b)=>{lt.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType});function mO(a){return new mN({type:"nullable",innerType:a})}let mP=jn("ZodDefault",(a,b)=>{lu.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap}),mQ=jn("ZodPrefault",(a,b)=>{lw.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType}),mR=jn("ZodNonOptional",(a,b)=>{lx.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType}),mS=jn("ZodCatch",(a,b)=>{lz.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap}),mT=jn("ZodPipe",(a,b)=>{lA.init(a,b),l8.init(a,b),a.in=b.in,a.out=b.out});function mU(a,b){return new mT({type:"pipe",in:a,out:b})}let mV=jn("ZodReadonly",(a,b)=>{lC.init(a,b),l8.init(a,b),a.unwrap=()=>a._zod.def.innerType}),mW=jn("ZodCustom",(a,b)=>{lE.init(a,b),l8.init(a,b)});function mX(a){return new ma({type:"string",coerce:!0,...jJ(a)})}j||(j={}),jr({localeError:(()=>{let a={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}},b={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return c=>{switch(c.code){case"invalid_type":return`Invalid input: expected ${c.expected}, received ${(a=>{let b=typeof a;switch(b){case"number":return Number.isNaN(a)?"NaN":"number";case"object":if(Array.isArray(a))return"array";if(null===a)return"null";if(Object.getPrototypeOf(a)!==Object.prototype&&a.constructor)return a.constructor.name}return b})(c.input)}`;case"invalid_value":if(1===c.values.length)return`Invalid input: expected ${jK(c.values[0])}`;return`Invalid option: expected one of ${js(c.values,"|")}`;case"too_big":{let b=c.inclusive?"<=":"<",d=a[c.origin]??null;if(d)return`Too big: expected ${c.origin??"value"} to have ${b}${c.maximum.toString()} ${d.unit??"elements"}`;return`Too big: expected ${c.origin??"value"} to be ${b}${c.maximum.toString()}`}case"too_small":{let b=c.inclusive?">=":">",d=a[c.origin]??null;if(d)return`Too small: expected ${c.origin} to have ${b}${c.minimum.toString()} ${d.unit}`;return`Too small: expected ${c.origin} to be ${b}${c.minimum.toString()}`}case"invalid_format":if("starts_with"===c.format)return`Invalid string: must start with "${c.prefix}"`;if("ends_with"===c.format)return`Invalid string: must end with "${c.suffix}"`;if("includes"===c.format)return`Invalid string: must include "${c.includes}"`;if("regex"===c.format)return`Invalid string: must match pattern ${c.pattern}`;return`Invalid ${b[c.format]??c.format}`;case"not_multiple_of":return`Invalid number: must be a multiple of ${c.divisor}`;case"unrecognized_keys":return`Unrecognized key${c.keys.length>1?"s":""}: ${js(c.keys,", ")}`;case"invalid_key":return`Invalid key in ${c.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${c.origin}`}}})()});let mY=new mG({type:"object",shape:{id:mb(),createdAt:mE().default(()=>new Date),updatedAt:mE().default(()=>new Date)}??{},...jJ(void 0)});function mZ(a){if(null===a||"object"!=typeof a)return!1;let b=Object.getPrototypeOf(a);return(null===b||b===Object.prototype||null===Object.getPrototypeOf(b))&&!(Symbol.iterator in a)&&(!(Symbol.toStringTag in a)||"[object Module]"===Object.prototype.toString.call(a))}function m$(a){return(...b)=>b.reduce((b,c)=>(function a(b,c,d=".",e){if(!mZ(c))return a(b,{},d,e);let f=Object.assign({},c);for(let c in b){if("__proto__"===c||"constructor"===c)continue;let g=b[c];null!=g&&(e&&e(f,c,g,d)||(Array.isArray(g)&&Array.isArray(f[c])?f[c]=[...g,...f[c]]:mZ(g)&&mZ(f[c])?f[c]=a(g,f[c],(d?`${d}.`:"")+c.toString(),e):f[c]=g))}return f})(b,c,"",a),{})}mY.extend({email:mb().transform(a=>a.toLowerCase()),emailVerified:new mz({type:"boolean",...jJ(void 0)}).default(!1),name:mb(),image:mb().nullish()}),mY.extend({providerId:mb(),accountId:mb(),userId:mX(),accessToken:mb().nullish(),refreshToken:mb().nullish(),idToken:mb().nullish(),accessTokenExpiresAt:mE().nullish(),refreshTokenExpiresAt:mE().nullish(),scope:mb().nullish(),password:mb().nullish()}),mY.extend({userId:mX(),expiresAt:mE(),token:mb(),ipAddress:mb().nullish(),userAgent:mb().nullish()}),mY.extend({value:mb(),expiresAt:mE(),identifier:mb()});let m_=m$();function m0(a){return"-"===a||"^"===a||"$"===a||"+"===a||"."===a||"("===a||")"===a||"|"===a||"["===a||"]"===a||"{"===a||"}"===a||"*"===a||"?"===a||"\\"===a?`\\${a}`:a}function m1(a,b){if("string"!=typeof b)throw TypeError(`Sample must be a string, but ${typeof b} given`);return a.test(b)}function m2(a,b){if("string"!=typeof a&&!Array.isArray(a))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof a} given`);if(("string"==typeof b||"boolean"==typeof b)&&(b={separator:b}),2==arguments.length&&!(void 0===b||"object"==typeof b&&null!==b&&!Array.isArray(b)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof b} given`);if("\\"===(b=b||{}).separator)throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let c=function a(b,c=!0){if(Array.isArray(b)){let d=b.map(b=>`^${a(b,c)}$`);return`(?:${d.join("|")})`}let d="",e="",f=".";!0===c?(d="/",e="[/\\\\]",f="[^/\\\\]"):c&&((e=function(a){let b="";for(let c=0;c<a.length;c++)b+=m0(a[c]);return b}(d=c)).length>1?(e=`(?:${e})`,f=`((?!${e}).)`):f=`[^${e}]`);let g=c?`${e}+?`:"",h=c?`${e}*?`:"",i=c?b.split(d):[b],j="";for(let a=0;a<i.length;a++){let b=i[a],d=i[a+1],e="";if(b||!(a>0)){if(c&&(e=a===i.length-1?h:"**"!==d?g:""),c&&"**"===b){e&&(j+=0===a?"":e,j+=`(?:${f}*?${e})*?`);continue}for(let a=0;a<b.length;a++){let c=b[a];"\\"===c?a<b.length-1&&(j+=m0(b[a+1]),a++):"?"===c?j+=f:"*"===c?j+=`${f}*?`:j+=m0(c)}j+=e}}return j}(a,b.separator),d=RegExp(`^${c}$`,b.flags),e=m1.bind(null,d);return e.options=b,e.pattern=a,e.regexp=d,e}m$((a,b,c)=>{if(void 0!==a[b]&&"function"==typeof c)return a[b]=c(a[b]),!0}),m$((a,b,c)=>{if(Array.isArray(a[b])&&"function"==typeof c)return a[b]=c(a[b]),!0});let m3=gs(async a=>{if(a.request?.method!=="POST"||!a.request)return;let{body:b,query:c,context:d}=a,e=a.headers?.get("origin")||a.headers?.get("referer")||"",f=b?.callbackURL||c?.callbackURL,g=b?.redirectTo,h=b?.errorCallbackURL,i=b?.newUserCallbackURL,j=Array.isArray(d.options.trustedOrigins)?d.trustedOrigins:[...d.trustedOrigins,...await d.options.trustedOrigins?.(a.request)||[]],k=a.headers?.has("cookie"),l=(b,c)=>{if(b&&!j.some(a=>((a,b)=>{if(a.startsWith("/"))return!1;if(b.includes("*"))return b.includes("://")?m2(b)(gh(a)||a):m2(b)(gj(a));let c=gi(a);return"http:"!==c&&"https:"!==c&&c?a.startsWith(b):b===gh(a)})(b,a)||b?.startsWith("/")&&"origin"!==c&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(b)))throw a.context.logger.error(`Invalid ${c}: ${b}`),a.context.logger.info(`If it's a valid URL, please add ${b} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${j}`),new t("FORBIDDEN",{message:`Invalid ${c}`})};k&&!a.context.options.advanced?.disableCSRFCheck&&l(e,"origin"),f&&l(f,"callbackURL"),g&&l(g,"redirectURL"),h&&l(h,"errorCallbackURL"),i&&l(i,"newUserCallbackURL")}),m4=a=>gs(async b=>{if(!b.request)return;let{context:c}=b,d=a(b),e=Array.isArray(c.options.trustedOrigins)?c.trustedOrigins:[...c.trustedOrigins,...await c.options.trustedOrigins?.(b.request)||[]],f=(a,c)=>{if(a&&!e.some(b=>((a,b)=>{if(a.startsWith("/"))return!1;if(b.includes("*"))return b.includes("://")?m2(b)(gh(a)||a):m2(b)(gj(a));let c=gi(a);return"http:"!==c&&"https:"!==c&&c?a.startsWith(b):b===gh(a)})(a,b)||a?.startsWith("/")&&"origin"!==c&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(a)))throw b.context.logger.error(`Invalid ${c}: ${a}`),b.context.logger.info(`If it's a valid URL, please add ${a} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${e}`),new t("FORBIDDEN",{message:`Invalid ${c}`})};for(let a of Array.isArray(d)?d:[d])f(a,"callbackURL")});async function m5(a,b,c,d=3600){return await iE({email:b.toLowerCase(),updateTo:c},a,d)}async function m6(a,b){if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new t("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await m5(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;await a.context.options.emailVerification.sendVerificationEmail({user:b,url:d,token:c},a.request)}let m7=gt("/send-verification-email",{method:"POST",body:fq({email:ej(eT,void 0).meta({description:"The email to send the verification email to"}),callbackURL:eR().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async a=>{if(!a.context.options.emailVerification?.sendVerificationEmail)throw a.context.logger.error("Verification email isn't enabled."),new t("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:b}=a.body,c=await gx(a);if(!c){let c=await a.context.internalAdapter.findUserByEmail(b);return c&&await m6(a,c.user),a.json({status:!0})}if(c?.user.emailVerified)throw new t("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(c?.user.email!==b)throw new t("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await m6(a,c.user),a.json({status:!0})}),m8=gt("/verify-email",{method:"GET",query:fq({token:eR().meta({description:"The token to verify the email"}),callbackURL:eR().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[m4(a=>a.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string",description:"User ID"},email:{type:"string",description:"User email"},name:{type:"string",description:"User name"},image:{type:"string",description:"User image URL"},emailVerified:{type:"boolean",description:"Indicates if the user email is verified"},createdAt:{type:"string",description:"User creation date"},updatedAt:{type:"string",description:"User update date"}},required:["id","email","name","image","emailVerified","createdAt","updatedAt"]},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async a=>{let b;function c(b){if(a.query.callbackURL){if(a.query.callbackURL.includes("?"))throw a.redirect(`${a.query.callbackURL}&error=${b}`);throw a.redirect(`${a.query.callbackURL}?error=${b}`)}throw new t("UNAUTHORIZED",{message:b})}let{token:d}=a.query;try{b=await ja(d,new TextEncoder().encode(a.context.secret),{algorithms:["HS256"]})}catch(a){if(a instanceof hl)return c("token_expired");return c("invalid_token")}let e=fq({email:eR().email(),updateTo:eR().optional()}).parse(b.payload),f=await a.context.internalAdapter.findUserByEmail(e.email);if(!f)return c("user_not_found");if(e.updateTo){let b=await gx(a);if(!b||b.user.email!==e.email){if(a.query.callbackURL)throw a.redirect(`${a.query.callbackURL}?error=unauthorized`);return c("unauthorized")}let d=await a.context.internalAdapter.updateUserByEmail(e.email,{email:e.updateTo,emailVerified:!1},a),f=await m5(a.context.secret,e.updateTo);if(await a.context.options.emailVerification?.sendVerificationEmail?.({user:d,url:`${a.context.baseURL}/verify-email?token=${f}&callbackURL=${a.query.callbackURL||"/"}`,token:f},a.request),await gp(a,{session:b.session,user:{...b.user,email:e.updateTo,emailVerified:!1}}),a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:{id:d.id,email:d.email,name:d.name,image:d.image,emailVerified:d.emailVerified,createdAt:d.createdAt,updatedAt:d.updatedAt}})}a.context.options.emailVerification?.onEmailVerification&&await a.context.options.emailVerification.onEmailVerification(f.user,a.request);let g=await a.context.internalAdapter.updateUserByEmail(e.email,{emailVerified:!0},a);if(a.context.options.emailVerification?.afterEmailVerification&&await a.context.options.emailVerification.afterEmailVerification(g,a.request),a.context.options.emailVerification?.autoSignInAfterVerification){let b=await gx(a);if(b&&b.user.email===e.email)await gp(a,{session:b.session,user:{...b.user,emailVerified:!0}});else{let b=await a.context.internalAdapter.createSession(f.user.id,a);if(!b)throw new t("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await gp(a,{session:b,user:{...f.user,emailVerified:!0}})}}if(a.query.callbackURL)throw a.redirect(a.query.callbackURL);return a.json({status:!0,user:null})}),m9={isAction:!1};async function na(a,b){let c=a.body?.callbackURL||a.context.options.baseURL;if(!c)throw new t("BAD_REQUEST",{message:"callbackURL is required"});let d=iD(128),e=iD(32),f=a.context.createAuthCookie("state",{maxAge:3e5});await a.setSignedCookie(f.name,e,a.context.secret,f.attributes);let g=JSON.stringify({callbackURL:c,codeVerifier:d,errorURL:a.body?.errorCallbackURL,newUserURL:a.body?.newUserCallbackURL,link:b,expiresAt:Date.now()+6e5,requestSignUp:a.body?.requestSignUp}),h=new Date;h.setMinutes(h.getMinutes()+10);let i=await a.context.internalAdapter.createVerificationValue({value:g,identifier:e,expiresAt:h},a);if(!i)throw a.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new t("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:i.identifier,codeVerifier:d}}async function nb(a){let b=a.query.state||a.body.state,c=await a.context.internalAdapter.findVerificationValue(b);if(!c){a.context.logger.error("State Mismatch. Verification not found",{state:b});let c=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${c}?error=please_restart_the_process`)}let d=fq({callbackURL:eR(),codeVerifier:eR(),errorURL:eR().optional(),newUserURL:eR().optional(),expiresAt:fb(),link:fq({email:eR(),userId:fM()}).optional(),requestSignUp:ff().optional()}).parse(JSON.parse(c.value));d.errorURL||(d.errorURL=`${a.context.baseURL}/error`);let e=a.context.createAuthCookie("state"),f=await a.getSignedCookie(e.name,a.context.secret);if(!a.context.oauthConfig?.skipStateCookieCheck&&(!f||f!==b)){let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=state_mismatch`)}if(a.setCookie(e.name,"",{maxAge:0}),d.expiresAt<Date.now()){await a.context.internalAdapter.deleteVerificationValue(c.id);let b=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${b}?error=please_restart_the_process`)}return await a.context.internalAdapter.deleteVerificationValue(c.id),d}async function nc(a){let b=await gE("SHA-256").digest(a);return f2.encode(new Uint8Array(b),{padding:!1})}function nd(a){return{tokenType:a.token_type,accessToken:a.access_token,refreshToken:a.refresh_token,accessTokenExpiresAt:a.expires_in?fO(a.expires_in,"sec"):void 0,refreshTokenExpiresAt:a.refresh_token_expires_in?fO(a.refresh_token_expires_in,"sec"):void 0,scopes:a?.scope?"string"==typeof a.scope?a.scope.split(" "):a.scope:[],idToken:a.id_token}}function ne(a,b){return b.options.account?.encryptOAuthTokens&&a?iK({key:b.secret,data:a}):a}async function nf(a,{userInfo:b,account:c,callbackURL:d,disableSignUp:e,overrideUserInfo:f}){let g=await a.context.internalAdapter.findOAuthUser(b.email.toLowerCase(),c.accountId,c.providerId).catch(b=>{gd.error("Better auth was unable to query your database.\nError: ",b);let c=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;throw a.redirect(`${c}?error=internal_server_error`)}),h=g?.user,i=!h;if(g){let d=g.accounts.find(a=>a.providerId===c.providerId&&a.accountId===c.accountId);if(d){if(a.context.options.account?.updateAccountOnSignIn!==!1){let b=Object.fromEntries(Object.entries({idToken:c.idToken,accessToken:await ne(c.accessToken,a.context),refreshToken:await ne(c.refreshToken,a.context),accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scope}).filter(([a,b])=>void 0!==b));Object.keys(b).length>0&&await a.context.internalAdapter.updateAccount(d.id,b,a)}b.emailVerified&&!g.user.emailVerified&&b.email.toLowerCase()===g.user.email&&await a.context.internalAdapter.updateUser(g.user.id,{emailVerified:!0})}else{let d=a.context.options.account?.accountLinking?.trustedProviders;if(!d?.includes(c.providerId)&&!b.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return fV&&gd.warn(`User already exist but account isn't linked to ${c.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await a.context.internalAdapter.linkAccount({providerId:c.providerId,accountId:b.id.toString(),userId:g.user.id,accessToken:await ne(c.accessToken,a.context),refreshToken:await ne(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scope},a)}catch(a){return gd.error("Unable to link account",a),{error:"unable to link account",data:null}}b.emailVerified&&!g.user.emailVerified&&b.email.toLowerCase()===g.user.email&&await a.context.internalAdapter.updateUser(g.user.id,{emailVerified:!0})}if(f){let{id:c,...d}=b;await a.context.internalAdapter.updateUser(g.user.id,{...d,email:b.email.toLowerCase(),emailVerified:b.email.toLowerCase()===g.user.email&&g.user.emailVerified||b.emailVerified})}}else{if(e)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:e,...f}=b;if(h=await a.context.internalAdapter.createOAuthUser({...f,email:b.email.toLowerCase()},{accessToken:await ne(c.accessToken,a.context),refreshToken:await ne(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scope,providerId:c.providerId,accountId:b.id.toString()},a).then(a=>a?.user),!b.emailVerified&&h&&a.context.options.emailVerification?.sendOnSignUp){let b=await m5(a.context.secret,h.email,void 0,a.context.options.emailVerification?.expiresIn),c=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${d}`;await a.context.options.emailVerification?.sendVerificationEmail?.({user:h,url:c,token:b},a.request)}}catch(a){if(gd.error(a),a instanceof t)return{error:a.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!h)return{error:"unable to create user",data:null,isRegister:!1};let j=await a.context.internalAdapter.createSession(h.id,a);return j?{data:{session:j,user:h},error:null,isRegister:i}:{error:"unable to create session",data:null,isRegister:!1}}async function ng({id:a,options:b,authorizationEndpoint:c,state:d,codeVerifier:e,scopes:f,claims:g,redirectURI:h,duration:i,prompt:j,accessType:k,responseType:l,display:m,loginHint:n,hd:o,responseMode:p,additionalParams:q,scopeJoiner:r}){let s=new URL(c);s.searchParams.set("response_type",l||"code");let t=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;if(s.searchParams.set("client_id",t),s.searchParams.set("state",d),s.searchParams.set("scope",f.join(r||" ")),s.searchParams.set("redirect_uri",b.redirectURI||h),i&&s.searchParams.set("duration",i),m&&s.searchParams.set("display",m),n&&s.searchParams.set("login_hint",n),j&&s.searchParams.set("prompt",j),o&&s.searchParams.set("hd",o),k&&s.searchParams.set("access_type",k),p&&s.searchParams.set("response_mode",p),e){let a=await nc(e);s.searchParams.set("code_challenge_method","S256"),s.searchParams.set("code_challenge",a)}if(g){let a=g.reduce((a,b)=>(a[b]=null,a),{});s.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...a}}))}return q&&Object.entries(q).forEach(([a,b])=>{s.searchParams.set(a,b)}),s}async function nh({code:a,codeVerifier:b,redirectURI:c,options:d,tokenEndpoint:e,authentication:f,deviceId:g,headers:h,additionalParams:i={},resource:j}){let{body:k,headers:l}=function({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:e,deviceId:f,headers:g,additionalParams:h={},resource:i}){let j=new URLSearchParams,k={"content-type":"application/x-www-form-urlencoded",accept:"application/json","user-agent":"better-auth",...g};if(j.set("grant_type","authorization_code"),j.set("code",a),b&&j.set("code_verifier",b),d.clientKey&&j.set("client_key",d.clientKey),f&&j.set("device_id",f),j.set("redirect_uri",d.redirectURI||c),i)if("string"==typeof i)j.append("resource",i);else for(let a of i)j.append("resource",a);if("basic"===e){let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId,b=f1.encode(`${a}:${d.clientSecret??""}`);k.authorization=`Basic ${b}`}else{let a=Array.isArray(d.clientId)?d.clientId[0]:d.clientId;j.set("client_id",a),d.clientSecret&&j.set("client_secret",d.clientSecret)}for(let[a,b]of Object.entries(h))j.has(a)||j.append(a,b);return{body:j,headers:k}}({code:a,codeVerifier:b,redirectURI:c,options:d,authentication:f,deviceId:g,headers:h,additionalParams:i,resource:j}),{data:m,error:n}=await i6(e,{method:"POST",body:k,headers:l});if(n)throw n;return nd(m)}async function ni({refreshToken:a,options:b,tokenEndpoint:c,authentication:d,extraParams:e}){let{body:f,headers:g}=function({refreshToken:a,options:b,authentication:c,extraParams:d,resource:e}){let f=new URLSearchParams,g={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(f.set("grant_type","refresh_token"),f.set("refresh_token",a),"basic"===c){let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;a?g.authorization="Basic "+f1.encode(`${a}:${b.clientSecret??""}`):g.authorization="Basic "+f1.encode(`:${b.clientSecret??""}`)}else{let a=Array.isArray(b.clientId)?b.clientId[0]:b.clientId;f.set("client_id",a),b.clientSecret&&f.set("client_secret",b.clientSecret)}if(e)if("string"==typeof e)f.append("resource",e);else for(let a of e)f.append("resource",a);if(d)for(let[a,b]of Object.entries(d))f.set(a,b);return{body:f,headers:g}}({refreshToken:a,options:b,authentication:d,extraParams:e}),{data:h,error:i}=await i6(c,{method:"POST",body:f,headers:g});if(i)throw i;let j={accessToken:h.access_token,refreshToken:h.refresh_token,tokenType:h.token_type,scopes:h.scope?.split(" "),idToken:h.id_token};return h.expires_in&&(j.accessTokenExpiresAt=new Date(new Date().getTime()+1e3*h.expires_in)),j}let nj=async a=>{let{data:b}=await i6("https://appleid.apple.com/auth/keys");if(!b?.keys)throw new t("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await jd(c,c.alg)},nk=async(a,b,c)=>{let d=`https://cognito-idp.${b}.amazonaws.com/${c}/.well-known/jwks.json`;try{let{data:b}=await i6(d);if(!b?.keys)throw new t("BAD_REQUEST",{message:"Keys not found"});let c=b.keys.find(b=>b.kid===a);if(!c)throw Error(`JWK with kid ${a} not found`);return await jd(c,c.alg)}catch(a){throw gd.error("Failed to fetch Cognito public key:",a),a}},nl=(a="")=>a.split("://").map(a=>a.replace(/\/{2,}/g,"/")).join("://"),nm={apple:a=>({id:"apple",name:"Apple",async createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["email","name"];return a.scope&&e.push(...a.scope),c&&e.push(...c),await ng({id:"apple",options:a,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:e,state:b,redirectURI:d,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let{kid:d,alg:e}=jb(b);if(!d||!e)return!1;let f=await nj(d),{payload:g}=await ja(b,f,{algorithms:[e],issuer:"https://appleid.apple.com",audience:a.audience&&a.audience.length?a.audience:a.appBundleIdentifier?a.appBundleIdentifier:a.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(a=>{void 0!==g[a]&&(g[a]=!!g[a])}),(!c||g.nonce===c)&&!!g},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=jc(b.idToken);if(!c)return null;let d=b.user?`${b.user.name?.firstName} ${b.user.name?.lastName}`:c.name||c.email,e="boolean"==typeof c.email_verified?c.email_verified:"true"===c.email_verified,f={...c,name:d},g=await a.mapProfileToUser?.(f);return{user:{id:c.sub,name:f.name,emailVerified:e,email:c.email,...g},data:f}},options:a}),atlassian:a=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw gd.error("Client Id and Secret are required for Atlassian"),new fP("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new fP("codeVerifier is required for Atlassian");let f=a.disableDefaultScope?[]:["read:jira-user","offline_access"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"atlassian",options:a,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e,additionalParams:{audience:"api.atlassian.com"},prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;try{let{data:c}=await i6("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name,email:c.email,image:c.picture,emailVerified:!1,...d},data:c}}catch(a){return gd.error("Failed to fetch user info from Figma:",a),null}},options:a}),cognito:a=>{if(!a.domain||!a.region||!a.userPoolId)throw gd.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new fP("DOMAIN_AND_REGION_REQUIRED");let b=a.domain.replace(/^https?:\/\//,""),c=`https://${b}/oauth2/authorize`,d=`https://${b}/oauth2/token`,e=`https://${b}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId)throw gd.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new fP("CLIENT_ID_AND_SECRET_REQUIRED");if(a.requireClientSecret&&!a.clientSecret)throw gd.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new fP("CLIENT_SECRET_REQUIRED");let g=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&g.push(...a.scope),d&&g.push(...d),await ng({id:"cognito",options:{...a},authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:f,prompt:a.prompt})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>nh({code:b,codeVerifier:c,redirectURI:e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:d}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{let{kid:d,alg:e}=jb(b);if(!d||!e)return!1;let f=await nk(d,a.region,a.userPoolId),g=`https://cognito-idp.${a.region}.amazonaws.com/${a.userPoolId}`,{payload:h}=await ja(b,f,{algorithms:[e],issuer:g,audience:a.clientId,maxTokenAge:"1h"});if(c&&h.nonce!==c)return!1;return!0}catch(a){return gd.error("Failed to verify ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken)try{let c=jc(b.idToken);if(!c)return null;let d=c.name||c.given_name||c.username||c.email,e={...c,name:d},f=await a.mapProfileToUser?.(e);return{user:{id:c.sub,name:e.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...f},data:e}}catch(a){gd.error("Failed to decode ID token:",a)}if(b.accessToken)try{let{data:c}=await i6(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(c){let b=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.given_name||c.username,email:c.email,image:c.picture,emailVerified:c.email_verified,...b},data:c}}}catch(a){gd.error("Failed to fetch user info from Cognito:",a)}return null},options:a}},discord:a=>({id:"discord",name:"Discord",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identify","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=e.includes("bot")&&void 0!==a.permissions?`&permissions=${a.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"none"}${f}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;if(null===c.avatar){let a="0"===c.discriminator?Number(BigInt(c.id)>>BigInt(22))%6:parseInt(c.discriminator)%5;c.image_url=`https://cdn.discordapp.com/embed/avatars/${a}.png`}else{let a=c.avatar.startsWith("a_")?"gif":"png";c.image_url=`https://cdn.discordapp.com/avatars/${c.id}/${c.avatar}.${a}`}let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.global_name||c.username||"",email:c.email,emailVerified:c.verified,image:c.image_url,...e},data:c}},options:a}),facebook:a=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:b,scopes:c,redirectURI:d,loginHint:e}){let f=a.disableDefaultScope?[]:["email","public_profile"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await ng({id:"facebook",options:a,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:f,state:b,redirectURI:d,loginHint:e,additionalParams:a.configId?{config_id:a.configId}:{}})},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);if(3===b.split(".").length)try{let{payload:d}=await ja(b,function(a,b){let c=new jl(a,void 0),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>c.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>c.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:a.clientId,issuer:"https://www.facebook.com"});if(c&&d.nonce!==c)return!1;return!!d}catch(a){return!1}return!0},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(b.idToken&&3===b.idToken.split(".").length){let c=jc(b.idToken),d={id:c.sub,name:c.name,email:c.email,picture:{data:{url:c.picture,height:100,width:100,is_silhouette:!1}}},e=await a.mapProfileToUser?.({...d,email_verified:!0});return{user:{...d,emailVerified:!0,...e},data:c}}let c=["id","name","email","picture",...a?.fields||[]],{data:d,error:e}=await i6("https://graph.facebook.com/me?fields="+c.join(","),{auth:{type:"Bearer",token:b.accessToken}});if(e)return null;let f=await a.mapProfileToUser?.(d);return{user:{id:d.id,name:d.name,email:d.email,image:d.picture.data.url,emailVerified:d.email_verified,...f},data:d}},options:a}),figma:a=>({id:"figma",name:"Figma",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw gd.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new fP("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new fP("codeVerifier is required for Figma");let f=a.disableDefaultScope?[]:["file_read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await ng({id:"figma",options:a,authorizationEndpoint:"https://www.figma.com/oauth",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await i6("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return gd.error("Failed to fetch user from Figma"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.handle,email:c.email,image:c.img_url,emailVerified:!!c.email,...d},data:c}}catch(a){return gd.error("Failed to fetch user info from Figma:",a),null}},options:a}),github:a=>({id:"github",name:"GitHub",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["read:user","user:email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"github",options:a,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d,prompt:a.prompt})},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e}=await i6("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});!c.email&&e&&(c.email=(e.find(a=>a.primary)??e[0])?.email);let f=e?.find(a=>a.email===c.email)?.verified??!1,g=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name||c.login,email:c.email,image:c.avatar_url,emailVerified:f,...g},data:c}},options:a}),microsoft:a=>{let b=a.tenantId||"common",c=a.authority||"https://login.microsoftonline.com",d=`${c}/${b}/oauth2/v2.0/authorize`,e=`${c}/${b}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),ng({id:"microsoft",options:a,authorizationEndpoint:d,state:b.state,codeVerifier:b.codeVerifier,scopes:c,redirectURI:b.redirectURI,prompt:a.prompt,loginHint:b.loginHint})},validateAuthorizationCode:({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:e}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=jc(b.idToken),d=a.profilePhotoSize||48;await i6(`https://graph.microsoft.com/v1.0/me/photos/${d}x${d}/$value`,{headers:{Authorization:`Bearer ${b.accessToken}`},async onResponse(b){if(!a.disableProfilePhoto&&b.response.ok)try{let a=b.response.clone(),d=await a.arrayBuffer(),e=f1.encode(d);c.picture=`data:image/jpeg;base64, ${e}`}catch(a){gd.error(a&&"object"==typeof a&&"name"in a?a.name:"",a)}}});let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:!0,...e},data:c}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=a.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return a.scope&&c.push(...a.scope),ni({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},extraParams:{scope:c.join(" ")},tokenEndpoint:e})},options:a}},google:a=>({id:"google",name:"Google",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f,display:g}){if(!a.clientId||!a.clientSecret)throw gd.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new fP("CLIENT_ID_AND_SECRET_REQUIRED");if(!d)throw new fP("codeVerifier is required for Google");let h=a.disableDefaultScope?[]:["email","profile","openid"];return a.scope&&h.push(...a.scope),c&&h.push(...c),await ng({id:"google",options:a,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:h,state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt,accessType:a.accessType,display:g||a.display,loginHint:f,hd:a.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let d=`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${b}`,{data:e}=await i6(d);return!!e&&e.aud===a.clientId&&("https://accounts.google.com"===e.iss||"accounts.google.com"===e.iss)},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.idToken)return null;let c=jc(b.idToken),d=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:c.email_verified,...d},data:c}},options:a}),huggingface:a=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"huggingface",options:a,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name||c.preferred_username,email:c.email,image:c.picture,emailVerified:c.email_verified??!1,...e},data:c}},options:a}),slack:a=>({id:"slack",name:"Slack",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile","email"];c&&e.push(...c),a.scope&&e.push(...a.scope);let f=new URL("https://slack.com/openid/connect/authorize");return f.searchParams.set("scope",e.join(" ")),f.searchParams.set("response_type","code"),f.searchParams.set("client_id",a.clientId),f.searchParams.set("redirect_uri",a.redirectURI||d),f.searchParams.set("state",b),f},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c["https://slack.com/user_id"],name:c.name||"",email:c.email,emailVerified:c.email_verified,image:c.picture||c["https://slack.com/user_image_512"],...e},data:c}},options:a}),spotify:a=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["user-read-email"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"spotify",options:a,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:f,state:b,codeVerifier:d,redirectURI:e})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,email:c.email,image:c.images[0]?.url,emailVerified:!1,...e},data:c}},options:a}),twitch:a=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user:read:email","openid"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ng({id:"twitch",redirectURI:d,options:a,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:e,state:b,claims:a.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=b.idToken;if(!c)return gd.error("No idToken found in token"),null;let d=jc(c),e=await a.mapProfileToUser?.(d);return{user:{id:d.sub,name:d.preferred_username,email:d.email,image:d.picture,emailVerified:d.email_verified,...e},data:d}},options:a}),twitter:a=>({id:"twitter",name:"Twitter",createAuthorizationURL(b){let c=a.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return a.scope&&c.push(...a.scope),b.scopes&&c.push(...b.scopes),ng({id:"twitter",options:a,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:c,state:b.state,codeVerifier:b.codeVerifier,redirectURI:b.redirectURI})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>nh({code:b,codeVerifier:c,authentication:"basic",redirectURI:d,options:a,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let{data:e,error:f}=await i6("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}}),g=!1;!f&&e?.data?.confirmed_email&&(c.data.email=e.data.confirmed_email,g=!0);let h=await a.mapProfileToUser?.(c);return{user:{id:c.data.id,name:c.data.name,email:c.data.email||c.data.username||null,image:c.data.profile_image_url,emailVerified:g,...h},data:c}},options:a}),dropbox:a=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:b,scopes:c,codeVerifier:d,redirectURI:e})=>{let f=a.disableDefaultScope?[]:["account_info.read"];a.scope&&f.push(...a.scope),c&&f.push(...c);let g={};return a.accessType&&(g.token_access_type=a.accessType),await ng({id:"dropbox",options:a,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d,additionalParams:g})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d})=>await nh({code:b,codeVerifier:c,redirectURI:d,options:a,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.account_id,name:c.name?.display_name,email:c.email,emailVerified:c.email_verified||!1,image:c.profile_photo_url,...e},data:c}},options:a}),kick:a=>({id:"kick",name:"Kick",createAuthorizationURL({state:b,scopes:c,redirectURI:d,codeVerifier:e}){let f=a.disableDefaultScope?[]:["user:read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"kick",redirectURI:d,options:a,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:f,codeVerifier:e,state:b})},validateAuthorizationCode:async({code:b,redirectURI:c,codeVerifier:d})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=c.data[0],f=await a.mapProfileToUser?.(e);return{user:{id:e.user_id,name:e.name,email:e.email,image:e.profile_picture,emailVerified:!0,...f},data:e}},options:a}),linear:a=>{let b="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["read"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"linear",options:a,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>nh({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ni({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(d||!c?.data?.viewer)return null;let e=c.data.viewer,f=await a.mapProfileToUser?.(e);return{user:{id:c.data.viewer.id,name:c.data.viewer.name,email:c.data.viewer.email,image:c.data.viewer.avatarUrl,emailVerified:!0,...f},data:e}},options:a}},linkedin:a=>{let b="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:b,scopes:c,redirectURI:d,loginHint:e})=>{let f=a.disableDefaultScope?[]:["profile","email","openid"];return a.scope&&f.push(...a.scope),c&&f.push(...c),await ng({id:"linkedin",options:a,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:f,state:b,loginHint:e,redirectURI:d})},validateAuthorizationCode:async({code:c,redirectURI:d})=>await nh({code:c,redirectURI:d,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ni({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.name,email:c.email,emailVerified:c.email_verified||!1,image:c.picture,...e},data:c}},options:a}},gitlab:a=>{let{authorizationEndpoint:b,tokenEndpoint:c,userinfoEndpoint:d}=(a=>{let b=a||"https://gitlab.com";return{authorizationEndpoint:nl(`${b}/oauth/authorize`),tokenEndpoint:nl(`${b}/oauth/token`),userinfoEndpoint:nl(`${b}/api/v4/user`)}})(a.issuer),e="gitlab";return{id:e,name:"Gitlab",createAuthorizationURL:async({state:c,scopes:d,codeVerifier:f,loginHint:g,redirectURI:h})=>{let i=a.disableDefaultScope?[]:["read_user"];return a.scope&&i.push(...a.scope),d&&i.push(...d),await ng({id:e,options:a,authorizationEndpoint:b,scopes:i,state:c,redirectURI:h,codeVerifier:f,loginHint:g})},validateAuthorizationCode:async({code:b,redirectURI:d,codeVerifier:e})=>nh({code:b,redirectURI:d,options:a,codeVerifier:e,tokenEndpoint:c}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://gitlab.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:e}=await i6(d,{headers:{authorization:`Bearer ${b.accessToken}`}});if(e||"active"!==c.state||c.locked)return null;let f=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name??c.username,email:c.email,image:c.avatar_url,emailVerified:!0,...f},data:c}},options:a}},tiktok:a=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["user.info.profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${e.join(",")}&response_type=code&client_key=${a.clientKey}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:a.redirectURI||c,options:{clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientSecret:a.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:a.clientKey}}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://open.tiktokapis.com/v2/user/info/?fields=open_id,avatar_large_url,display_name,username",{headers:{authorization:`Bearer ${b.accessToken}`}});return d?null:{user:{email:c.data.user.email||c.data.user.username,id:c.data.user.open_id,name:c.data.user.display_name||c.data.user.username,image:c.data.user.avatar_large_url,emailVerified:!!c.data.user.email},data:c}},options:a}),reddit:a=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["identity"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ng({id:"reddit",options:a,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:e,state:b,redirectURI:d,duration:a.duration})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let d=new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:a.redirectURI||c}),e={"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${f1.encode(`${a.clientId}:${a.clientSecret}`)}`},{data:f,error:g}=await i6("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:e,body:d.toString()});if(g)throw g;return nd(f)},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"User-Agent":"better-auth"}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.id,name:c.name,email:c.oauth_client_id,emailVerified:c.has_verified_email,image:c.icon_img?.split("?")[0],...e},data:c}},options:a}),roblox:a=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["openid","profile"];return a.scope&&e.push(...a.scope),c&&e.push(...c),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${e.join("+")}&response_type=code&client_id=${a.clientId}&redirect_uri=${encodeURIComponent(a.redirectURI||d)}&state=${b}&prompt=${a.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:a.redirectURI||c,options:a,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});if(d)return null;let e=await a.mapProfileToUser?.(c);return{user:{id:c.sub,name:c.nickname||c.preferred_username||"",image:c.picture,email:c.preferred_username||null,emailVerified:!0,...e},data:{...c}}},options:a}),salesforce:a=>{let b="sandbox"===(a.environment??"production"),c=a.loginUrl?`https://${a.loginUrl}/services/oauth2/authorize`:b?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",d=a.loginUrl?`https://${a.loginUrl}/services/oauth2/token`:b?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",e=a.loginUrl?`https://${a.loginUrl}/services/oauth2/userinfo`:b?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:b,scopes:d,codeVerifier:e,redirectURI:f}){if(!a.clientId||!a.clientSecret)throw gd.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new fP("CLIENT_ID_AND_SECRET_REQUIRED");if(!e)throw new fP("codeVerifier is required for Salesforce");let g=a.disableDefaultScope?[]:["openid","email","profile"];return a.scope&&g.push(...a.scope),d&&g.push(...d),ng({id:"salesforce",options:a,authorizationEndpoint:c,scopes:g,state:b,codeVerifier:e,redirectURI:a.redirectURI||f})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:e})=>nh({code:b,codeVerifier:c,redirectURI:a.redirectURI||e,options:a,tokenEndpoint:d}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:d}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);try{let{data:c}=await i6(e,{headers:{Authorization:`Bearer ${b.accessToken}`}});if(!c)return gd.error("Failed to fetch user info from Salesforce"),null;let d=await a.mapProfileToUser?.(c);return{user:{id:c.user_id,name:c.name,email:c.email,image:c.photos?.picture||c.photos?.thumbnail,emailVerified:c.email_verified??!1,...d},data:c}}catch(a){return gd.error("Failed to fetch user info from Salesforce:",a),null}},options:a}},vk:a=>({id:"vk",name:"VK",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e}){let f=a.disableDefaultScope?[]:["email","phone"];return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"vk",options:a,authorizationEndpoint:"https://id.vk.com/authorize",scopes:f,state:b,redirectURI:e,codeVerifier:d})},validateAuthorizationCode:async({code:b,codeVerifier:c,redirectURI:d,deviceId:e})=>nh({code:b,codeVerifier:c,redirectURI:a.redirectURI||d,options:a,deviceId:e,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return null;let c=new URLSearchParams({access_token:b.accessToken,client_id:a.clientId}).toString(),{data:d,error:e}=await i6("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(e||!d.user.email)return null;let f=await a.mapProfileToUser?.(d);return{user:{id:d.user.user_id,first_name:d.user.first_name,last_name:d.user.last_name,email:d.user.email,image:d.user.avatar,emailVerified:!!d.user.email,birthday:d.user.birthday,sex:d.user.sex,name:`${d.user.first_name} ${d.user.last_name}`,...f},data:d}},options:a}),zoom:a=>{let b={pkce:!0,...a};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:a,redirectURI:c,codeVerifier:d})=>{let e=new URLSearchParams({response_type:"code",redirect_uri:b.redirectURI?b.redirectURI:c,client_id:b.clientId,state:a});if(b.pkce){let a=await nc(d);e.set("code_challenge_method","S256"),e.set("code_challenge",a)}let f=new URL("https://zoom.us/oauth/authorize");return f.search=e.toString(),f},validateAuthorizationCode:async({code:a,redirectURI:c,codeVerifier:d})=>nh({code:a,redirectURI:b.redirectURI||c,codeVerifier:d,options:b,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),async getUserInfo(a){if(b.getUserInfo)return b.getUserInfo(a);let{data:c,error:d}=await i6("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${a.accessToken}`}});if(d)return null;let e=await b.mapProfileToUser?.(c);return{user:{id:c.id,name:c.display_name,image:c.pic_url,email:c.email,emailVerified:!!c.verified,...e},data:{...c}}}}},notion:a=>{let b="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:b,scopes:c,loginHint:d,redirectURI:e}){let f=(a.disableDefaultScope,[]);return a.scope&&f.push(...a.scope),c&&f.push(...c),ng({id:"notion",options:a,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:f,state:b,redirectURI:e,loginHint:d,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:c,redirectURI:d})=>nh({code:c,redirectURI:d,options:a,tokenEndpoint:b,authentication:"basic"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ni({refreshToken:c,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:b}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${b.accessToken}`,"Notion-Version":"2022-06-28"}});if(d||!c)return null;let e=c.bot?.owner?.user;if(!e)return null;let f=await a.mapProfileToUser?.(e);return{user:{id:e.id,name:e.name||"Notion User",email:e.person?.email||null,image:e.avatar_url,emailVerified:!!e.person?.email,...f},data:e}},options:a}},kakao:a=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ng({id:"kakao",options:a,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c)return null;let e=await a.mapProfileToUser?.(c),f=c.kakao_account||{},g=f.profile||{};return{user:{id:String(c.id),name:g.nickname||f.name||void 0,email:f.email,image:g.profile_image_url||g.thumbnail_image_url,emailVerified:!!f.is_email_valid&&!!f.is_email_verified,...e},data:c}},options:a}),naver:a=>({id:"naver",name:"Naver",createAuthorizationURL({state:b,scopes:c,redirectURI:d}){let e=a.disableDefaultScope?[]:["profile","email"];return a.scope&&e.push(...a.scope),c&&e.push(...c),ng({id:"naver",options:a,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:e,state:b,redirectURI:d})},validateAuthorizationCode:async({code:b,redirectURI:c})=>nh({code:b,redirectURI:c,options:a,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>ni({refreshToken:b,options:{clientId:a.clientId,clientKey:a.clientKey,clientSecret:a.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let{data:c,error:d}=await i6("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${b.accessToken}`}});if(d||!c||"00"!==c.resultcode)return null;let e=await a.mapProfileToUser?.(c),f=c.response||{};return{user:{id:f.id,name:f.name||f.nickname,email:f.email,image:f.profile_image,emailVerified:!1,...e},data:c}},options:a}),line:a=>{let b="https://api.line.me/oauth2/v2.1/token";return{id:"line",name:"LINE",async createAuthorizationURL({state:b,scopes:c,codeVerifier:d,redirectURI:e,loginHint:f}){let g=a.disableDefaultScope?[]:["openid","profile","email"];return a.scope&&g.push(...a.scope),c&&g.push(...c),await ng({id:"line",options:a,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:g,state:b,codeVerifier:d,redirectURI:e,loginHint:f})},validateAuthorizationCode:async({code:c,codeVerifier:d,redirectURI:e})=>nh({code:c,codeVerifier:d,redirectURI:e,options:a,tokenEndpoint:b}),refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async c=>ni({refreshToken:c,options:{clientId:a.clientId,clientSecret:a.clientSecret},tokenEndpoint:b}),async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);let d=new URLSearchParams;d.set("id_token",b),d.set("client_id",a.clientId),c&&d.set("nonce",c);let{data:e,error:f}=await i6("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:d});return!f&&!!e&&e.aud===a.clientId&&(!c||!e.nonce||e.nonce===c)},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);let c=null;if(b.idToken)try{c=jc(b.idToken)}catch{}if(!c){let{data:a}=await i6("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${b.accessToken}`}});c=a||null}if(!c)return null;let d=await a.mapProfileToUser?.(c),e=c.sub||c.userId,f=c.name||c.displayName,g=c.picture||c.pictureUrl||void 0;return{user:{id:e,name:f,email:c.email,image:g,emailVerified:!1,...d},data:c}},options:a}},paypal:a=>{let b="sandbox"===(a.environment||"sandbox"),c=b?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",d=b?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",e=b?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:b,codeVerifier:d,redirectURI:e}){if(!a.clientId||!a.clientSecret)throw gd.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new fP("CLIENT_ID_AND_SECRET_REQUIRED");return await ng({id:"paypal",options:a,authorizationEndpoint:c,scopes:[],state:b,codeVerifier:d,redirectURI:e,prompt:a.prompt})},validateAuthorizationCode:async({code:b,redirectURI:c})=>{let e=f1.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await i6(d,{method:"POST",headers:{Authorization:`Basic ${e}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:b,redirect_uri:c}).toString()});if(!a.data)throw new fP("FAILED_TO_GET_ACCESS_TOKEN");let f=a.data;return{accessToken:f.access_token,refreshToken:f.refresh_token,accessTokenExpiresAt:f.expires_in?new Date(Date.now()+1e3*f.expires_in):void 0,idToken:f.id_token}}catch(a){throw gd.error("PayPal token exchange failed:",a),new fP("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:a.refreshAccessToken?a.refreshAccessToken:async b=>{let c=f1.encode(`${a.clientId}:${a.clientSecret}`);try{let a=await i6(d,{method:"POST",headers:{Authorization:`Basic ${c}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:b}).toString()});if(!a.data)throw new fP("FAILED_TO_REFRESH_ACCESS_TOKEN");let e=a.data;return{accessToken:e.access_token,refreshToken:e.refresh_token,accessTokenExpiresAt:e.expires_in?new Date(Date.now()+1e3*e.expires_in):void 0}}catch(a){throw gd.error("PayPal token refresh failed:",a),new fP("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(b,c){if(a.disableIdTokenSignIn)return!1;if(a.verifyIdToken)return a.verifyIdToken(b,c);try{return!!jc(b).sub}catch(a){return gd.error("Failed to verify PayPal ID token:",a),!1}},async getUserInfo(b){if(a.getUserInfo)return a.getUserInfo(b);if(!b.accessToken)return gd.error("Access token is required to fetch PayPal user info"),null;try{let c=await i6(`${e}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${b.accessToken}`,Accept:"application/json"}});if(!c.data)return gd.error("Failed to fetch user info from PayPal"),null;let d=c.data,f=await a.mapProfileToUser?.(d);return{user:{id:d.user_id,name:d.name,email:d.email,image:d.picture,emailVerified:d.email_verified,...f},data:d}}catch(a){return gd.error("Failed to fetch user info from PayPal:",a),null}},options:a}}},nn=fx(Object.keys(nm)).or(eR()),no=gt("/sign-in/social",{method:"POST",body:fq({callbackURL:eR().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:eR().optional(),errorCallbackURL:eR().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:nn,disableRedirect:ff().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:fA(fq({token:eR().meta({description:"ID token from the provider"}),nonce:eR().meta({description:"Nonce used to generate the token"}).optional(),accessToken:eR().meta({description:"Access token from the provider"}).optional(),refreshToken:eR().meta({description:"Refresh token from the provider"}).optional(),expiresAt:fb().meta({description:"Expiry date of the token"}).optional()})),scopes:fo(eR()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:ff().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:eR().meta({description:"The login hint to use for the authorization code request"}).optional()}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token",url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}}},required:["redirect","token","user"]}}}}}}}},async a=>{let b=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!b)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new t("NOT_FOUND",{message:gu.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!b.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new t("NOT_FOUND",{message:gu.ID_TOKEN_NOT_SUPPORTED});let{token:c,nonce:d}=a.body.idToken;if(!await b.verifyIdToken(c,d))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new t("UNAUTHORIZED",{message:gu.INVALID_TOKEN});let e=await b.getUserInfo({idToken:c,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!e||!e?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new t("UNAUTHORIZED",{message:gu.FAILED_TO_GET_USER_INFO});if(!e.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new t("UNAUTHORIZED",{message:gu.USER_EMAIL_NOT_FOUND});let f=await nf(a,{userInfo:{...e.user,email:e.user.email,id:String(e.user.id),name:e.user.name||"",image:e.user.image,emailVerified:e.user.emailVerified||!1},account:{providerId:b.id,accountId:String(e.user.id),accessToken:a.body.idToken.accessToken},callbackURL:a.body.callbackURL,disableSignUp:b.disableImplicitSignUp&&!a.body.requestSignUp||b.disableSignUp});if(f.error)throw new t("UNAUTHORIZED",{message:f.error});return await gp(a,f.data),a.json({redirect:!1,token:f.data.session.token,url:void 0,user:{id:f.data.user.id,email:f.data.user.email,name:f.data.user.name,image:f.data.user.image,emailVerified:f.data.user.emailVerified,createdAt:f.data.user.createdAt,updatedAt:f.data.user.updatedAt}})}let{codeVerifier:c,state:d}=await na(a),e=await b.createAuthorizationURL({state:d,codeVerifier:c,redirectURI:`${a.context.baseURL}/callback/${b.id}`,scopes:a.body.scopes,loginHint:a.body.loginHint});return a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),np=gt("/sign-in/email",{method:"POST",body:fq({email:eR().meta({description:"Email of the user"}),password:eR().meta({description:"Password of the user"}),callbackURL:eR().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:ff().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}},required:["redirect","token","user"]}}}}}}}},async a=>{if(!a.context.options?.emailAndPassword?.enabled)throw a.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new t("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:b,password:c}=a.body;if(!eR().email().safeParse(b).success)throw new t("BAD_REQUEST",{message:gu.INVALID_EMAIL});let d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)throw await a.context.password.hash(c),a.context.logger.error("User not found",{email:b}),new t("UNAUTHORIZED",{message:gu.INVALID_EMAIL_OR_PASSWORD});let e=d.accounts.find(a=>"credential"===a.providerId);if(!e)throw a.context.logger.error("Credential account not found",{email:b}),new t("UNAUTHORIZED",{message:gu.INVALID_EMAIL_OR_PASSWORD});let f=e?.password;if(!f)throw a.context.logger.error("Password not found",{email:b}),new t("UNAUTHORIZED",{message:gu.INVALID_EMAIL_OR_PASSWORD});if(!await a.context.password.verify({hash:f,password:c}))throw a.context.logger.error("Invalid password"),new t("UNAUTHORIZED",{message:gu.INVALID_EMAIL_OR_PASSWORD});if(a.context.options?.emailAndPassword?.requireEmailVerification&&!d.user.emailVerified){if(!a.context.options?.emailVerification?.sendVerificationEmail)throw new t("FORBIDDEN",{message:gu.EMAIL_NOT_VERIFIED});if(a.context.options?.emailVerification?.sendOnSignIn){let b=await m5(a.context.secret,d.user.email,void 0,a.context.options.emailVerification?.expiresIn),c=`${a.context.baseURL}/verify-email?token=${b}&callbackURL=${a.body.callbackURL||"/"}`;await a.context.options.emailVerification.sendVerificationEmail({user:d.user,url:c,token:b},a.request)}throw new t("FORBIDDEN",{message:gu.EMAIL_NOT_VERIFIED})}let g=await a.context.internalAdapter.createSession(d.user.id,a,!1===a.body.rememberMe);if(!g)throw a.context.logger.error("Failed to create session"),new t("UNAUTHORIZED",{message:gu.FAILED_TO_CREATE_SESSION});return await gp(a,{session:g,user:d.user},!1===a.body.rememberMe),a.json({redirect:!!a.body.callbackURL,token:g.token,url:a.body.callbackURL,user:{id:d.user.id,email:d.user.email,name:d.user.name,image:d.user.image,emailVerified:d.user.emailVerified,createdAt:d.user.createdAt,updatedAt:d.user.updatedAt}})}),nq=fq({code:eR().optional(),error:eR().optional(),device_id:eR().optional(),error_description:eR().optional(),state:eR().optional(),user:eR().optional()}),nr=gt("/callback/:id",{method:["GET","POST"],body:nq.optional(),query:nq.optional(),metadata:m9},async a=>{let b,c,d,e=a.context.options.onAPIError?.errorURL||`${a.context.baseURL}/error`;try{if("GET"===a.method)b=nq.parse(a.query);else if("POST"===a.method)b=nq.parse(a.body);else throw Error("Unsupported method")}catch(b){throw a.context.logger.error("INVALID_CALLBACK_REQUEST",b),a.redirect(`${e}?error=invalid_callback_request`)}let{code:f,error:g,state:h,error_description:i,device_id:j}=b;if(!h){a.context.logger.error("State not found",g);let b=e.includes("?")?"&":"?",c=`${e}${b}state=state_not_found`;throw a.redirect(c)}let{codeVerifier:k,callbackURL:l,link:m,errorURL:n,newUserURL:o,requestSignUp:p}=await nb(a);function q(b,c){let d=n??e,f=new URLSearchParams({error:b});c&&f.set("error_description",c);let g=d.includes("?")?"&":"?",h=`${d}${g}${f.toString()}`;throw a.redirect(h)}if(g&&q(g,i),!f)throw a.context.logger.error("Code not found"),q("no_code");let r=a.context.socialProviders.find(b=>b.id===a.params.id);if(!r)throw a.context.logger.error("Oauth provider with id",a.params.id,"not found"),q("oauth_provider_not_found");try{c=await r.validateAuthorizationCode({code:f,codeVerifier:k,deviceId:j,redirectURI:`${a.context.baseURL}/callback/${r.id}`})}catch(b){throw a.context.logger.error("",b),q("invalid_code")}let s=await r.getUserInfo({...c,user:a.body?.user?ge(a.body.user):void 0}).then(a=>a?.user);if(!s)return a.context.logger.error("Unable to get user info"),q("unable_to_get_user_info");if(!l)throw a.context.logger.error("No callback URL found"),q("no_callback_url");if(m){let b,d=a.context.options.account?.accountLinking?.trustedProviders;if(!d?.includes(r.id)&&!s.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)return a.context.logger.error("Unable to link account - untrusted provider"),q("unable_to_link_account");if(s.email!==m.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return q("email_doesn't_match");let e=await a.context.internalAdapter.findAccount(String(s.id));if(e){if(e.userId.toString()!==m.userId.toString())return q("account_already_linked_to_different_user");let b=Object.fromEntries(Object.entries({accessToken:await ne(c.accessToken,a.context),refreshToken:await ne(c.refreshToken,a.context),idToken:c.idToken,accessTokenExpiresAt:c.accessTokenExpiresAt,refreshTokenExpiresAt:c.refreshTokenExpiresAt,scope:c.scopes?.join(",")}).filter(([a,b])=>void 0!==b));await a.context.internalAdapter.updateAccount(e.id,b)}else if(!await a.context.internalAdapter.createAccount({userId:m.userId,providerId:r.id,accountId:String(s.id),...c,accessToken:await ne(c.accessToken,a.context),refreshToken:await ne(c.refreshToken,a.context),scope:c.scopes?.join(",")},a))return q("unable_to_link_account");try{b=l.toString()}catch{b=l}throw a.redirect(b)}if(!s.email)return a.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),q("email_not_found");let t=await nf(a,{userInfo:{...s,id:String(s.id),email:s.email,name:s.name||s.email},account:{providerId:r.id,accountId:String(s.id),...c,scope:c.scopes?.join(",")},callbackURL:l,disableSignUp:r.disableImplicitSignUp&&!p||r.options?.disableSignUp,overrideUserInfo:r.options?.overrideUserInfoOnSignIn});if(t.error)return a.context.logger.error(t.error.split(" ").join("_")),q(t.error.split(" ").join("_"));let{session:u,user:v}=t.data;await gp(a,{session:u,user:v});try{d=(t.isRegister&&o||l).toString()}catch{d=t.isRegister&&o||l}throw a.redirect(d)}),ns=gt("/sign-out",{method:"POST",requireHeaders:!0,metadata:{openapi:{description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async a=>{let b=await a.getSignedCookie(a.context.authCookies.sessionToken.name,a.context.secret);if(!b)throw gq(a),new t("BAD_REQUEST",{message:gu.FAILED_TO_GET_SESSION});return await a.context.internalAdapter.deleteSession(b),gq(a),a.json({success:!0})});function nt(a,b,c){let d=b?new URL(b,a.baseURL):new URL(`${a.baseURL}/error`);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}let nu=gt("/request-password-reset",{method:"POST",body:fq({email:ej(eT,void 0).meta({description:"The email address of the user to send a password reset email to"}),redirectTo:eR().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.emailAndPassword?.sendResetPassword)throw a.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new t("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:b,redirectTo:c}=a.body,d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)return a.context.logger.error("Reset Password: User not found",{email:b}),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let e=fO(a.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),f=jm(24);await a.context.internalAdapter.createVerificationValue({value:d.user.id,identifier:`reset-password:${f}`,expiresAt:e},a);let g=c?encodeURIComponent(c):"",h=`${a.context.baseURL}/reset-password/${f}?callbackURL=${g}`;return await a.context.options.emailAndPassword.sendResetPassword({user:d.user,url:h,token:f},a.request),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),nv=gt("/forget-password",{method:"POST",body:fq({email:eR().email().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:eR().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.emailAndPassword?.sendResetPassword)throw a.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new t("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:b,redirectTo:c}=a.body,d=await a.context.internalAdapter.findUserByEmail(b,{includeAccounts:!0});if(!d)return a.context.logger.error("Reset Password: User not found",{email:b}),a.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let e=fO(a.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),f=jm(24);await a.context.internalAdapter.createVerificationValue({value:d.user.id,identifier:`reset-password:${f}`,expiresAt:e},a);let g=c?encodeURIComponent(c):"",h=`${a.context.baseURL}/reset-password/${f}?callbackURL=${g}`;return await a.context.options.emailAndPassword.sendResetPassword({user:d.user,url:h,token:f},a.request),a.json({status:!0})}),nw=gt("/reset-password/:token",{method:"GET",query:fq({callbackURL:eR().meta({description:"The URL to redirect the user to reset their password"})}),use:[m4(a=>a.query.callbackURL)],metadata:{openapi:{description:"Redirects the user to the callback URL with the token",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async a=>{let{token:b}=a.params,{callbackURL:c}=a.query;if(!b||!c)throw a.redirect(nt(a.context,c,{error:"INVALID_TOKEN"}));let d=await a.context.internalAdapter.findVerificationValue(`reset-password:${b}`);if(!d||d.expiresAt<new Date)throw a.redirect(nt(a.context,c,{error:"INVALID_TOKEN"}));throw a.redirect(function(a,b,c){let d=new URL(b,a.baseURL);return c&&Object.entries(c).forEach(([a,b])=>d.searchParams.set(a,b)),d.href}(a.context,c,{token:b}))}),nx=gt("/reset-password",{method:"POST",query:fq({token:eR().optional()}).optional(),body:fq({newPassword:eR().meta({description:"The new password to set"}),token:eR().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let b=a.body.token||a.query?.token;if(!b)throw new t("BAD_REQUEST",{message:gu.INVALID_TOKEN});let{newPassword:c}=a.body,d=a.context.password?.config.minPasswordLength,e=a.context.password?.config.maxPasswordLength;if(c.length<d)throw new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_SHORT});if(c.length>e)throw new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_LONG});let f=`reset-password:${b}`,g=await a.context.internalAdapter.findVerificationValue(f);if(!g||g.expiresAt<new Date)throw new t("BAD_REQUEST",{message:gu.INVALID_TOKEN});let h=g.value,i=await a.context.password.hash(c);if((await a.context.internalAdapter.findAccounts(h)).find(a=>"credential"===a.providerId)?await a.context.internalAdapter.updatePassword(h,i,a):await a.context.internalAdapter.createAccount({userId:h,providerId:"credential",password:i,accountId:h},a),await a.context.internalAdapter.deleteVerificationValue(g.id),a.context.options.emailAndPassword?.onPasswordReset){let b=await a.context.internalAdapter.findUserById(h);b&&await a.context.options.emailAndPassword.onPasswordReset({user:b},a.request)}return a.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await a.context.internalAdapter.deleteSessions(h),a.json({status:!0})}),ny=gt("/change-password",{method:"POST",body:fq({newPassword:eR().meta({description:"The new password to set"}),currentPassword:eR().meta({description:"The current password is required"}),revokeOtherSessions:ff().meta({description:"Must be a boolean value"}).optional()}),use:[gz],metadata:{openapi:{description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async a=>{let{newPassword:b,currentPassword:c,revokeOtherSessions:d}=a.body,e=a.context.session,f=a.context.password.config.minPasswordLength;if(b.length<f)throw a.context.logger.error("Password is too short"),new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_SHORT});let g=a.context.password.config.maxPasswordLength;if(b.length>g)throw a.context.logger.error("Password is too long"),new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_LONG});let h=(await a.context.internalAdapter.findAccounts(e.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!h||!h.password)throw new t("BAD_REQUEST",{message:gu.CREDENTIAL_ACCOUNT_NOT_FOUND});let i=await a.context.password.hash(b);if(!await a.context.password.verify({hash:h.password,password:c}))throw new t("BAD_REQUEST",{message:gu.INVALID_PASSWORD});await a.context.internalAdapter.updateAccount(h.id,{password:i});let j=null;if(d){await a.context.internalAdapter.deleteSessions(e.user.id);let b=await a.context.internalAdapter.createSession(e.user.id,a);if(!b)throw new t("INTERNAL_SERVER_ERROR",{message:gu.FAILED_TO_GET_SESSION});await gp(a,{session:b,user:e.user}),j=b.token}return a.json({token:j,user:{id:e.user.id,email:e.user.email,name:e.user.name,image:e.user.image,emailVerified:e.user.emailVerified,createdAt:e.user.createdAt,updatedAt:e.user.updatedAt}})}),nz=gt("/set-password",{method:"POST",body:fq({newPassword:eR().meta({description:"The new password to set is required"})}),metadata:{SERVER_ONLY:!0},use:[gz]},async a=>{let{newPassword:b}=a.body,c=a.context.session,d=a.context.password.config.minPasswordLength;if(b.length<d)throw a.context.logger.error("Password is too short"),new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_SHORT});let e=a.context.password.config.maxPasswordLength;if(b.length>e)throw a.context.logger.error("Password is too long"),new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_LONG});let f=(await a.context.internalAdapter.findAccounts(c.user.id)).find(a=>"credential"===a.providerId&&a.password),g=await a.context.password.hash(b);if(!f)return await a.context.internalAdapter.linkAccount({userId:c.user.id,providerId:"credential",accountId:c.user.id,password:g},a),a.json({status:!0});throw new t("BAD_REQUEST",{message:"user already has a password"})}),nA=gt("/delete-user",{method:"POST",use:[gz],body:fq({callbackURL:eR().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:eR().meta({description:"The password of the user is required to delete the user"}).optional(),token:eR().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{description:"Delete the user",responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options",{session:a.context.session}),new t("NOT_FOUND");let b=a.context.session;if(a.body.password){let c=(await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>"credential"===a.providerId&&a.password);if(!c||!c.password)throw new t("BAD_REQUEST",{message:gu.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await a.context.password.verify({hash:c.password,password:a.body.password}))throw new t("BAD_REQUEST",{message:gu.INVALID_PASSWORD})}if(a.body.token)return await nB({...a,query:{token:a.body.token}}),a.json({success:!0,message:"User deleted"});if(a.context.options.user.deleteUser?.sendDeleteAccountVerification){let c=iD(32,"0-9","a-z");await a.context.internalAdapter.createVerificationValue({value:b.user.id,identifier:`delete-account-${c}`,expiresAt:new Date(Date.now()+1e3*(a.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))},a);let d=`${a.context.baseURL}/delete-user/callback?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.options.user.deleteUser.sendDeleteAccountVerification({user:b.user,url:d,token:c},a.request),a.json({success:!0,message:"Verification email sent"})}if(!a.body.password&&0!==a.context.sessionConfig.freshAge){let c=new Date(b.session.createdAt).getTime(),d=1e3*a.context.sessionConfig.freshAge;if(Date.now()-c>1e3*d)throw new t("BAD_REQUEST",{message:gu.SESSION_EXPIRED})}let c=a.context.options.user.deleteUser?.beforeDelete;c&&await c(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),await a.context.internalAdapter.deleteAccounts(b.user.id),gq(a);let d=a.context.options.user.deleteUser?.afterDelete;return d&&await d(b.user,a.request),a.json({success:!0,message:"User deleted"})}),nB=gt("/delete-user/callback",{method:"GET",query:fq({token:eR().meta({description:"The token to verify the deletion request"}),callbackURL:eR().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[m4(a=>a.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async a=>{if(!a.context.options.user?.deleteUser?.enabled)throw a.context.logger.error("Delete user is disabled. Enable it in the options"),new t("NOT_FOUND");let b=await gx(a);if(!b)throw new t("NOT_FOUND",{message:gu.FAILED_TO_GET_USER_INFO});let c=await a.context.internalAdapter.findVerificationValue(`delete-account-${a.query.token}`);if(!c||c.expiresAt<new Date||c.value!==b.user.id)throw new t("NOT_FOUND",{message:gu.INVALID_TOKEN});let d=a.context.options.user.deleteUser?.beforeDelete;d&&await d(b.user,a.request),await a.context.internalAdapter.deleteUser(b.user.id),await a.context.internalAdapter.deleteSessions(b.user.id),await a.context.internalAdapter.deleteAccounts(b.user.id),await a.context.internalAdapter.deleteVerificationValue(c.id),gq(a);let e=a.context.options.user.deleteUser?.afterDelete;if(e&&await e(b.user,a.request),a.query.callbackURL)throw a.redirect(a.query.callbackURL||"/");return a.json({success:!0,message:"User deleted"})}),nC=gt("/change-email",{method:"POST",body:fq({newEmail:ej(eT,void 0).meta({description:"The new email address to set must be a valid email address"}),callbackURL:eR().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[gz],metadata:{openapi:{responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>{if(!a.context.options.user?.changeEmail?.enabled)throw a.context.logger.error("Change email is disabled."),new t("BAD_REQUEST",{message:"Change email is disabled"});let b=a.body.newEmail.toLowerCase();if(b===a.context.session.user.email)throw a.context.logger.error("Email is the same"),new t("BAD_REQUEST",{message:"Email is the same"});if(await a.context.internalAdapter.findUserByEmail(b))throw a.context.logger.error("Email already exists"),new t("BAD_REQUEST",{message:"Couldn't update your email"});if(!0!==a.context.session.user.emailVerified){if(await a.context.internalAdapter.findUserByEmail(b))throw new t("UNPROCESSABLE_ENTITY",{message:gu.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(await a.context.internalAdapter.updateUserByEmail(a.context.session.user.email,{email:b},a),await gp(a,{session:a.context.session.session,user:{...a.context.session.user,email:b}}),a.context.options.emailVerification?.sendVerificationEmail){let c=await m5(a.context.secret,b,void 0,a.context.options.emailVerification?.expiresIn),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;await a.context.options.emailVerification.sendVerificationEmail({user:{...a.context.session.user,email:b},url:d,token:c},a.request)}return a.json({status:!0})}if(!a.context.options.user.changeEmail.sendChangeEmailVerification)throw a.context.logger.error("Verification email isn't enabled."),new t("BAD_REQUEST",{message:"Verification email isn't enabled"});let c=await m5(a.context.secret,a.context.session.user.email,b,a.context.options.emailVerification?.expiresIn),d=`${a.context.baseURL}/verify-email?token=${c}&callbackURL=${a.body.callbackURL||"/"}`;return await a.context.options.user.changeEmail.sendChangeEmailVerification({user:a.context.session.user,newEmail:b,url:d,token:c},a.request),a.json({status:!0})}),nD=gt("/error",{method:"GET",metadata:{...m9,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async a=>new Response(((a="Unknown")=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication Error</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #212529;
            --accent-color: #000000;
            --error-color: #dc3545;
            --border-color: #e9ecef;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            line-height: 1.5;
        }
        .error-container {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 2.5rem;
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
        h1 {
            color: var(--error-color);
            font-size: 1.75rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        p {
            margin-bottom: 1.5rem;
            color: #495057;
        }
        .btn {
            background-color: var(--accent-color);
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: inline-block;
            font-weight: 500;
            border: 2px solid var(--accent-color);
        }
        .btn:hover {
            background-color: #131721;
        }
        .error-code {
            font-size: 0.875rem;
            color: #6c757d;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="icon">\u26A0\uFE0F</div>
        <h1>Better Auth Error</h1>
        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>
        <a href="/" id="returnLink" class="btn">Return to Application</a>
        <div class="error-code">Error Code: <span id="errorCode">${a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}</span></div>
    </div>
</body>
</html>`)(new URL(a.request?.url||"").searchParams.get("error")||"Unknown"),{headers:{"Content-Type":"text/html"}})),nE=gt("/ok",{method:"GET",metadata:{...m9,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async a=>a.json({ok:!0})),nF=gt("/list-accounts",{method:"GET",use:[gy],metadata:{openapi:{description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","scopes"]}}}}}}}}},async a=>{let b=a.context.session,c=await a.context.internalAdapter.findAccounts(b.user.id);return a.json(c.map(a=>({id:a.id,providerId:a.providerId,createdAt:a.createdAt,updatedAt:a.updatedAt,accountId:a.accountId,scopes:a.scope?.split(",")||[]})))}),nG=gt("/link-social",{method:"POST",requireHeaders:!0,body:fq({callbackURL:eR().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:nn,idToken:fq({token:eR(),nonce:eR().optional(),accessToken:eR().optional(),refreshToken:eR().optional(),scopes:fo(eR()).optional()}).optional(),requestSignUp:ff().optional(),scopes:fo(eR()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:eR().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:ff().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional()}),use:[gy],metadata:{openapi:{description:"Link a social account to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async a=>{let b=a.context.session,c=a.context.socialProviders.find(b=>b.id===a.body.provider);if(!c)throw a.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:a.body.provider}),new t("NOT_FOUND",{message:gu.PROVIDER_NOT_FOUND});if(a.body.idToken){if(!c.verifyIdToken)throw a.context.logger.error("Provider does not support id token verification",{provider:a.body.provider}),new t("NOT_FOUND",{message:gu.ID_TOKEN_NOT_SUPPORTED});let{token:d,nonce:e}=a.body.idToken;if(!await c.verifyIdToken(d,e))throw a.context.logger.error("Invalid id token",{provider:a.body.provider}),new t("UNAUTHORIZED",{message:gu.INVALID_TOKEN});let f=await c.getUserInfo({idToken:d,accessToken:a.body.idToken.accessToken,refreshToken:a.body.idToken.refreshToken});if(!f||!f?.user)throw a.context.logger.error("Failed to get user info",{provider:a.body.provider}),new t("UNAUTHORIZED",{message:gu.FAILED_TO_GET_USER_INFO});let g=String(f.user.id);if(!f.user.email)throw a.context.logger.error("User email not found",{provider:a.body.provider}),new t("UNAUTHORIZED",{message:gu.USER_EMAIL_NOT_FOUND});if((await a.context.internalAdapter.findAccounts(b.user.id)).find(a=>a.providerId===c.id&&a.accountId===g))return a.json({url:"",status:!0,redirect:!1});let h=a.context.options.account?.accountLinking?.trustedProviders;if(!h?.includes(c.id)&&!f.user.emailVerified||a.context.options.account?.accountLinking?.enabled===!1)throw new t("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(f.user.email!==b.user.email&&a.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new t("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await a.context.internalAdapter.createAccount({userId:b.user.id,providerId:c.id,accountId:g,accessToken:a.body.idToken.accessToken,idToken:d,refreshToken:a.body.idToken.refreshToken,scope:a.body.idToken.scopes?.join(",")},a)}catch(a){throw new t("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(a.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await a.context.internalAdapter.updateUser(b.user.id,{name:f.user?.name,image:f.user?.image})}catch(a){console.warn("Could not update user - "+a.toString())}return a.json({url:"",status:!0,redirect:!1})}let d=await na(a,{userId:b.user.id,email:b.user.email}),e=await c.createAuthorizationURL({state:d.state,codeVerifier:d.codeVerifier,redirectURI:`${a.context.baseURL}/callback/${c.id}`,scopes:a.body.scopes});return a.json({url:e.toString(),redirect:!a.body.disableRedirect})}),nH=gt("/unlink-account",{method:"POST",body:fq({providerId:eR(),accountId:eR().optional()}),use:[gA],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async a=>{let{providerId:b,accountId:c}=a.body,d=await a.context.internalAdapter.findAccounts(a.context.session.user.id);if(1===d.length&&!a.context.options.account?.accountLinking?.allowUnlinkingAll)throw new t("BAD_REQUEST",{message:gu.FAILED_TO_UNLINK_LAST_ACCOUNT});let e=d.find(a=>c?a.accountId===c&&a.providerId===b:a.providerId===b);if(!e)throw new t("BAD_REQUEST",{message:gu.ACCOUNT_NOT_FOUND});return await a.context.internalAdapter.deleteAccount(e.id),a.json({status:!0})}),nI=gt("/get-access-token",{method:"POST",body:fq({providerId:eR().meta({description:"The provider ID for the OAuth provider"}),accountId:eR().meta({description:"The account ID associated with the refresh token"}).optional(),userId:eR().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let{providerId:b,accountId:c,userId:d}=a.body,e=a.request,f=await gx(a);if(e&&!f)throw a.error("UNAUTHORIZED");let g=f?.user?.id||d;if(!g)throw new t("BAD_REQUEST",{message:"Either userId or session is required"});if(!a.context.socialProviders.find(a=>a.id===b))throw new t("BAD_REQUEST",{message:`Provider ${b} is not supported.`});let h=(await a.context.internalAdapter.findAccounts(g)).find(a=>c?a.id===c&&a.providerId===b:a.providerId===b);if(!h)throw new t("BAD_REQUEST",{message:"Account not found"});let i=a.context.socialProviders.find(a=>a.id===b);if(!i)throw new t("BAD_REQUEST",{message:`Provider ${b} not found.`});try{let b=null,c=h.accessTokenExpiresAt&&new Date(h.accessTokenExpiresAt).getTime()-Date.now()<5e3;h.refreshToken&&c&&i.refreshAccessToken&&(b=await i.refreshAccessToken(h.refreshToken),await a.context.internalAdapter.updateAccount(h.id,{accessToken:await ne(b.accessToken,a.context),accessTokenExpiresAt:b.accessTokenExpiresAt,refreshToken:await ne(b.refreshToken,a.context),refreshTokenExpiresAt:b.refreshTokenExpiresAt}));let d={accessToken:await function(a,b){return a&&b.options.account?.encryptOAuthTokens?iL({key:b.secret,data:a}):a}(b?.accessToken??h.accessToken??"",a.context),accessTokenExpiresAt:b?.accessTokenExpiresAt??h.accessTokenExpiresAt??void 0,scopes:h.scope?.split(",")??[],idToken:b?.idToken??h.idToken??void 0};return a.json(d)}catch(a){throw new t("BAD_REQUEST",{message:"Failed to get a valid access token",cause:a})}}),nJ=gt("/refresh-token",{method:"POST",body:fq({providerId:eR().meta({description:"The provider ID for the OAuth provider"}),accountId:eR().meta({description:"The account ID associated with the refresh token"}).optional(),userId:eR().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async a=>{let{providerId:b,accountId:c,userId:d}=a.body,e=a.request,f=await gx(a);if(e&&!f)throw a.error("UNAUTHORIZED");let g=f?.user?.id||d;if(!g)throw new t("BAD_REQUEST",{message:"Either userId or session is required"});let h=(await a.context.internalAdapter.findAccounts(g)).find(a=>c?a.id===c&&a.providerId===b:a.providerId===b);if(!h)throw new t("BAD_REQUEST",{message:"Account not found"});let i=a.context.socialProviders.find(a=>a.id===b);if(!i)throw new t("BAD_REQUEST",{message:`Provider ${b} not found.`});if(!i.refreshAccessToken)throw new t("BAD_REQUEST",{message:`Provider ${b} does not support token refreshing.`});try{let b=await i.refreshAccessToken(h.refreshToken);return await a.context.internalAdapter.updateAccount(h.id,{accessToken:await ne(b.accessToken,a.context),refreshToken:await ne(b.refreshToken,a.context),accessTokenExpiresAt:b.accessTokenExpiresAt,refreshTokenExpiresAt:b.refreshTokenExpiresAt}),a.json(b)}catch(a){throw new t("BAD_REQUEST",{message:"Failed to refresh access token",cause:a})}}),nK=gt("/account-info",{method:"POST",use:[gy],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},body:fq({accountId:eR().meta({description:"The provider given account id for which to get the account info"})})},async a=>{let b=await a.context.internalAdapter.findAccount(a.body.accountId);if(!b||b.userId!==a.context.session.user.id)throw new t("BAD_REQUEST",{message:"Account not found"});let c=a.context.socialProviders.find(a=>a.id===b.providerId);if(!c)throw new t("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${b.providerId} but it is not configured`});let d=await nI({...a,body:{accountId:b.id,providerId:b.providerId},returnHeaders:!1});if(!d.accessToken)throw new t("BAD_REQUEST",{message:"Access token not found"});let e=await c.getUserInfo({...d,accessToken:d.accessToken});return a.json(e)}),nL=m$((a,b,c)=>{if(Array.isArray(a[b])&&Array.isArray(c))return a[b]=c,!0});async function nM(a,b){let c={};for(let d of b)if(d.matcher(a)){let b=await d.handler({...a,returnHeaders:!1}).catch(b=>{throw b instanceof t&&ga(a.context.logger.level,"debug")&&(b.stack=b.errorStack),b});if(b&&"object"==typeof b){if("context"in b&&"object"==typeof b.context){let{headers:a,...d}=b.context;a instanceof Headers&&(c.headers?a.forEach((a,b)=>{c.headers?.set(b,a)}):c.headers=a),c=nL(d,c);continue}return b}}return{context:c}}async function nN(a,b){for(let c of b)if(c.matcher(a)){let b=await c.handler(a).catch(b=>{if(b instanceof t)return ga(a.context.logger.level,"debug")&&(b.stack=b.errorStack),{response:b,headers:b.headers?new Headers(b.headers):null};throw b});b.headers&&b.headers.forEach((b,c)=>{a.context.responseHeaders?"set-cookie"===c.toLowerCase()?a.context.responseHeaders.append(c,b):a.context.responseHeaders.set(c,b):a.context.responseHeaders=new Headers({[c]:b})}),b.response&&(a.context.returned=b.response)}return{response:a.context.returned,headers:a.context.responseHeaders}}let nO=new WeakMap;function nP(a,b){let c=b.fields,d={};for(let b in a){let e=c[b];if(!e){d[b]=a[b];continue}!1!==e.returned&&(d[b]=a[b])}return d}function nQ(a,b){nO.has(a)||nO.set(a,new Map);let c=nO.get(a);if(c.has(b))return c.get(b);let d={..."user"===b?a.user?.additionalFields:{},..."session"===b?a.session?.additionalFields:{}};for(let c of a.plugins||[])c.schema&&c.schema[b]&&(d={...d,...c.schema[b].fields});return nO.get(a).set(b,d),d}function nR(a,b){return nP(b,{fields:nQ(a,"user")})}function nS(a,b){return nP(b,{fields:nQ(a,"session")})}function nT(a,b){if(b.advanced?.ipAddress?.disableIpTracking)return null;if(fW()||fV)return"127.0.0.1";let c="headers"in a?a.headers:a;for(let a of b.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"]){let b="get"in c?c.get(a):c[a];if("string"==typeof b){var d;let a=b.split(",")[0].trim();if(d=a,el(e2,void 0).safeParse(d).success||em(e3,void 0).safeParse(d).success)return a}}return null}let nU=new Map;async function nV(a,b){if(!b.rateLimit.enabled)return;let c=new URL(a.url).pathname.replace(b.options.basePath||"/api/auth",""),d=b.rateLimit.window,e=b.rateLimit.max,f=nT(a,b.options);if(!f)return;let g=f+c,h=[{pathMatcher:a=>a.startsWith("/sign-in")||a.startsWith("/sign-up")||a.startsWith("/change-password")||a.startsWith("/change-email"),window:10,max:3}].find(a=>a.pathMatcher(c));for(let a of(h&&(d=h.window,e=h.max),b.options.plugins||[]))if(a.rateLimit){let b=a.rateLimit.find(a=>a.pathMatcher(c));if(b){d=b.window,e=b.max;break}}if(b.rateLimit.customRules){let f=Object.keys(b.rateLimit.customRules).find(a=>a.includes("*")?m2(a)(c):a===c);if(f){let c=b.rateLimit.customRules[f],g="function"==typeof c?await c(a):c;if(g&&(d=g.window,e=g.max),!1===g)return}}let i=function(a,b){if(a.options.rateLimit?.customStorage)return a.options.rateLimit.customStorage;let c=a.rateLimit.storage;if("secondary-storage"===c)return{get:async b=>{let c=await a.options.secondaryStorage?.get(b);return c?ge(c):void 0},set:async(c,d,e)=>{let f=b?.window??a.options.rateLimit?.window??10;await a.options.secondaryStorage?.set?.(c,JSON.stringify(d),f)}};if("memory"===c)return{get:async a=>nU.get(a),async set(a,b,c){nU.set(a,b)}};let d="rateLimit",e=a.adapter;return{get:async a=>{let b=(await e.findMany({model:d,where:[{field:"key",value:a}]}))[0];return"bigint"==typeof b?.lastRequest&&(b.lastRequest=Number(b.lastRequest)),b},set:async(b,c,f)=>{try{f?await e.updateMany({model:d,where:[{field:"key",value:b}],update:{count:c.count,lastRequest:c.lastRequest}}):await e.create({model:d,data:{key:b,count:c.count,lastRequest:c.lastRequest}})}catch(b){a.logger.error("Error setting rate limit",b)}}}}(b,{window:d}),j=await i.get(g),k=Date.now();if(j){var l,m,n,o;let a=k-j.lastRequest;if(l=e,m=d,n=j,Date.now()-n.lastRequest<1e3*m&&n.count>=l){return o=Math.ceil((j.lastRequest+1e3*d-Date.now())/1e3),new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":o.toString()}})}a>1e3*d?await i.set(g,{...j,count:1,lastRequest:k},!0):await i.set(g,{...j,count:j.count+1,lastRequest:k},!0)}else await i.set(g,{key:g,count:1,lastRequest:k})}function nW(a,b){let c=b.plugins?.reduce((a,b)=>({...a,...b.endpoints}),{})??{},d=b.plugins?.map(b=>b.middlewares?.map(b=>{let c=async c=>{let d=await a;return b.middleware({...c,context:{...d,...c.context}})};return c.options=b.middleware.options,{path:b.path,middleware:c}})).filter(a=>void 0!==a).flat()||[];return{api:function(a,b){let c={};for(let[d,e]of Object.entries(a))c[d]=async a=>{let c=await b,d={...a,context:{...c,returned:void 0,responseHeaders:void 0,session:null},path:e.path,headers:a?.headers?new Headers(a?.headers):void 0},{beforeHooks:f,afterHooks:g}=function(a){let b=a.options.plugins||[],c=[],d=[];a.options.hooks?.before&&c.push({matcher:()=>!0,handler:a.options.hooks.before}),a.options.hooks?.after&&d.push({matcher:()=>!0,handler:a.options.hooks.after});let e=b.map(a=>{if(a.hooks?.before)return a.hooks.before}).filter(a=>void 0!==a).flat(),f=b.map(a=>{if(a.hooks?.after)return a.hooks.after}).filter(a=>void 0!==a).flat();return e.length&&c.push(...e),f.length&&d.push(...f),{beforeHooks:c,afterHooks:d}}(c),h=await nM(d,f);if("context"in h&&h.context&&"object"==typeof h.context){let{headers:a,...b}=h.context;a&&a.forEach((a,b)=>{d.headers.set(b,a)}),d=nL(b,d)}else if(h)return a?.asResponse?w(h,{headers:a?.headers}):a?.returnHeaders?{headers:a?.headers,response:h}:h;d.asResponse=!1,d.returnHeaders=!0;let i=await e(d).catch(a=>{if(a instanceof t)return{response:a,headers:a.headers?new Headers(a.headers):null};throw a});if(i&&i instanceof Response)return i;d.context.returned=i.response,d.context.responseHeaders=i.headers;let j=await nN(d,g);if(j.response&&(i.response=j.response),i.response instanceof t&&ga(c.logger.level,"debug")&&(i.response.stack=i.response.errorStack),i.response instanceof t&&!a?.asResponse)throw i.response;return a?.asResponse?w(i.response,{headers:i.headers}):a?.returnHeaders?{headers:i.headers,response:i.response}:i.response},c[d].path=e.path,c[d].options=e.options;return c}({...{signInSocial:no,callbackOAuth:nr,getSession:gw(),signOut:ns,signUpEmail:gt("/sign-up/email",{method:"POST",body:fv(eR(),fh()),metadata:{$Infer:{body:{}},openapi:{description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async a=>{let b;if(!a.context.options.emailAndPassword?.enabled||a.context.options.emailAndPassword?.disableSignUp)throw new t("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let c=a.body,{name:d,email:e,password:f,image:g,callbackURL:h,rememberMe:i,...j}=c;if(!ej(eT,void 0).safeParse(e).success)throw new t("BAD_REQUEST",{message:gu.INVALID_EMAIL});let k=a.context.password.config.minPasswordLength;if(f.length<k)throw a.context.logger.error("Password is too short"),new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_SHORT});let l=a.context.password.config.maxPasswordLength;if(f.length>l)throw a.context.logger.error("Password is too long"),new t("BAD_REQUEST",{message:gu.PASSWORD_TOO_LONG});let m=await a.context.internalAdapter.findUserByEmail(e);if(m?.user)throw a.context.logger.info(`Sign-up attempt for existing email: ${e}`),new t("UNPROCESSABLE_ENTITY",{message:gu.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let n=await a.context.password.hash(f);try{let c=function(a,b={},c){return function(a,b){let c=b.action||"create",d=b.fields,e=Object.assign(Object.create(null),null);for(let b in d){if(b in a){if(!1===d[b].input){if(d[b].defaultValue){e[b]=d[b].defaultValue;continue}if(e[b])throw new t("BAD_REQUEST",{message:`${b} is not allowed to be set`});continue}if(d[b].validator?.input&&void 0!==a[b]){e[b]=d[b].validator.input.parse(a[b]);continue}if(d[b].transform?.input&&void 0!==a[b]){e[b]=d[b].transform?.input(a[b]);continue}e[b]=a[b];continue}if(d[b].defaultValue&&"create"===c){e[b]=d[b].defaultValue;continue}if(d[b].required&&"create"===c)throw new t("BAD_REQUEST",{message:`${b} is required`})}return e}(b,{fields:nQ(a,"user"),action:c})}(a.context.options,j,"create");if(!(b=await a.context.internalAdapter.createUser({email:e.toLowerCase(),name:d,image:g,...c,emailVerified:!1},a)))throw new t("BAD_REQUEST",{message:gu.FAILED_TO_CREATE_USER})}catch(b){if(fV&&a.context.logger.error("Failed to create user",b),b instanceof t)throw b;throw a.context.logger?.error("Failed to create user",b),new t("UNPROCESSABLE_ENTITY",{message:gu.FAILED_TO_CREATE_USER,details:b})}if(!b)throw new t("UNPROCESSABLE_ENTITY",{message:gu.FAILED_TO_CREATE_USER});if(await a.context.internalAdapter.linkAccount({userId:b.id,providerId:"credential",accountId:b.id,password:n},a),a.context.options.emailVerification?.sendOnSignUp||a.context.options.emailAndPassword.requireEmailVerification){let d=await m5(a.context.secret,b.email,void 0,a.context.options.emailVerification?.expiresIn),e=`${a.context.baseURL}/verify-email?token=${d}&callbackURL=${c.callbackURL||"/"}`,f=a.request?[{user:b,url:e,token:d},a.request]:[{user:b,url:e,token:d}];await a.context.options.emailVerification?.sendVerificationEmail?.(...f)}if(!1===a.context.options.emailAndPassword.autoSignIn||a.context.options.emailAndPassword.requireEmailVerification)return a.json({token:null,user:{id:b.id,email:b.email,name:b.name,image:b.image,emailVerified:b.emailVerified,createdAt:b.createdAt,updatedAt:b.updatedAt}});let o=await a.context.internalAdapter.createSession(b.id,a,!1===i);if(!o)throw new t("BAD_REQUEST",{message:gu.FAILED_TO_CREATE_SESSION});return await gp(a,{session:o,user:b},!1===i),a.json({token:o.token,user:{id:b.id,email:b.email,name:b.name,image:b.image,emailVerified:b.emailVerified,createdAt:b.createdAt,updatedAt:b.updatedAt}})}),signInEmail:np,forgetPassword:nv,resetPassword:nx,verifyEmail:m8,sendVerificationEmail:m7,changeEmail:nC,changePassword:ny,setPassword:nz,updateUser:gt("/update-user",{method:"POST",body:fv(eR().meta({description:"Field name must be a string"}),fh()),use:[gy],metadata:{$Infer:{body:{}},openapi:{description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the update was successful"}}}}}}}}}},async a=>{let b=a.body;if(b.email)throw new t("BAD_REQUEST",{message:gu.EMAIL_CAN_NOT_BE_UPDATED});let{name:c,image:d,...e}=b,f=a.context.session;if(void 0===d&&void 0===c&&0===Object.keys(e).length)return a.json({status:!0});let g=await a.context.internalAdapter.updateUser(f.user.id,{name:c,image:d,...e},a);return await gp(a,{session:f.session,user:g}),a.json({status:!0})}),deleteUser:nA,forgetPasswordCallback:nw,requestPasswordReset:nu,requestPasswordResetCallback:nw,listSessions:gt("/list-sessions",{method:"GET",use:[gy],requireHeaders:!0,metadata:{openapi:{description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async a=>{try{let b=(await a.context.internalAdapter.listSessions(a.context.session.user.id)).filter(a=>a.expiresAt>new Date);return a.json(b)}catch(b){throw a.context.logger.error(b),a.error("INTERNAL_SERVER_ERROR")}}),revokeSession:gB,revokeSessions:gC,revokeOtherSessions:gD,linkSocialAccount:nG,listUserAccounts:nF,deleteUserCallback:nB,unlinkAccount:nH,refreshToken:nJ,getAccessToken:nI,accountInfo:nK},...c,ok:nE,error:nD},a),middlewares:d}}let nX=a=>{let b=(a.plugins??[]).reduce((a,b)=>{let c=b.schema;if(!c)return a;for(let[b,d]of Object.entries(c))a[b]={fields:{...a[b]?.fields,...d.fields},modelName:d.modelName||b};return a},{}),c=a.rateLimit?.storage==="database",d={rateLimit:{modelName:a.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:a.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:a.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:a.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:e,session:f,account:g,...h}=b,i={session:{modelName:a.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:a.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:a.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:a.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:a.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:a.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:a.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:a.session?.fields?.userId||"userId",references:{model:a.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0},...f?.fields,...a.session?.additionalFields},order:2}};return{user:{modelName:a.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:a.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:a.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:a.user?.fields?.emailVerified||"emailVerified"},image:{type:"string",required:!1,fieldName:a.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:a.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:a.user?.fields?.updatedAt||"updatedAt"},...e?.fields,...a.user?.additionalFields},order:1},...!a.secondaryStorage||a.session?.storeSessionInDatabase?i:{},account:{modelName:a.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:a.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:a.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:a.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:a.account?.fields?.userId||"userId"},accessToken:{type:"string",required:!1,fieldName:a.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:a.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:a.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:a.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:a.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:a.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:a.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:a.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:a.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...g?.fields,...a.account?.additionalFields},order:3},verification:{modelName:a.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:a.verification?.fields?.identifier||"identifier"},value:{type:"string",required:!0,fieldName:a.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:a.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:a.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:a.verification?.fields?.updatedAt||"updatedAt"}},order:4},...h,...c?d:{}}};var nY=c(70946),nZ=c(46975),n$=c(13072);function n_(a,b){return n$.z.createWithChildren([n$.z.createWithSql(`${a} `),nZ.O.create(b)])}var n0=c(27263),n1=c(97990),n2=c(61861);class n3{#ac;#ad=new n5;#ae;#af;constructor(a){this.#ac=(0,n1.CN)({...a})}async init(){this.#ae=(0,n1.Tn)(this.#ac.database)?await this.#ac.database():this.#ac.database,this.#af=new n4(this.#ae),this.#ac.onCreateConnection&&await this.#ac.onCreateConnection(this.#af)}async acquireConnection(){return await this.#ad.lock(),this.#af}async beginTransaction(a){await a.executeQuery(n0.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(n0.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(n0.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(n_("savepoint",b),(0,n2.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(n_("rollback to",b),(0,n2.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(n_("release",b),(0,n2.a)()))}async releaseConnection(){this.#ad.unlock()}async destroy(){this.#ae?.close()}}class n4{#ae;constructor(a){this.#ae=a}executeQuery(a){let{sql:b,parameters:c}=a,d=this.#ae.prepare(b);if(d.reader)return Promise.resolve({rows:d.all(c)});let{changes:e,lastInsertRowid:f}=d.run(c);return Promise.resolve({numAffectedRows:null!=e?BigInt(e):void 0,insertId:null!=f?BigInt(f):void 0,rows:[]})}async *streamQuery(a,b){let{sql:c,parameters:d,query:e}=a,f=this.#ae.prepare(c);if(nY.L.is(e))for(let a of f.iterate(d))yield{rows:[a]};else throw Error("Sqlite driver only supports streaming of select queries")}}class n5{#p;#q;async lock(){for(;this.#p;)await this.#p;this.#p=new Promise(a=>{this.#q=a})}unlock(){let a=this.#q;this.#p=void 0,this.#q=void 0,a?.()}}var n6=c(25757);let n7=/"/g;class n8 extends n6.n{visitOrAction(a){this.append("or "),this.append(a.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(a){return a.replace(n7,'""')}visitDefaultInsertValue(a){this.append("null")}}var n9=c(95134),oa=c(33469);class ob{#ae;constructor(a){this.#ae=a}async getSchemas(){return[]}async getTables(a={withInternalKyselyTables:!1}){return await this.#ag(a)}async getMetadata(a){return{tables:await this.getTables(a)}}#ah(a,b){let c=a.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return b.withInternalKyselyTables||(c=c.where("name","!=",n9.kQ).where("name","!=",n9.sy)),c}async #ag(a){let b=await this.#ah(this.#ae,a).execute(),c=await this.#ae.with("table_list",b=>this.#ah(b,a)).selectFrom(["table_list as tl",(0,oa.l)`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),d={};for(let a of c)d[a.table]??=[],d[a.table].push(a);return b.map(({name:a,sql:b,type:c})=>{let e=b?.split(/[\(\),]/)?.find(a=>a.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),f=d[a]??[];if(!e){let a=f.filter(a=>a.pk>0);1===a.length&&"integer"===a[0].type.toLowerCase()&&(e=a[0].name)}return{name:a,isView:"view"===c,columns:f.map(a=>({name:a.name,dataType:a.type,isNullable:!a.notnull,isAutoIncrementing:a.name===e,hasDefaultValue:null!=a.dflt_value,comment:void 0}))}})}}class oc{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}class od extends oc{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(a,b){}async releaseMigrationLock(a,b){}}class oe{#ac;constructor(a){this.#ac=(0,n1.CN)({...a})}createDriver(){return new n3(this.#ac)}createQueryCompiler(){return new n8}createAdapter(){return new od}createIntrospector(a){return new ob(a)}}function of(a,b){var c;if(c=a,(0,n1.Gv)(c)&&(0,n1.Kg)(c.stack)&&b.stack){let c=b.stack.split("\n").slice(1).join("\n");a.stack+=`
${c}`}return a}let og=Symbol();class oh{#ac;#ai=new WeakMap;#aj;constructor(a){this.#ac=(0,n1.CN)({...a})}async init(){this.#aj=(0,n1.Tn)(this.#ac.pool)?await this.#ac.pool():this.#ac.pool}async acquireConnection(){let a=await this.#ak(),b=this.#ai.get(a);return!b&&(b=new oi(a),this.#ai.set(a,b),this.#ac?.onCreateConnection&&await this.#ac.onCreateConnection(b)),this.#ac?.onReserveConnection&&await this.#ac.onReserveConnection(b),b}async #ak(){return new Promise((a,b)=>{this.#aj.getConnection(async(c,d)=>{c?b(c):a(d)})})}async beginTransaction(a,b){if(b.isolationLevel||b.accessMode){let c=[];b.isolationLevel&&c.push(`isolation level ${b.isolationLevel}`),b.accessMode&&c.push(b.accessMode);let d=`set transaction ${c.join(", ")}`;await a.executeQuery(n0.E.raw(d))}await a.executeQuery(n0.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(n0.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(n0.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(n_("savepoint",b),(0,n2.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(n_("rollback to",b),(0,n2.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(n_("release savepoint",b),(0,n2.a)()))}async releaseConnection(a){a[og]()}async destroy(){return new Promise((a,b)=>{this.#aj.end(c=>{c?b(c):a()})})}}class oi{#al;constructor(a){this.#al=a}async executeQuery(a){try{let b=await this.#am(a);if((0,n1.Gv)(b)&&"insertId"in b&&"affectedRows"in b){let{insertId:a,affectedRows:c,changedRows:d}=b;return{insertId:null!=a&&"0"!==a.toString()?BigInt(a):void 0,numAffectedRows:null!=c?BigInt(c):void 0,numChangedRows:null!=d?BigInt(d):void 0,rows:[]}}if(Array.isArray(b))return{rows:b};return{rows:[]}}catch(a){throw of(a,Error())}}#am(a){return new Promise((b,c)=>{this.#al.query(a.sql,a.parameters,(a,d)=>{a?c(a):b(d)})})}async *streamQuery(a,b){let c=this.#al.query(a.sql,a.parameters).stream({objectMode:!0});try{for await(let a of c)yield{rows:[a]}}catch(a){if(a&&"object"==typeof a&&"code"in a&&"ERR_STREAM_PREMATURE_CLOSE"===a.code)return;throw a}}[og](){this.#al.release()}}let oj=/`/g;class ok extends n6.n{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(a){return a.replace(oj,"``")}visitCreateIndex(a){this.append("create "),a.unique&&this.append("unique "),this.append("index "),a.ifNotExists&&this.append("if not exists "),this.visitNode(a.name),a.using&&(this.append(" using "),this.visitNode(a.using)),a.table&&(this.append(" on "),this.visitNode(a.table)),a.columns&&(this.append(" ("),this.compileList(a.columns),this.append(")")),a.where&&(this.append(" "),this.visitNode(a.where))}}class ol{#ae;constructor(a){this.#ae=a}async getSchemas(){return(await this.#ae.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(a=>({name:a.SCHEMA_NAME}))}async getTables(a={withInternalKyselyTables:!1}){let b=this.#ae.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",a=>a.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",(0,oa.l)`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();a.withInternalKyselyTables||(b=b.where("columns.TABLE_NAME","!=",n9.kQ).where("columns.TABLE_NAME","!=",n9.sy));let c=await b.execute();return this.#an(c)}async getMetadata(a){return{tables:await this.getTables(a)}}#an(a){return a.reduce((a,b)=>{let c=a.find(a=>a.name===b.TABLE_NAME);return c||(c=(0,n1.CN)({name:b.TABLE_NAME,isView:"VIEW"===b.TABLE_TYPE,schema:b.TABLE_SCHEMA,columns:[]}),a.push(c)),c.columns.push((0,n1.CN)({name:b.COLUMN_NAME,dataType:b.DATA_TYPE,isNullable:"YES"===b.IS_NULLABLE,isAutoIncrementing:b.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:null!==b.COLUMN_DEFAULT,comment:""===b.COLUMN_COMMENT?void 0:b.COLUMN_COMMENT})),a},[])}}let om="ea586330-2c93-47c8-908d-981d9d270f9d";class on extends oc{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(a,b){await (0,oa.l)`select get_lock(${oa.l.lit(om)}, ${oa.l.lit(3600)})`.execute(a)}async releaseMigrationLock(a,b){await (0,oa.l)`select release_lock(${oa.l.lit(om)})`.execute(a)}}class oo{#ac;constructor(a){this.#ac=a}createDriver(){return new oh(this.#ac)}createQueryCompiler(){return new ok}createAdapter(){return new on}createIntrospector(a){return new ol(a)}}let op=Symbol();class oq{#ac;#ai=new WeakMap;#aj;constructor(a){this.#ac=(0,n1.CN)({...a})}async init(){this.#aj=(0,n1.Tn)(this.#ac.pool)?await this.#ac.pool():this.#ac.pool}async acquireConnection(){let a=await this.#aj.connect(),b=this.#ai.get(a);return!b&&(b=new or(a,{cursor:this.#ac.cursor??null}),this.#ai.set(a,b),this.#ac.onCreateConnection&&await this.#ac.onCreateConnection(b)),this.#ac.onReserveConnection&&await this.#ac.onReserveConnection(b),b}async beginTransaction(a,b){if(b.isolationLevel||b.accessMode){let c="start transaction";b.isolationLevel&&(c+=` isolation level ${b.isolationLevel}`),b.accessMode&&(c+=` ${b.accessMode}`),await a.executeQuery(n0.E.raw(c))}else await a.executeQuery(n0.E.raw("begin"))}async commitTransaction(a){await a.executeQuery(n0.E.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(n0.E.raw("rollback"))}async savepoint(a,b,c){await a.executeQuery(c(n_("savepoint",b),(0,n2.a)()))}async rollbackToSavepoint(a,b,c){await a.executeQuery(c(n_("rollback to",b),(0,n2.a)()))}async releaseSavepoint(a,b,c){await a.executeQuery(c(n_("release",b),(0,n2.a)()))}async releaseConnection(a){a[op]()}async destroy(){if(this.#aj){let a=this.#aj;this.#aj=void 0,await a.end()}}}class or{#ao;#ap;constructor(a,b){this.#ao=a,this.#ap=b}async executeQuery(a){try{let{command:b,rowCount:c,rows:d}=await this.#ao.query(a.sql,[...a.parameters]);return{numAffectedRows:"INSERT"===b||"UPDATE"===b||"DELETE"===b||"MERGE"===b?BigInt(c):void 0,rows:d??[]}}catch(a){throw of(a,Error())}}async *streamQuery(a,b){if(!this.#ap.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(b)||b<=0)throw Error("chunkSize must be a positive integer");let c=this.#ao.query(new this.#ap.cursor(a.sql,a.parameters.slice()));try{for(;;){let a=await c.read(b);if(0===a.length)break;yield{rows:a}}}finally{await c.close()}}[op](){this.#ao.release()}}class os{#ae;constructor(a){this.#ae=a}async getSchemas(){return(await this.#ae.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(a=>({name:a.nspname}))}async getTables(a={withInternalKyselyTables:!1}){let b=this.#ae.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",(0,oa.l)`col_description(a.attrelid, a.attnum)`.as("column_description"),(0,oa.l)`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();a.withInternalKyselyTables||(b=b.where("c.relname","!=",n9.kQ).where("c.relname","!=",n9.sy));let c=await b.execute();return this.#an(c)}async getMetadata(a){return{tables:await this.getTables(a)}}#an(a){return a.reduce((a,b)=>{let c=a.find(a=>a.name===b.table&&a.schema===b.schema);return c||(c=(0,n1.CN)({name:b.table,isView:"v"===b.table_type,schema:b.schema,columns:[]}),a.push(c)),c.columns.push((0,n1.CN)({name:b.column,dataType:b.type,dataTypeSchema:b.type_schema,isNullable:!b.not_null,isAutoIncrementing:null!==b.auto_incrementing,hasDefaultValue:b.has_default,comment:b.column_description??void 0})),a},[])}}let ot=/"/g;class ou extends n6.n{sanitizeIdentifier(a){return a.replace(ot,'""')}}let ov=BigInt("3853314791062309107");class ow extends oc{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(a,b){await (0,oa.l)`select pg_advisory_xact_lock(${oa.l.lit(ov)})`.execute(a)}async releaseMigrationLock(a,b){}}class ox{#ac;constructor(a){this.#ac=a}createDriver(){return new oq(this.#ac)}createQueryCompiler(){return new ou}createAdapter(){return new ow}createIntrospector(a){return new os(a)}}class oy extends oc{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(a){await (0,oa.l)`exec sp_getapplock @DbPrincipal = ${oa.l.lit("dbo")}, @Resource = ${oa.l.lit(n9.kQ)}, @LockMode = ${oa.l.lit("Exclusive")}`.execute(a)}async releaseMigrationLock(){}}var oz=c(92140),oA=c(22058);let oB=Symbol(),oC=Symbol(),oD=Symbol();class oE{#ac;#aj;constructor(a){this.#ac=(0,n1.CN)({...a});let{tarn:b,tedious:c,validateConnections:d}=this.#ac,{validateConnections:e,...f}=b.options;this.#aj=new b.Pool({...f,create:async()=>{let a=await c.connectionFactory();return await new oF(a,c).connect()},destroy:async a=>{await a[oC]()},validate:!1===d||!1===e?void 0:a=>a[oD]()})}async init(){}async acquireConnection(){return await this.#aj.acquire().promise}async beginTransaction(a,b){await a.beginTransaction(b)}async commitTransaction(a){await a.commitTransaction()}async rollbackTransaction(a){await a.rollbackTransaction()}async savepoint(a,b){await a.savepoint(b)}async rollbackToSavepoint(a,b){await a.rollbackTransaction(b)}async releaseConnection(a){(this.#ac.resetConnectionsOnRelease||this.#ac.tedious.resetConnectionOnRelease)&&await a[oB](),this.#aj.release(a)}async destroy(){await this.#aj.destroy()}}class oF{#af;#aq;#ar;constructor(a,b){this.#af=a,this.#aq=!1,this.#ar=b}async beginTransaction(a){let{isolationLevel:b}=a;await new Promise((a,c)=>this.#af.beginTransaction(b=>{b?c(b):a(void 0)},b?(0,oz.D)(8):void 0,b?this.#as(b):void 0))}async commitTransaction(){await new Promise((a,b)=>this.#af.commitTransaction(c=>{c?b(c):a(void 0)}))}async connect(){let{promise:a,reject:b,resolve:c}=new oA.c;function d(){b(Error("The connection ended without ever completing the connection"))}return this.#af.connect(a=>{if(a)return b(a);c()}),this.#af.on("error",a=>{a instanceof Error&&"code"in a&&"ESOCKET"===a.code&&(this.#aq=!0),console.error(a),b(a)}),this.#af.once("end",d),await a,this.#af.off("end",d),this}async executeQuery(a){try{let b=new oA.c,c=new oG({compiledQuery:a,tedious:this.#ar,onDone:b});this.#af.execSql(c.request);let{rowCount:d,rows:e}=await b.promise;return{numAffectedRows:void 0!==d?BigInt(d):void 0,rows:e}}catch(a){throw of(a,Error())}}async rollbackTransaction(a){await new Promise((b,c)=>this.#af.rollbackTransaction(a=>{a?c(a):b(void 0)},a))}async savepoint(a){await new Promise((b,c)=>this.#af.saveTransaction(a=>{a?c(a):b(void 0)},a))}async *streamQuery(a,b){if(!Number.isInteger(b)||b<=0)throw Error("chunkSize must be a positive integer");let c=new oG({compiledQuery:a,streamChunkSize:b,tedious:this.#ar});this.#af.execSql(c.request);try{for(;;){let a=await c.readChunk();if(0===a.length||(yield{rows:a},a.length<b))break}}finally{await this.#at(c)}}#as(a){let{ISOLATION_LEVEL:b}=this.#ar,c={"read committed":b.READ_COMMITTED,"read uncommitted":b.READ_UNCOMMITTED,"repeatable read":b.REPEATABLE_READ,serializable:b.SERIALIZABLE,snapshot:b.SNAPSHOT}[a];if(void 0===c)throw Error(`Unknown isolation level: ${a}`);return c}#at(a){return new Promise(b=>{a.request.once("requestCompleted",b),this.#af.cancel()||(a.request.off("requestCompleted",b),b())})}[oC](){return"closed"in this.#af&&this.#af.closed?Promise.resolve():new Promise(a=>{this.#af.once("end",a),this.#af.close()})}async [oB](){await new Promise((a,b)=>{this.#af.reset(c=>{if(c)return b(c);a()})})}async [oD](){if(this.#aq||this.#au())return!1;try{let a=new oA.c,b=new oG({compiledQuery:n0.E.raw("select 1"),onDone:a,tedious:this.#ar});return this.#af.execSql(b.request),await a.promise,!0}catch{return!1}}#au(){return"closed"in this.#af&&!!this.#af.closed}}class oG{#av;#aw;#ax;#ay;#ar;#az;constructor(a){let{compiledQuery:b,onDone:c,streamChunkSize:d,tedious:e}=a;if(this.#aw=[],this.#ax=d,this.#ay={},this.#ar=e,c){let a="onDone";this.#ay[a]=(b,d)=>{if("chunkReady"!==b){if(delete this.#ay[a],"error"===b)return c.reject(d);c.resolve({rowCount:this.#az,rows:this.#aw})}}}this.#av=new this.#ar.Request(b.sql,(a,b)=>{if(a)return Object.values(this.#ay).forEach(b=>b("error",a instanceof AggregateError?a.errors:a));this.#az=b}),this.#aA(b.parameters),this.#aB()}get request(){return this.#av}readChunk(){let a=this.readChunk.name;return new Promise((b,c)=>{this.#ay[a]=(d,e)=>{if(delete this.#ay[a],"error"===d)return c(e);b(this.#aw.splice(0,this.#ax))},this.#av.resume()})}#aA(a){for(let b=0;b<a.length;b++){let c=a[b];this.#av.addParameter(String(b+1),this.#aC(c),c)}}#aB(){let a=this.#ax?()=>{this.#ax<=this.#aw.length&&(this.#av.pause(),Object.values(this.#ay).forEach(a=>a("chunkReady")))}:()=>{},b=b=>{let c={};for(let a of b)c[a.metadata.colName]=a.value;this.#aw.push(c),a()};this.#av.on("row",b),this.#av.once("requestCompleted",()=>{Object.values(this.#ay).forEach(a=>a("completed")),this.#av.off("row",b)})}#aC(a){if((0,n1.kZ)(a)||(0,n1.b0)(a)||(0,n1.Kg)(a))return this.#ar.TYPES.NVarChar;if((0,n1.sI)(a)||(0,n1.Et)(a)&&a%1==0)if(a<-0x80000000||a>0x7fffffff)return this.#ar.TYPES.BigInt;else return this.#ar.TYPES.Int;return(0,n1.Et)(a)?this.#ar.TYPES.Float:(0,n1.Lm)(a)?this.#ar.TYPES.Bit:(0,n1.$P)(a)?this.#ar.TYPES.DateTime:(0,n1.Pe)(a)?this.#ar.TYPES.VarBinary:this.#ar.TYPES.NVarChar}}class oH{#ae;constructor(a){this.#ae=a}async getSchemas(){return await this.#ae.selectFrom("sys.schemas").select("name").execute()}async getTables(a={withInternalKyselyTables:!1}){let b=await this.#ae.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",a=>a.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!a.withInternalKyselyTables,a=>a.where("tables.name","!=",n9.kQ).where("tables.name","!=",n9.sy)).select(["tables.name as table_name",a=>a.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#ae.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",a=>a.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),c={};for(let a of b){let b=`${a.table_schema_name}.${a.table_name}`;(c[b]=c[b]||(0,n1.CN)({columns:[],isView:"V "===a.table_type,name:a.table_name,schema:a.table_schema_name??void 0})).columns.push((0,n1.CN)({dataType:a.type_name,dataTypeSchema:a.type_schema_name??void 0,hasDefaultValue:a.column_default_object_id>0||"NOT_APPLICABLE"!==a.column_generated_always_type||a.column_is_identity||a.column_is_computed||a.column_is_rowguidcol,isAutoIncrementing:a.column_is_identity,isNullable:a.column_is_nullable&&a.type_is_nullable,name:a.column_name,comment:a.column_comment??void 0}))}return Object.values(c)}async getMetadata(a){return{tables:await this.getTables(a)}}}let oI=/^[a-z0-9_]$/i;class oJ extends n6.n{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(a){super.visitOffset(a),this.append(" rows")}compileColumnAlterations(a){let b={};for(let c of a)b[c.kind]||(b[c.kind]=[]),b[c.kind].push(c);let c=!0;b.AddColumnNode&&(this.append("add "),this.compileList(b.AddColumnNode),c=!1),b.AlterColumnNode&&(c||this.append(", "),this.compileList(b.AlterColumnNode)),b.DropColumnNode&&(c||this.append(", "),this.append("drop column "),this.compileList(b.DropColumnNode)),b.ModifyColumnNode&&(c||this.append(", "),this.compileList(b.ModifyColumnNode)),b.RenameColumnNode&&(c||this.append(", "),this.compileList(b.RenameColumnNode))}visitAddColumn(a){this.visitNode(a.column)}visitDropColumn(a){this.visitNode(a.column)}visitMergeQuery(a){super.visitMergeQuery(a),this.append(";")}visitCollate(a){this.append("collate ");let{name:b}=a.collation;for(let a of b)if(!oI.test(a))throw Error(`Invalid collation: ${b}`);this.append(b)}announcesNewColumnDataType(){return!1}}class oK{#ac;constructor(a){this.#ac=a}createDriver(){return new oE(this.#ac)}createQueryCompiler(){return new oJ}createAdapter(){return new oy}createIntrospector(a){return new oH(a)}}let oL=(0,n1.CN)({is:a=>"AlterTableNode"===a.kind,create:a=>(0,n1.CN)({kind:"AlterTableNode",table:a}),cloneWithTableProps:(a,b)=>(0,n1.CN)({...a,...b}),cloneWithColumnAlteration:(a,b)=>(0,n1.CN)({...a,columnAlterations:a.columnAlterations?[...a.columnAlterations,b]:[b]})}),oM=(0,n1.CN)({is:a=>"CreateIndexNode"===a.kind,create:a=>(0,n1.CN)({kind:"CreateIndexNode",name:nZ.O.create(a)}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b}),cloneWithColumns:(a,b)=>(0,n1.CN)({...a,columns:[...a.columns||[],...b]})}),oN=(0,n1.CN)({is:a=>"CreateSchemaNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"CreateSchemaNode",schema:nZ.O.create(a),...b}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})});var oO=c(18197),oP=c(36036);let oQ=(0,n1.CN)({is:a=>"DropIndexNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"DropIndexNode",name:oP.y.create(a),...b}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),oR=(0,n1.CN)({is:a=>"DropSchemaNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"DropSchemaNode",schema:nZ.O.create(a),...b}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),oS=(0,n1.CN)({is:a=>"DropTableNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"DropTableNode",table:a,...b}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})});var oT=c(98812);let oU=(0,n1.CN)({is:a=>"AddColumnNode"===a.kind,create:a=>(0,n1.CN)({kind:"AddColumnNode",column:a})});var oV=c(83878);let oW=(0,n1.CN)({is:a=>"ColumnDefinitionNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"ColumnDefinitionNode",column:oV.Z.create(a),dataType:b}),cloneWithFrontModifier:(a,b)=>(0,n1.CN)({...a,frontModifiers:a.frontModifiers?(0,n1.CN)([...a.frontModifiers,b]):[b]}),cloneWithEndModifier:(a,b)=>(0,n1.CN)({...a,endModifiers:a.endModifiers?(0,n1.CN)([...a.endModifiers,b]):[b]}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),oX=(0,n1.CN)({is:a=>"DropColumnNode"===a.kind,create:a=>(0,n1.CN)({kind:"DropColumnNode",column:oV.Z.create(a)})}),oY=(0,n1.CN)({is:a=>"RenameColumnNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"RenameColumnNode",column:oV.Z.create(a),renameTo:oV.Z.create(b)})}),oZ=(0,n1.CN)({is:a=>"CheckConstraintNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"CheckConstraintNode",expression:a,name:b?nZ.O.create(b):void 0})}),o$=["no action","restrict","cascade","set null","set default"],o_=(0,n1.CN)({is:a=>"ReferencesNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"ReferencesNode",table:a,columns:(0,n1.CN)([...b])}),cloneWithOnDelete:(a,b)=>(0,n1.CN)({...a,onDelete:b}),cloneWithOnUpdate:(a,b)=>(0,n1.CN)({...a,onUpdate:b})});var o0=c(11570),o1=c(45817),o2=c(8711),o3=c(43227);function o4(a){return(0,o2.N)(a)?a.toOperationNode():o3.q.createImmediate(a)}let o5=(0,n1.CN)({is:a=>"GeneratedNode"===a.kind,create:a=>(0,n1.CN)({kind:"GeneratedNode",...a}),createWithExpression:a=>(0,n1.CN)({kind:"GeneratedNode",always:!0,expression:a}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),o6=(0,n1.CN)({is:a=>"DefaultValueNode"===a.kind,create:a=>(0,n1.CN)({kind:"DefaultValueNode",defaultValue:a})});function o7(a){if(o$.includes(a))return a;throw Error(`invalid OnModifyForeignAction ${a}`)}class o8{#D;constructor(a){this.#D=a}autoIncrement(){return new o8(oW.cloneWith(this.#D,{autoIncrement:!0}))}identity(){return new o8(oW.cloneWith(this.#D,{identity:!0}))}primaryKey(){return new o8(oW.cloneWith(this.#D,{primaryKey:!0}))}references(a){let b=(0,o1.q5)(a);if(!b.table||o0.U.is(b.column))throw Error(`invalid call references('${a}'). The reference must have format table.column or schema.table.column`);return new o8(oW.cloneWith(this.#D,{references:o_.create(b.table,[b.column])}))}onDelete(a){if(!this.#D.references)throw Error("on delete constraint can only be added for foreign keys");return new o8(oW.cloneWith(this.#D,{references:o_.cloneWithOnDelete(this.#D.references,o7(a))}))}onUpdate(a){if(!this.#D.references)throw Error("on update constraint can only be added for foreign keys");return new o8(oW.cloneWith(this.#D,{references:o_.cloneWithOnUpdate(this.#D.references,o7(a))}))}unique(){return new o8(oW.cloneWith(this.#D,{unique:!0}))}notNull(){return new o8(oW.cloneWith(this.#D,{notNull:!0}))}unsigned(){return new o8(oW.cloneWith(this.#D,{unsigned:!0}))}defaultTo(a){return new o8(oW.cloneWith(this.#D,{defaultTo:o6.create(o4(a))}))}check(a){return new o8(oW.cloneWith(this.#D,{check:oZ.create(a.toOperationNode())}))}generatedAlwaysAs(a){return new o8(oW.cloneWith(this.#D,{generated:o5.createWithExpression(a.toOperationNode())}))}generatedAlwaysAsIdentity(){return new o8(oW.cloneWith(this.#D,{generated:o5.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new o8(oW.cloneWith(this.#D,{generated:o5.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#D.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new o8(oW.cloneWith(this.#D,{generated:o5.cloneWith(this.#D.generated,{stored:!0})}))}modifyFront(a){return new o8(oW.cloneWithFrontModifier(this.#D,a.toOperationNode()))}nullsNotDistinct(){return new o8(oW.cloneWith(this.#D,{nullsNotDistinct:!0}))}ifNotExists(){return new o8(oW.cloneWith(this.#D,{ifNotExists:!0}))}modifyEnd(a){return new o8(oW.cloneWithEndModifier(this.#D,a.toOperationNode()))}$call(a){return a(this)}toOperationNode(){return this.#D}}let o9=(0,n1.CN)({is:a=>"ModifyColumnNode"===a.kind,create:a=>(0,n1.CN)({kind:"ModifyColumnNode",column:a})});var pa=c(81289);let pb=(0,n1.CN)({is:a=>"ForeignKeyConstraintNode"===a.kind,create:(a,b,c,d)=>(0,n1.CN)({kind:"ForeignKeyConstraintNode",columns:a,references:o_.create(b,c),name:d?nZ.O.create(d):void 0}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})});class pc{#D;constructor(a){this.#D=a}onDelete(a){return new pc(pb.cloneWith(this.#D,{onDelete:o7(a)}))}onUpdate(a){return new pc(pb.cloneWith(this.#D,{onUpdate:o7(a)}))}deferrable(){return new pc(pb.cloneWith(this.#D,{deferrable:!0}))}notDeferrable(){return new pc(pb.cloneWith(this.#D,{deferrable:!1}))}initiallyDeferred(){return new pc(pb.cloneWith(this.#D,{initiallyDeferred:!0}))}initiallyImmediate(){return new pc(pb.cloneWith(this.#D,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#D}}let pd=(0,n1.CN)({is:a=>"AddConstraintNode"===a.kind,create:a=>(0,n1.CN)({kind:"AddConstraintNode",constraint:a})}),pe=(0,n1.CN)({is:a=>"UniqueConstraintNode"===a.kind,create:(a,b,c)=>(0,n1.CN)({kind:"UniqueConstraintNode",columns:(0,n1.CN)(a.map(oV.Z.create)),name:b?nZ.O.create(b):void 0,nullsNotDistinct:c}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),pf=(0,n1.CN)({is:a=>"DropConstraintNode"===a.kind,create:a=>(0,n1.CN)({kind:"DropConstraintNode",constraintName:nZ.O.create(a)}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),pg=(0,n1.CN)({is:a=>"AlterColumnNode"===a.kind,create:(a,b,c)=>(0,n1.CN)({kind:"AlterColumnNode",column:oV.Z.create(a),[b]:c})});class ph{#aD;constructor(a){this.#aD=a}setDataType(a){return new pi(pg.create(this.#aD,"dataType",(0,pa.Q)(a)))}setDefault(a){return new pi(pg.create(this.#aD,"setDefault",o4(a)))}dropDefault(){return new pi(pg.create(this.#aD,"dropDefault",!0))}setNotNull(){return new pi(pg.create(this.#aD,"setNotNull",!0))}dropNotNull(){return new pi(pg.create(this.#aD,"dropNotNull",!0))}$call(a){return a(this)}}class pi{#aE;constructor(a){this.#aE=a}toOperationNode(){return this.#aE}}class pj{#l;constructor(a){this.#l=(0,n1.CN)(a)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pk{#l;constructor(a){this.#l=(0,n1.CN)(a)}onDelete(a){return new pk({...this.#l,constraintBuilder:this.#l.constraintBuilder.onDelete(a)})}onUpdate(a){return new pk({...this.#l,constraintBuilder:this.#l.constraintBuilder.onUpdate(a)})}deferrable(){return new pk({...this.#l,constraintBuilder:this.#l.constraintBuilder.deferrable()})}notDeferrable(){return new pk({...this.#l,constraintBuilder:this.#l.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new pk({...this.#l,constraintBuilder:this.#l.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new pk({...this.#l,constraintBuilder:this.#l.constraintBuilder.initiallyImmediate()})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(oL.cloneWithTableProps(this.#l.node,{addConstraint:pd.create(this.#l.constraintBuilder.toOperationNode())}),this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pl{#l;constructor(a){this.#l=(0,n1.CN)(a)}ifExists(){return new pl({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{dropConstraint:pf.cloneWith(this.#l.node.dropConstraint,{ifExists:!0})})})}cascade(){return new pl({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{dropConstraint:pf.cloneWith(this.#l.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new pl({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{dropConstraint:pf.cloneWith(this.#l.node.dropConstraint,{modifier:"restrict"})})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}let pm=(0,n1.CN)({is:a=>"PrimaryKeyConstraintNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"PrimaryKeyConstraintNode",columns:(0,n1.CN)(a.map(oV.Z.create)),name:b?nZ.O.create(b):void 0}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})}),pn=(0,n1.CN)({is:a=>"AddIndexNode"===a.kind,create:a=>(0,n1.CN)({kind:"AddIndexNode",name:nZ.O.create(a)}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b}),cloneWithColumns:(a,b)=>(0,n1.CN)({...a,columns:[...a.columns||[],...b]})});class po{#l;constructor(a){this.#l=(0,n1.CN)(a)}unique(){return new po({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addIndex:pn.cloneWith(this.#l.node.addIndex,{unique:!0})})})}column(a){return new po({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addIndex:pn.cloneWithColumns(this.#l.node.addIndex,[(0,o1.Ow)(a)])})})}columns(a){return new po({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addIndex:pn.cloneWithColumns(this.#l.node.addIndex,a.map(o1.Ow))})})}expression(a){return new po({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addIndex:pn.cloneWithColumns(this.#l.node.addIndex,[a.toOperationNode()])})})}using(a){return new po({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addIndex:pn.cloneWith(this.#l.node.addIndex,{using:n$.z.createWithSql(a)})})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pp{#D;constructor(a){this.#D=a}nullsNotDistinct(){return new pp(pe.cloneWith(this.#D,{nullsNotDistinct:!0}))}deferrable(){return new pp(pe.cloneWith(this.#D,{deferrable:!0}))}notDeferrable(){return new pp(pe.cloneWith(this.#D,{deferrable:!1}))}initiallyDeferred(){return new pp(pe.cloneWith(this.#D,{initiallyDeferred:!0}))}initiallyImmediate(){return new pp(pe.cloneWith(this.#D,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#D}}class pq{#D;constructor(a){this.#D=a}deferrable(){return new pq(pm.cloneWith(this.#D,{deferrable:!0}))}notDeferrable(){return new pq(pm.cloneWith(this.#D,{deferrable:!1}))}initiallyDeferred(){return new pq(pm.cloneWith(this.#D,{initiallyDeferred:!0}))}initiallyImmediate(){return new pq(pm.cloneWith(this.#D,{initiallyDeferred:!1}))}$call(a){return a(this)}toOperationNode(){return this.#D}}class pr{#D;constructor(a){this.#D=a}$call(a){return a(this)}toOperationNode(){return this.#D}}let ps=(0,n1.CN)({is:a=>"RenameConstraintNode"===a.kind,create:(a,b)=>(0,n1.CN)({kind:"RenameConstraintNode",oldName:nZ.O.create(a),newName:nZ.O.create(b)})});class pt{#l;constructor(a){this.#l=(0,n1.CN)(a)}renameTo(a){return new pj({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{renameTo:(0,oT.M$)(a)})})}setSchema(a){return new pj({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{setSchema:nZ.O.create(a)})})}alterColumn(a,b){let c=b(new ph(a));return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,c.toOperationNode())})}dropColumn(a){return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,oX.create(a))})}renameColumn(a,b){return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,oY.create(a,b))})}addColumn(a,b,c=n1.lQ){let d=c(new o8(oW.create(a,(0,pa.Q)(b))));return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,oU.create(d.toOperationNode()))})}modifyColumn(a,b,c=n1.lQ){let d=c(new o8(oW.create(a,(0,pa.Q)(b))));return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,o9.create(d.toOperationNode()))})}addUniqueConstraint(a,b,c=n1.lQ){let d=c(new pp(pe.create(b,a)));return new pj({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addConstraint:pd.create(d.toOperationNode())})})}addCheckConstraint(a,b,c=n1.lQ){let d=c(new pr(oZ.create(b.toOperationNode(),a)));return new pj({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addConstraint:pd.create(d.toOperationNode())})})}addForeignKeyConstraint(a,b,c,d,e=n1.lQ){let f=e(new pc(pb.create(b.map(oV.Z.create),(0,oT.M$)(c),d.map(oV.Z.create),a)));return new pk({...this.#l,constraintBuilder:f})}addPrimaryKeyConstraint(a,b,c=n1.lQ){let d=c(new pq(pm.create(b,a)));return new pj({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addConstraint:pd.create(d.toOperationNode())})})}dropConstraint(a){return new pl({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{dropConstraint:pf.create(a)})})}renameConstraint(a,b){return new pl({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{renameConstraint:ps.create(a,b)})})}addIndex(a){return new po({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{addIndex:pn.create(a)})})}dropIndex(a){return new pj({...this.#l,node:oL.cloneWithTableProps(this.#l.node,{dropIndex:oQ.create(a)})})}$call(a){return a(this)}}class pu{#l;constructor(a){this.#l=(0,n1.CN)(a)}alterColumn(a,b){let c=b(new ph(a));return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,c.toOperationNode())})}dropColumn(a){return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,oX.create(a))})}renameColumn(a,b){return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,oY.create(a,b))})}addColumn(a,b,c=n1.lQ){let d=c(new o8(oW.create(a,(0,pa.Q)(b))));return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,oU.create(d.toOperationNode()))})}modifyColumn(a,b,c=n1.lQ){let d=c(new o8(oW.create(a,(0,pa.Q)(b))));return new pu({...this.#l,node:oL.cloneWithColumnAlteration(this.#l.node,o9.create(d.toOperationNode()))})}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}var pv=c(68949),pw=c(8974),px=c(36646),py=c(96544);class pz extends px.V{transformPrimitiveValueList(a){return py.s.create(a.values.map(o3.q.createImmediate))}transformValue(a){return o3.q.createImmediate(a.value)}}class pA{#l;constructor(a){this.#l=(0,n1.CN)(a)}ifNotExists(){return new pA({...this.#l,node:oM.cloneWith(this.#l.node,{ifNotExists:!0})})}unique(){return new pA({...this.#l,node:oM.cloneWith(this.#l.node,{unique:!0})})}nullsNotDistinct(){return new pA({...this.#l,node:oM.cloneWith(this.#l.node,{nullsNotDistinct:!0})})}on(a){return new pA({...this.#l,node:oM.cloneWith(this.#l.node,{table:(0,oT.M$)(a)})})}column(a){return new pA({...this.#l,node:oM.cloneWithColumns(this.#l.node,[(0,o1.Ow)(a)])})}columns(a){return new pA({...this.#l,node:oM.cloneWithColumns(this.#l.node,a.map(o1.Ow))})}expression(a){return new pA({...this.#l,node:oM.cloneWithColumns(this.#l.node,[a.toOperationNode()])})}using(a){return new pA({...this.#l,node:oM.cloneWith(this.#l.node,{using:n$.z.createWithSql(a)})})}where(...a){let b=new pz;return new pA({...this.#l,node:pw.L.cloneWithWhere(this.#l.node,b.transformNode((0,pv.GB)(a),this.#l.queryId))})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pB{#l;constructor(a){this.#l=(0,n1.CN)(a)}ifNotExists(){return new pB({...this.#l,node:oN.cloneWith(this.#l.node,{ifNotExists:!0})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}var pC=c(78614);class pD{#l;constructor(a){this.#l=(0,n1.CN)(a)}temporary(){return new pD({...this.#l,node:oO.B.cloneWith(this.#l.node,{temporary:!0})})}onCommit(a){return new pD({...this.#l,node:oO.B.cloneWith(this.#l.node,{onCommit:function(a){if(oO.o.includes(a))return a;throw Error(`invalid OnCommitAction ${a}`)}(a)})})}ifNotExists(){return new pD({...this.#l,node:oO.B.cloneWith(this.#l.node,{ifNotExists:!0})})}addColumn(a,b,c=n1.lQ){let d=c(new o8(oW.create(a,(0,pa.Q)(b))));return new pD({...this.#l,node:oO.B.cloneWithColumn(this.#l.node,d.toOperationNode())})}addPrimaryKeyConstraint(a,b,c=n1.lQ){let d=c(new pq(pm.create(b,a)));return new pD({...this.#l,node:oO.B.cloneWithConstraint(this.#l.node,d.toOperationNode())})}addUniqueConstraint(a,b,c=n1.lQ){let d=c(new pp(pe.create(b,a)));return new pD({...this.#l,node:oO.B.cloneWithConstraint(this.#l.node,d.toOperationNode())})}addCheckConstraint(a,b,c=n1.lQ){let d=c(new pr(oZ.create(b.toOperationNode(),a)));return new pD({...this.#l,node:oO.B.cloneWithConstraint(this.#l.node,d.toOperationNode())})}addForeignKeyConstraint(a,b,c,d,e=n1.lQ){let f=e(new pc(pb.create(b.map(oV.Z.create),(0,oT.M$)(c),d.map(oV.Z.create),a)));return new pD({...this.#l,node:oO.B.cloneWithConstraint(this.#l.node,f.toOperationNode())})}modifyFront(a){return new pD({...this.#l,node:oO.B.cloneWithFrontModifier(this.#l.node,a.toOperationNode())})}modifyEnd(a){return new pD({...this.#l,node:oO.B.cloneWithEndModifier(this.#l.node,a.toOperationNode())})}as(a){return new pD({...this.#l,node:oO.B.cloneWith(this.#l.node,{selectQuery:(0,pC.YK)(a)})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pE{#l;constructor(a){this.#l=(0,n1.CN)(a)}on(a){return new pE({...this.#l,node:oQ.cloneWith(this.#l.node,{table:(0,oT.M$)(a)})})}ifExists(){return new pE({...this.#l,node:oQ.cloneWith(this.#l.node,{ifExists:!0})})}cascade(){return new pE({...this.#l,node:oQ.cloneWith(this.#l.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pF{#l;constructor(a){this.#l=(0,n1.CN)(a)}ifExists(){return new pF({...this.#l,node:oR.cloneWith(this.#l.node,{ifExists:!0})})}cascade(){return new pF({...this.#l,node:oR.cloneWith(this.#l.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pG{#l;constructor(a){this.#l=(0,n1.CN)(a)}ifExists(){return new pG({...this.#l,node:oS.cloneWith(this.#l.node,{ifExists:!0})})}cascade(){return new pG({...this.#l,node:oS.cloneWith(this.#l.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}var pH=c(5595),pI=c(13856);class pJ{#k=new pz;transformQuery(a){return this.#k.transformNode(a.node,a.queryId)}transformResult(a){return Promise.resolve(a.result)}}class pK{#l;constructor(a){this.#l=(0,n1.CN)(a)}temporary(){return new pK({...this.#l,node:pI.Y.cloneWith(this.#l.node,{temporary:!0})})}materialized(){return new pK({...this.#l,node:pI.Y.cloneWith(this.#l.node,{materialized:!0})})}ifNotExists(){return new pK({...this.#l,node:pI.Y.cloneWith(this.#l.node,{ifNotExists:!0})})}orReplace(){return new pK({...this.#l,node:pI.Y.cloneWith(this.#l.node,{orReplace:!0})})}columns(a){return new pK({...this.#l,node:pI.Y.cloneWith(this.#l.node,{columns:a.map(o1.RY)})})}as(a){let b=a.withPlugin(new pJ).toOperationNode();return new pK({...this.#l,node:pI.Y.cloneWith(this.#l.node,{as:b})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}let pL=(0,n1.CN)({is:a=>"DropViewNode"===a.kind,create:a=>(0,n1.CN)({kind:"DropViewNode",name:oP.y.create(a)}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})});class pM{#l;constructor(a){this.#l=(0,n1.CN)(a)}materialized(){return new pM({...this.#l,node:pL.cloneWith(this.#l.node,{materialized:!0})})}ifExists(){return new pM({...this.#l,node:pL.cloneWith(this.#l.node,{ifExists:!0})})}cascade(){return new pM({...this.#l,node:pL.cloneWith(this.#l.node,{cascade:!0})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}let pN=(0,n1.CN)({is:a=>"CreateTypeNode"===a.kind,create:a=>(0,n1.CN)({kind:"CreateTypeNode",name:a}),cloneWithEnum:(a,b)=>(0,n1.CN)({...a,enum:py.s.create(b.map(o3.q.createImmediate))})});class pO{#l;constructor(a){this.#l=(0,n1.CN)(a)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}asEnum(a){return new pO({...this.#l,node:pN.cloneWithEnum(this.#l.node,a)})}$call(a){return a(this)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}let pP=(0,n1.CN)({is:a=>"DropTypeNode"===a.kind,create:a=>(0,n1.CN)({kind:"DropTypeNode",name:a}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})});class pQ{#l;constructor(a){this.#l=(0,n1.CN)(a)}ifExists(){return new pQ({...this.#l,node:pP.cloneWith(this.#l.node,{ifExists:!0})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}function pR(a){if(!a.includes("."))return oP.y.create(a);{let b=a.split(".").map(pS);if(2===b.length)return oP.y.createWithSchema(b[0],b[1]);throw Error(`invalid schemable identifier ${a}`)}}function pS(a){return a.trim()}let pT=(0,n1.CN)({is:a=>"RefreshMaterializedViewNode"===a.kind,create:a=>(0,n1.CN)({kind:"RefreshMaterializedViewNode",name:oP.y.create(a)}),cloneWith:(a,b)=>(0,n1.CN)({...a,...b})});class pU{#l;constructor(a){this.#l=(0,n1.CN)(a)}concurrently(){return new pU({...this.#l,node:pT.cloneWith(this.#l.node,{concurrently:!0,withNoData:!1})})}withData(){return new pU({...this.#l,node:pT.cloneWith(this.#l.node,{withNoData:!1})})}withNoData(){return new pU({...this.#l,node:pT.cloneWith(this.#l.node,{withNoData:!0,concurrently:!1})})}$call(a){return a(this)}toOperationNode(){return this.#l.executor.transformQuery(this.#l.node,this.#l.queryId)}compile(){return this.#l.executor.compileQuery(this.toOperationNode(),this.#l.queryId)}async execute(){await this.#l.executor.executeQuery(this.compile())}}class pV{#aF;constructor(a){this.#aF=a}createTable(a){return new pD({queryId:(0,n2.a)(),executor:this.#aF,node:oO.B.create((0,oT.M$)(a))})}dropTable(a){return new pG({queryId:(0,n2.a)(),executor:this.#aF,node:oS.create((0,oT.M$)(a))})}createIndex(a){return new pA({queryId:(0,n2.a)(),executor:this.#aF,node:oM.create(a)})}dropIndex(a){return new pE({queryId:(0,n2.a)(),executor:this.#aF,node:oQ.create(a)})}createSchema(a){return new pB({queryId:(0,n2.a)(),executor:this.#aF,node:oN.create(a)})}dropSchema(a){return new pF({queryId:(0,n2.a)(),executor:this.#aF,node:oR.create(a)})}alterTable(a){return new pt({queryId:(0,n2.a)(),executor:this.#aF,node:oL.create((0,oT.M$)(a))})}createView(a){return new pK({queryId:(0,n2.a)(),executor:this.#aF,node:pI.Y.create(a)})}refreshMaterializedView(a){return new pU({queryId:(0,n2.a)(),executor:this.#aF,node:pT.create(a)})}dropView(a){return new pM({queryId:(0,n2.a)(),executor:this.#aF,node:pL.create(a)})}createType(a){return new pO({queryId:(0,n2.a)(),executor:this.#aF,node:pN.create(pR(a))})}dropType(a){return new pQ({queryId:(0,n2.a)(),executor:this.#aF,node:pP.create(pR(a))})}withPlugin(a){return new pV(this.#aF.withPlugin(a))}withoutPlugins(){return new pV(this.#aF.withoutPlugins())}withSchema(a){return new pV(this.#aF.withPluginAtFront(new pH.B(a)))}}var pW=c(91307),pX=c(56552);class pY{ref(a){return new pW.g(a)}table(a){return new pX.bj(a)}}class pZ{#aG;constructor(a){this.#aG=a}async provideConnection(a){let b=await this.#aG.acquireConnection();try{return await a(b)}finally{await this.#aG.releaseConnection(b)}}}var p$=c(40670),p_=c(94511);class p0 extends p_.R{#aH;#aI;#aJ;constructor(a,b,c,d=[]){super(d),this.#aH=a,this.#aI=b,this.#aJ=c}get adapter(){return this.#aI}compileQuery(a,b){return this.#aH.compileQuery(a,b)}provideConnection(a){return this.#aJ.provideConnection(a)}withPlugins(a){return new p0(this.#aH,this.#aI,this.#aJ,[...this.plugins,...a])}withPlugin(a){return new p0(this.#aH,this.#aI,this.#aJ,[...this.plugins,a])}withPluginAtFront(a){return new p0(this.#aH,this.#aI,this.#aJ,[a,...this.plugins])}withConnectionProvider(a){return new p0(this.#aH,this.#aI,a,[...this.plugins])}withoutPlugins(){return new p0(this.#aH,this.#aI,this.#aJ,[])}}function p1(){return"undefined"!=typeof performance&&(0,n1.Tn)(performance.now)?performance.now():Date.now()}class p2{#aG;#aK;#aL;#aM;#aN;#ai=new WeakSet;constructor(a,b){this.#aM=!1,this.#aG=a,this.#aK=b}async init(){if(this.#aN)throw Error("driver has already been destroyed");this.#aL||(this.#aL=this.#aG.init().then(()=>{this.#aM=!0}).catch(a=>(this.#aL=void 0,Promise.reject(a)))),await this.#aL}async acquireConnection(){if(this.#aN)throw Error("driver has already been destroyed");this.#aM||await this.init();let a=await this.#aG.acquireConnection();return this.#ai.has(a)||(this.#aO()&&this.#aP(a),this.#ai.add(a)),a}async releaseConnection(a){await this.#aG.releaseConnection(a)}beginTransaction(a,b){return this.#aG.beginTransaction(a,b)}commitTransaction(a){return this.#aG.commitTransaction(a)}rollbackTransaction(a){return this.#aG.rollbackTransaction(a)}savepoint(a,b,c){if(this.#aG.savepoint)return this.#aG.savepoint(a,b,c);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(a,b,c){if(this.#aG.rollbackToSavepoint)return this.#aG.rollbackToSavepoint(a,b,c);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(a,b,c){if(this.#aG.releaseSavepoint)return this.#aG.releaseSavepoint(a,b,c);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#aL&&(await this.#aL,this.#aN||(this.#aN=this.#aG.destroy().catch(a=>(this.#aN=void 0,Promise.reject(a)))),await this.#aN)}#aO(){return this.#aK.isLevelEnabled("query")||this.#aK.isLevelEnabled("error")}#aP(a){let b=a.executeQuery,c=a.streamQuery,d=this;a.executeQuery=async c=>{let e,f=p1();try{return await b.call(a,c)}catch(a){throw e=a,await d.#aQ(a,c,f),a}finally{e||await d.#aR(c,f)}},a.streamQuery=async function*(b,e){let f,g=p1();try{for await(let d of c.call(a,b,e))yield d}catch(a){throw f=a,await d.#aQ(a,b,g),a}finally{f||await d.#aR(b,g,!0)}}}async #aQ(a,b,c){await this.#aK.error(()=>({level:"error",error:a,query:b,queryDurationMillis:this.#aS(c)}))}async #aR(a,b,c=!1){await this.#aK.query(()=>({level:"query",isStream:c,query:a,queryDurationMillis:this.#aS(b)}))}#aS(a){return p1()-a}}let p3=()=>{};class p4{#af;#aT;constructor(a){this.#af=a}async provideConnection(a){for(;this.#aT;)await this.#aT.catch(p3);return this.#aT=this.#aU(a).finally(()=>{this.#aT=void 0}),this.#aT}async #aU(a){return await a(this.#af)}}let p5=["read only","read write"],p6=["read uncommitted","read committed","repeatable read","serializable","snapshot"];function p7(a){if(a.accessMode&&!p5.includes(a.accessMode))throw Error(`invalid transaction access mode ${a.accessMode}`);if(a.isolationLevel&&!p6.includes(a.isolationLevel))throw Error(`invalid transaction isolation level ${a.isolationLevel}`)}var p8=c(72734);(0,n1.CN)(["query","error"]);class p9{#aV;#aW;constructor(a){(0,n1.Tn)(a)?(this.#aW=a,this.#aV=(0,n1.CN)({query:!0,error:!0})):(this.#aW=qa,this.#aV=(0,n1.CN)({query:a.includes("query"),error:a.includes("error")}))}isLevelEnabled(a){return this.#aV[a]}async query(a){this.#aV.query&&await this.#aW(a())}async error(a){this.#aV.error&&await this.#aW(a())}}function qa(a){if("query"===a.level){let b=`kysely:query:${a.isStream?"stream:":""}`;console.log(`${b} ${a.query.sql}`),console.log(`${b} duration: ${a.queryDurationMillis.toFixed(1)}ms`)}else"error"===a.level&&(a.error instanceof Error?console.error(`kysely:error: ${a.error.stack??a.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:a.error,query:a.query.sql,queryDurationMillis:a.queryDurationMillis})}`))}var qb=c(92323),qc=c(81744),qd=c(48494),qe=c(91415);Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");class qf extends p$.n{#l;constructor(a){let b,c;if(function(a){return(0,n1.Gv)(a)&&(0,n1.Gv)(a.config)&&(0,n1.Gv)(a.driver)&&(0,n1.Gv)(a.executor)&&(0,n1.Gv)(a.dialect)}(a))b={executor:a.executor},c={...a};else{let d=a.dialect,e=d.createDriver(),f=d.createQueryCompiler(),g=d.createAdapter(),h=new p2(e,new p9(a.log??[])),i=new p0(f,g,new pZ(h),a.plugins??[]);b={executor:i},c={config:a,executor:i,dialect:d,driver:h}}super(b),this.#l=(0,n1.CN)(c)}get schema(){return new pV(this.#l.executor)}get dynamic(){return new pY}get introspection(){return this.#l.dialect.createIntrospector(this.withoutPlugins())}case(a){return new qb.OU({node:qc.P.create((0,n1.b0)(a)?void 0:(0,pC.YK)(a))})}get fn(){return(0,p8.t)()}transaction(){return new qi({...this.#l})}startTransaction(){return new qj({...this.#l})}connection(){return new qh({...this.#l})}withPlugin(a){return new qf({...this.#l,executor:this.#l.executor.withPlugin(a)})}withoutPlugins(){return new qf({...this.#l,executor:this.#l.executor.withoutPlugins()})}withSchema(a){return new qf({...this.#l,executor:this.#l.executor.withPluginAtFront(new pH.B(a))})}withTables(){return new qf({...this.#l})}async destroy(){await this.#l.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#l.executor}executeQuery(a,b){void 0!==b&&(0,qe.u)("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let c=(0,n1.Gv)(a)&&(0,n1.Tn)(a.compile)?a.compile():a;return this.getExecutor().executeQuery(c)}async [Symbol.asyncDispose](){await this.destroy()}}class qg extends qf{#l;constructor(a){super(a),this.#l=a}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(a){return new qg({...this.#l,executor:this.#l.executor.withPlugin(a)})}withoutPlugins(){return new qg({...this.#l,executor:this.#l.executor.withoutPlugins()})}withSchema(a){return new qg({...this.#l,executor:this.#l.executor.withPluginAtFront(new pH.B(a))})}withTables(){return new qg({...this.#l})}}class qh{#l;constructor(a){this.#l=(0,n1.CN)(a)}async execute(a){return this.#l.executor.provideConnection(async b=>{let c=this.#l.executor.withConnectionProvider(new p4(b)),d=new qf({...this.#l,executor:c});return await a(d)})}}class qi{#l;constructor(a){this.#l=(0,n1.CN)(a)}setAccessMode(a){return new qi({...this.#l,accessMode:a})}setIsolationLevel(a){return new qi({...this.#l,isolationLevel:a})}async execute(a){let{isolationLevel:b,accessMode:c,...d}=this.#l,e={isolationLevel:b,accessMode:c};return p7(e),this.#l.executor.provideConnection(async b=>{let c=this.#l.executor.withConnectionProvider(new p4(b)),f=new qg({...d,executor:c}),g=!1;try{await this.#l.driver.beginTransaction(b,e),g=!0;let c=await a(f);return await this.#l.driver.commitTransaction(b),c}catch(a){throw g&&await this.#l.driver.rollbackTransaction(b),a}})}}class qj{#l;constructor(a){this.#l=(0,n1.CN)(a)}setAccessMode(a){return new qj({...this.#l,accessMode:a})}setIsolationLevel(a){return new qj({...this.#l,isolationLevel:a})}async execute(){let{isolationLevel:a,accessMode:b,...c}=this.#l,d={isolationLevel:a,accessMode:b};p7(d);let e=await (0,qd.G)(this.#l.executor);return await this.#l.driver.beginTransaction(e.connection,d),new qk({...c,connection:e,executor:this.#l.executor.withConnectionProvider(new p4(e.connection))})}}class qk extends qg{#l;#aX;#aY;constructor(a){let b={isCommitted:!1,isRolledBack:!1},{connection:c,...d}=a={...a,executor:new qn(a.executor,b)};super(d),this.#l=(0,n1.CN)(a),this.#aY=b;let e=(0,n2.a)();this.#aX=b=>a.executor.compileQuery(b,e)}get isCommitted(){return this.#aY.isCommitted}get isRolledBack(){return this.#aY.isRolledBack}commit(){return qm(this.#aY),new ql(async()=>{await this.#l.driver.commitTransaction(this.#l.connection.connection),this.#aY.isCommitted=!0,this.#l.connection.release()})}rollback(){return qm(this.#aY),new ql(async()=>{await this.#l.driver.rollbackTransaction(this.#l.connection.connection),this.#aY.isRolledBack=!0,this.#l.connection.release()})}savepoint(a){return qm(this.#aY),new ql(async()=>(await this.#l.driver.savepoint?.(this.#l.connection.connection,a,this.#aX),new qk({...this.#l})))}rollbackToSavepoint(a){return qm(this.#aY),new ql(async()=>(await this.#l.driver.rollbackToSavepoint?.(this.#l.connection.connection,a,this.#aX),new qk({...this.#l})))}releaseSavepoint(a){return qm(this.#aY),new ql(async()=>(await this.#l.driver.releaseSavepoint?.(this.#l.connection.connection,a,this.#aX),new qk({...this.#l})))}withPlugin(a){return new qk({...this.#l,executor:this.#l.executor.withPlugin(a)})}withoutPlugins(){return new qk({...this.#l,executor:this.#l.executor.withoutPlugins()})}withSchema(a){return new qk({...this.#l,executor:this.#l.executor.withPluginAtFront(new pH.B(a))})}withTables(){return new qk({...this.#l})}}class ql{#aZ;constructor(a){this.#aZ=a}async execute(){return await this.#aZ()}}function qm(a){if(a.isCommitted)throw Error("Transaction is already committed");if(a.isRolledBack)throw Error("Transaction is already rolled back")}class qn{#aF;#aY;constructor(a,b){a instanceof qn?this.#aF=a.#aF:this.#aF=a,this.#aY=b}get adapter(){return this.#aF.adapter}get plugins(){return this.#aF.plugins}transformQuery(a,b){return this.#aF.transformQuery(a,b)}compileQuery(a,b){return this.#aF.compileQuery(a,b)}provideConnection(a){return this.#aF.provideConnection(a)}executeQuery(a){return qm(this.#aY),this.#aF.executeQuery(a)}stream(a,b){return qm(this.#aY),this.#aF.stream(a,b)}withConnectionProvider(a){return new qn(this.#aF.withConnectionProvider(a),this.#aY)}withPlugin(a){return new qn(this.#aF.withPlugin(a),this.#aY)}withPlugins(a){return new qn(this.#aF.withPlugins(a),this.#aY)}withPluginAtFront(a){return new qn(this.#aF.withPluginAtFront(a),this.#aY)}withoutPlugins(){return new qn(this.#aF.withoutPlugins(),this.#aY)}}let qo=[],qp=-1,qq=({adapter:a,config:b})=>c=>{let d=Math.random().toString(36).substring(2,15),e={...b,supportsBooleans:b.supportsBooleans??!0,supportsDates:b.supportsDates??!0,supportsJSON:b.supportsJSON??!1,adapterName:b.adapterName??b.adapterId,supportsNumericIds:b.supportsNumericIds??!0,transaction:b.transaction??!1,disableTransformInput:b.disableTransformInput??!1,disableTransformOutput:b.disableTransformOutput??!1};if(c.advanced?.database?.useNumberId===!0&&!1===e.supportsNumericIds)throw Error(`[${e.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let f=nX(c),g=({field:a,model:b})=>{if("id"===a||"_id"===a)return"id";let c=h(b),d=f[c]?.fields[a];if(!d){let b=Object.entries(f[c].fields).find(([b,c])=>c.fieldName===a);b&&(d=b[1],a=b[0])}if(!d)throw k(`Field ${a} not found in model ${c}`),k("Schema:",f),Error(`Field ${a} not found in model ${c}`);return a},h=a=>{if(e.usePlural&&"s"===a.charAt(a.length-1)){let b=a.slice(0,-1),c=f[b]?b:void 0;if(c||(c=Object.entries(f).find(([a,c])=>c.modelName===b)?.[0]),c)return c}let b=f[a]?a:void 0;if(b||(b=Object.entries(f).find(([b,c])=>c.modelName===a)?.[0]),!b)throw k(`Model "${a}" not found in schema`),k("Schema:",f),Error(`Model "${a}" not found in schema`);return b},i=a=>{let b=h(a),c=e&&e.usePlural;return f&&f[b]&&f[b].modelName!==a?c?`${f[b].modelName}s`:f[b].modelName:c?`${a}s`:a};function j({model:a,field:b}){let c=h(a),d=g({model:c,field:b});return f[c]?.fields[d]?.fieldName||d}let k=(...a)=>{if(!0===e.debugLogs||"object"==typeof e.debugLogs){if("object"==typeof e.debugLogs&&"isRunningAdapterTests"in e.debugLogs){e.debugLogs.isRunningAdapterTests&&(a.shift(),qo.push({instance:d,args:a}));return}if("object"!=typeof e.debugLogs||!e.debugLogs.logCondition||e.debugLogs.logCondition?.())if("object"==typeof a[0]&&"method"in a[0]){let b=a.shift().method;if("object"==typeof e.debugLogs){if("create"===b&&!e.debugLogs.create)return;else if("update"===b&&!e.debugLogs.update)return;else if("updateMany"===b&&!e.debugLogs.updateMany)return;else if("findOne"===b&&!e.debugLogs.findOne)return;else if("findMany"===b&&!e.debugLogs.findMany)return;else if("delete"===b&&!e.debugLogs.delete)return;else if("deleteMany"===b&&!e.debugLogs.deleteMany)return;else if("count"===b&&!e.debugLogs.count)return}gd.info(`[${e.adapterName}]`,...a)}else gd.info(`[${e.adapterName}]`,...a)}},l=({customModelName:a,forceAllowId:b})=>{let d=!e.disableIdGeneration&&!c.advanced?.database?.useNumberId&&!b,f=h(a??"id");return{type:c.advanced?.database?.useNumberId?"number":"string",required:!!d,...d?{defaultValue(){if(e.disableIdGeneration)return;let a=c.advanced?.database?.useNumberId,b=c.advanced?.database?.generateId;if(c.advanced?.generateId!==void 0&&(gd.warn("Your Better Auth config includes advanced.generateId which is deprecated. Please use advanced.database.generateId instead. This will be removed in future releases."),b=c.advanced?.generateId),!1!==b&&!a)return b?b({model:f}):e.customIdGenerator?e.customIdGenerator({model:f}):jm()}}:{}}},m=({model:a,field:b})=>{let c=h(a),d=g({field:b,model:c}),e=f[c].fields;return e.id=l({customModelName:c}),e[d]},n=async(a,b,d,g)=>{let h={},i=f[b].fields,j=e.mapKeysTransformInput??{};for(let k in e.disableIdGeneration||c.advanced?.database?.useNumberId||(i.id=l({customModelName:b,forceAllowId:g&&"id"in a})),i){let g=a[k],l=i[k],m=j[k]||i[k].fieldName||k;if(void 0===g&&(void 0===l.defaultValue&&!l.transform?.input&&!("update"===d&&l.onUpdate)||"update"===d&&!l.onUpdate))continue;let n=function(a,b,c){if("update"===c)return void 0===a&&void 0!==b.onUpdate?"function"==typeof b.onUpdate?b.onUpdate():b.onUpdate:a;return null==a&&void 0!==b.defaultValue?"function"==typeof b.defaultValue?b.defaultValue():b.defaultValue:a}(g,l,d);l.transform?.input&&(n=await l.transform.input(n)),l.references?.field==="id"&&c.advanced?.database?.useNumberId?n=Array.isArray(n)?n.map(a=>null!==a?Number(a):null):null!==n?Number(n):null:!1===e.supportsJSON&&"object"==typeof n&&"json"===l.type?n=JSON.stringify(n):!1===e.supportsDates&&n instanceof Date&&"date"===l.type?n=n.toISOString():!1===e.supportsBooleans&&"boolean"==typeof n&&(n=+!!n),e.customTransformInput&&(n=e.customTransformInput({data:n,action:d,field:m,fieldAttributes:l,model:b,schema:f,options:c})),void 0!==n&&(h[m]=n)}return h},o=async(a,b,d=[])=>{if(!a)return null;let g=e.mapKeysTransformOutput??{},h={},i=f[b].fields;for(let j in i[Object.entries(g).find(([a,b])=>"id"===b)?.[0]??"id"]={type:c.advanced?.database?.useNumberId?"number":"string"},i){if(d.length&&!d.includes(j))continue;let k=i[j];if(k){let i=k.fieldName||j,l=a[Object.entries(g).find(([a,b])=>b===i)?.[0]||i];k.transform?.output&&(l=await k.transform.output(l));let m=g[j]||j;"id"===i||k.references?.field==="id"?null!=l&&(l=String(l)):!1===e.supportsJSON&&"string"==typeof l&&"json"===k.type?l=ge(l):!1===e.supportsDates&&"string"==typeof l&&"date"===k.type?l=new Date(l):!1===e.supportsBooleans&&"number"==typeof l&&"boolean"===k.type&&(l=1===l),e.customTransformOutput&&(l=e.customTransformOutput({data:l,field:m,fieldAttributes:k,select:d,model:b,schema:f,options:c})),h[m]=l}}return h},p=({model:a,where:b})=>{if(!b)return;let d=e.mapKeysTransformInput??{};return b.map(b=>{let{field:e,value:f,operator:i="eq",connector:k="AND"}=b;if("in"===i&&!Array.isArray(f))throw Error("Value must be an array");let l=h(a),n=g({field:e,model:a}),o=d[n]||j({field:n,model:l}),p=m({field:n,model:l});return("id"===n||p.references?.field==="id")&&c.advanced?.database?.useNumberId?Array.isArray(f)?{operator:i,connector:k,field:o,value:f.map(Number)}:{operator:i,connector:k,field:o,value:Number(f)}:{operator:i,connector:k,field:o,value:f}})},q=a({options:c,schema:f,debugLog:k,getFieldName:j,getModelName:i,getDefaultModelName:h,getDefaultFieldName:g,getFieldAttributes:m,transformInput:n,transformOutput:o,transformWhereClause:p}),r=null,s={transaction:async a=>{if(!r)if(e.transaction)gd.debug(`[${e.adapterName}] - Using provided transaction implementation.`),r=e.transaction;else"object"==typeof e.debugLogs&&"isRunningAdapterTests"in e.debugLogs&&e.debugLogs.isRunningAdapterTests||gd.warn(`[${e.adapterName}] - Transactions are not supported. Executing operations sequentially.`),r=a=>a(s);return r(a)},create:async({data:a,model:b,select:c,forceAllowId:d=!1})=>{let f=++qp,g=i(b);if(b=h(b),"id"in a&&!d){gd.warn(`[${e.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let b=Error();console.log(b.stack?.split("\n").filter((a,b)=>1!==b).join("\n").replace("Error:","Create method with `id` being called at:")),a.id=void 0}k({method:"create"},`${qr(f)} ${qs(1,4)}`,`${qt("create")} ${qu("Unsafe Input")}:`,{model:g,data:a});let j=a;e.disableTransformInput||(j=await n(a,b,"create",d)),k({method:"create"},`${qr(f)} ${qs(2,4)}`,`${qt("create")} ${qu("Parsed Input")}:`,{model:g,data:j});let l=await q.create({data:j,model:g});k({method:"create"},`${qr(f)} ${qs(3,4)}`,`${qt("create")} ${qu("DB Result")}:`,{model:g,res:l});let m=l;return e.disableTransformOutput||(m=await o(l,b,c)),k({method:"create"},`${qr(f)} ${qs(4,4)}`,`${qt("create")} ${qu("Parsed Result")}:`,{model:g,data:m}),m},update:async({model:a,where:b,update:c})=>{let d=++qp,f=i(a=h(a)),g=p({model:a,where:b});k({method:"update"},`${qr(d)} ${qs(1,4)}`,`${qt("update")} ${qu("Unsafe Input")}:`,{model:f,data:c});let j=c;e.disableTransformInput||(j=await n(c,a,"update")),k({method:"update"},`${qr(d)} ${qs(2,4)}`,`${qt("update")} ${qu("Parsed Input")}:`,{model:f,data:j});let l=await q.update({model:f,where:g,update:j});k({method:"update"},`${qr(d)} ${qs(3,4)}`,`${qt("update")} ${qu("DB Result")}:`,{model:f,data:l});let m=l;return e.disableTransformOutput||(m=await o(l,a)),k({method:"update"},`${qr(d)} ${qs(4,4)}`,`${qt("update")} ${qu("Parsed Result")}:`,{model:f,data:m}),m},updateMany:async({model:a,where:b,update:c})=>{let d=++qp,f=i(a),g=p({model:a,where:b});a=h(a),k({method:"updateMany"},`${qr(d)} ${qs(1,4)}`,`${qt("updateMany")} ${qu("Unsafe Input")}:`,{model:f,data:c});let j=c;e.disableTransformInput||(j=await n(c,a,"update")),k({method:"updateMany"},`${qr(d)} ${qs(2,4)}`,`${qt("updateMany")} ${qu("Parsed Input")}:`,{model:f,data:j});let l=await q.updateMany({model:f,where:g,update:j});return k({method:"updateMany"},`${qr(d)} ${qs(3,4)}`,`${qt("updateMany")} ${qu("DB Result")}:`,{model:f,data:l}),k({method:"updateMany"},`${qr(d)} ${qs(4,4)}`,`${qt("updateMany")} ${qu("Parsed Result")}:`,{model:f,data:l}),l},findOne:async({model:a,where:b,select:c})=>{let d=++qp,f=i(a),g=p({model:a,where:b});a=h(a),k({method:"findOne"},`${qr(d)} ${qs(1,3)}`,`${qt("findOne")}:`,{model:f,where:g,select:c});let j=await q.findOne({model:f,where:g,select:c});k({method:"findOne"},`${qr(d)} ${qs(2,3)}`,`${qt("findOne")} ${qu("DB Result")}:`,{model:f,data:j});let l=j;return e.disableTransformOutput||(l=await o(j,a,c)),k({method:"findOne"},`${qr(d)} ${qs(3,3)}`,`${qt("findOne")} ${qu("Parsed Result")}:`,{model:f,data:l}),l},findMany:async({model:a,where:b,limit:d,sortBy:f,offset:g})=>{let j=++qp,l=d??c.advanced?.database?.defaultFindManyLimit??100,m=i(a),n=p({model:a,where:b});a=h(a),k({method:"findMany"},`${qr(j)} ${qs(1,3)}`,`${qt("findMany")}:`,{model:m,where:n,limit:l,sortBy:f,offset:g});let r=await q.findMany({model:m,where:n,limit:l,sortBy:f,offset:g});k({method:"findMany"},`${qr(j)} ${qs(2,3)}`,`${qt("findMany")} ${qu("DB Result")}:`,{model:m,data:r});let s=r;return e.disableTransformOutput||(s=await Promise.all(r.map(async b=>await o(b,a)))),k({method:"findMany"},`${qr(j)} ${qs(3,3)}`,`${qt("findMany")} ${qu("Parsed Result")}:`,{model:m,data:s}),s},delete:async({model:a,where:b})=>{let c=++qp,d=i(a),e=p({model:a,where:b});a=h(a),k({method:"delete"},`${qr(c)} ${qs(1,2)}`,`${qt("delete")}:`,{model:d,where:e}),await q.delete({model:d,where:e}),k({method:"delete"},`${qr(c)} ${qs(2,2)}`,`${qt("delete")} ${qu("DB Result")}:`,{model:d})},deleteMany:async({model:a,where:b})=>{let c=++qp,d=i(a),e=p({model:a,where:b});a=h(a),k({method:"deleteMany"},`${qr(c)} ${qs(1,2)}`,`${qt("deleteMany")} ${qu("DeleteMany")}:`,{model:d,where:e});let f=await q.deleteMany({model:d,where:e});return k({method:"deleteMany"},`${qr(c)} ${qs(2,2)}`,`${qt("deleteMany")} ${qu("DB Result")}:`,{model:d,data:f}),f},count:async({model:a,where:b})=>{let c=++qp,d=i(a),e=p({model:a,where:b});a=h(a),k({method:"count"},`${qr(c)} ${qs(1,2)}`,`${qt("count")}:`,{model:d,where:e});let f=await q.count({model:d,where:e});return k({method:"count"},`${qr(c)} ${qs(2,2)}`,`${qt("count")}:`,{model:d,data:f}),f},createSchema:q.createSchema?async(a,b)=>{let d=nX(c);return c.secondaryStorage&&!c.session?.storeSessionInDatabase&&delete d.session,c.rateLimit&&"database"===c.rateLimit.storage&&(void 0===c.rateLimit.enabled||!0===c.rateLimit.enabled)&&(d.ratelimit={modelName:c.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:c.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:c.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:c.rateLimit.fields?.lastRequest??"lastRequest"}}}),q.createSchema({file:b,tables:d})}:void 0,options:{adapterConfig:e,...q.options??{}},id:e.adapterId,...e.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){qo=qo.filter(a=>a.instance!==d)},printDebugLogs(){let a=`\u2500`.repeat(80),b=qo.filter(a=>a.instance===d);0!==b.length&&console.log(...b.reverse().map(a=>(a.args[0]=`
${a.args[0]}`,[...a.args,"\n"])).reduce((a,b)=>[...b,...a],[`
${a}`]))}}}:{}};return s};function qr(a){return`${f8.fg.magenta}#${a}${f8.reset}`}function qs(a,b){return`${f8.bg.black}${f8.fg.yellow}[${a}/${b}]${f8.reset}`}function qt(a){return`${f8.bright}${a}${f8.reset}`}function qu(a){return`${f8.dim}(${a})${f8.reset}`}function qv(a){if(!a)return null;if("dialect"in a)return qv(a.dialect);if("createDriver"in a){if(a instanceof oe)return"sqlite";if(a instanceof oo)return"mysql";if(a instanceof ox)return"postgres";if(a instanceof oK)return"mssql"}return"aggregate"in a?"sqlite":"getConnection"in a?"mysql":"connect"in a?"postgres":"fileControl"in a||"open"in a&&"close"in a&&"prepare"in a?"sqlite":null}let qw=async a=>{let b,d=a.database;if(!d)return{kysely:null,databaseType:null,transaction:void 0};if("db"in d)return{kysely:d.db,databaseType:d.type,transaction:d.transaction};if("dialect"in d)return{kysely:new qf({dialect:d.dialect}),databaseType:d.type,transaction:d.transaction};let e=qv(d);if("createDriver"in d&&(b=d),"aggregate"in d&&!("createSession"in d)&&(b=new oe({database:d})),"getConnection"in d&&(b=new oo(d)),"connect"in d&&(b=new ox({pool:d})),"fileControl"in d){let{BunSqliteDialect:a}=await c.e(645).then(c.bind(c,94645));b=new a({database:d})}if("createSession"in d&&"undefined"==typeof window){let a;try{({DatabaseSync:a}=await import("node:sqlite"))}catch(a){if(null!==a&&"object"==typeof a&&"code"in a&&"ERR_UNKNOWN_BUILTIN_MODULE"!==a.code)throw a}if(a&&d instanceof a){let{NodeSqliteDialect:a}=await c.e(720).then(c.bind(c,83720));b=new a({database:d})}}return{kysely:b?new qf({dialect:b}):null,databaseType:e,transaction:void 0}},qx=(a,b)=>{let c=b.logger,d=b.options,e=d.secondaryStorage,f=d.session?.expiresIn||604800,{createWithHooks:g,updateWithHooks:h,updateManyWithHooks:i}=function(a,b){let c=b.hooks;return{createWithHooks:async function(b,d,e,f,g){let h=b;for(let a of c||[]){let b=a[d]?.create?.before;if(b){let a=await b(h,f);if(!1===a)return null;"object"==typeof a&&"data"in a&&(h={...h,...a.data})}}let i=e?await e.fn(h):null,j=!e||e.executeMainFn?await (g||a).create({model:d,data:h,forceAllowId:!0}):i;for(let a of c||[]){let b=a[d]?.create?.after;b&&await b(j,f)}return j},updateWithHooks:async function(b,d,e,f,g,h){let i=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;i="object"==typeof a?a.data:a}}let j=f?await f.fn(i):null,k=!f||f.executeMainFn?await (h||a).update({model:e,update:i,where:d}):j;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(k,g)}return k},updateManyWithHooks:async function(b,d,e,f,g,h){let i=b;for(let a of c||[]){let c=a[e]?.update?.before;if(c){let a=await c(b,g);if(!1===a)return null;i="object"==typeof a?a.data:a}}let j=f?await f.fn(i):null,k=!f||f.executeMainFn?await (h||a).updateMany({model:e,update:i,where:d}):j;for(let a of c||[]){let b=a[e]?.update?.after;b&&await b(k,g)}return k}}}(a,b);async function j(a){if(!e)return;let b=await e.get(`active-sessions-${a.id}`);if(!b)return;let c=Date.now(),d=(ge(b)||[]).filter(a=>a.expiresAt>c);await Promise.all(d.map(async({token:b})=>{let d=await e.get(b);if(!d)return;let f=ge(d);if(!f)return;let g=Math.max(Math.floor(new Date(f.session.expiresAt).getTime()-c)/1e3,0);await e.set(b,JSON.stringify({session:f.session,user:a}),Math.floor(g))}))}return{createOAuthUser:async(b,c,d)=>a.transaction(async a=>{let e=await g({createdAt:new Date,updatedAt:new Date,...b},"user",void 0,d,a),f=await g({...c,userId:e.id,createdAt:new Date,updatedAt:new Date},"account",void 0,d,a);return{user:e,account:f}}),createUser:async(a,b,c)=>await g({createdAt:new Date,updatedAt:new Date,...a,email:a.email?.toLowerCase()},"user",void 0,b,c),createAccount:async(a,b,c)=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0,b,c),listSessions:async(c,d)=>{if(e){let a=await e.get(`active-sessions-${c}`);if(!a)return[];let d=ge(a)||[],f=Date.now(),g=d.filter(a=>a.expiresAt>f),h=[];for(let a of g){let c=await e.get(a.token);if(c){let a=ge(c);if(!a)return[];let d=nS(b.options,{...a.session,expiresAt:new Date(a.session.expiresAt)});h.push(d)}}return h}return await (d||a).findMany({model:"session",where:[{field:"userId",value:c}]})},listUsers:async(b,c,d,e,f)=>await (f||a).findMany({model:"user",limit:b,offset:c,sortBy:d,where:e}),countTotalUsers:async(b,c)=>{let d=await (c||a).count({model:"user",where:b});return"string"==typeof d?parseInt(d):d},deleteUser:async(b,c)=>{e&&await e.delete(`active-sessions-${b}`),(!e||d.session?.storeSessionInDatabase)&&await (c||a).deleteMany({model:"session",where:[{field:"userId",value:b}]}),await (c||a).deleteMany({model:"account",where:[{field:"userId",value:b}]}),await (c||a).delete({model:"user",where:[{field:"id",value:b}]})},createSession:async(b,c,h,i,j,k)=>{let l=c.headers||c.request?.headers,{id:m,...n}=i||{},o={ipAddress:(c.request||c.headers)&&nT(c.request||c.headers,c.context.options)||"",userAgent:l?.get("user-agent")||"",...n,expiresAt:h?fO(86400,"sec"):fO(f,"sec"),userId:b,token:jm(32),createdAt:new Date,updatedAt:new Date,...j?n:{}};return await g(o,"session",e?{fn:async c=>{let d=await e.get(`active-sessions-${b}`),f=[],g=Date.now();d&&(f=(f=ge(d)||[]).filter(a=>a.expiresAt>g));let h=f.sort((a,b)=>a.expiresAt-b.expiresAt),i=h.at(-1)?.expiresAt;h.push({token:o.token,expiresAt:o.expiresAt.getTime()}),(!i||i<o.expiresAt.getTime())&&(i=o.expiresAt.getTime());let j=Math.max(Math.floor((i-g)/1e3),0);j>0&&await e.set(`active-sessions-${b}`,JSON.stringify(h),j);let k=await a.findOne({model:"user",where:[{field:"id",value:b}]}),l=Math.max(Math.floor((o.expiresAt.getTime()-g)/1e3),0);return l>0&&await e.set(o.token,JSON.stringify({session:c,user:k}),l),c},executeMainFn:d.session?.storeSessionInDatabase}:void 0,c,k)},findSession:async(c,f)=>{if(e){let a=await e.get(c);if(!a&&!d.session?.storeSessionInDatabase)return null;if(a){let c=ge(a);return c?{session:nS(b.options,{...c.session,expiresAt:new Date(c.session.expiresAt),createdAt:new Date(c.session.createdAt),updatedAt:new Date(c.session.updatedAt)}),user:nR(b.options,{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)})}:null}}let g=await (f||a).findOne({model:"session",where:[{value:c,field:"token"}]});if(!g)return null;let h=await (f||a).findOne({model:"user",where:[{value:g.userId,field:"id"}]});return h?{session:nS(b.options,g),user:nR(b.options,h)}:null},findSessions:async(b,c)=>{if(e){let a=[];for(let c of b){let b=await e.get(c);if(b){let c=ge(b);if(!c)return[];let d={session:{...c.session,expiresAt:new Date(c.session.expiresAt)},user:{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)}};a.push(d)}}return a}let d=await (c||a).findMany({model:"session",where:[{field:"token",value:b,operator:"in"}]}),f=d.map(a=>a.userId);if(!f.length)return[];let g=await (c||a).findMany({model:"user",where:[{field:"id",value:f,operator:"in"}]});return d.map(a=>{let b=g.find(b=>b.id===a.userId);return b?{session:a,user:b}:null})},updateSession:async(a,b,c,f)=>await h(b,[{field:"token",value:a}],"session",e?{async fn(b){let c=await e.get(a);if(!c)return null;{let a=ge(c);return a?{...a.session,...b}:null}},executeMainFn:d.session?.storeSessionInDatabase}:void 0,c,f),deleteSession:async(f,g)=>{if(e){let a=await e.get(f);if(a){let{session:b}=ge(a)??{};if(!b)return void c.error("Session not found in secondary storage");let d=b.userId,g=await e.get(`active-sessions-${d}`);if(g){let a=ge(g)||[],b=Date.now(),c=a.filter(a=>a.expiresAt>b&&a.token!==f),h=c.sort((a,b)=>a.expiresAt-b.expiresAt),i=h.at(-1)?.expiresAt;c.length>0&&i&&i>Date.now()?await e.set(`active-sessions-${d}`,JSON.stringify(c),Math.floor((i-b)/1e3)):await e.delete(`active-sessions-${d}`)}else c.error("Active sessions list not found in secondary storage")}if(await e.delete(f),!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await (g||a).delete({model:"session",where:[{field:"token",value:f}]})},deleteAccounts:async(b,c)=>{await (c||a).deleteMany({model:"account",where:[{field:"userId",value:b}]})},deleteAccount:async(b,c)=>{await (c||a).delete({model:"account",where:[{field:"id",value:b}]})},deleteSessions:async(c,f)=>{if(e){if("string"==typeof c){let a=await e.get(`active-sessions-${c}`),b=a?ge(a):[];if(!b)return;for(let a of b)await e.delete(a.token)}else for(let a of c)await e.get(a)&&await e.delete(a);if(!d.session?.storeSessionInDatabase||b.options.session?.preserveSessionInDatabase)return}await (f||a).deleteMany({model:"session",where:[{field:Array.isArray(c)?"token":"userId",value:c,operator:Array.isArray(c)?"in":void 0}]})},findOAuthUser:async(b,c,d,e)=>{let f=await (e||a).findMany({model:"account",where:[{value:c,field:"accountId"}]}).then(a=>a.find(a=>a.providerId===d));if(f){let c=await (e||a).findOne({model:"user",where:[{value:f.userId,field:"id"}]});if(c)return{user:c,accounts:[f]};{let c=await (e||a).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});return c?{user:c,accounts:[f]}:null}}{let c=await (e||a).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});if(!c)return null;{let b=await (e||a).findMany({model:"account",where:[{value:c.id,field:"userId"}]});return{user:c,accounts:b||[]}}}},findUserByEmail:async(b,c,d)=>{let e=await (d||a).findOne({model:"user",where:[{value:b.toLowerCase(),field:"email"}]});if(!e)return null;if(c?.includeAccounts){let b=await (d||a).findMany({model:"account",where:[{value:e.id,field:"userId"}]});return{user:e,accounts:b}}return{user:e,accounts:[]}},findUserById:async(b,c)=>await (c||a).findOne({model:"user",where:[{field:"id",value:b}]}),linkAccount:async(a,b,c)=>await g({createdAt:new Date,updatedAt:new Date,...a},"account",void 0,b,c),updateUser:async(a,b,c,d)=>{let e=await h(b,[{field:"id",value:a}],"user",void 0,c,d);return await j(e),await j(e),e},updateUserByEmail:async(a,b,c,d)=>{let e=await h(b,[{field:"email",value:a.toLowerCase()}],"user",void 0,c,d);return await j(e),await j(e),e},updatePassword:async(a,b,c,d)=>{await i({password:b},[{field:"userId",value:a},{field:"providerId",value:"credential"}],"account",void 0,c,d)},findAccounts:async(b,c)=>await (c||a).findMany({model:"account",where:[{field:"userId",value:b}]}),findAccount:async(b,c)=>await (c||a).findOne({model:"account",where:[{field:"accountId",value:b}]}),findAccountByProviderId:async(b,c,d)=>await (d||a).findOne({model:"account",where:[{field:"accountId",value:b},{field:"providerId",value:c}]}),findAccountByUserId:async(b,c)=>await (c||a).findMany({model:"account",where:[{field:"userId",value:b}]}),updateAccount:async(a,b,c,d)=>await h(b,[{field:"id",value:a}],"account",void 0,c,d),createVerificationValue:async(a,b,c)=>await g({createdAt:new Date,updatedAt:new Date,...a},"verification",void 0,b,c),findVerificationValue:async(b,c)=>{let e=await (c||a).findMany({model:"verification",where:[{field:"identifier",value:b}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return d.verification?.disableCleanup||await (c||a).deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]}),e[0]},deleteVerificationValue:async(b,c)=>{await (c||a).delete({model:"verification",where:[{field:"id",value:b}]})},deleteVerificationByIdentifier:async(b,c)=>{await (c||a).delete({model:"verification",where:[{field:"identifier",value:b}]})},updateVerificationValue:async(a,b,c,d)=>await h(b,[{field:"id",value:a}],"verification",void 0,c,d)}};async function qy(a){if(!a.database){var b;let c,d,e=Object.keys(nX(a)).reduce((a,b)=>(a[b]=[],a),{});return gd.warn("No database configuration provided. Using memory adapter in development"),(c=null,d=qq({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:b?.debugLogs||!1,customTransformInput:a=>a.options.advanced?.database?.useNumberId&&"id"===a.field&&"create"===a.action?e[a.model].length+1:a.data,transaction:async a=>{let b=structuredClone(e);try{return await a(d(c))}catch(a){throw Object.keys(e).forEach(a=>{e[a]=b[a]}),a}}},adapter:({getFieldName:a,options:b,debugLog:c})=>{function d(a,b){let c=e[b];if(!c)throw gd.error(`[MemoryAdapter] Model ${b} not found in the DB`,Object.keys(e)),Error(`Model ${b} not found`);let d=(a,b)=>{let{field:c,value:d,operator:e}=b;switch(e){case"in":if(!Array.isArray(d))throw Error("Value must be an array");return d.includes(a[c]);case"not_in":if(!Array.isArray(d))throw Error("Value must be an array");return!d.includes(a[c]);case"contains":return a[c].includes(d);case"starts_with":return a[c].startsWith(d);case"ends_with":return a[c].endsWith(d);case"ne":return a[c]!==d;case"gt":return null!=d&&a[c]>d;case"gte":return null!=d&&a[c]>=d;case"lt":return null!=d&&a[c]<d;case"lte":return null!=d&&a[c]<=d;default:return a[c]===d}};return c.filter(b=>{if(!a.length||0===a.length)return!0;let c=d(b,a[0]);for(let e of a){let a=d(b,e);c="OR"===e.connector?c||a:c&&a}return c})}return{create:async({model:a,data:c})=>(b.advanced?.database?.useNumberId&&(c.id=e[a].length+1),e[a]||(e[a]=[]),e[a].push(c),c),findOne:async({model:a,where:b})=>d(b,a)[0]||null,findMany:async({model:b,where:c,sortBy:f,limit:g,offset:h})=>{let i=e[b];return c&&(i=d(c,b)),f&&(i=i.sort((c,d)=>{let e=a({model:b,field:f.field}),g=c[e],h=d[e],i=0;return i=null==g&&null==h?0:null==g?-1:null==h?1:"string"==typeof g&&"string"==typeof h?g.localeCompare(h):g instanceof Date&&h instanceof Date?g.getTime()-h.getTime():"number"==typeof g&&"number"==typeof h?g-h:"boolean"==typeof g&&"boolean"==typeof h?g===h?0:g?1:-1:String(g).localeCompare(String(h)),"asc"===f.direction?i:-i})),void 0!==h&&(i=i.slice(h)),void 0!==g&&(i=i.slice(0,g)),i||[]},count:async({model:a,where:b})=>b?d(b,a).length:e[a].length,update:async({model:a,where:b,update:c})=>{let e=d(b,a);return e.forEach(a=>{Object.assign(a,c)}),e[0]||null},delete:async({model:a,where:b})=>{let c=e[a],f=d(b,a);e[a]=c.filter(a=>!f.includes(a))},deleteMany:async({model:a,where:b})=>{let c=e[a],f=d(b,a),g=0;return e[a]=c.filter(a=>f.includes(a)?(g++,!1):!f.includes(a)),g},updateMany({model:a,where:b,update:c}){let e=d(b,a);return e.forEach(a=>{Object.assign(a,c)}),e[0]||null}}}}),a=>(c=a,d(a)))(a)}if("function"==typeof a.database)return a.database(a);let{kysely:c,databaseType:d,transaction:e}=await qw(a);if(!c)throw new fP("Failed to initialize database adapter");return((a,b)=>{let c=null,d=a=>({getFieldName:c,schema:d,getDefaultModelName:e})=>{let f=async(d,e,f,g)=>{if(b?.type==="mysql"){await e.execute();let b=d.id?"id":g.length>0&&g[0]?.field?g[0].field:"id";if(!d.id&&0===g.length)return await a.selectFrom(f).selectAll().orderBy(c({model:f,field:b}),"desc").limit(1).executeTakeFirst();let h=d[b]||g[0]?.value;return await a.selectFrom(f).selectAll().orderBy(c({model:f,field:b}),"desc").where(c({model:f,field:b}),"=",h).limit(1).executeTakeFirst()}return b?.type==="mssql"?await e.outputAll("inserted").executeTakeFirst():await e.returningAll().executeTakeFirst()};function g(a){function c(a){for(let d in a){if(!Object.prototype.hasOwnProperty.call(a,d))continue;let e=a[d];e instanceof Date&&b?.type==="mysql"||"object"==typeof e&&null!==e&&c(e)}}if(Array.isArray(a))for(let b=0;b<a.length;b++){let d=a[b];"object"==typeof d&&null!==d&&c(d)}else"object"==typeof a&&null!==a&&c(a);return a}function h(a,e){if(!e)return{and:null,or:null};let f=[],g=[];return e.forEach(e=>{let{field:h,value:i,operator:j="=",connector:k="AND"}=e,l=c({model:a,field:h});i=function(a,c,e){if("id"===e)return a;let{type:f="sqlite"}=b||{},g=d[c]?.fields[e];return(g||(g=Object.values(d).find(a=>a.modelName===c)),"boolean"===g.type&&("sqlite"===f||"mssql"===f)&&null!=a)?+!!a:"date"===g.type&&a&&a instanceof Date&&"sqlite"===f?a.toISOString():a}(i,a,h);let m=a=>"in"===j.toLowerCase()?a(l,"in",Array.isArray(i)?i:[i]):"not_in"===j.toLowerCase()?a(l,"not in",Array.isArray(i)?i:[i]):"contains"===j?a(l,"like",`%${i}%`):"starts_with"===j?a(l,"like",`${i}%`):"ends_with"===j?a(l,"like",`%${i}`):a(l,"eq"===j?"=":"ne"===j?"<>":"gt"===j?">":"gte"===j?">=":"lt"===j?"<":"lte"===j?"<=":j,i);"OR"===k?g.push(m):f.push(m)}),{and:f.length?f:null,or:g.length?g:null}}return{async create({data:b,model:c}){let d=a.insertInto(c).values(b);return g(await f(b,d,c,[]))},async findOne({model:b,where:c,select:d}){let{and:e,or:f}=h(b,c),i=a.selectFrom(b).selectAll();e&&(i=i.where(a=>a.and(e.map(b=>b(a))))),f&&(i=i.where(a=>a.or(f.map(b=>b(a)))));let j=await i.executeTakeFirst();return j?g(j):null},async findMany({model:d,where:e,limit:f,offset:i,sortBy:j}){let{and:k,or:l}=h(d,e),m=a.selectFrom(d);k&&(m=m.where(a=>a.and(k.map(b=>b(a))))),l&&(m=m.where(a=>a.or(l.map(b=>b(a))))),b?.type==="mssql"?i||(m=m.top(f||100)):m=m.limit(f||100),j&&(m=m.orderBy(c({model:d,field:j.field}),j.direction)),i&&(b?.type==="mssql"?(j||(m=m.orderBy(c({model:d,field:"id"}))),m=m.offset(i).fetch(f||100)):m=m.offset(i));let n=await m.selectAll().execute();return n?g(n):[]},async update({model:b,where:c,update:d}){let{and:e,or:i}=h(b,c),j=a.updateTable(b).set(d);return e&&(j=j.where(a=>a.and(e.map(b=>b(a))))),i&&(j=j.where(a=>a.or(i.map(b=>b(a))))),g(await f(d,j,b,c))},async updateMany({model:b,where:c,update:d}){let{and:e,or:f}=h(b,c),g=a.updateTable(b).set(d);return e&&(g=g.where(a=>a.and(e.map(b=>b(a))))),f&&(g=g.where(a=>a.or(f.map(b=>b(a))))),(await g.execute()).length},async count({model:b,where:c}){let{and:d,or:e}=h(b,c),f=a.selectFrom(b).select(a.fn.count("id").as("count"));d&&(f=f.where(a=>a.and(d.map(b=>b(a))))),e&&(f=f.where(a=>a.or(e.map(b=>b(a)))));let g=await f.execute();return"number"==typeof g[0].count?g[0].count:"bigint"==typeof g[0].count?Number(g[0].count):parseInt(g[0].count)},async delete({model:b,where:c}){let{and:d,or:e}=h(b,c),f=a.deleteFrom(b);d&&(f=f.where(a=>a.and(d.map(b=>b(a))))),e&&(f=f.where(a=>a.or(e.map(b=>b(a))))),await f.execute()},async deleteMany({model:b,where:c}){let{and:d,or:e}=h(b,c),f=a.deleteFrom(b);return d&&(f=f.where(a=>a.and(d.map(b=>b(a))))),e&&(f=f.where(a=>a.or(e.map(b=>b(a))))),(await f.execute()).length},options:b}},e=null;e={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:b?.usePlural,debugLogs:b?.debugLogs,supportsBooleans:b?.type!=="sqlite"&&b?.type!=="mssql"&&b?.type!=="mysql"&&!!b?.type,supportsDates:b?.type!=="sqlite"&&b?.type!=="mssql"&&!!b?.type,supportsJSON:!1,transaction:!!b?.transaction&&(b=>a.transaction().execute(a=>b(qq({config:e.config,adapter:d(a)})(c))))},adapter:d(a)};let f=qq(e);return a=>(c=a,f(a))})(c,{type:d||"sqlite",debugLogs:"debugLogs"in a.database&&a.database.debugLogs,transaction:e})(a)}let qz={postgres:{string:["character varying","varchar","text"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};async function qA(a){let b=function(a){let b=nX(a),c={};for(let a in b){let d=b[a],e=d.fields,f={};if(Object.entries(e).forEach(([a,c])=>{if(f[c.fieldName||a]=c,c.references){let d=b[c.references.model];d&&(f[c.fieldName||a].references={...c.references,model:d.modelName,field:c.references.field})}}),c[d.modelName]){c[d.modelName].fields={...c[d.modelName].fields,...f};continue}c[d.modelName]={fields:f,order:d.order||1/0}}return c}(a),c=gc(a.logger),{kysely:d,databaseType:e}=await qw(a);e||(c.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),e="sqlite"),d||(c.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let f=await d.introspection.getTables(),g=[],h=[];for(let[a,d]of Object.entries(b)){let b=f.find(b=>b.name===a);if(!b){let b=g.findIndex(b=>b.table===a),c={table:a,fields:d.fields,order:d.order||1/0},e=g.findIndex(a=>(a.order||1/0)>c.order);-1===e?-1===b?g.push(c):g[b].fields={...g[b].fields,...d.fields}:g.splice(e,0,c);continue}let i={};for(let[f,g]of Object.entries(d.fields)){let d=b.columns.find(a=>a.name===f);if(!d){i[f]=g;continue}!function(a,b,c){if("string[]"===b||"number[]"===b)return a.toLowerCase().includes("json");let d=qz[c];return(Array.isArray(b)?d.string.map(a=>a.toLowerCase()):d[b].map(a=>a.toLowerCase())).includes(a.toLowerCase().split("(")[0].trim())}(d.dataType,g.type,e)&&c.warn(`Field ${f} in table ${a} has a different type in the database. Expected ${g.type} but got ${d.dataType}.`)}Object.keys(i).length>0&&h.push({table:a,fields:i,order:d.order||1/0})}let i=[];function j(b,c){let d=b.type,f={string:{sqlite:"text",postgres:"text",mysql:b.unique?"varchar(255)":b.references?"varchar(36)":"text",mssql:b.unique||b.sortable?"varchar(255)":b.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:b.bigint?"bigint":"integer",postgres:b.bigint?"bigint":"integer",mysql:b.bigint?"bigint":"integer",mssql:b.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:(0,oa.l)`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:a.advanced?.database?.useNumberId?"serial":"text",mysql:a.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:a.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:a.advanced?.database?.useNumberId?"integer":"text"},foreignKeyId:{postgres:a.advanced?.database?.useNumberId?"integer":"text",mysql:a.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:a.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:a.advanced?.database?.useNumberId?"integer":"text"}};return"id"===c||b.references?.field==="id"?"id"===c?f.id[e]:f.foreignKeyId[e]:"sqlite"===e&&("string[]"===d||"number[]"===d)?"text":"string[]"===d||"number[]"===d?"jsonb":Array.isArray(d)?"text":f[d][e||"sqlite"]}if(h.length)for(let a of h)for(let[b,c]of Object.entries(a.fields)){let f=j(c,b),g=d.schema.alterTable(a.table).addColumn(b,f,a=>(a=!1!==c.required?a.notNull():a,c.references&&(a=a.references(`${c.references.model}.${c.references.field}`).onDelete(c.references.onDelete||"cascade")),c.unique&&(a=a.unique()),"date"===c.type&&"function"==typeof c.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo((0,oa.l)`CURRENT_TIMESTAMP(3)`):a.defaultTo((0,oa.l)`CURRENT_TIMESTAMP`)),a));i.push(g)}if(g.length)for(let b of g){let c=d.schema.createTable(b.table).addColumn("id",a.advanced?.database?.useNumberId?"postgres"===e?"serial":"integer":"mysql"===e||"mssql"===e?"varchar(36)":"text",b=>a.advanced?.database?.useNumberId?"postgres"===e||"sqlite"===e?b.primaryKey().notNull():"mssql"===e?b.identity().primaryKey().notNull():b.autoIncrement().primaryKey().notNull():b.primaryKey().notNull());for(let[a,d]of Object.entries(b.fields)){let b=j(d,a);c=c.addColumn(a,b,a=>(a=!1!==d.required?a.notNull():a,d.references&&(a=a.references(`${d.references.model}.${d.references.field}`).onDelete(d.references.onDelete||"cascade")),d.unique&&(a=a.unique()),"date"===d.type&&"function"==typeof d.defaultValue&&("postgres"===e||"mysql"===e||"mssql"===e)&&(a="mysql"===e?a.defaultTo((0,oa.l)`CURRENT_TIMESTAMP(3)`):a.defaultTo((0,oa.l)`CURRENT_TIMESTAMP`)),a))}i.push(c)}return{toBeCreated:g,toBeAdded:h,runMigrations:async function(){for(let a of i)await a.execute()},compileMigrations:async function(){return i.map(a=>a.compile().sql).join(";\n\n")+";"}}}async function qB(a,b){let c=await b.context.internalAdapter.findAccounts(a),d=c?.find(a=>"credential"===a.providerId),e=d?.password;if(!d||!e||!b.body.password)throw new t("BAD_REQUEST",{message:"No password credential found"});if(!await b.context.password.verify({hash:e,password:b.body.password}))throw new t("BAD_REQUEST",{message:"Invalid password"});return!0}let qC="better-auth-secret-123456789";async function qD(){if(f)return f;try{let a="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!a)return;let b=a=>Function("mm","return import(mm)")(a),[{default:c},{default:d}]=await Promise.all([b("fs/promises"),b("path")]),e=await c.readFile(d.join(a,"package.json"),"utf-8");return f=JSON.parse(e)}catch{}}async function qE(a){if(f)return f.dependencies?.[a]||f.devDependencies?.[a]||f.peerDependencies?.[a];try{let b="undefined"!=typeof process&&"function"==typeof process.cwd?process.cwd():"";if(!b)throw Error("no-cwd");let c=a=>Function("mm","return import(mm)")(a),[{default:d},{default:e}]=await Promise.all([c("fs/promises"),c("path")]),f=e.join(b,"node_modules",a,"package.json"),g=await d.readFile(f,"utf-8");return JSON.parse(g).version||await qF(a)||void 0}catch{}return await qF(a)}async function qF(a){let b=await qD();if(b)return({...b.dependencies,...b.devDependencies,...b.peerDependencies})[a]}async function qG(){let a=await qD();return a?.name}let qH=null;async function qI(a){if(qH)return qH;let b=await qG();return qH=b?await iF(a?a+b:b):a?await iF(a):jm(32)}let qJ=a=>Function("mm","return import(mm)")(a);function qK(){let a=(...a)=>a.some(a=>!!fS[a]);return a("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent?"cloudflare":a("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":a("NETLIFY","NETLIFY_URL")?"netlify":a("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":a("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":a("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":a("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":a("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":a("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":a("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":a("DYNO","HEROKU_APP_NAME")?"heroku":a("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":a("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function qL(){try{if("cloudflare"===qK())return"cloudflare";let a=await qJ("os"),b=a.cpus();return{deploymentVendor:qK(),systemPlatform:a.platform(),systemRelease:a.release(),systemArchitecture:a.arch(),cpuCount:b.length,cpuModel:b.length?b[0].model:null,cpuSpeed:b.length?b[0].speed:null,memory:a.totalmem(),isWSL:await qP(),isDocker:await qO(),isTTY:"undefined"!=typeof process&&process.stdout?process.stdout.isTTY:null}}catch(a){return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}async function qM(){if("cloudflare"===qK())return!1;try{return(await qJ("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function qN(){if("cloudflare"===qK())return!1;try{return(await qJ("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function qO(){return"cloudflare"!==qK()&&(void 0===g&&(g=await qM()||await qN()),g)}async function qP(){try{if("cloudflare"===qK()||"undefined"==typeof process||process?.platform!=="linux")return!1;let a=await qJ("fs");if((await qJ("os")).release().toLowerCase().includes("microsoft")){if(await qR())return!1;return!0}return!!a.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!await qR()}catch{return!1}}let qQ=async()=>{if("cloudflare"===qK())return!1;try{return(await qJ("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function qR(){return void 0===h&&(h=await qQ()||await qO()),h}let qS={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function qT(){for(let[a,b]of Object.entries(qS)){let c=await qE(a);if(c)return{name:b,version:c}}}let qU={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function qV(){for(let[a,b]of Object.entries(qU)){let c=await qE(a);if(c)return{name:b,version:c}}}async function qW(a,b){let c,d=a.telemetry?.debug||fY("BETTER_AUTH_TELEMETRY_DEBUG",!1),e=fZ.BETTER_AUTH_TELEMETRY_ENDPOINT,f=async a=>{try{b?.customTrack?await b.customTrack(a):d?await Promise.resolve(gd.info("telemetry event",JSON.stringify(a,null,2))):await i6(e,{method:"POST",body:a})}catch{}},g=async()=>{let c=a.telemetry?.enabled!==void 0&&a.telemetry.enabled;return(fY("BETTER_AUTH_TELEMETRY",!1)||c)&&(b?.skipTestCheck||!fW())},h=await g();if(h){var i;c=await qI(a.baseURL),f({type:"init",payload:{config:{database:void 0,adapter:i?.adapter,emailVerification:{sendVerificationEmail:!!a.emailVerification?.sendVerificationEmail,sendOnSignUp:!!a.emailVerification?.sendOnSignUp,sendOnSignIn:!!a.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!a.emailVerification?.autoSignInAfterVerification,expiresIn:a.emailVerification?.expiresIn,onEmailVerification:!!a.emailVerification?.onEmailVerification,afterEmailVerification:!!a.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!a.emailAndPassword?.enabled,disableSignUp:!!a.emailAndPassword?.disableSignUp,requireEmailVerification:!!a.emailAndPassword?.requireEmailVerification,maxPasswordLength:a.emailAndPassword?.maxPasswordLength,minPasswordLength:a.emailAndPassword?.minPasswordLength,sendResetPassword:!!a.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:a.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!a.emailAndPassword?.onPasswordReset,password:{hash:!!a.emailAndPassword?.password?.hash,verify:!!a.emailAndPassword?.password?.verify},autoSignIn:!!a.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!a.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(a.socialProviders||{}).map(b=>{let c=a.socialProviders?.[b];return c?{id:b,mapProfileToUser:!!c.mapProfileToUser,disableDefaultScope:!!c.disableDefaultScope,disableIdTokenSignIn:!!c.disableIdTokenSignIn,disableImplicitSignUp:c.disableImplicitSignUp,disableSignUp:c.disableSignUp,getUserInfo:!!c.getUserInfo,overrideUserInfoOnSignIn:!!c.overrideUserInfoOnSignIn,prompt:c.prompt,verifyIdToken:!!c.verifyIdToken,scope:c.scope,refreshAccessToken:!!c.refreshAccessToken}:{}}),plugins:a.plugins?.map(a=>a.id.toString()),user:{modelName:a.user?.modelName,fields:a.user?.fields,additionalFields:a.user?.additionalFields,changeEmail:{enabled:a.user?.changeEmail?.enabled,sendChangeEmailVerification:!!a.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:a.verification?.modelName,disableCleanup:a.verification?.disableCleanup,fields:a.verification?.fields},session:{modelName:a.session?.modelName,additionalFields:a.session?.additionalFields,cookieCache:{enabled:a.session?.cookieCache?.enabled,maxAge:a.session?.cookieCache?.maxAge},disableSessionRefresh:a.session?.disableSessionRefresh,expiresIn:a.session?.expiresIn,fields:a.session?.fields,freshAge:a.session?.freshAge,preserveSessionInDatabase:a.session?.preserveSessionInDatabase,storeSessionInDatabase:a.session?.storeSessionInDatabase,updateAge:a.session?.updateAge},account:{modelName:a.account?.modelName,fields:a.account?.fields,encryptOAuthTokens:a.account?.encryptOAuthTokens,updateAccountOnSignIn:a.account?.updateAccountOnSignIn,accountLinking:{enabled:a.account?.accountLinking?.enabled,trustedProviders:a.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:a.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:a.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!a.hooks?.after,before:!!a.hooks?.before},secondaryStorage:!!a.secondaryStorage,advanced:{cookiePrefix:!!a.advanced?.cookiePrefix,cookies:!!a.advanced?.cookies,crossSubDomainCookies:{domain:!!a.advanced?.crossSubDomainCookies?.domain,enabled:a.advanced?.crossSubDomainCookies?.enabled,additionalCookies:a.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!a.advanced?.database?.useNumberId,generateId:a.advanced?.database?.generateId,defaultFindManyLimit:a.advanced?.database?.defaultFindManyLimit},useSecureCookies:a.advanced?.useSecureCookies,ipAddress:{disableIpTracking:a.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:a.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:a.advanced?.disableCSRFCheck,cookieAttributes:{expires:a.advanced?.defaultCookieAttributes?.expires,secure:a.advanced?.defaultCookieAttributes?.secure,sameSite:a.advanced?.defaultCookieAttributes?.sameSite,domain:!!a.advanced?.defaultCookieAttributes?.domain,path:a.advanced?.defaultCookieAttributes?.path,httpOnly:a.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:a.trustedOrigins?.length,rateLimit:{storage:a.rateLimit?.storage,modelName:a.rateLimit?.modelName,window:a.rateLimit?.window,customStorage:!!a.rateLimit?.customStorage,enabled:a.rateLimit?.enabled,max:a.rateLimit?.max},onAPIError:{errorURL:a.onAPIError?.errorURL,onError:!!a.onAPIError?.onError,throw:a.onAPIError?.throw},logger:{disabled:a.logger?.disabled,level:a.logger?.level,log:!!a.logger?.log},databaseHooks:{user:{create:{after:!!a.databaseHooks?.user?.create?.after,before:!!a.databaseHooks?.user?.create?.before},update:{after:!!a.databaseHooks?.user?.update?.after,before:!!a.databaseHooks?.user?.update?.before}},session:{create:{after:!!a.databaseHooks?.session?.create?.after,before:!!a.databaseHooks?.session?.create?.before},update:{after:!!a.databaseHooks?.session?.update?.after,before:!!a.databaseHooks?.session?.update?.before}},account:{create:{after:!!a.databaseHooks?.account?.create?.after,before:!!a.databaseHooks?.account?.create?.before},update:{after:!!a.databaseHooks?.account?.update?.after,before:!!a.databaseHooks?.account?.update?.before}},verification:{create:{after:!!a.databaseHooks?.verification?.create?.after,before:!!a.databaseHooks?.verification?.create?.before},update:{after:!!a.databaseHooks?.verification?.update?.after,before:!!a.databaseHooks?.verification?.update?.before}}}},runtime:"undefined"!=typeof Deno?{name:"deno",version:Deno?.version?.deno??null}:"undefined"!=typeof Bun?{name:"bun",version:Bun?.version??null}:"undefined"!=typeof process&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null},database:await qT(),framework:await qV(),environment:"production"===fX("NODE_ENV")?"production":"false"!==fS.CI&&("BUILD_ID"in fS||"BUILD_NUMBER"in fS||"CI"in fS||"CI_APP_ID"in fS||"CI_BUILD_ID"in fS||"CI_BUILD_NUMBER"in fS||"CI_NAME"in fS||"CONTINUOUS_INTEGRATION"in fS||"RUN_ID"in fS)?"ci":fW()?"test":"development",systemInfo:await qL(),packageManager:function(){let a=fS.npm_config_user_agent;if(!a)return;let b=a.split(" ")[0],c=b.lastIndexOf("/"),d=b.substring(0,c);return{name:"npminstall"===d?"cnpm":d,version:b.substring(c+1)}}()},anonymousId:c})}return{publish:async b=>{h&&(c||(c=await qI(a.baseURL)),await f({type:b.type,payload:b.payload,anonymousId:c}))}}}function qX(a){return!!a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof a.then}let qY=async a=>{var b;let c,d=await qy(a),e=a.plugins||[],f=(b=a,b.advanced?.crossSubDomainCookies?.enabled,[]),g=gc(a.logger),h=gg(a.baseURL,a.basePath),i=a.secret||fS.BETTER_AUTH_SECRET||fS.AUTH_SECRET||qC;i===qC&&fU&&g.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config."),function(a,b){let c=new Map;a.plugins?.forEach(a=>{if(a.endpoints){for(let[b,d]of Object.entries(a.endpoints))if(d&&"path"in d){let e=d.path,f=[];d.options&&"method"in d.options&&(Array.isArray(d.options.method)?f=d.options.method:"string"==typeof d.options.method&&(f=[d.options.method])),0===f.length&&(f=["*"]),c.has(e)||c.set(e,[]),c.get(e).push({pluginId:a.id,endpointKey:b,methods:f})}}});let d=[];for(let[a,b]of c.entries())if(b.length>1){let c=new Map,e=!1;for(let a of b)for(let d of a.methods)c.has(d)||c.set(d,[]),c.get(d).push(a.pluginId),c.get(d).length>1&&(e=!0),"*"===d&&b.length>1?e=!0:"*"!==d&&c.has("*")&&(e=!0);if(e){let e=[...new Set(b.map(a=>a.pluginId))],f=[];for(let[a,d]of c.entries())(d.length>1||"*"===a&&b.length>1||"*"!==a&&c.has("*"))&&f.push(a);d.push({path:a,plugins:e,conflictingMethods:f})}}if(d.length>0){let a=d.map(a=>`  - "${a.path}" [${a.conflictingMethods.join(", ")}] used by plugins: ${a.plugins.join(", ")}`).join("\n");b.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${a}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}(a={...a,secret:i,baseURL:h?new URL(h).origin:"",basePath:a.basePath||"/api/auth",plugins:e.concat(f)},g);let j=function(a){let b=gn(a),c=b("session_token",{maxAge:a.session?.expiresIn||gm("7d")/1e3}),d=b("session_data",{maxAge:a.session?.cookieCache?.maxAge||300}),e=b("dont_remember");return{sessionToken:{name:c.name,options:c.attributes},sessionData:{name:d.name,options:d.attributes},dontRememberToken:{name:e.name,options:e.attributes}}}(a),k=nX(a),l=Object.entries(a.socialProviders||{}).map(([a,b])=>{if(null==b||!1===b.enabled)return null;b.clientId||g.warn(`Social provider ${a} is missing clientId or clientSecret`);let c=nm[a](b);return c.disableImplicitSignUp=b.disableImplicitSignUp,c}).filter(a=>null!==a),{publish:m}=await qW(a,{adapter:d.id,database:"function"==typeof a.database?"adapter":qv(a.database)||"unknown"}),n={appName:a.appName||"Better Auth",socialProviders:l,options:a,tables:k,trustedOrigins:function(a){let b=gg(a.baseURL,a.basePath);if(!b)return[];let c=[new URL(b).origin];a.trustedOrigins&&Array.isArray(a.trustedOrigins)&&c.push(...a.trustedOrigins);let d=fS.BETTER_AUTH_TRUSTED_ORIGINS;if(d&&c.push(...d.split(",")),c.filter(a=>!a).length)throw new fP("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return c}(a),baseURL:h||"",sessionConfig:{updateAge:a.session?.updateAge!==void 0?a.session.updateAge:86400,expiresIn:a.session?.expiresIn||604800,freshAge:a.session?.freshAge===void 0?86400:a.session.freshAge},secret:i,rateLimit:{...a.rateLimit,enabled:a.rateLimit?.enabled??fU,window:a.rateLimit?.window||10,max:a.rateLimit?.max||100,storage:a.rateLimit?.storage||(a.secondaryStorage?"secondary-storage":"memory")},authCookies:j,logger:g,generateId:({model:b,size:c})=>"function"==typeof a.advanced?.generateId?a.advanced.generateId({model:b,size:c}):"function"==typeof a?.advanced?.database?.generateId?a.advanced.database.generateId({model:b,size:c}):jm(c),session:null,secondaryStorage:a.secondaryStorage,password:{hash:a.emailAndPassword?.password?.hash||iI,verify:a.emailAndPassword?.password?.verify||iJ,config:{minPasswordLength:a.emailAndPassword?.minPasswordLength||8,maxPasswordLength:a.emailAndPassword?.maxPasswordLength||128},checkPassword:qB},setNewSession(a){this.newSession=a},newSession:null,adapter:d,internalAdapter:qx(d,{options:a,logger:g,hooks:a.databaseHooks?[a.databaseHooks]:[]}),createAuthCookie:gn(a),async runMigrations(){if(!a.database||"updateMany"in a.database)throw new fP("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:b}=await qA(a);await b()},publishTelemetry:m},o=qZ(n);return qX(o)?{context:c}=await o:{context:c}=o,c};async function qZ(a){let b=a.options,c=b.plugins||[],d=a,e=[];for(let a of c)if(a.init){let c,f=a.init(d);if("object"==typeof(c=qX(f)?await f:f)){if(c.options){let{databaseHooks:a,...d}=c.options;a&&e.push(a),b=m_(b,d)}c.context&&(d={...d,...c.context})}}return e.push(b.databaseHooks),d.internalAdapter=qx(a.adapter,{options:b,logger:a.logger,hooks:e.filter(a=>void 0!==a),generateId:a.generateId}),d.options=b,{context:d}}var q$=c(96330);gs(async()=>({})),gs({use:[gy]},async a=>({session:a.context.session}));let q_=eR(),q0=fx(["pending","accepted","rejected","canceled"]).default("pending");fq({id:eR().default(jm),name:eR(),slug:eR(),logo:eR().nullish().optional(),metadata:fv(eR(),fj()).or(eR().transform(a=>JSON.parse(a))).optional(),createdAt:fm()}),fq({id:eR().default(jm),organizationId:eR(),userId:fM(),role:q_,createdAt:fm().default(()=>new Date)}),fq({id:eR().default(jm),organizationId:eR(),email:eR(),role:q_,status:q0,teamId:eR().nullish(),inviterId:eR(),expiresAt:fm()}),fq({id:eR().default(jm),name:eR().min(1),organizationId:eR(),createdAt:fm(),updatedAt:fm().optional()}),fq({id:eR().default(jm),teamId:eR(),userId:eR(),createdAt:fm().default(()=>new Date)}),fq({id:eR().default(jm),organizationId:eR(),role:eR(),permission:fv(eR(),fo(eR())),createdAt:fm().default(()=>new Date),updatedAt:fm().optional()});let q1=["admin","member","owner"];function q2(a){return{newRole:a=>{var b;return{authorize(a,c="AND"){let d=!1;for(let[e,f]of Object.entries(a)){let a=b[e];if(!a)return{success:!1,error:`You are not allowed to access resource: ${e}`};if(Array.isArray(f))d=f.every(b=>a.includes(b));else if("object"==typeof f)d="OR"===f.connector?f.actions.some(b=>a.includes(b)):f.actions.every(b=>a.includes(b));else throw new fP("Invalid access control request");if(d&&"OR"===c)return{success:d};if(!d&&"AND"===c)return{success:!1,error:`unauthorized to access resource "${e}"`}}return d?{success:d}:{success:!1,error:"Not authorized"}},statements:b=a}},statements:a}}fs([fx(q1),fo(fx(q1))]);let q3=q2({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]});q3.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"],ac:["create","read","update","delete"]}),q3.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),q3.newRole({organization:[],member:[],invitation:[],team:[],ac:["read"]});let q4=q2({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]});q4.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),q4.newRole({user:[],session:[]}),fA(fq({disableCookieCache:ff().meta({description:"Disable cookie cache and fetch session from database"}).or(eR().transform(a=>"true"===a)).optional(),disableRefresh:ff().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),fq({id:eR(),deviceCode:eR(),userCode:eR(),userId:eR().optional(),expiresAt:fm(),status:eR(),lastPolledAt:fm().optional(),pollingInterval:fb().optional(),clientId:eR().optional(),scope:eR().optional()});let q5=fL(a=>{try{gm(a)}catch(a){return!1}return!0},{message:"Invalid time string format. Use formats like '30m', '5s', '1h', etc."});fq({expiresIn:q5.default("30m").describe("Time in seconds until the device code expires. Use formats like '30m', '5s', '1h', etc."),interval:q5.default("5s").describe("Time in seconds between polling attempts. Use formats like '30m', '5s', '1h', etc."),deviceCodeLength:fb().int().positive().default(40).describe("Length of the device code to be generated. Default is 40 characters."),userCodeLength:fb().int().positive().default(8).describe("Length of the user code to be generated. Default is 8 characters."),generateDeviceCode:fL(a=>"function"==typeof a,{message:"generateDeviceCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a device code. If not provided, a default random string generator will be used."),generateUserCode:fL(a=>"function"==typeof a,{message:"generateUserCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a user code. If not provided, a default random string generator will be used."),validateClient:fL(a=>"function"==typeof a,{message:"validateClient must be a function that returns a boolean or a promise that resolves to a boolean."}).optional().describe("Function to validate the client ID. If not provided, no validation will be performed."),onDeviceAuthRequest:fL(a=>"function"==typeof a,{message:"onDeviceAuthRequest must be a function that returns void or a promise that resolves to void."}).optional().describe("Function to handle device authorization requests. If not provided, no additional actions will be taken."),schema:fL(()=>!0)});let q6=(a=>{let b=qY(a),{api:c}=nW(b,a),d=a.plugins?.reduce((a,b)=>b.$ERROR_CODES?{...a,...b.$ERROR_CODES}:a,{});return{handler:async c=>{let d=await b,e=d.options.basePath||"/api/auth";if(!d.options.baseURL){let a=gg(void 0,e,c);if(a)d.baseURL=a,d.options.baseURL=gh(d.baseURL)||void 0;else throw new fP("Could not get base URL from request. Please provide a valid base URL.")}d.trustedOrigins=[...a.trustedOrigins?Array.isArray(a.trustedOrigins)?a.trustedOrigins:await a.trustedOrigins(c):[],d.options.baseURL];let{handler:f}=((a,b)=>{let{api:c,middlewares:d}=nW(a,b),e=new URL(a.baseURL).pathname;return((a,b)=>{if(!b?.openapi?.disabled){let c={path:"/api/reference",...b?.openapi};a.openapi=J(c.path,{method:"GET"},async b=>new Response(((a,b)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(a)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${b?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(b.logo)}`:void 0} ,
	   	theme: ${b?.theme||"saturn"},
        metaData: {
			title: ${b?.title||"Open API Reference"},
			description: ${b?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`)(await bW(a),c.scalar),{headers:{"Content-Type":"text/html"}}))}let c=n(),d=n();for(let b of Object.values(a))if(!(!b.options||b.options?.metadata?.SERVER_ONLY))for(let a of Array.isArray(b.options?.method)?b.options.method:[b.options?.method])q(c,a,b.path,b);if(b?.routerMiddleware?.length)for(let{path:a,middleware:c}of b.routerMiddleware)q(d,"*",a,c);let e=async a=>{let e=new URL(a.url),f=b?.basePath?e.pathname.split(b.basePath).reduce((a,c,d)=>(0!==d&&(d>1?a.push(`${b.basePath}${c}`):a.push(c)),a),[]).join(""):e.pathname;if(!f?.length)return new Response(null,{status:404,statusText:"Not Found"});let g=function(a,b="",c,d){"/"===c[c.length-1]&&(c=c.slice(0,-1));let e=a.static[c];if(e&&e.methods){let a=e.methods[b]||e.methods[""];if(void 0!==a)return a[0]}let f=o(c),g=function a(b,c,d,e,f){if(f===e.length){if(c.methods){let a=c.methods[d]||c.methods[""];if(a)return a}if(c.param&&c.param.methods){let a=c.param.methods[d]||c.param.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];if(a){let b=a[0].paramsMap;if(b?.[b?.length-1]?.[2])return a}}return}let g=e[f];if(c.static){let h=c.static[g];if(h){let c=a(b,h,d,e,f+1);if(c)return c}}if(c.param){let g=a(b,c.param,d,e,f+1);if(g)return g}if(c.wildcard&&c.wildcard.methods)return c.wildcard.methods[d]||c.wildcard.methods[""]}(a,a.root,b,f,0)?.[0];if(void 0!==g)return{data:g.data,params:g.paramsMap?p(f,g.paramsMap):void 0}}(c,a.method,f);if(!g?.data)return new Response(null,{status:404,statusText:"Not Found"});let h={};e.searchParams.forEach((a,b)=>{b in h?Array.isArray(h[b])?h[b].push(a):h[b]=[h[b],a]:h[b]=a});let i=g.data,j={path:f,method:a.method,headers:a.headers,params:g.params?JSON.parse(JSON.stringify(g.params)):{},request:a,body:i.options.disableBody?void 0:await u(i.options.cloneRequest?a.clone():a),query:h,_flag:"router",asResponse:!0,context:b?.routerContext};try{let a=function(a,b="",c,d){"/"===c[c.length-1]&&(c=c.slice(0,-1));let e=o(c);return(function a(b,c,d,e,f,g=[]){let h=e[f];if(c.wildcard&&c.wildcard.methods){let a=c.wildcard.methods[d]||c.wildcard.methods[""];a&&g.push(...a)}if(c.param&&(a(b,c.param,d,e,f+1,g),f===e.length&&c.param.methods)){let a=c.param.methods[d]||c.param.methods[""];a&&g.push(...a)}let i=c.static?.[h];if(i&&a(b,i,d,e,f+1,g),f===e.length&&c.methods){let a=c.methods[d]||c.methods[""];a&&g.push(...a)}return g})(a,a.root,b,e,0).map(a=>({data:a.data,params:a.paramsMap?p(e,a.paramsMap):void 0}))}(d,"*",f);if(a?.length)for(let{data:b,params:c}of a){let a=await b({...j,params:c,asResponse:!1});if(a instanceof Response)return a}return await i(j)}catch(a){if(b?.onError)try{let c=await b.onError(a);if(c instanceof Response)return w(c)}catch(a){if(v(a))return w(a);throw a}if(b?.throwError)throw a;if(v(a))return w(a);return console.error("# SERVER_ERROR: ",a),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async a=>{let c=await b?.onRequest?.(a);if(c instanceof Response)return c;let d=c instanceof Request?c:a,f=await e(d),g=await b?.onResponse?.(f);return g instanceof Response?g:f},endpoints:a}})(c,{routerContext:a,openapi:{disabled:!0},basePath:e,routerMiddleware:[{path:"/**",middleware:m3},...d],async onRequest(b){let c=a.options.disabledPaths||[],d=new URL(b.url).pathname.replace(e,"");if(c.includes(d))return new Response("Not Found",{status:404});for(let c of a.options.plugins||[])if(c.onRequest){let d=await c.onRequest(b,a);if(d&&"response"in d)return d.response}return nV(b,a)},async onResponse(b){for(let c of a.options.plugins||[])if(c.onResponse){let d=await c.onResponse(b,a);if(d)return d.response}return b},onError(c){if(c instanceof t&&"FOUND"===c.status)return;if(b.onAPIError?.throw)throw c;if(b.onAPIError?.onError)return void b.onAPIError.onError(c,a);let d=b.logger?.level,e="error"===d||"warn"===d||"debug"===d?gd:void 0;if(b.logger?.disabled!==!0){if(c&&"object"==typeof c&&"message"in c&&"string"==typeof c.message&&(c.message.includes("no column")||c.message.includes("column")||c.message.includes("relation")||c.message.includes("table")||c.message.includes("does not exist")))return void a.logger?.error(c.message);c instanceof t?("INTERNAL_SERVER_ERROR"===c.status&&a.logger.error(c.status,c),e?.error(c.message)):a.logger?.error(c&&"object"==typeof c&&"name"in c?c.name:"",c)}}})})(d,a);return f(c)},api:c,options:a,$context:b,$Infer:{},$ERROR_CODES:{...d,...gu}}})({database:((a,b)=>{let c=null,d=a=>({getFieldName:c})=>{let d=(a,b)=>{if(a&&b)return a.reduce((a,d)=>({...a,[c({model:b,field:d})]:!0}),{})};function e(a){switch(a){case"starts_with":return"startsWith";case"ends_with":return"endsWith";case"ne":return"not";case"not_in":return"notIn";default:return a}}let f=(a,b)=>{if(!b||!b.length)return{};if(1===b.length){let d=b[0];if(!d)return;return{[c({model:a,field:d.field})]:"eq"!==d.operator&&d.operator?{[e(d.operator)]:d.value}:d.value}}let d=b.filter(a=>"AND"===a.connector||!a.connector),f=b.filter(a=>"OR"===a.connector),g=d.map(b=>({[c({model:a,field:b.field})]:"eq"!==b.operator&&b.operator?{[e(b.operator)]:b.value}:b.value})),h=f.map(b=>({[c({model:a,field:b.field})]:"eq"!==b.operator&&b.operator?{[e(b.operator)]:b.value}:b.value}));return{...g.length?{AND:g}:{},...h.length?{OR:h}:{}}};return{async create({model:b,data:c,select:e}){if(!a[b])throw new fP(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await a[b].create({data:c,select:d(e,b)})},async findOne({model:b,where:c,select:e}){let g=f(b,c);if(!a[b])throw new fP(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await a[b].findFirst({where:g,select:d(e,b)})},async findMany({model:b,where:d,limit:e,offset:g,sortBy:h}){let i=f(b,d);if(!a[b])throw new fP(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await a[b].findMany({where:i,take:e||100,skip:g||0,...h?.field?{orderBy:{[c({model:b,field:h.field})]:"desc"===h.direction?"desc":"asc"}}:{}})},async count({model:b,where:c}){let d=f(b,c);if(!a[b])throw new fP(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);return await a[b].count({where:d})},async update({model:b,where:c,update:d}){if(!a[b])throw new fP(`Model ${b} does not exist in the database. If you haven't generated the Prisma client, you need to run 'npx prisma generate'`);let e=f(b,c);return await a[b].update({where:e,data:d})},async updateMany({model:b,where:c,update:d}){let e=f(b,c),g=await a[b].updateMany({where:e,data:d});return g?g.count:0},async delete({model:b,where:c}){let d=f(b,c);try{await a[b].delete({where:d})}catch(a){}},async deleteMany({model:b,where:c}){let d=f(b,c),e=await a[b].deleteMany({where:d});return e?e.count:0},options:b}},e=null;e={config:{adapterId:"prisma",adapterName:"Prisma Adapter",usePlural:b.usePlural??!1,debugLogs:b.debugLogs??!1,transaction:!!b.transaction&&(b=>a.$transaction(a=>b(qq({config:e.config,adapter:d(a)})(c))))},adapter:d(a)};let f=qq(e);return a=>(c=a,f(a))})(new q$.PrismaClient,{provider:"mysql"}),advanced:{database:{generateId:!1,useNumberId:!0}},secret:process.env.BETTER_AUTH_SECRET,emailAndPassword:{enabled:!0},socialProviders:{discord:{clientId:process.env.DISCORD_CLIENT_ID,clientSecret:process.env.DISCORD_CLIENT_SECRET,permissions:18432}},plugins:[{id:"next-cookies",hooks:{after:[{matcher:a=>!0,handler:gs(async a=>{let b=a.context.responseHeaders;if((!("_flag"in a)||"router"!==a._flag)&&b instanceof Headers){let a,d=b?.get("set-cookie");if(!d)return;let e=function(a){let b=new Map;return a.split(", ").forEach(a=>{let[c,...d]=a.split(";").map(a=>a.trim()),[e,...f]=(c||"").split("="),g=f.join("=");if(!e||void 0===g)return;let h={value:g};d.forEach(a=>{let[b,...c]=a.split("="),d=c.join("="),e=b.trim().toLowerCase();switch(e){case"max-age":h["max-age"]=d?parseInt(d.trim(),10):void 0;break;case"expires":h.expires=d?new Date(d.trim()):void 0;break;case"domain":h.domain=d?d.trim():void 0;break;case"path":h.path=d?d.trim():void 0;break;case"secure":h.secure=!0;break;case"httponly":h.httponly=!0;break;case"samesite":h.samesite=d?d.trim().toLowerCase():void 0;break;default:h[e]=!d||d.trim()}}),b.set(e,h)}),b}(d),{cookies:f}=await Promise.resolve().then(c.bind(c,70495));try{a=await f()}catch(a){if(a instanceof Error&&a.message.startsWith("`cookies` was called outside a request scope."))return;throw a}e.forEach((b,c)=>{if(!c)return;let d={sameSite:b.samesite,secure:b.secure,maxAge:b["max-age"],httpOnly:b.httponly,domain:b.domain,path:b.path};try{a.set(c,decodeURIComponent(b.value),d)}catch(a){}});return}})}]}}]});var q7=c(70495),q8=c(22458),q9=c(40410);let ra=async(a,b,c)=>{let d=await q6.api.signUpEmail({body:{email:a,password:b,name:c,callbackURL:"/perfil"}});return(0,q8.redirect)("/perfil"),d},rb=async(a,b)=>{let c=await q6.api.signInEmail({body:{email:a,password:b,callbackURL:"/perfil"}});return(0,q8.redirect)("/perfil"),c},rc=async a=>{try{let{url:b}=await q6.api.signInSocial({body:{provider:a,callbackURL:"/perfil"}});b&&(0,q8.redirect)(b)}catch(a){throw a}},rd=async()=>await q6.api.signOut({headers:await (0,q7.b3)()});(0,q9.D)([ra,rb,rc,rd]),(0,k.A)(ra,"7f913036436356ffbc1146c83ef819704c9cb0397e",null),(0,k.A)(rb,"7f8802913bf15bda51a2953c5bb2ec122e0af7a7e1",null),(0,k.A)(rc,"7fce3f53e1f05586de0417cdacb01d33519151b45e",null),(0,k.A)(rd,"7f0cd864e08f4c42f9df66a5dfe8fbd53f46ad3616",null)},95818:()=>{},96330:a=>{"use strict";a.exports=require("@prisma/client")},96544:(a,b,c)=>{"use strict";c.d(b,{s:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"ValueListNode"===a.kind,create:a=>(0,d.CN)({kind:"ValueListNode",values:(0,d.CN)(a)})})},97357:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isPostpone",{enumerable:!0,get:function(){return d}});let c=Symbol.for("react.postpone");function d(a){return"object"==typeof a&&null!==a&&a.$$typeof===c}},97413:(a,b,c)=>{"use strict";c.d(b,{K:()=>e});var d=c(97990);let e=(0,d.CN)({is:a=>"OrNode"===a.kind,create:(a,b)=>(0,d.CN)({kind:"OrNode",left:a,right:b})})},97990:(a,b,c)=>{"use strict";function d(a){return void 0===a||void 0===a}function e(a){return"string"==typeof a}function f(a){return"number"==typeof a}function g(a){return"boolean"==typeof a}function h(a){return null===a}function i(a){return a instanceof Date}function j(a){return"bigint"==typeof a}function k(a){return"undefined"!=typeof Buffer&&Buffer.isBuffer(a)}function l(a){return"function"==typeof a}function m(a){return"object"==typeof a&&null!==a}function n(a){return Object.freeze(a)}function o(a){return p(a)?a:[a]}function p(a){return Array.isArray(a)}function q(a){return a}c.d(b,{$P:()=>i,CN:()=>n,Et:()=>f,Gv:()=>m,Kg:()=>e,Lm:()=>g,MH:()=>p,Pe:()=>k,Tn:()=>l,_j:()=>o,b0:()=>d,kZ:()=>h,lQ:()=>q,sI:()=>j}),Object.prototype.toString},98812:(a,b,c)=>{"use strict";c.d(b,{JB:()=>j,M$:()=>m,Xm:()=>l,uJ:()=>k});var d=c(97990),e=c(67798),f=c(79662),g=c(78614),h=c(46975),i=c(56552);function j(a){return(0,d.MH)(a)?a.map(a=>k(a)):[k(a)]}function k(a){return(0,d.Kg)(a)?l(a):(0,i.uc)(a)?a.toOperationNode():(0,g.v0)(a)}function l(a){let b=" as ";if(!a.includes(b))return m(a);{let[c,d]=a.split(b).map(n);return e.N.create(m(c),h.O.create(d))}}function m(a){if(!a.includes("."))return f.H.create(a);{let[b,c]=a.split(".").map(n);return f.H.createWithSchema(b,c)}}function n(a){return a.trim()}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[873,428,241,968,802],()=>b(b.s=83601));module.exports=c})();